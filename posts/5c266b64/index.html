<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Docker | xw的妙妙屋</title><meta name="author" content="xw"><meta name="copyright" content="xw"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言 在学习 Linux 操作系统和项目部署时，我们常遇到命令繁多、软件安装复杂、环境依赖冲突等问题。尤其在微服务时代，成百上千台服务器的部署运维更是挑战。Docker 技术的出现，通过容器化解决了环境隔离与快速部署的问题，让项目部署变得简单高效。 本文基于 Ubuntu 24.04 LTS 系统，整理 Docker 核心知识点，包括基础命令、数据卷、镜像构建、网络配置及项目部署，并补充实用扩展内">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker">
<meta property="og:url" content="https://www.xwybq.top/posts/5c266b64/index.html">
<meta property="og:site_name" content="xw的妙妙屋">
<meta property="og:description" content="前言 在学习 Linux 操作系统和项目部署时，我们常遇到命令繁多、软件安装复杂、环境依赖冲突等问题。尤其在微服务时代，成百上千台服务器的部署运维更是挑战。Docker 技术的出现，通过容器化解决了环境隔离与快速部署的问题，让项目部署变得简单高效。 本文基于 Ubuntu 24.04 LTS 系统，整理 Docker 核心知识点，包括基础命令、数据卷、镜像构建、网络配置及项目部署，并补充实用扩展内">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://a1.boltp.com/2025/09/20/68ce3fb79337e.png">
<meta property="article:published_time" content="2025-09-20T04:06:42.000Z">
<meta property="article:modified_time" content="2025-09-20T05:46:50.180Z">
<meta property="article:author" content="xw">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://a1.boltp.com/2025/09/20/68ce3fb79337e.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Docker",
  "url": "https://www.xwybq.top/posts/5c266b64/",
  "image": "https://a1.boltp.com/2025/09/20/68ce3fb79337e.png",
  "datePublished": "2025-09-20T04:06:42.000Z",
  "dateModified": "2025-09-20T05:46:50.180Z",
  "author": [
    {
      "@type": "Person",
      "name": "xw",
      "url": "https://www.xwybq.top"
    }
  ]
}</script><link rel="shortcut icon" href="/image/%E4%B8%89%E8%8A%B1%E7%8C%AB.png"><link rel="canonical" href="https://www.xwybq.top/posts/5c266b64/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/styles/main.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script><link rel="stylesheet" href="/css/daliyuer.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/twikoo_beauty.css"><link rel="stylesheet" href="/css/beauty.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/custom_code.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="xw的妙妙屋" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/headshot.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa-brands fa-youtube"></i><span> 番剧</span></a></div><div class="menus_item"><a class="site-page" href="/steamgames/"><i class="fa-fw fa-brands fa-steam"></i><span> 游戏库</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-solid fa-image"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://a1.boltp.com/2025/09/20/68ce3fb79337e.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/test.gif" alt="Logo"><span class="site-name">xw的妙妙屋</span></a><a class="nav-page-title" href="/"><span class="site-name">Docker</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="weather"><div id="tp-weather-widget"></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/bangumis/"><i class="fa-fw fa-brands fa-youtube"></i><span> 番剧</span></a></div><div class="menus_item"><a class="site-page" href="/steamgames/"><i class="fa-fw fa-brands fa-steam"></i><span> 游戏库</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/gallery/"><i class="fa-fw fas fa-solid fa-image"></i><span> 相册</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-user"></i><span> 关于</span></a></div></div></div><div id="nav-right"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><!-- span= ' ' + _p('search.title')--></span></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-20T04:06:42.000Z" title="发表于 2025-09-20 12:06:42">2025-09-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-20T05:46:50.180Z" title="更新于 2025-09-20 13:46:50">2025-09-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="前言">前言</h2>
<p>在学习 Linux 操作系统和项目部署时，我们常遇到命令繁多、软件安装复杂、环境依赖冲突等问题。尤其在微服务时代，成百上千台服务器的部署运维更是挑战。Docker 技术的出现，通过容器化解决了环境隔离与快速部署的问题，让项目部署变得简单高效。</p>
<p>本文基于 Ubuntu 24.04 LTS 系统，整理 Docker 核心知识点，包括基础命令、数据卷、镜像构建、网络配置及项目部署，并补充实用扩展内容。</p>
<h2 id="1-快速入门">1. 快速入门</h2>
<h3 id="1-1-安装-Docker">1.1 安装 Docker</h3>
<p>Docker 支持主流操作系统，但安装方式因系统而异。以 Ubuntu 24.04 LTS 为例，可直接参考官方安装文档：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce2a7a2f9dc.png" alt="image"></p>
<p>按照文档提示逐步执行命令即可，也可参考视频教程操作：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV183B1Y2EGk/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffdc8ef30147923fee0d363c8e4b12bb">https://www.bilibili.com/video/BV183B1Y2EGk/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffdc8ef30147923fee0d363c8e4b12bb</a></p>
<p>对于其他系统（如 CentOS），在官方文档中选择对应系统的安装指南即可。</p>
<p>Docker 默认从官方仓库（<code>Docker Hub</code>）拉取镜像，由于该仓库服务器位于国外，国内用户直接访问时可能因网络链路长、带宽限制或地域访问策略，出现拉取超时、速度卡顿等问题。针对这类问题，可采用以下解决方案：</p>
<ul>
<li><strong>镜像加速</strong>：通过国内云厂商（如阿里云、腾讯云等）提供的 “镜像加速器”，将拉取请求转发至国内节点，大幅提升拉取速度。</li>
<li><strong>VPN</strong>：通过合规的虚拟专用网络连接国外网络，绕开地域限制，直接访问 <code>Docker Hub</code>。</li>
</ul>
<p>Ubuntu 24.04 通过 <code>/etc/docker/daemon.json</code> 配置加速，以阿里云为例：</p>
<ol>
<li>
<p>登录阿里云容器镜像服务，获取专属加速地址（如 <code>https://xxxx.mirror.aliyuncs.com</code>）</p>
</li>
<li>
<p>创建配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://xxxx.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>重启 Docker 使配置生效：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="1-2-部署-MySQL（Docker-方式对比传统方式）">1.2 部署 MySQL（Docker 方式对比传统方式）</h3>
<p>使用 Docker 部署软件比传统方式更高效。以 MySQL 为例：</p>
<h4 id="传统部署-MySQL-步骤">传统部署 MySQL 步骤</h4>
<ul>
<li>搜索并下载 Ubuntu 版本的 MySQL 安装包（<code>mysql-server_8.0_amd64.deb</code>）</li>
<li>手动解决依赖冲突（如 <code>libmysqlclient-dev</code> 等）</li>
<li>执行 <code>dpkg -i</code> 安装并通过 <code>mysql_secure_installation</code> 配置</li>
<li>调整 <code>/etc/mysql/my.cnf</code> 配置文件</li>
</ul>
<h4 id="Docker-部署-MySQL-步骤（仅需-1-条命令）">Docker 部署 MySQL 步骤（仅需 1 条命令）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name mysql \<br>  -p 3306:3306 \<br>  -e TZ=Asia/Shanghai \<br>  -e MYSQL_ROOT_PASSWORD=123 \<br>  mysql<br></code></pre></td></tr></table></figure>
<p><strong>镜像名称格式</strong>：<code>REPOSITORY:TAG</code>（如 <code>mysql:8.0</code>，未指定 TAG 则默认 <code>latest</code>）</p>
<p><strong>运行效果如图：</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce2f045b20e.png" alt=""></p>
<p>MySQL安装完毕！现在通过任意客户端工具即可连接到MySQL啦</p>
<h3 id="1-3-核心概念解析">1.3 核心概念解析</h3>
<table>
<thead>
<tr>
<th>概念</th>
<th>英文</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>镜像</td>
<td>Image</td>
<td>包含应用程序、依赖环境、配置文件的只读模板（如 MySQL 镜像含 MySQL 及运行库）</td>
</tr>
<tr>
<td>容器</td>
<td>Container</td>
<td>镜像运行后的实例，是独立隔离的运行环境</td>
</tr>
<tr>
<td>镜像仓库</td>
<td>Registry</td>
<td>存储镜像的服务器（官方：DockerHub；第三方：阿里云 / 华为云；私有：企业自建）</td>
</tr>
</tbody>
</table>
<h3 id="1-4-命令解读（部署-MySQL-命令拆解）">1.4 命令解读（部署 MySQL 命令拆解）</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \          <span class="hljs-comment"># 创建并启动容器，-d 表示后台运行</span><br>  --name mysql \              <span class="hljs-comment"># 容器命名为 mysql（自定义）</span><br>  -p 3306:3306 \              <span class="hljs-comment"># 端口映射：宿主机3306 → 容器内3306（容器隔离需映射才能外部访问）</span><br>  -e TZ=Asia/Shanghai \       <span class="hljs-comment"># 环境变量：设置容器时区为上海</span><br>  -e MYSQL_ROOT_PASSWORD=123 \# 环境变量：设置 MySQL root 密码<br>  mysql                       <span class="hljs-comment"># 镜像名称（默认拉取 latest 版本，可指定如 mysql:8.0）</span><br></code></pre></td></tr></table></figure>
<p><strong>镜像名称格式</strong>：<code>REPOSITORY:TAG</code>（如 <code>mysql:8.0</code>，未指定 TAG 则默认 <code>latest</code>）</p>
<p><strong>总结一下：</strong></p>
<p>Docker本身包含一个后台服务，我们可以利用Docker命令告诉Docker服务，帮助我们快速部署指定的应用。Docker服务部署应用时，首先要去搜索并下载应用对应的镜像，然后根据镜像创建并允许容器，应用就部署完成了。</p>
<p>用一幅图标示如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3057c725f.png" alt=""></p>
<h2 id="2-Docker-基础">2. Docker 基础</h2>
<h3 id="2-1-常见命令（Ubuntu-24-04-需加-sudo）">2.1 常见命令（Ubuntu 24.04 需加 <code>sudo</code>）</h3>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker pull</code></td>
<td>拉取镜像到本地</td>
<td><code>sudo docker pull nginx:latest</code></td>
</tr>
<tr>
<td><code>docker images</code></td>
<td>查看本地所有镜像</td>
<td><code>sudo docker images</code></td>
</tr>
<tr>
<td><code>docker rmi</code></td>
<td>删除本地镜像（需先删依赖容器）</td>
<td><code>sudo docker rmi mysql:latest</code></td>
</tr>
<tr>
<td><code>docker run</code></td>
<td>创建并启动容器（不可重复创建同名容器）</td>
<td><code>sudo docker run -d --name nginx nginx</code></td>
</tr>
<tr>
<td><code>docker stop</code></td>
<td>停止运行中的容器</td>
<td><code>sudo docker stop mysql</code></td>
</tr>
<tr>
<td><code>docker start</code></td>
<td>启动已停止的容器</td>
<td><code>sudo docker start mysql</code></td>
</tr>
<tr>
<td><code>docker restart</code></td>
<td>重启容器</td>
<td><code>sudo docker restart mysql</code></td>
</tr>
<tr>
<td><code>docker rm</code></td>
<td>删除容器（运行中需加 <code>-f</code> 强制删除）</td>
<td><code>sudo docker rm -f mysql</code></td>
</tr>
<tr>
<td><code>docker ps</code></td>
<td>查看运行中的容器（<code>-a</code> 查看所有）</td>
<td><code>sudo docker ps -a</code></td>
</tr>
<tr>
<td><code>docker logs</code></td>
<td>查看容器运行日志（<code>-f</code> 实时跟踪）</td>
<td><code>sudo docker logs -f mysql</code></td>
</tr>
<tr>
<td><code>docker exec</code></td>
<td>进入容器内部（<code>-it</code> 交互模式）</td>
<td><code>sudo docker exec -it mysql bash</code></td>
</tr>
<tr>
<td><code>docker save</code></td>
<td>保存镜像为本地压缩包</td>
<td><code>sudo docker save -o nginx.tar nginx</code></td>
</tr>
<tr>
<td><code>docker load</code></td>
<td>加载本地压缩包为镜像</td>
<td><code>sudo docker load -i nginx.tar</code></td>
</tr>
<tr>
<td><code>docker inspect</code></td>
<td>查看容器 / 镜像详细信息</td>
<td><code>sudo docker inspect mysql</code></td>
</tr>
</tbody>
</table>
<p>用一副图来表示这些命令的关系：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce316337013.png" alt=""></p>
<p>补充：</p>
<p>默认情况下，每次重启虚拟机我们都需要手动启动Docker和Docker中的容器。通过命令可以实现开机自启：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Docker开机自启</span><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> docker<br><br><span class="hljs-comment"># Docker容器开机自启</span><br><span class="hljs-built_in">sudo</span> docker update --restart=always [容器名/容器<span class="hljs-built_in">id</span>]<br></code></pre></td></tr></table></figure>
<h4 id="2-1-2-演示（以-Nginx-为例）">2.1.2 演示（以 Nginx 为例）</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 第1步，去DockerHub查看nginx镜像仓库及相关信息</span><br><br><span class="hljs-comment"># 第2步，拉取Nginx镜像</span><br><span class="hljs-built_in">sudo</span> docker pull nginx<br><br><span class="hljs-comment"># 第3步，查看镜像</span><br><span class="hljs-built_in">sudo</span> docker images<br><span class="hljs-comment"># 结果如下：</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>nginx        latest    605c77e624dd   16 months ago   141MB<br>mysql        latest    3218b38490ce   17 months ago   516MB<br><br><span class="hljs-comment"># 第4步，创建并运行Nginx容器</span><br><span class="hljs-built_in">sudo</span> docker run -d --name nginx -p 80:80 nginx<br><br><span class="hljs-comment"># 第5步，查看运行中容器</span><br><span class="hljs-built_in">sudo</span> docker ps<br><span class="hljs-comment"># 也可以加格式化方式访问，格式会更加清爽</span><br><span class="hljs-built_in">sudo</span> docker ps --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># 第6步，访问网页，地址：http://localhost</span><br><br><span class="hljs-comment"># 第7步，停止容器</span><br><span class="hljs-built_in">sudo</span> docker stop nginx<br><br><span class="hljs-comment"># 第8步，查看所有容器</span><br><span class="hljs-built_in">sudo</span> docker ps -a --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># 第9步，再次启动nginx容器</span><br><span class="hljs-built_in">sudo</span> docker start nginx<br><br><span class="hljs-comment"># 第10步，再次查看容器</span><br><span class="hljs-built_in">sudo</span> docker ps --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># 第11步，查看容器详细信息</span><br><span class="hljs-built_in">sudo</span> docker inspect nginx<br><br><span class="hljs-comment"># 第12步，进入容器,查看容器内目录</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it nginx bash<br><span class="hljs-comment"># 或者，可以进入MySQL</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it mysql mysql -uroot -p<br><br><span class="hljs-comment"># 第13步，删除容器</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> nginx<br><span class="hljs-comment"># 发现无法删除，因为容器运行中，强制删除容器</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> -f nginx<br></code></pre></td></tr></table></figure>
<h4 id="2-1-3-命令别名配置（简化操作）">2.1.3 命令别名配置（简化操作）</h4>
<p>Ubuntu 24.04 可通过修改 <code>~/.bashrc</code> 设置别名：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 编辑配置文件（普通用户用 ~/.bashrc，root 用户用 /root/.bashrc）</span><br>vi ~/.bashrc<br><span class="hljs-comment"># 添加以下内容</span><br><span class="hljs-built_in">alias</span> dps=<span class="hljs-string">&#x27;sudo docker ps --format &quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;&#x27;</span><br><span class="hljs-built_in">alias</span> dis=<span class="hljs-string">&#x27;sudo docker images&#x27;</span><br><span class="hljs-comment"># 使别名生效</span><br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure>
<h3 id="2-2-数据卷（容器与宿主机数据互通）">2.2 数据卷（容器与宿主机数据互通）</h3>
<p>容器默认隔离，数据卷可实现容器内目录与宿主机目录的映射，解决数据持久化、配置修改等问题。</p>
<h4 id="2-2-1-什么是数据卷">2.2.1 什么是数据卷</h4>
<p>数据卷（volume）是一个虚拟目录，是容器内目录与宿主机目录之间映射的桥梁。</p>
<p>以 Nginx 为例，其 <code>html</code>（静态资源）和 <code>conf</code>（配置文件）目录需与宿主机关联，数据卷挂载逻辑如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce35dff40a3.png" alt=""></p>
<p>在上图中：</p>
<ul>
<li>创建了两个数据卷：<code>conf</code>、<code>html</code></li>
<li>Nginx 容器内部的 <code>conf</code> 目录和 <code>html</code> 目录分别与两个数据卷关联</li>
<li>数据卷分别指向宿主机的 <code>/var/lib/docker/volumes/conf/_data</code> 和 <code>/var/lib/docker/volumes/html/_data</code></li>
</ul>
<h4 id="2-2-2-数据卷命令">2.2.2 数据卷命令</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker volume create</code></td>
<td>创建数据卷</td>
<td><code>sudo docker volume create nginx-html</code></td>
</tr>
<tr>
<td><code>docker volume ls</code></td>
<td>查看所有数据卷</td>
<td><code>sudo docker volume ls</code></td>
</tr>
<tr>
<td><code>docker volume rm</code></td>
<td>删除指定数据卷</td>
<td><code>sudo docker volume rm nginx-html</code></td>
</tr>
<tr>
<td><code>docker volume inspect</code></td>
<td>查看数据卷详情</td>
<td><code>sudo docker inspect nginx-html</code></td>
</tr>
<tr>
<td><code>docker volume prune</code></td>
<td>清除未使用的数据卷</td>
<td><code>sudo docker volume prune</code></td>
</tr>
</tbody>
</table>
<h4 id="2-2-3-实战：挂载数据卷到-Nginx">2.2.3 实战：挂载数据卷到 Nginx</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 创建并启动 Nginx 容器，挂载数据卷 nginx-html 到容器内 /usr/share/nginx/html</span><br><span class="hljs-built_in">sudo</span> docker run -d --name nginx -p 80:80 -v nginx-html:/usr/share/nginx/html nginx<br><br><span class="hljs-comment"># 查看数据卷详情（获取宿主机映射路径）</span><br><span class="hljs-built_in">sudo</span> docker inspect nginx-html<br><span class="hljs-comment"># 宿主机路径通常为 /var/lib/docker/volumes/nginx-html/_data</span><br><br><span class="hljs-comment"># 修改宿主机文件，容器内自动同步</span><br><span class="hljs-built_in">sudo</span> vi /var/lib/docker/volumes/nginx-html/_data/index.html<br><span class="hljs-comment"># 访问 localhost 验证效果</span><br></code></pre></td></tr></table></figure>
<h4 id="2-2-4-实战：直接挂载宿主机目录（更灵活）">2.2.4 实战：直接挂载宿主机目录（更灵活）</h4>
<p>Ubuntu 24.04 支持直接将宿主机目录挂载到容器，无需数据卷中间层：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 宿主机创建目录（以 MySQL 为例）</span><br><span class="hljs-built_in">mkdir</span> -p ~/mysql/&#123;conf,data,init&#125;<br><br><span class="hljs-comment"># 2. 复制配置文件到 conf 目录、初始化 SQL 到 init 目录</span><br>【此处需补充图片：课前资料中 mysql 目录结构截图（含 conf、data、init 子目录）】<br>【此处需补充图片：init 目录下初始化 SQL 脚本和 conf 目录下配置文件的截图】<br><br><span class="hljs-comment"># 3. 启动 MySQL 容器，挂载宿主机目录</span><br><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name mysql \<br>  -p 3306:3306 \<br>  -e TZ=Asia/Shanghai \<br>  -e MYSQL_ROOT_PASSWORD=123 \<br>  -v ~/mysql/data:/var/lib/mysql \    <span class="hljs-comment"># 数据持久化</span><br>  -v ~/mysql/conf:/etc/mysql/conf.d \ <span class="hljs-comment"># 配置文件挂载</span><br>  -v ~/mysql/init:/docker-entrypoint-initdb.d \ <span class="hljs-comment"># 初始化脚本挂载</span><br>  mysql<br><br><span class="hljs-comment"># 4. 查看宿主机目录，确认 data 自动创建</span><br><span class="hljs-built_in">ls</span> -l ~/mysql<br><span class="hljs-comment"># 结果：</span><br>总用量 4<br>drwxr-xr-x. 2 root    root   20 5月  19 15:11 conf<br>drwxr-xr-x. 7 polkitd root 4096 5月  19 15:11 data<br>drwxr-xr-x. 2 root    root   23 5月  19 15:11 init<br><br><span class="hljs-comment"># 5. 验证数据库初始化结果</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it mysql mysql -uroot -p123<br><span class="hljs-comment"># 查看编码（应为 utf8mb4）</span><br>show variables like <span class="hljs-string">&quot;%char%&quot;</span>;<br><span class="hljs-comment"># 查看数据库（应有 hmall 库）</span><br>show databases;<br></code></pre></td></tr></table></figure>
<h3 id="2-3-自定义镜像（Dockerfile-实战）">2.3 自定义镜像（Dockerfile 实战）</h3>
<p>当现有镜像无法满足需求时，可通过 Dockerfile 构建自定义镜像。</p>
<h4 id="2-3-1-镜像结构">2.3.1 镜像结构</h4>
<p>镜像采用 “分层叠加” 机制，每一层对应 Dockerfile 中的一条指令，复用性强（如 Java 镜像可基于官方 JDK 镜像叠加）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3722444b2.png" alt=""></p>
<h4 id="2-3-2-Dockerfile-核心指令">2.3.2 Dockerfile 核心指令</h4>
<table>
<thead>
<tr>
<th>指令</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>FROM</code></td>
<td>指定基础镜像（必须为第一条指令）</td>
<td><code>FROM openjdk:11.0-jre-buster</code></td>
</tr>
<tr>
<td><code>ENV</code></td>
<td>设置环境变量</td>
<td><code>ENV TZ=Asia/Shanghai</code></td>
</tr>
<tr>
<td><code>COPY</code></td>
<td>拷贝本地文件到镜像</td>
<td><code>COPY ./hm-service.jar /app.jar</code></td>
</tr>
<tr>
<td><code>RUN</code></td>
<td>执行 Linux 命令（构建时运行）</td>
<td><code>RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime</code></td>
</tr>
<tr>
<td><code>EXPOSE</code></td>
<td>声明容器监听端口（仅说明，不映射）</td>
<td><code>EXPOSE 8080</code></td>
</tr>
<tr>
<td><code>ENTRYPOINT</code></td>
<td>容器启动命令（不可被覆盖）</td>
<td><code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]</code></td>
</tr>
</tbody>
</table>
<h4 id="2-3-3-实战：构建-Java-应用镜像">2.3.3 实战：构建 Java 应用镜像</h4>
<ol>
<li>
<p><strong>准备文件</strong>：将 <code>docker-demo.jar</code> 和 Dockerfile 放入 <code>~/demo</code> 目录</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce383375757.png" alt=""></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3875d6fdf.png" alt=""></p>
</li>
<li>
<p><strong>编写 Dockerfile</strong>：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># 基础镜像（含 JRE 环境）</span><br><span class="hljs-keyword">FROM</span> openjdk:<span class="hljs-number">11.0</span>-jre-buster<br><span class="hljs-comment"># 设置时区</span><br><span class="hljs-keyword">ENV</span> TZ=Asia/Shanghai<br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">ln</span> -snf /usr/share/zoneinfo/<span class="hljs-variable">$TZ</span> /etc/localtime &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$TZ</span> &gt; /etc/timezone</span><br><span class="hljs-comment"># 拷贝 jar 包</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /app.jar</span><br><span class="hljs-comment"># 声明端口</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span><br><span class="hljs-comment"># 启动命令</span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;/app.jar&quot;</span>]</span><br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>构建镜像</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 进入镜像目录</span><br><span class="hljs-built_in">cd</span> /root/demo<br><span class="hljs-comment"># 开始构建</span><br>docker build -t docker-demo:1.0 .<br></code></pre></td></tr></table></figure>
<p>结果：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3909a9637.png" alt=""></p>
<p>查看镜像列表：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看镜像列表：</span><br>docker images<br><span class="hljs-comment"># 结果</span><br>REPOSITORY    TAG       IMAGE ID       CREATED          SIZE<br>docker-demo   1.0       d6ab0b9e64b9   27 minutes ago   327MB<br>nginx         latest    605c77e624dd   16 months ago    141MB<br>mysql         latest    3218b38490ce   17 months ago    516MB<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>运行自定义镜像</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1.创建并运行容器</span><br>docker run -d --name <span class="hljs-built_in">dd</span> -p 8080:8080 docker-demo:1.0<br><span class="hljs-comment"># 2.查看容器</span><br>dps<br><span class="hljs-comment"># 结果</span><br>CONTAINER ID   IMAGE             PORTS                                                  STATUS         NAMES<br>78a000447b49   docker-demo:1.0   0.0.0.0:8080-&gt;8080/tcp, :::8090-&gt;8090/tcp              Up 2 seconds   <span class="hljs-built_in">dd</span><br>f63cfead8502   mysql             0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   Up 2 hours     mysql<br><br><span class="hljs-comment"># 3.访问</span><br>curl localhost:8080/hello/count<br><span class="hljs-comment"># 结果：</span><br>&lt;h5&gt;欢迎访问黑马商城, 这是您第1次访问&lt;h5&gt;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="2-4-网络（容器间通信）">2.4 网络（容器间通信）</h3>
<p>Docker 默认网络隔离，自定义网络可实现容器通过 “别名” 互通，避免依赖动态 IP。</p>
<h4 id="2-4-1-常见网络命令">2.4.1 常见网络命令</h4>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>docker network create</code></td>
<td>创建自定义网络</td>
<td><code>sudo docker network create hmall-net</code></td>
</tr>
<tr>
<td><code>docker network ls</code></td>
<td>查看所有网络</td>
<td><code>sudo docker network ls</code></td>
</tr>
<tr>
<td><code>docker network connect</code></td>
<td>让容器加入网络</td>
<td><code>sudo docker network connect hmall-net mysql</code></td>
</tr>
<tr>
<td><code>docker network disconnect</code></td>
<td>让容器离开网络</td>
<td><code>sudo docker network disconnect hmall-net mysql</code></td>
</tr>
</tbody>
</table>
<h4 id="2-4-2-实战：自定义网络实现容器互通">2.4.2 实战：自定义网络实现容器互通</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. 创建自定义网络</span><br><span class="hljs-built_in">sudo</span> docker network create hmall-net<br><br><span class="hljs-comment"># 2. 启动 MySQL 并加入网络（指定别名 db）</span><br><span class="hljs-built_in">sudo</span> docker run -d --name mysql --network hmall-net --<span class="hljs-built_in">alias</span> db -e MYSQL_ROOT_PASSWORD=123 mysql<br><br><span class="hljs-comment"># 3. 启动 Java 应用并加入同一网络</span><br><span class="hljs-built_in">sudo</span> docker run -d --name <span class="hljs-built_in">dd</span> --network hmall-net -p 8080:8080 hmall:1.0<br><br><span class="hljs-comment"># 4. 验证通信（进入 Java 容器 ping MySQL）</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it hmall bash<br>ping db  <span class="hljs-comment"># 可通过别名 db 或容器名 mysql 访问</span><br></code></pre></td></tr></table></figure>
<h2 id="3-项目部署实战（黑马商城）">3. 项目部署实战（黑马商城）</h2>
<h3 id="3-1-项目结构">3.1 项目结构</h3>
<p>课前资料提供的项目包含：</p>
<ul>
<li>后端：<code>hmall</code>（Java 项目，端口 8080）</li>
<li>前端：<code>hmall-portal</code>（用户端，端口 18080）、<code>hmall-admin</code>（管理端，端口 18081）</li>
</ul>
<table>
<thead>
<tr>
<th>项目</th>
<th>容器名</th>
<th>端口</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>hmall</td>
<td>hmall</td>
<td>8080</td>
<td>后端 API 入口</td>
</tr>
<tr>
<td>hmall-portal</td>
<td>nginx</td>
<td>18080</td>
<td>用户端前端入口</td>
</tr>
<tr>
<td>hmall-admin</td>
<td>nginx</td>
<td>18081</td>
<td>管理端前端入口</td>
</tr>
<tr>
<td>MySQL</td>
<td>mysql</td>
<td>3306</td>
<td>数据库</td>
</tr>
</tbody>
</table>
<h3 id="3-2-部署步骤">3.2 部署步骤</h3>
<h4 id="3-2-1-部署后端-Java-项目">3.2.1 部署后端 Java 项目</h4>
<ol>
<li>
<p><strong>打包项目</strong>：用 IDEA 打包 <code>hm-service</code> 模块，得到 <code>hm-service.jar</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3b255b994.png" alt=""></p>
</li>
<li>
<p><strong>上传文件</strong>：将 <code>hm-service.jar</code> 和 Dockerfile 上传到 Ubuntu 24.04 的 <code>~/</code> 目录</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3b93b0b22.png" alt=""></p>
</li>
<li>
<p><strong>构建镜像并启动</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 构建镜像</span><br><span class="hljs-built_in">sudo</span> docker build -t hmall .<br><span class="hljs-comment"># 启动容器（加入自定义网络）</span><br><span class="hljs-built_in">sudo</span> docker run -d --name hmall --network hmall-net -p 8080:8080 hmall<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>验证</strong>：访问 <code>http://localhost:8080/search/list</code></p>
</li>
</ol>
<h4 id="3-2-2-部署前端（Nginx-代理）">3.2.2 部署前端（Nginx 代理）</h4>
<ol>
<li>
<p><strong>准备文件</strong>：把整个nginx目录上传到虚拟机的<code>~</code>目录下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3c8beff3e.png" alt=""></p>
</li>
<li>
<p><strong>启动 Nginx 容器</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name nginx \<br>  -p 18080:18080 \<br>  -p 18081:18081 \<br>  -v ~/nginx/html:/usr/share/nginx/html \<br>  -v ~/nginx/nginx.conf:/etc/nginx/nginx.conf \<br>  --network hmall-net \<br>  nginx<br></code></pre></td></tr></table></figure>
</li>
<li>
<p><strong>验证</strong>：</p>
<ul>
<li>
<p>用户端：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">http://localhost:18080<br></code></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3ceb2759a.png" alt=""></p>
</li>
<li>
<p>管理端：<code>http://localhost:18081</code></p>
</li>
</ul>
</li>
</ol>
<h3 id="3-3-Docker-Compose（批量部署多容器）">3.3 Docker Compose（批量部署多容器）</h3>
<h4 id="3-3-1-基本语法">3.3.1 基本语法</h4>
<p><code>docker-compose.yml</code> 文件通过 “服务（service）” 定义容器配置，与 <code>docker run</code> 参数对应关系如下：</p>
<table>
<thead>
<tr>
<th>docker run 参数</th>
<th>docker compose 指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--name</code></td>
<td><code>container_name</code></td>
<td>容器名称</td>
</tr>
<tr>
<td><code>-p</code></td>
<td><code>ports</code></td>
<td>端口映射</td>
</tr>
<tr>
<td><code>-e</code></td>
<td><code>environment</code></td>
<td>环境变量</td>
</tr>
<tr>
<td><code>-v</code></td>
<td><code>volumes</code></td>
<td>数据卷 / 目录挂载</td>
</tr>
<tr>
<td><code>--network</code></td>
<td><code>networks</code></td>
<td>网络配置</td>
</tr>
</tbody>
</table>
<h4 id="3-3-2-黑马商城-Compose-配置文件">3.3.2 黑马商城 Compose 配置文件</h4>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.8&quot;</span><br><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">mysql:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">mysql</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3306:3306&quot;</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span><br>      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-number">123</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/data:/var/lib/mysql&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/init:/docker-entrypoint-initdb.d&quot;</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br>  <span class="hljs-attr">hmall:</span><br>    <span class="hljs-attr">build:</span> <br>      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span><br>      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">hmall</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:8080&quot;</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span><br>  <span class="hljs-attr">nginx:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18080:18080&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18081:18081&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./nginx/nginx.conf:/etc/nginx/nginx.conf&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./nginx/html:/usr/share/nginx/html&quot;</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hmall</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br><span class="hljs-attr">networks:</span><br>  <span class="hljs-attr">hm-net:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">hmall-net</span><br></code></pre></td></tr></table></figure>
<h4 id="3-3-3-基础命令">3.3.3 基础命令</h4>
<p>Docker Compose 命令的基本语法为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker compose [OPTIONS] [COMMAND]<br></code></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数 / 指令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Options</td>
<td><code>-f</code></td>
<td>指定 <code>docker-compose.yml</code> 文件的路径和名称（默认查找当前目录下的该文件）</td>
</tr>
<tr>
<td>Options</td>
<td><code>-p</code></td>
<td>指定 ** 项目（project）** 名称，项目是 <code>docker-compose.yml</code> 中多个服务（service）的集合</td>
</tr>
<tr>
<td>Commands</td>
<td><code>up</code></td>
<td>创建并启动所有定义的服务容器（<code>-d</code> 表示<strong>后台启动</strong>）</td>
</tr>
<tr>
<td>Commands</td>
<td><code>down</code></td>
<td>停止并移除所有容器、网络（默认保留挂载的数据卷）</td>
</tr>
<tr>
<td>Commands</td>
<td><code>ps</code></td>
<td>列出所有启动的容器</td>
</tr>
<tr>
<td>Commands</td>
<td><code>logs</code></td>
<td>查看指定容器的运行日志（示例：<code>docker compose logs 容器名</code>）</td>
</tr>
<tr>
<td>Commands</td>
<td><code>stop</code></td>
<td>停止容器</td>
</tr>
<tr>
<td>Commands</td>
<td><code>start</code></td>
<td>启动已停止的容器</td>
</tr>
<tr>
<td>Commands</td>
<td><code>restart</code></td>
<td>重启容器</td>
</tr>
<tr>
<td>Commands</td>
<td><code>top</code></td>
<td>查看容器内运行的进程</td>
</tr>
<tr>
<td>Commands</td>
<td><code>exec</code></td>
<td>在运行中的容器内执行命令（示例：<code>docker compose exec 容器名 bash</code>）</td>
</tr>
</tbody>
</table>
<h5 id="教学演示：部署黑马商城项目">教学演示：部署黑马商城项目</h5>
<h5 id="步骤-1：进入项目根目录">步骤 1：进入项目根目录</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~<br></code></pre></td></tr></table></figure>
<h5 id="步骤-2：清理旧容器与资源">步骤 2：清理旧容器与资源</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 强制删除所有正在运行的Docker容器</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> -f $(<span class="hljs-built_in">sudo</span> docker ps -qa)<br><br><span class="hljs-comment"># 删除旧的hmall镜像（若存在需更新的情况）</span><br><span class="hljs-built_in">sudo</span> docker rmi hmall<br><br><span class="hljs-comment"># 清空MySQL数据目录（如需重新初始化数据库）</span><br><span class="hljs-built_in">rm</span> -rf mysql/data<br></code></pre></td></tr></table></figure>
<h5 id="步骤-3：启动所有服务（后台运行）">步骤 3：启动所有服务（后台运行）</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose up -d<br></code></pre></td></tr></table></figure>
<p><strong>执行结果示例</strong>：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tex">[+] Building 15.5s (8/8) FINISHED<br> =&gt; [internal] load build definition from Dockerfile                                    0.0s<br> =&gt; =&gt; transferring dockerfile: 358B                                                    0.0s<br> =&gt; [internal] load .dockerignore                                                       0.0s<br> =&gt; =&gt; transferring context: 2B                                                         0.0s<br> =&gt; [internal] load metadata for docker.io/library/openjdk:11.0-jre-buster             15.4s<br> =&gt; [1/3] FROM docker.io/library/openjdk:11.0-jre-buster@sha256:3546a17e6fb4ff4fa681c3  0.0s<br> =&gt; [internal] load build context                                                       0.0s<br> =&gt; =&gt; transferring context: 98B                                                        0.0s<br> =&gt; CACHED [2/3] RUN ln -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime <span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span> echo   0.0s<br> =&gt; CACHED [3/3] COPY hm-service.jar /app.jar                                           0.0s<br> =&gt; exporting to image                                                                  0.0s<br> =&gt; =&gt; exporting layers                                                                 0.0s<br> =&gt; =&gt; writing image sha256:32eebee16acde22550232f2eb80c69d2ce813ed099640e4cfed2193f71  0.0s<br> =&gt; =&gt; naming to docker.io/library/root-hmall                                           0.0s<br>[+] Running 4/4<br> ✔ Network hmall    Created                                                             0.2s<br> ✔ Container mysql  Started                                                             0.5s<br> ✔ Container hmall  Started                                                             0.9s<br> ✔ Container nginx  Started                                                             1.5s<br></code></pre></td></tr></table></figure>
<h5 id="步骤-4：查看镜像列表">步骤 4：查看镜像列表</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose images<br></code></pre></td></tr></table></figure>
<p><strong>执行结果示例</strong>：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">CONTAINER           REPOSITORY          TAG                 IMAGE ID            SIZE<br>hmall               root-hmall          latest              32eebee16acd        362MB<br>mysql               mysql               latest              3218b38490ce        516MB<br>nginx               nginx               latest              605c77e624dd        141MB<br></code></pre></td></tr></table></figure>
<h5 id="步骤-5：查看运行中容器">步骤 5：查看运行中容器</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose ps<br></code></pre></td></tr></table></figure>
<p><strong>执行结果示例</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">NAME                IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS<br>hmall               root-hmall          &quot;java -jar /app.jar&quot;     hmall               54 seconds ago      Up 52 seconds       0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp<br>mysql               mysql               &quot;docker-entrypoint.s…&quot;   mysql               54 seconds ago      Up 53 seconds       0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp<br>nginx               nginx               &quot;/docker-entrypoint.…&quot;   nginx               54 seconds ago      Up 52 seconds       80/tcp, 0.0.0.0:18080-18081-&gt;18080-18081/tcp, :::18080-18081-&gt;18080-18081/tcp<br></code></pre></td></tr></table></figure>
<h5 id="步骤-6：验证项目访问">步骤 6：验证项目访问</h5>
<p>打开浏览器，访问后端接口（将 <code>yourIp</code> 替换为 Ubuntu 主机的实际 IP 地址）：</p>
<figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">http://yourIp:8080<br></code></pre></td></tr></table></figure>
<p>若能正常加载页面或返回接口数据，说明 Docker Compose 部署成功。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://www.xwybq.top">xw</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://www.xwybq.top/posts/5c266b64/">https://www.xwybq.top/posts/5c266b64/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://www.xwybq.top" target="_blank">xw的妙妙屋</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="https://a1.boltp.com/2025/09/20/68ce3fb79337e.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/96a41905/" title="SpringCloud"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/22/68d0d3997e0e5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">SpringCloud</div></div><div class="info-2"><div class="info-item-1">1. 认识微服务 本章从单体架构的优缺点切入，分析大型项目采用单体架构的问题，以及微服务架构的解决思路。 1.1 单体架构 单体架构（monolithic structure）：顾名思义，整个项目中所有功能模块都在同一个工程中开发；部署时需对所有模块一起编译、打包；架构设计和开发模式非常简单。  当项目规模较小时，单体架构上手快、部署运维方便，因此早期小型项目多采用这种模式。 但随着业务规模扩大、团队人员增加，单体架构的问题逐渐凸显：  团队协作成本高：数十人协作同一项目时，模块间代码边界模糊，分支合并易陷入 “冲突泥潭”。 系统发布效率低：任何模块变更都需发布整个系统，模块间制约多，一次发布可能耗时数十分钟甚至数小时。 系统可用性差：所有功能作为一个服务部署，相互影响大。热点功能耗尽资源时，会导致其他服务不可用。  单体架构可用性问题演示（以黑马商城为例） 为直观展示单体架构的可用性问题，对黑马商城的 hm-service 模块做如下改造与测试：   修改代码模拟耗时：修改 com.hmall.controller.HelloController 中的 hello 方法，模拟接...</div></div></div></a><a class="pagination-related" href="/posts/67c8035e/" title="MyBatis-Plus"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce408b0f530.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">MyBatis-Plus</div></div><div class="info-2"><div class="info-item-1"> 一、MyBatis-Plus 简介 1.1 什么是 MyBatis-Plus MyBatis-Plus（简称 MP）是 MyBatis 的增强工具，由 baomidou 团队开发维护，核心设计理念是 “只做增强，不做改变”—— 完全兼容 MyBatis 原生功能，不侵入现有代码，同时封装了大量重复的单表 CRUD 操作，让开发者无需手写繁琐的 SQL 或 XML 映射文件，即可快速完成业务开发。 正如其 slogan “TO BE THE BEST PARTNER OF MYBATIS” 所传递的，MP 并非替代 MyBatis，而是作为其 “最佳搭档” 存在。PPT 中用 “润物无声，如丝般顺滑” 形容其特性，恰是因为引入后不会对现有 MyBatis 工程产生任何干扰，原有代码可无缝衔接。  1.2 核心特性 MP 的核心价值集中在 “简化开发” 与 “效率提升”，结合课程内容可归纳为以下 6 点：  无侵入性：基于 MyBatis 原生架构扩展，不修改 MyBatis 核心逻辑，现有工程引入后无需重构代码。 效率至上：内置 BaseMapper（DAO 层）和 IServi...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/96a41905/" title="SpringCloud"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/22/68d0d3997e0e5.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-21</div><div class="info-item-2">SpringCloud</div></div><div class="info-2"><div class="info-item-1">1. 认识微服务 本章从单体架构的优缺点切入，分析大型项目采用单体架构的问题，以及微服务架构的解决思路。 1.1 单体架构 单体架构（monolithic structure）：顾名思义，整个项目中所有功能模块都在同一个工程中开发；部署时需对所有模块一起编译、打包；架构设计和开发模式非常简单。  当项目规模较小时，单体架构上手快、部署运维方便，因此早期小型项目多采用这种模式。 但随着业务规模扩大、团队人员增加，单体架构的问题逐渐凸显：  团队协作成本高：数十人协作同一项目时，模块间代码边界模糊，分支合并易陷入 “冲突泥潭”。 系统发布效率低：任何模块变更都需发布整个系统，模块间制约多，一次发布可能耗时数十分钟甚至数小时。 系统可用性差：所有功能作为一个服务部署，相互影响大。热点功能耗尽资源时，会导致其他服务不可用。  单体架构可用性问题演示（以黑马商城为例） 为直观展示单体架构的可用性问题，对黑马商城的 hm-service 模块做如下改造与测试：   修改代码模拟耗时：修改 com.hmall.controller.HelloController 中的 hello 方法，模拟接...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/image/headshot.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">xw</div><div class="author-info-description">白天写BUG，夜里写诗，偶尔人间失焦，却一直在发光。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">14</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xwybq"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/xwybq" target="_blank" title="Github"><i class="fab fa-github" style="color: #hdhfbb;"></i></a><a class="social-icon" href="mailto:w3290819205@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #000000;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content"><p>⚙️ 框架核心：Hexo</p>
<p>🕹️ 界面设计：Butterfly</p>
<p>🔮 域名托管：雨云</p>
<p>🎰 部署平台：GitHub Pages + Vercel</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://blog.liushen.fun/config/img/notice.gif" alt="gif" style="width:100%;border-radius:8px;margin-top:8px;">
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">1. 快速入门</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%AE%89%E8%A3%85-Docker"><span class="toc-text">1.1 安装 Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E9%83%A8%E7%BD%B2-MySQL%EF%BC%88Docker-%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%EF%BC%89"><span class="toc-text">1.2 部署 MySQL（Docker 方式对比传统方式）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E9%83%A8%E7%BD%B2-MySQL-%E6%AD%A5%E9%AA%A4"><span class="toc-text">传统部署 MySQL 步骤</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Docker-%E9%83%A8%E7%BD%B2-MySQL-%E6%AD%A5%E9%AA%A4%EF%BC%88%E4%BB%85%E9%9C%80-1-%E6%9D%A1%E5%91%BD%E4%BB%A4%EF%BC%89"><span class="toc-text">Docker 部署 MySQL 步骤（仅需 1 条命令）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E8%A7%A3%E6%9E%90"><span class="toc-text">1.3 核心概念解析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%91%BD%E4%BB%A4%E8%A7%A3%E8%AF%BB%EF%BC%88%E9%83%A8%E7%BD%B2-MySQL-%E5%91%BD%E4%BB%A4%E6%8B%86%E8%A7%A3%EF%BC%89"><span class="toc-text">1.4 命令解读（部署 MySQL 命令拆解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Docker-%E5%9F%BA%E7%A1%80"><span class="toc-text">2. Docker 基础</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4%EF%BC%88Ubuntu-24-04-%E9%9C%80%E5%8A%A0-sudo%EF%BC%89"><span class="toc-text">2.1 常见命令（Ubuntu 24.04 需加 sudo）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-%E6%BC%94%E7%A4%BA%EF%BC%88%E4%BB%A5-Nginx-%E4%B8%BA%E4%BE%8B%EF%BC%89"><span class="toc-text">2.1.2 演示（以 Nginx 为例）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D%E9%85%8D%E7%BD%AE%EF%BC%88%E7%AE%80%E5%8C%96%E6%93%8D%E4%BD%9C%EF%BC%89"><span class="toc-text">2.1.3 命令别名配置（简化操作）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E5%8D%B7%EF%BC%88%E5%AE%B9%E5%99%A8%E4%B8%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%95%B0%E6%8D%AE%E4%BA%92%E9%80%9A%EF%BC%89"><span class="toc-text">2.2 数据卷（容器与宿主机数据互通）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%8D%B7"><span class="toc-text">2.2.1 什么是数据卷</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2-%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%91%BD%E4%BB%A4"><span class="toc-text">2.2.2 数据卷命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3-%E5%AE%9E%E6%88%98%EF%BC%9A%E6%8C%82%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%8D%B7%E5%88%B0-Nginx"><span class="toc-text">2.2.3 实战：挂载数据卷到 Nginx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-4-%E5%AE%9E%E6%88%98%EF%BC%9A%E7%9B%B4%E6%8E%A5%E6%8C%82%E8%BD%BD%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9B%AE%E5%BD%95%EF%BC%88%E6%9B%B4%E7%81%B5%E6%B4%BB%EF%BC%89"><span class="toc-text">2.2.4 实战：直接挂载宿主机目录（更灵活）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E9%95%9C%E5%83%8F%EF%BC%88Dockerfile-%E5%AE%9E%E6%88%98%EF%BC%89"><span class="toc-text">2.3 自定义镜像（Dockerfile 实战）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-%E9%95%9C%E5%83%8F%E7%BB%93%E6%9E%84"><span class="toc-text">2.3.1 镜像结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-Dockerfile-%E6%A0%B8%E5%BF%83%E6%8C%87%E4%BB%A4"><span class="toc-text">2.3.2 Dockerfile 核心指令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3-%E5%AE%9E%E6%88%98%EF%BC%9A%E6%9E%84%E5%BB%BA-Java-%E5%BA%94%E7%94%A8%E9%95%9C%E5%83%8F"><span class="toc-text">2.3.3 实战：构建 Java 应用镜像</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E7%BD%91%E7%BB%9C%EF%BC%88%E5%AE%B9%E5%99%A8%E9%97%B4%E9%80%9A%E4%BF%A1%EF%BC%89"><span class="toc-text">2.4 网络（容器间通信）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E5%B8%B8%E8%A7%81%E7%BD%91%E7%BB%9C%E5%91%BD%E4%BB%A4"><span class="toc-text">2.4.1 常见网络命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E5%AE%9E%E6%88%98%EF%BC%9A%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BD%91%E7%BB%9C%E5%AE%9E%E7%8E%B0%E5%AE%B9%E5%99%A8%E4%BA%92%E9%80%9A"><span class="toc-text">2.4.2 实战：自定义网络实现容器互通</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%AE%9E%E6%88%98%EF%BC%88%E9%BB%91%E9%A9%AC%E5%95%86%E5%9F%8E%EF%BC%89"><span class="toc-text">3. 项目部署实战（黑马商城）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-text">3.1 项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.2 部署步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-1-%E9%83%A8%E7%BD%B2%E5%90%8E%E7%AB%AF-Java-%E9%A1%B9%E7%9B%AE"><span class="toc-text">3.2.1 部署后端 Java 项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-2-%E9%83%A8%E7%BD%B2%E5%89%8D%E7%AB%AF%EF%BC%88Nginx-%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-text">3.2.2 部署前端（Nginx 代理）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-Docker-Compose%EF%BC%88%E6%89%B9%E9%87%8F%E9%83%A8%E7%BD%B2%E5%A4%9A%E5%AE%B9%E5%99%A8%EF%BC%89"><span class="toc-text">3.3 Docker Compose（批量部署多容器）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-text">3.3.1 基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E9%BB%91%E9%A9%AC%E5%95%86%E5%9F%8E-Compose-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">3.3.2 黑马商城 Compose 配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3-%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4"><span class="toc-text">3.3.3 基础命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%99%E5%AD%A6%E6%BC%94%E7%A4%BA%EF%BC%9A%E9%83%A8%E7%BD%B2%E9%BB%91%E9%A9%AC%E5%95%86%E5%9F%8E%E9%A1%B9%E7%9B%AE"><span class="toc-text">教学演示：部署黑马商城项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-1%EF%BC%9A%E8%BF%9B%E5%85%A5%E9%A1%B9%E7%9B%AE%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="toc-text">步骤 1：进入项目根目录</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-2%EF%BC%9A%E6%B8%85%E7%90%86%E6%97%A7%E5%AE%B9%E5%99%A8%E4%B8%8E%E8%B5%84%E6%BA%90"><span class="toc-text">步骤 2：清理旧容器与资源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-3%EF%BC%9A%E5%90%AF%E5%8A%A8%E6%89%80%E6%9C%89%E6%9C%8D%E5%8A%A1%EF%BC%88%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C%EF%BC%89"><span class="toc-text">步骤 3：启动所有服务（后台运行）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-4%EF%BC%9A%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8"><span class="toc-text">步骤 4：查看镜像列表</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-5%EF%BC%9A%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%A1%8C%E4%B8%AD%E5%AE%B9%E5%99%A8"><span class="toc-text">步骤 5：查看运行中容器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%AD%A5%E9%AA%A4-6%EF%BC%9A%E9%AA%8C%E8%AF%81%E9%A1%B9%E7%9B%AE%E8%AE%BF%E9%97%AE"><span class="toc-text">步骤 6：验证项目访问</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/96a41905/" title="SpringCloud"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/22/68d0d3997e0e5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SpringCloud"/></a><div class="content"><a class="title" href="/posts/96a41905/" title="SpringCloud">SpringCloud</a><time datetime="2025-09-21T02:59:21.000Z" title="发表于 2025-09-21 10:59:21">2025-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/5c266b64/" title="Docker"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce3fb79337e.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker"/></a><div class="content"><a class="title" href="/posts/5c266b64/" title="Docker">Docker</a><time datetime="2025-09-20T04:06:42.000Z" title="发表于 2025-09-20 12:06:42">2025-09-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/67c8035e/" title="MyBatis-Plus"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce408b0f530.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MyBatis-Plus"/></a><div class="content"><a class="title" href="/posts/67c8035e/" title="MyBatis-Plus">MyBatis-Plus</a><time datetime="2025-09-19T07:31:42.000Z" title="发表于 2025-09-19 15:31:42">2025-09-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/54f9cb4a/" title="Spring Boot：自动配置的核心原理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce42c64e490.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Spring Boot：自动配置的核心原理"/></a><div class="content"><a class="title" href="/posts/54f9cb4a/" title="Spring Boot：自动配置的核心原理">Spring Boot：自动配置的核心原理</a><time datetime="2025-08-24T06:53:08.000Z" title="发表于 2025-08-24 14:53:08">2025-08-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/48bcc160/" title="解决Hexo相册滚动时图片消失的问题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://a1.boltp.com/2025/09/20/68ce439c24059.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="解决Hexo相册滚动时图片消失的问题"/></a><div class="content"><a class="title" href="/posts/48bcc160/" title="解决Hexo相册滚动时图片消失的问题">解决Hexo相册滚动时图片消失的问题</a><time datetime="2025-08-22T07:06:05.000Z" title="发表于 2025-08-22 15:06:05">2025-08-22</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By xw</span></div><div class="footer_custom_text"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://haiyong.site/img/icp.png"><a href="https://beian.miit.gov.cn/#/Integrated/index" style="color:black" target="_blank">豫ICP备147号-1</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"COMMENT_PLACEHOLDER":"来留下你的精彩评论吧！输入 QQ 号还能自动显示邮箱和头像哦～"}

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.xwybq.top',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.xwybq.top',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="/js/weather.js"></script><script src="/styles/fish.js"></script><script type="text/javascript" src="/js/daliyuer.js"></script><div class="aplayer no-destroy" data-id="732801999" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="list" data-preload="none" data-autoplay="false" muted></div><script src="/js/beauty.js"></script><script src="/js/canvas-nest.js"></script><script src="/js/foot.js"></script><script src="/js/happy-title.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script>(() => {
  const destroyAplayer = () => {
    if (window.aplayers) {
      for (let i = 0; i < window.aplayers.length; i++) {
        if (!window.aplayers[i].options.fixed) {
          window.aplayers[i].destroy()
        }
      }
    }
  }

  const runMetingJS = () => {
    typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()
  }

  btf.addGlobalFn('pjaxSend', destroyAplayer, 'destroyAplayer')
  btf.addGlobalFn('pjaxComplete', loadMeting, 'runMetingJS')
})()</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      false
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="请输入内容" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1500ms');
    arr[i].setAttribute('data-wow-delay', '0ms');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1500ms');
    arr[i].setAttribute('data-wow-delay', '0ms');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('container');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '1500ms');
    arr[i].setAttribute('data-wow-delay', '0ms');
    arr[i].setAttribute('data-wow-offset', '0');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":130,"height":270,"hOffset":40,"vOffset":-40},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>