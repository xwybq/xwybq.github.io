<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>xwçš„å¦™å¦™å±‹</title>
  
  
  <link href="https://www.xwybq.top/atom.xml" rel="self"/>
  
  <link href="https://www.xwybq.top/"/>
  <updated>2026-01-10T11:16:39.941Z</updated>
  <id>https://www.xwybq.top/</id>
  
  <author>
    <name>xw</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>xwçš„é€†å¤©bugæ—¥è®°</title>
    <link href="https://www.xwybq.top/posts/b0c912a0/"/>
    <id>https://www.xwybq.top/posts/b0c912a0/</id>
    <published>2026-01-10T10:59:03.000Z</published>
    <updated>2026-01-10T11:16:39.941Z</updated>
    
    <content type="html"><![CDATA[<h3 id="2026-01-10-19-13-13">2026-01-10 19:13:13</h3><p>åšäº‘å›¾åº“é¡¹ç›®æ—¶é‡åˆ°ä¸ªé—®é¢˜ï¼šé‡æ–°ä¸Šä¼ å›¾ç‰‡åï¼Œå¦‚æœå›¾ç‰‡ä½“ç§¯è¿‡å°ï¼ŒæŒ‰é€»è¾‘æœ¬è¯¥æŠŠç¼©ç•¥å›¾å­—æ®µæ¸…ç©ºï¼ˆè®¾ä¸º <code>null</code>ï¼‰ï¼Œä½†å‰ç«¯é¦–é¡µå±•ç¤ºçš„è¿˜æ˜¯æ—§å›¾ç‰‡çš„ç¼©ç•¥å›¾ã€‚æˆ‘è°ƒè¯•äº†å‰ç«¯æ¥å£ï¼Œå‘ç°æ¥å£è¿”å›çš„å“åº”æ•°æ®é‡Œç¼©ç•¥å›¾ç¡®å®æ˜¯ <code>null</code>ï¼Œæ²¡é—®é¢˜ï¼Œä½†æ•°æ®åº“é‡Œå­˜çš„ä¾ç„¶æ˜¯åŸæ¥çš„ç¼©ç•¥å›¾å€¼ã€‚<br>åå¤æ’æŸ¥åæ‰å‘ç°æ ¹æºï¼š<code>saveOrUpdate</code> æ–¹æ³•ä¼šè‡ªåŠ¨å¿½ç•¥å€¼ä¸º <code>null</code> çš„å­—æ®µï¼Œå¯¼è‡´ç”Ÿæˆçš„ <code>update SQL</code> è¯­å¥é‡Œæ ¹æœ¬æ²¡æœ‰ <code>thumbnailUrl</code> è¿™ä¸ªå­—æ®µï¼Œè‡ªç„¶æ²¡æ³•æŠŠæ•°æ®åº“é‡Œçš„å€¼æ”¹æˆ <code>null</code>ã€‚åæ¥æˆ‘ç»™ <code>thumbnailUrl</code> å­—æ®µåŠ ä¸Š <code>@TableField (updateStrategy = FieldStrategy.ALWAYS)</code> æ³¨è§£ï¼Œé—®é¢˜å°±è§£å†³äº†ã€‚ç°åœ¨å›å¤´çœ‹ï¼Œæ„Ÿè§‰è‡ªå·±è¿™æ’æŸ¥è¿‡ç¨‹è¿˜æŒº â€œé€†å¤©â€ çš„ğŸ˜‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;2026-01-10-19-13-13&quot;&gt;2026-01-10 19:13:13&lt;/h3&gt;
&lt;p&gt;åšäº‘å›¾åº“é¡¹ç›®æ—¶é‡åˆ°ä¸ªé—®é¢˜ï¼šé‡æ–°ä¸Šä¼ å›¾ç‰‡åï¼Œå¦‚æœå›¾ç‰‡ä½“ç§¯è¿‡å°ï¼ŒæŒ‰é€»è¾‘æœ¬è¯¥æŠŠç¼©ç•¥å›¾å­—æ®µæ¸…ç©ºï¼ˆè®¾ä¸º &lt;code&gt;null&lt;/code&gt;ï¼‰ï¼Œä½†å‰ç«¯é¦–é¡µå±•ç¤ºçš„è¿˜æ˜¯æ—§å›¾ç‰‡çš„ç¼©ç•¥å›¾</summary>
      
    
    
    
    <category term="Java" scheme="https://www.xwybq.top/categories/Java/"/>
    
    
    <category term="bug" scheme="https://www.xwybq.top/tags/bug/"/>
    
  </entry>
  
  <entry>
    <title>Vue2+3</title>
    <link href="https://www.xwybq.top/posts/f8e09374/"/>
    <id>https://www.xwybq.top/posts/f8e09374/</id>
    <published>2025-12-26T08:48:20.000Z</published>
    <updated>2025-12-26T12:43:07.629Z</updated>
    
    <content type="html"><![CDATA[<h1>ç¬¬ä¸€å¤©</h1><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦Vueï¼Ÿ">ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦Vueï¼Ÿ</h2><p>å¦‚æœä½ æƒ³åšå‰ç«¯å¼€å‘ï¼ŒVueå‡ ä¹æ˜¯ç»•ä¸å¼€çš„æŠ€èƒ½ã€‚ä¸ºå•¥å‘¢ï¼Ÿ</p><ul><li><strong>å‰ç«¯å¿…å¤‡</strong>ï¼šç°åœ¨å‰ç«¯å²—ä½æ‹›è˜ï¼ŒVueæ˜¯é«˜é¢‘è¦æ±‚çš„æŠ€èƒ½</li><li><strong>åº”ç”¨å¹¿æ³›</strong>ï¼šå¤§éƒ¨åˆ†äº’è”ç½‘å…¬å¸ï¼ˆæ¯”å¦‚é˜¿é‡Œã€è…¾è®¯ã€å­—èŠ‚ç­‰ï¼‰éƒ½åœ¨ä½¿ç”¨Vueå¼€å‘é¡¹ç›®</li><li><strong>æé«˜æ•ˆç‡</strong>ï¼šç”¨Vueèƒ½å°‘å†™å¾ˆå¤šé‡å¤ä»£ç ï¼Œè®©å¼€å‘å˜å¿«</li><li><strong>è–ªèµ„å‹å¥½</strong>ï¼šæŒæ¡Vueï¼ˆå°¤å…¶æ˜¯Vue2+Vue3ï¼‰æ˜¯æ‹¿é«˜è–ªçš„åŠ åˆ†é¡¹</li></ul><h2 id="äºŒã€ä»€ä¹ˆæ˜¯Vueï¼Ÿ">äºŒã€ä»€ä¹ˆæ˜¯Vueï¼Ÿ</h2><p>Vueï¼ˆè¯»éŸ³ç±»ä¼¼&quot;view&quot;ï¼‰æ˜¯ä¸€å¥—<strong>æ„å»ºç”¨æˆ·ç•Œé¢</strong>çš„<strong>æ¸è¿›å¼æ¡†æ¶</strong>ã€‚</p><h3 id="1-ä»€ä¹ˆæ˜¯-æ„å»ºç”¨æˆ·ç•Œé¢-ï¼Ÿ">1. ä»€ä¹ˆæ˜¯&quot;æ„å»ºç”¨æˆ·ç•Œé¢&quot;ï¼Ÿ</h3><p>ç®€å•è¯´å°±æ˜¯ï¼šåŸºäºæ•°æ®è‡ªåŠ¨ç”Ÿæˆç”¨æˆ·èƒ½çœ‹åˆ°çš„é¡µé¢ã€‚æ¯”å¦‚ä½ æœ‰ä¸ªæ•°æ®<code>msg: &quot;ä½ å¥½&quot;</code>ï¼ŒVueèƒ½å¸®ä½ æŠŠè¿™ä¸ªæ–‡å­—æ˜¾ç¤ºåˆ°é¡µé¢ä¸Šï¼Œä¸ç”¨ä½ æ‰‹åŠ¨æ“ä½œDOMã€‚</p><h3 id="2-ä»€ä¹ˆæ˜¯-æ¸è¿›å¼-ï¼Ÿ">2. ä»€ä¹ˆæ˜¯&quot;æ¸è¿›å¼&quot;ï¼Ÿ</h3><p>å°±æ˜¯å¯ä»¥&quot;å­¦ä¸€ç‚¹ç”¨ä¸€ç‚¹&quot;ï¼Œä¸ç”¨ä¸€æ¬¡æ€§å­¦å®Œæ‰€æœ‰å†…å®¹ã€‚æ¯”å¦‚ï¼š</p><ul><li>åªæƒ³æ”¹é¡µé¢çš„ä¸€å°éƒ¨åˆ†ï¼Ÿç”¨Vueæ ¸å¿ƒåŒ…å°±è¡Œ</li><li>æƒ³å¼€å‘æ•´ä¸ªç½‘ç«™ï¼Ÿå†åŠ ä¸ŠVueæ’ä»¶å’Œå·¥ç¨‹åŒ–å·¥å…·å°±è¡Œ</li></ul><h3 id="3-ä»€ä¹ˆæ˜¯-æ¡†æ¶-ï¼Ÿ">3. ä»€ä¹ˆæ˜¯&quot;æ¡†æ¶&quot;ï¼Ÿ</h3><p>æ¡†æ¶æ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œå°±åƒç›–æˆ¿å­çš„&quot;æ¯›å¯æˆ¿&quot;â€”â€”å·²ç»æœ‰äº†åŸºæœ¬ç»“æ„ï¼Œä½ åªéœ€è¦æŒ‰è§„åˆ™æ·»ç –åŠ ç“¦ã€‚</p><p>å’Œ&quot;åº“&quot;ï¼ˆæ¯”å¦‚axiosã€echartsï¼‰çš„åŒºåˆ«ï¼š</p><ul><li>åº“æ˜¯&quot;å·¥å…·ç®±&quot;ï¼Œéœ€è¦ä½ è‡ªå·±å†³å®šæ€ä¹ˆç”¨</li><li>æ¡†æ¶æ˜¯&quot;åŠæˆå“æˆ¿å­&quot;ï¼Œä½ å¾—æŒ‰å®ƒçš„è§„åˆ™æ¥è£…ä¿®</li></ul><h2 id="ä¸‰ã€åˆ›å»ºVueå®ä¾‹ï¼š4æ­¥æå®š">ä¸‰ã€åˆ›å»ºVueå®ä¾‹ï¼š4æ­¥æå®š</h2><p>æƒ³è®©Vueå¸®ä½ å¹²æ´»ï¼Œå¾—å…ˆåˆ›å»ºä¸€ä¸ªVueå®ä¾‹ã€‚æ ¸å¿ƒæ­¥éª¤æœ‰4æ­¥ï¼š</p><ol><li><strong>å‡†å¤‡å®¹å™¨</strong>ï¼šåœ¨HTMLé‡Œç•™ä¸€å—åœ°æ–¹è®©Vueç®¡ç†</li><li><strong>å¼•å…¥VueåŒ…</strong>ï¼šä»å®˜ç½‘æˆ–CDNå¼•å…¥Vueæ ¸å¿ƒæ–‡ä»¶</li><li><strong>åˆ›å»ºå®ä¾‹</strong>ï¼šç”¨<code>new Vue()</code>åˆ›å»ºå®ä¾‹</li><li><strong>é…ç½®å‚æ•°</strong>ï¼šå‘Šè¯‰Vueè¦ç®¡ç†å“ªå—åŒºåŸŸã€ç”¨ä»€ä¹ˆæ•°æ®</li></ol><h3 id="ç¤ºä¾‹ä»£ç ï¼š">ç¤ºä¾‹ä»£ç ï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 1. å‡†å¤‡å®¹å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span>&#123;% raw %&#125;&#123;&#123; msg &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- 2. å¼•å…¥VueåŒ…ï¼ˆå¼€å‘ç‰ˆæœ¬ï¼Œå¸¦è°ƒè¯•åŠŸèƒ½ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 3. åˆ›å»ºVueå®ä¾‹</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 4. é…ç½®å‚æ•°ï¼šelæŒ‡å®šç®¡ç†çš„å®¹å™¨ï¼ˆç”¨idé€‰æ‹©å™¨ï¼‰</span></span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-comment">// dataæä¾›æ•°æ®</span></span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">msg</span>: <span class="hljs-string">&#x27;Hello Vue!&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è¿è¡Œåï¼Œé¡µé¢ä¼šæ˜¾ç¤º<code>Hello Vue!</code>â€”â€” è¿™å°±æ˜¯ Vue åŸºäºæ•°æ®æ¸²æŸ“ç•Œé¢çš„åŸºæœ¬ç”¨æ³•ã€‚</p><h2 id="å››ã€æ’å€¼è¡¨è¾¾å¼ï¼š-swigï¿¼16-æ˜¾ç¤ºæ•°æ®">å››ã€æ’å€¼è¡¨è¾¾å¼ï¼š{{}} æ˜¾ç¤ºæ•°æ®</h2><p>æ’å€¼è¡¨è¾¾å¼æ˜¯ Vue æœ€åŸºç¡€çš„ â€œæ•°æ®å±•ç¤ºå·¥å…·â€ï¼Œç”¨<code>{{ è¡¨è¾¾å¼ }}</code>çš„å½¢å¼æŠŠæ•°æ®æ”¾åˆ°é¡µé¢ä¸Šã€‚</p><h3 id="1-èƒ½åšä»€ä¹ˆï¼Ÿ">1. èƒ½åšä»€ä¹ˆï¼Ÿ</h3><ul><li>æ˜¾ç¤ºå˜é‡ï¼š<code>{{ name }}</code></li><li>åšç®€å•è®¡ç®—ï¼š<code>{{ age + 1 }}</code></li><li>ä¸‰å…ƒè¿ç®—ï¼š<code>{{ score >= 60 ? 'åŠæ ¼' : 'ä¸åŠæ ¼' }}</code></li><li>è°ƒç”¨æ–¹æ³•ï¼š<code>{{ formatTime() }}</code>ï¼ˆæ–¹æ³•è¦å†™åœ¨<code>methods</code>é‡Œï¼‰</li></ul><h3 id="2-ç¤ºä¾‹ä»£ç ï¼š">2. ç¤ºä¾‹ä»£ç ï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å§“åï¼š&#123;% raw %&#125;&#123;&#123; uname &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹´é¾„ï¼š&#123;% raw %&#125;&#123;&#123; age + 1 &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çŠ¶æ€ï¼š&#123;% raw %&#125;&#123;&#123; isVip ? &#x27;ä¼šå‘˜&#x27; : &#x27;æ™®é€šç”¨æˆ·&#x27; &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¬¢è¿è¯­ï¼š&#123;% raw %&#125;&#123;&#123; getWelcome() &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">uname</span>: <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">isVip</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">getWelcome</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;æ¬¢è¿å›æ¥ï¼Œ&#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">uname</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="3-æ³¨æ„äº‹é¡¹ï¼š">3. æ³¨æ„äº‹é¡¹ï¼š</h3><ul><li>å¿…é¡»ç”¨<strong>è¡¨è¾¾å¼</strong>ï¼ˆèƒ½ç®—å‡ºç»“æœçš„ä»£ç ï¼‰ï¼Œä¸èƒ½å†™è¯­å¥ï¼ˆæ¯”å¦‚<code>if</code>ã€<code>for</code>ï¼‰</li><li>æ•°æ®å¿…é¡»åœ¨<code>data</code>é‡Œå®šä¹‰ï¼Œå¦åˆ™ä¼šæŠ¥é”™</li><li>ä¸èƒ½ç”¨åœ¨æ ‡ç­¾å±æ€§é‡Œï¼ˆæ¯”å¦‚<code>&lt;p title=&quot;{{ msg }}&quot;&gt;</code>ä¸è¡Œï¼‰</li></ul><h2 id="äº”ã€å“åº”å¼ç‰¹æ€§ï¼šæ•°æ®å˜ï¼Œé¡µé¢è‡ªåŠ¨å˜">äº”ã€å“åº”å¼ç‰¹æ€§ï¼šæ•°æ®å˜ï¼Œé¡µé¢è‡ªåŠ¨å˜</h2><p>Vue æœ€çˆ½çš„ç‰¹æ€§ä¹‹ä¸€ï¼šå½“ä½ ä¿®æ”¹æ•°æ®æ—¶ï¼Œé¡µé¢ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œä¸ç”¨æ‰‹åŠ¨æ“ä½œ DOMã€‚</p><h3 id="1-æ€ä¹ˆç”¨ï¼Ÿ">1. æ€ä¹ˆç”¨ï¼Ÿ</h3><ul><li><strong>è®¿é—®æ•°æ®</strong>ï¼šç”¨<code>å®ä¾‹.å±æ€§å</code>ï¼Œæ¯”å¦‚<code>app.uname</code>ï¼ˆåœ¨æ§åˆ¶å°é‡Œå¯ä»¥ç›´æ¥è¾“ï¼‰</li><li><strong>ä¿®æ”¹æ•°æ®</strong>ï¼šç”¨<code>å®ä¾‹.å±æ€§å = æ–°å€¼</code>ï¼Œæ¯”å¦‚<code>app.age = 19</code>ï¼Œé¡µé¢ä¼šè‡ªåŠ¨æ˜¾ç¤º 19</li></ul><h3 id="ç¤ºä¾‹ä»£ç ï¼š-2">ç¤ºä¾‹ä»£ç ï¼š</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰æ•°é‡ï¼š&#123;% raw %&#125;&#123;&#123; count &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">count</span>: <span class="hljs-number">10</span></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨æ§åˆ¶å°è¾“å…¥<code>app.count = 20</code>ï¼Œé¡µé¢ä¼šç«‹åˆ»æ˜¾ç¤º â€œå½“å‰æ•°é‡ï¼š20â€ã€‚</p><h2 id="å…­ã€Vue-å¼€å‘è€…å·¥å…·ï¼šè°ƒè¯•å¥½å¸®æ‰‹">å…­ã€Vue å¼€å‘è€…å·¥å…·ï¼šè°ƒè¯•å¥½å¸®æ‰‹</h2><p>å†™ Vue ä»£ç æ—¶ï¼Œç”¨ä¸“é—¨çš„è°ƒè¯•å·¥å…·èƒ½è®©ä½ æ›´æ¸…æ¥šæ•°æ®å˜åŒ–ã€‚</p><h3 id="å®‰è£…æ–¹æ³•ï¼š">å®‰è£…æ–¹æ³•ï¼š</h3><ol><li>æ¨èç”¨ â€œæç®€æ’ä»¶â€ ç½‘ç«™ï¼ˆ<a href="https://chrome.zzzmh.cn/%EF%BC%89%E6%90%9C%E7%B4%A2">https://chrome.zzzmh.cn/ï¼‰æœç´¢</a> â€œVue Devtoolsâ€ ä¸‹è½½</li><li>ä¸‹è½½åï¼ŒæŠŠæ’ä»¶æ‹–åˆ° Chrome çš„æ‰©å±•ç¨‹åºé¡µé¢ï¼ˆæ‰“å¼€ Chromeï¼Œåœ°å€æ è¾“<code>chrome://extensions/</code>ï¼‰</li></ol><h3 id="æ€ä¹ˆç”¨ï¼Ÿ">æ€ä¹ˆç”¨ï¼Ÿ</h3><p>æ‰“å¼€é¡µé¢åæŒ‰ F12ï¼Œä¼šå¤šä¸€ä¸ª â€œVueâ€ æ ‡ç­¾ï¼Œé‡Œé¢èƒ½çœ‹åˆ°å½“å‰ Vue å®ä¾‹çš„æ•°æ®ã€æ–¹æ³•ç­‰ï¼Œä¿®æ”¹æ•°æ®ä¹Ÿèƒ½å®æ—¶çœ‹åˆ°æ•ˆæœã€‚</p><h2 id="ä¸ƒã€å¸¸ç”¨æŒ‡ä»¤ï¼šç®€åŒ–-DOM-æ“ä½œ">ä¸ƒã€å¸¸ç”¨æŒ‡ä»¤ï¼šç®€åŒ– DOM æ“ä½œ</h2><p>æŒ‡ä»¤æ˜¯ Vue æä¾›çš„ç‰¹æ®Šæ ‡ç­¾å±æ€§ï¼ˆå¸¦<code>v-</code>å‰ç¼€ï¼‰ï¼Œèƒ½å¸®ä½ å¿«é€Ÿæ“ä½œ DOMã€‚å¸¸ç”¨çš„æœ‰ 6 ç±»ï¼š</p><h3 id="1-å†…å®¹æ¸²æŸ“æŒ‡ä»¤ï¼šæ˜¾ç¤ºæ–‡æœ¬-HTML">1. å†…å®¹æ¸²æŸ“æŒ‡ä»¤ï¼šæ˜¾ç¤ºæ–‡æœ¬ / HTML</h3><ul><li><p><strong>v-text</strong>ï¼šç±»ä¼¼<code>innerText</code>ï¼Œä¼šè¦†ç›–æ ‡ç­¾åŸæœ‰å†…å®¹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span>åŸæ¥çš„æ–‡å­—ä¼šè¢«è¦†ç›–<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>v-html</strong>ï¼šç±»ä¼¼<code>innerHTML</code>ï¼Œèƒ½è§£æ HTML æ ‡ç­¾</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;richText&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">richText</span>: <span class="hljs-string">&#x27;&lt;strong&gt;åŠ ç²—çš„æ–‡å­—&lt;/strong&gt;&#x27;</span> <span class="hljs-comment">// é¡µé¢ä¼šæ˜¾ç¤ºåŠ ç²—çš„æ–‡å­—</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼šæ§åˆ¶å…ƒç´ æ˜¾éš">2. æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤ï¼šæ§åˆ¶å…ƒç´ æ˜¾éš</h3><ul><li><p><strong>v-show</strong>ï¼šé€šè¿‡<code>display: none</code>æ§åˆ¶æ˜¾éšï¼ˆé€‚åˆé¢‘ç¹åˆ‡æ¢ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isShow&quot;</span>&gt;</span>æˆ‘ä¼šæ ¹æ®isShowæ˜¾éš<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>v-if</strong>ï¼šç›´æ¥æ·»åŠ  / åˆ é™¤å…ƒç´ ï¼ˆé€‚åˆä¸é¢‘ç¹åˆ‡æ¢ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isLogin&quot;</span>&gt;</span>å·²ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>v-else / v-else-if</strong>ï¼šé…åˆ v-if åšå¤šæ¡ä»¶åˆ¤æ–­</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;score &gt;= 90&quot;</span>&gt;</span>ä¼˜ç§€<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;score &gt;= 60&quot;</span>&gt;</span>åŠæ ¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-else</span>&gt;</span>ä¸åŠæ ¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-äº‹ä»¶ç»‘å®šæŒ‡ä»¤ï¼šv-onï¼ˆç®€å†™-ï¼‰">3. äº‹ä»¶ç»‘å®šæŒ‡ä»¤ï¼šv-onï¼ˆç®€å†™ @ï¼‰</h3><p>ç»™å…ƒç´ ç»‘å®šäº‹ä»¶ï¼ˆç‚¹å‡»ã€è¾“å…¥ç­‰ï¼‰ï¼Œè¯­æ³•<code>v-on:äº‹ä»¶å=&quot;å¤„ç†é€»è¾‘&quot;</code>ï¼Œç®€å†™<code>@äº‹ä»¶å=&quot;å¤„ç†é€»è¾‘&quot;</code>ã€‚</p><ul><li><p><strong>ç›´æ¥å†™ç®€å•é€»è¾‘</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;count++&quot;</span>&gt;</span>ç‚¹æˆ‘åŠ 1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;% raw %&#125;&#123;&#123; count &#125;&#125;&#123;% endraw %&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>è°ƒç”¨æ–¹æ³•</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sayHi&quot;</span>&gt;</span>æ‰“æ‹›å‘¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Vue&#x27;</span> &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">sayHi</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;ä½ å¥½ï¼Œ&#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>) <span class="hljs-comment">// æ–¹æ³•é‡Œç”¨thisè®¿é—®æ•°æ®</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ä¼ å‚æ•°</strong>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;buy(&#x27;å¯ä¹&#x27;, 5)&quot;</span>&gt;</span>ä¹°å¯ä¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">buy</span>(<span class="hljs-params">name, price</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä¹°äº†<span class="hljs-subst">$&#123;name&#125;</span>ï¼ŒèŠ±äº†<span class="hljs-subst">$&#123;price&#125;</span>å…ƒ`</span>)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="4-å±æ€§ç»‘å®šæŒ‡ä»¤ï¼šv-bindï¼ˆç®€å†™-ï¼‰">4. å±æ€§ç»‘å®šæŒ‡ä»¤ï¼šv-bindï¼ˆç®€å†™:ï¼‰</h3><p>åŠ¨æ€è®¾ç½®æ ‡ç­¾å±æ€§ï¼ˆæ¯”å¦‚<code>src</code>ã€<code>class</code>ã€<code>style</code>ï¼‰ï¼Œè¯­æ³•<code>v-bind:å±æ€§å=&quot;å˜é‡&quot;</code>ï¼Œç®€å†™<code>:å±æ€§å=&quot;å˜é‡&quot;</code>ã€‚</p><h3 id="ç¤ºä¾‹ä»£ç ï¼šåŠ¨æ€è®¾ç½®å›¾ç‰‡åœ°å€">ç¤ºä¾‹ä»£ç ï¼šåŠ¨æ€è®¾ç½®å›¾ç‰‡åœ°å€</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imgUrl&quot;</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;imgTitle&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">imgUrl</span>: <span class="hljs-string">&#x27;./pic.jpg&#x27;</span>, <span class="hljs-comment">// å›¾ç‰‡è·¯å¾„</span></span><br><span class="language-javascript">    <span class="hljs-attr">imgTitle</span>: <span class="hljs-string">&#x27;è¿™æ˜¯ä¸€å¼ å›¾ç‰‡&#x27;</span></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ï¼šv-for">5. åˆ—è¡¨æ¸²æŸ“æŒ‡ä»¤ï¼šv-for</h3><p>å¾ªç¯æ¸²æŸ“åˆ—è¡¨ï¼Œè¯­æ³•<code>v-for=&quot;(item, index) in æ•°ç»„&quot;</code>ï¼Œè¦é…åˆ<code>:key</code>ä½¿ç”¨ï¼ˆæé«˜æ€§èƒ½ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹ä»£ç ï¼šæ¸²æŸ“ä¹¦ç±åˆ—è¡¨">ç¤ºä¾‹ä»£ç ï¼šæ¸²æŸ“ä¹¦ç±åˆ—è¡¨</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(book, index) in books&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;book.id&quot;</span>&gt;</span><br>    ç¬¬&#123;% raw %&#125;&#123;&#123; index+1 &#125;&#125;&#123;% endraw %&#125;æœ¬ï¼š&#123;% raw %&#125;&#123;&#123; book.name &#125;&#125;&#123;% endraw %&#125; - ä½œè€…&#123;% raw %&#125;&#123;&#123; book.author &#125;&#125;&#123;% endraw %&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">books</span>: [</span><br><span class="language-javascript">      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ã€Šçº¢æ¥¼æ¢¦ã€‹&#x27;</span>, <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;æ›¹é›ªèŠ¹&#x27;</span> &#125;,</span><br><span class="language-javascript">      &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ã€Šè¥¿æ¸¸è®°ã€‹&#x27;</span>, <span class="hljs-attr">author</span>: <span class="hljs-string">&#x27;å´æ‰¿æ©&#x27;</span> &#125;</span><br><span class="language-javascript">    ]</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼š<code>:key</code>çš„å€¼å¿…é¡»å”¯ä¸€ï¼ˆæ¨èç”¨æ•°æ®çš„ idï¼Œä¸ç”¨ indexï¼‰ã€‚</p><h3 id="6-åŒå‘ç»‘å®šæŒ‡ä»¤ï¼šv-model">6. åŒå‘ç»‘å®šæŒ‡ä»¤ï¼šv-model</h3><p>ä¸“é—¨ç»™è¡¨å•å…ƒç´ ï¼ˆè¾“å…¥æ¡†ã€å¤é€‰æ¡†ç­‰ï¼‰ç”¨ï¼Œå®ç° â€œæ•°æ®å˜ï¼Œè¡¨å•å˜ï¼›è¡¨å•å˜ï¼Œæ•°æ®å˜â€ã€‚</p><h3 id="ç¤ºä¾‹ä»£ç ï¼šç™»å½•è¡¨å•">ç¤ºä¾‹ä»£ç ï¼šç™»å½•è¡¨å•</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  è´¦æˆ·ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;login&quot;</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;reset&quot;</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">username</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">login</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ç™»å½•ä¿¡æ¯ï¼š&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span>)</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">reset</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span> = <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-comment">// æ¸…ç©ºæ•°æ®ï¼Œè¡¨å•ä¼šè‡ªåŠ¨æ¸…ç©º</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="å…«ã€å®æˆ˜å°æ¡ˆä¾‹">å…«ã€å®æˆ˜å°æ¡ˆä¾‹</h2><h3 id="1-å›¾ç‰‡åˆ‡æ¢å™¨">1. å›¾ç‰‡åˆ‡æ¢å™¨</h3><p>åŠŸèƒ½ï¼šç‚¹å‡» â€œä¸Šä¸€é¡µâ€&quot; ä¸‹ä¸€é¡µ &quot; åˆ‡æ¢å›¾ç‰‡ï¼Œé¦–å°¾é¡µéšè—å¯¹åº”æŒ‰é’®ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;prev&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;index &gt; 0&quot;</span>&gt;</span>ä¸Šä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;list[index]&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;å›¾ç‰‡&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 300px;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;next&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;index &lt; list.length - 1&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">  <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">list</span>: [ <span class="hljs-comment">// å›¾ç‰‡è·¯å¾„æ•°ç»„ï¼ˆå¯æ›¿æ¢ä¸ºè‡ªå·±çš„å›¾ç‰‡è·¯å¾„ï¼‰</span></span><br><span class="language-javascript">      <span class="hljs-string">&#x27;https://picsum.photos/200/300?1&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-string">&#x27;https://picsum.photos/200/300?2&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-string">&#x27;https://picsum.photos/200/300?3&#x27;</span></span><br><span class="language-javascript">    ],</span><br><span class="language-javascript">    <span class="hljs-attr">index</span>: <span class="hljs-number">0</span> <span class="hljs-comment">// å½“å‰æ˜¾ç¤ºçš„å›¾ç‰‡ç´¢å¼•</span></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">prev</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>-- &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">next</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">this</span>.<span class="hljs-property">index</span>++ &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-å°é»‘è®°äº‹æœ¬">2. å°é»‘è®°äº‹æœ¬</h3><p>åŠŸèƒ½ï¼šæ·»åŠ ç¬”è®°ã€åˆ é™¤ç¬”è®°ã€ç»Ÿè®¡æ•°é‡ã€æ¸…ç©ºæ‰€æœ‰ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;zh-CN&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å°é»‘è®°äº‹æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;</span><br><span class="language-css">      <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">250px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">list-style</span>: none;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">      <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">      <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">      <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ff4444</span>;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">      <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-class">.footer</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å°é»‘è®°äº‹æœ¬<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> </span><br><span class="hljs-tag">      <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> </span><br><span class="hljs-tag">      <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;note&quot;</span> </span><br><span class="hljs-tag">      @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;addNote&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥ç¬”è®°å†…å®¹&quot;</span></span><br><span class="hljs-tag">    &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addNote&quot;</span>&gt;</span>æ·»åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(item, i) in notes&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span>&gt;</span><br>        &#123;% raw %&#125;&#123;&#123; item &#125;&#125;&#123;% endraw %&#125;<br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;delNote(i)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;footer&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;notes.length &gt; 0&quot;</span>&gt;</span><br>      å…±&#123;% raw %&#125;&#123;&#123; notes.length &#125;&#125;&#123;% endraw %&#125;æ¡ç¬”è®°<br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clearAll&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-left: 10px;&quot;</span>&gt;</span>æ¸…ç©º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;footer&quot;</span> <span class="hljs-attr">v-else</span>&gt;</span>æš‚æ— ç¬”è®°<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">note</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">notes</span>: [<span class="hljs-string">&#x27;å­¦ä¹ Vue&#x27;</span>, <span class="hljs-string">&#x27;å†™æŠ€æœ¯åšå®¢&#x27;</span>] <span class="hljs-comment">// åˆå§‹ç¬”è®°</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">addNote</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// ç©ºå†…å®¹ä¸æ·»åŠ </span></span><br><span class="language-javascript">          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">note</span>.<span class="hljs-title function_">trim</span>() === <span class="hljs-string">&#x27;&#x27;</span>) <span class="hljs-keyword">return</span></span><br><span class="language-javascript">          <span class="hljs-comment">// æ·»åŠ åˆ°æ•°ç»„</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">notes</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">note</span>)</span><br><span class="language-javascript">          <span class="hljs-comment">// æ¸…ç©ºè¾“å…¥æ¡†</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">note</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-title function_">delNote</span>(<span class="hljs-params">i</span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// åˆ é™¤ç¬¬iä¸ªå…ƒç´ </span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">notes</span>.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>)</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-title function_">clearAll</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-comment">// æ¸…ç©ºæ•°ç»„</span></span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">notes</span> = []</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="æ€»ç»“">æ€»ç»“</h2><p>Vue çš„æ ¸å¿ƒæ˜¯ â€œæ•°æ®é©±åŠ¨â€â€”â€” ä½ åªéœ€è¦å…³æ³¨æ•°æ®ï¼Œé¡µé¢æ¸²æŸ“äº¤ç»™ Vueã€‚è¿™ä¸€å¤©ä¸»è¦æ˜¯å­¦äº† Vue çš„åŸºç¡€æ¦‚å¿µã€æ ¸å¿ƒè¯­æ³•å’Œå®æˆ˜æ¡ˆä¾‹ï¼ŒæŒæ¡è¿™äº›åï¼Œå°±å¯ä»¥å¼€å§‹å¼€å‘ç®€å•çš„ Vue åº”ç”¨äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;ç¬¬ä¸€å¤©&lt;/h1&gt;
&lt;h2 id=&quot;ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦Vueï¼Ÿ&quot;&gt;ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦Vueï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚æœä½ æƒ³åšå‰ç«¯å¼€å‘ï¼ŒVueå‡ ä¹æ˜¯ç»•ä¸å¼€çš„æŠ€èƒ½ã€‚ä¸ºå•¥å‘¢ï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å‰ç«¯å¿…å¤‡&lt;/strong&gt;ï¼šç°åœ¨å‰ç«¯å²—ä½æ‹›è˜ï¼ŒVueæ˜¯é«˜é¢‘è¦æ±‚çš„æŠ€èƒ½&lt;/l</summary>
      
    
    
    
    <category term="å‰ç«¯" scheme="https://www.xwybq.top/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="Vue" scheme="https://www.xwybq.top/tags/Vue/"/>
    
  </entry>
  
  <entry>
    <title>åä¸ºODæœºè¯•é¢˜</title>
    <link href="https://www.xwybq.top/posts/566f2e7a/"/>
    <id>https://www.xwybq.top/posts/566f2e7a/</id>
    <published>2025-11-30T07:25:24.000Z</published>
    <updated>2025-12-16T07:17:32.375Z</updated>
    
    <content type="html"><![CDATA[<p><strong>åä¸º OD æœºè¯•æ€»ç»“</strong></p><ol><li>æ ¸å¿ƒæ•°æ®<br>ç¼–ç¨‹è¯­è¨€ï¼šJava<br>æ€»åˆ†ï¼š300 åˆ†ï¼ˆæ»¡åˆ†400åˆ†ï¼‰<br>å„é¢˜å¾—åˆ†æ‹†åˆ†ï¼š<br>ç¬¬ä¸€é¢˜ï¼š100 åˆ† Ã—90% = 90 åˆ†<br>ç¬¬äºŒé¢˜ï¼š100 åˆ† Ã—100% = 100 åˆ†<br>ç¬¬ä¸‰é¢˜ï¼š200 åˆ† Ã—55% = 110 åˆ†</li><li>åšé¢˜æƒ…å†µ<br>è€ƒè¯•æ—¶æœ‰äº›ç´§å¼ ï¼Œéƒ¨åˆ†<code>API</code>å›å¿†è€—æ—¶äº›è®¸ã€‚<br>ç¬¬äºŒé¢˜ä¸ºçº¯<code>DFS</code>é¢˜ï¼Œè„‘å­æŠ½é£äº†ï¼Œè§£é¢˜æ€è·¯å¡é¡¿è¾ƒä¹…ã€‚<br>ç¬¬ä¸‰é¢˜ä¸ºæŠ½è±¡æ•°æ®ç»“æ„é¢˜ï¼Œæˆ‘åšçš„æ—¶å€™é¢˜ç›®å›¾ç‰‡æ— æ³•æ˜¾ç¤ºQAQï¼Œéœ€è‡ªè¡Œç»˜åˆ¶é€»è¾‘å›¾ã€‚</li></ol><h1>å­—ç¬¦ä¸²åˆ†å‰²</h1><h2 id="é¢˜ç›®æè¿°">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸²Sï¼Œå…¶è¢«Nä¸ªâ€˜-â€™åˆ†éš”æˆN+1ä¸ªå­ä¸²ï¼Œç»™å®šæ­£æ•´æ•°Kï¼Œè¦æ±‚é™¤ç¬¬ä¸€ä¸ªå­ä¸²å¤–ï¼Œå…¶ä½™çš„å­ä¸²éœ€å…ˆåˆå¹¶ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œå†æŒ‰æ¯Kä¸ªå­—ç¬¦ç»„æˆæ–°çš„å­ä¸²ï¼Œæ‰€æœ‰æ–°å­ä¸²ä¹‹é—´ç”¨â€˜-â€™åˆ†éš”ã€‚å¯¹äºæ¯ä¸ªæ–°ç»„æˆçš„å­ä¸²ï¼Œéœ€æŒ‰ä»¥ä¸‹è§„åˆ™è½¬æ¢å¤§å°å†™ï¼š</p><ol><li>è‹¥å­ä¸²ä¸­å°å†™å­—æ¯æ•°é‡ &gt; å¤§å†™å­—æ¯æ•°é‡ï¼šå°†æ‰€æœ‰å¤§å†™å­—æ¯è½¬æ¢ä¸ºå°å†™å­—æ¯ï¼›</li><li>è‹¥å­ä¸²ä¸­å¤§å†™å­—æ¯æ•°é‡ &gt; å°å†™å­—æ¯æ•°é‡ï¼šå°†æ‰€æœ‰å°å†™å­—æ¯è½¬æ¢ä¸ºå¤§å†™å­—æ¯ï¼›</li><li>è‹¥å¤§å°å†™å­—æ¯æ•°é‡ç›¸ç­‰ï¼šä¸åšè½¬æ¢ã€‚ æœ€ç»ˆå°†ç¬¬ä¸€ä¸ªå­ä¸²ä¸æ‰€æœ‰è½¬æ¢åçš„æ–°å­ä¸²ç”¨â€˜-â€™è¿æ¥ï¼Œè¾“å‡ºç»“æœã€‚</li></ol><h3 id="è¾“å…¥æ ¼å¼">è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥ä¸ºä¸¤è¡Œï¼Œç¬¬ä¸€è¡Œä¸ºæ­£æ•´æ•°Kï¼Œç¬¬äºŒè¡Œä¸ºéç©ºå­—ç¬¦ä¸²Sã€‚</p><h3 id="è¾“å‡ºæ ¼å¼">è¾“å‡ºæ ¼å¼</h3><p>è¾“å‡ºä¸ºè½¬æ¢åçš„å­—ç¬¦ä¸²ã€‚</p><h3 id="ç¤ºä¾‹">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹1</strong><br><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>12abc-abCABc-4aB@<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">12abc-abc-ABC-4aB-@<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹2</strong><br><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">12<br>12abc-abCABc-4aB@<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">12abc-abCABc4aB@<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-comment">// æ³¨æ„ç±»åå¿…é¡»ä¸º Main, ä¸è¦æœ‰ä»»ä½• package xxx ä¿¡æ¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-comment">// æ³¨æ„ hasNext å’Œ hasNextLine çš„åŒºåˆ«</span><br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123; <span class="hljs-comment">// æ³¨æ„ while å¤„ç†å¤šä¸ª case</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            String[] strings = sc.nextLine().split(<span class="hljs-string">&quot;-&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; strings.length; i++) &#123;<br>                s += strings[i];<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(strings[<span class="hljs-number">0</span>]);<br>            <span class="hljs-keyword">while</span> (s.length() - index &gt; k) &#123;<br>                sb.append(<span class="hljs-string">&quot;-&quot;</span> + check(s.substring(index, index + k)));<br>                index += k;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (sb.length() - index &gt; <span class="hljs-number">0</span>) &#123;<br>                sb.append(<span class="hljs-string">&quot;-&quot;</span> + check(s.substring(index)));<br>            &#125;<br>            System.out.println(sb.toString());<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">check</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">upperNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">lowerNum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> str.charAt(i);<br>            <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">&#x27;a&#x27;</span> &amp;&amp; ch &lt;= <span class="hljs-string">&#x27;z&#x27;</span>) &#123;<br>                lowerNum++;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">&#x27;A&#x27;</span> &amp;&amp; ch &lt;= <span class="hljs-string">&#x27;Z&#x27;</span>) &#123;<br>                upperNum++;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (lowerNum &gt; upperNum) &#123;<br>            <span class="hljs-keyword">return</span> str.toLowerCase();<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (lowerNum &lt; upperNum) &#123;<br>            <span class="hljs-keyword">return</span> str.toUpperCase();<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> str;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç»„æˆæœ€å¤§æ•°</h1><h2 id="é¢˜ç›®æè¿°-2">é¢˜ç›®æè¿°</h2><p>å°ç»„ä¸­æ¯ä½æˆå‘˜éƒ½æœ‰ä¸€å¼ å¡ç‰‡ï¼Œå¡ç‰‡ä¸Šæ˜¯ 6 ä½å†…çš„æ­£æ•´æ•°ã€‚å°†æ‰€æœ‰æˆå‘˜çš„å¡ç‰‡æ•°å­—è¿èµ·æ¥å¯ä»¥ç»„æˆå¤šç§ä¸åŒçš„æ•°å­—ï¼Œè¦æ±‚è®¡ç®—èƒ½ç»„æˆçš„æœ€å¤§æ•°å­—ã€‚</p><h3 id="è¾“å…¥æè¿°">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸ºç”¨ â€œ,â€ å·åˆ†å‰²çš„å¤šä¸ªæ­£æ•´æ•°å­—ç¬¦ä¸²ï¼Œæ— éœ€è€ƒè™‘éæ•°å­—å¼‚å¸¸æƒ…å†µï¼Œå°ç»„äººæ•°æœ€å¤š 25 äººã€‚</p><h3 id="è¾“å‡ºæè¿°">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºç»„æˆçš„æœ€å¤§æ•°å­—å­—ç¬¦ä¸²ã€‚</p><h3 id="ç¤ºä¾‹-2">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">22,221<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">22221<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4589,101,41425,9999<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">9999458941425101<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String[] strings = sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>);<br>            Arrays.sort(strings, (a, b) -&gt; (b + a).compareTo(a + b));<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">for</span> (String str : strings) &#123;<br>                sb.append(str);<br>            &#125;<br>            System.out.println(sb.toString());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç»Ÿè®¡å°„å‡»æ¯”èµ›æˆç»©</h1><h2 id="é¢˜ç›®æè¿°-3">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå°„å‡»æ¯”èµ›æˆç»©å•ï¼ŒåŒ…å«å¤šä¸ªé€‰æ‰‹è‹¥å¹²æ¬¡å°„å‡»çš„æˆç»©åˆ†æ•°ï¼Œè¯·å¯¹æ¯ä¸ªé€‰æ‰‹æŒ‰å…¶æœ€é«˜ä¸‰ä¸ªåˆ†æ•°ä¹‹å’Œè¿›è¡Œé™åºæ’åï¼Œè¾“å‡ºé™åºæ’ååçš„é€‰æ‰‹ id åºåˆ—ã€‚</p><h3 id="è¾“å…¥æè¿°-2">è¾“å…¥æè¿°</h3><p>è¾“å…¥ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•° Nï¼Œè¡¨ç¤ºè¯¥åœºæ¯”èµ›æ€»å…±è¿›è¡Œäº† N æ¬¡å°„å‡»ï¼Œäº§ç”Ÿ N ä¸ªæˆç»©åˆ†æ•°ï¼ˆ2&lt;=N&lt;=100ï¼‰</p><p>è¾“å…¥ç¬¬äºŒè¡Œï¼Œä¸€ä¸ªé•¿åº¦ä¸º N æ•´æ•°åºåˆ—ï¼Œè¡¨ç¤ºå‚ä¸æ¯æ¬¡å°„å‡»çš„é€‰æ‰‹ idï¼ˆ0&lt;=id&lt;=99ï¼‰</p><p>è¾“å…¥ç¬¬ä¸‰è¡Œï¼Œä¸€ä¸ªé•¿åº¦ä¸º N æ•´æ•°åºåˆ—ï¼Œè¡¨ç¤ºå‚ä¸æ¯æ¬¡å°„å‡»é€‰æ‰‹å¯¹åº”çš„æˆç»©ï¼ˆ0&lt;= æˆç»© &lt;=100ï¼‰</p><h3 id="è¾“å‡ºæè¿°-2">è¾“å‡ºæè¿°</h3><p>ç¬¦åˆé¢˜è®¾æ¡ä»¶çš„é™åºæ’ååçš„é€‰æ‰‹ ID åºåˆ—</p><h3 id="ç¤ºä¾‹-3">ç¤ºä¾‹</h3><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">31<br>3,3,7,4,4,4,4,7,7,3,5,5,5<br>53,80,68,24,39,76,66,16,100,55,53,80,55<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">5,3,7,4<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>è¯¥åœºå°„å‡»æ¯”èµ›è¿›è¡Œäº† 13 æ¬¡ï¼Œå‚èµ›çš„é€‰æ‰‹ä¸º {3,4,5,7}</p><p>3 å·é€‰æ‰‹æˆç»© 53,80,55 æœ€é«˜ä¸‰ä¸ªæˆç»©çš„å’Œä¸º 188</p><p>4 å·é€‰æ‰‹æˆç»© 24,39,76,66 æœ€é«˜ä¸‰ä¸ªæˆç»©çš„å’Œä¸º 205</p><p>5 å·é€‰æ‰‹æˆç»© 53,80,55 æœ€é«˜ä¸‰ä¸ªæˆç»©çš„å’Œä¸º 188</p><p>7 å·é€‰æ‰‹æˆç»© 68,16,100 æœ€é«˜ä¸‰ä¸ªæˆç»©çš„å’Œä¸º 184</p><p>æ¯”è¾ƒå„ä¸ªé€‰æ‰‹æœ€é«˜ 3 ä¸ªæˆç»©çš„å’Œï¼Œæœ‰ 4 å· &gt; 3 å· = 5 å· &gt; 7 å·ï¼Œç”±äº 3 å·å’Œ 5 å·æˆç»©ç›¸ç­‰ï¼Œä¸” id 5&gt;3ï¼Œæ‰€ä»¥è¾“å‡º 5,3,7,4</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            List&lt;Integer&gt;ids = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>)).map(<br>                                   Integer::parseInt).collect(Collectors.toList());<br>            List&lt;Integer&gt; scores = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>)).map(<br>                                       Integer::parseInt).collect(Collectors.toList());<br>            Map&lt;Integer, List&lt;Integer&gt;&gt;id_scores = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> ids.get(i);<br>                <span class="hljs-type">Integer</span> <span class="hljs-variable">score</span> <span class="hljs-operator">=</span> scores.get(i);<br>                List&lt;Integer&gt; list = id_scores.getOrDefault(id, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>                list.add(score);<br>                id_scores.put(id, list);<br>            &#125;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            id_scores.entrySet()<br>            .stream()<br>            .filter(x-&gt;x.getValue().size() &gt;= <span class="hljs-number">3</span>)<br>            .sorted((a, b)-&gt; &#123;<br>                <span class="hljs-type">int</span>  <span class="hljs-variable">asum</span> <span class="hljs-operator">=</span> sum(a.getValue());<br>                <span class="hljs-type">int</span>  <span class="hljs-variable">bsum</span> <span class="hljs-operator">=</span> sum(b.getValue());<br>                <span class="hljs-keyword">if</span> (asum == bsum) &#123;<br>                    <span class="hljs-keyword">return</span> b.getKey() - a.getKey();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">return</span> bsum - asum;<br>                &#125;<br>            &#125;)<br>            .map(Map.Entry::getKey)<br>            .forEach(x-&gt;sb.append(x).append(<span class="hljs-string">&quot;,&quot;</span>));<br>            System.out.println(sb.toString().substring(<span class="hljs-number">0</span>, sb.length() - <span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(List&lt;Integer&gt;list)</span> &#123;<br>        list.sort(Integer::compareTo);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> list.size() - <span class="hljs-number">1</span>; i &gt;= list.size() - <span class="hljs-number">3</span>; i--) &#123;<br>            ans += list.get(i);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å­—ç¬¦ä¸²åºåˆ—åˆ¤å®š</h1><h2 id="é¢˜ç›®æè¿°-4">é¢˜ç›®æè¿°</h2><p>è¾“å…¥ä¸¤ä¸ªå­—ç¬¦ä¸² S å’Œ Lï¼Œéƒ½åªåŒ…å«è‹±æ–‡å°å†™å­—æ¯ã€‚S é•¿åº¦ &lt;=100ï¼ŒL é•¿åº¦ &lt;=500,000ã€‚åˆ¤å®š S æ˜¯å¦æ˜¯ L çš„æœ‰æ•ˆå­ä¸²ï¼Œåˆ¤å®šè§„åˆ™å¦‚ä¸‹ï¼š</p><p>S ä¸­çš„æ¯ä¸ªå­—ç¬¦åœ¨ L ä¸­éƒ½èƒ½æ‰¾åˆ°ï¼ˆå¯ä»¥ä¸è¿ç»­ï¼‰ï¼Œä¸” S åœ¨ï¼¬ä¸­å­—ç¬¦çš„å‰åé¡ºåºä¸ S ä¸­é¡ºåºè¦ä¿æŒä¸€è‡´ã€‚</p><p>ï¼ˆä¾‹å¦‚ï¼ŒS=â€aceâ€ æ˜¯ L=â€abcdeâ€ çš„ä¸€ä¸ªå­åºåˆ—ä¸”æœ‰æ•ˆå­—ç¬¦æ˜¯ aã€cã€eï¼Œè€Œâ€aecâ€ ä¸æ˜¯æœ‰æ•ˆå­åºåˆ—ï¼Œä¸”æœ‰æ•ˆå­—ç¬¦åªæœ‰ aã€eï¼‰</p><h3 id="è¾“å…¥æè¿°-3">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸¤ä¸ªå­—ç¬¦ä¸² S å’Œ Lï¼Œéƒ½åªåŒ…å«è‹±æ–‡å°å†™å­—æ¯ã€‚S é•¿åº¦ &lt;=100ï¼ŒL é•¿åº¦ &lt;=500,000ã€‚å…ˆè¾“å…¥ Sï¼Œå†è¾“å…¥ Lï¼Œæ¯ä¸ªå­—ç¬¦ä¸²å ä¸€è¡Œã€‚</p><h3 id="è¾“å‡ºæè¿°-3">è¾“å‡ºæè¿°</h3><p>S ä¸²æœ€åä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦åœ¨ L ä¸­çš„ä½ç½®ã€‚ï¼ˆé¦–ä½ä» 0 å¼€å§‹è®¡ç®—ï¼Œæ— æœ‰æ•ˆå­—ç¬¦è¿”å› - 1ï¼‰</p><h3 id="ç¤ºä¾‹-4">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">ace<br>abcde<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">fgh<br>abcde<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-1<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">S</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">String</span> <span class="hljs-variable">L</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; L.length(); i++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">lch</span> <span class="hljs-operator">=</span> L.charAt(i);<br>                <span class="hljs-type">char</span> <span class="hljs-variable">sch</span> <span class="hljs-operator">=</span> S.charAt(j);<br>                <span class="hljs-keyword">if</span> (lch == sch) &#123;<br>                    j++;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (j == S.length()) &#123;<br>                    ans = i;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ•°æ®åˆ†ç±»</h1><h2 id="é¢˜ç›®æè¿°-5">é¢˜ç›®æè¿°</h2><p>å¯¹ä¸€ä¸ªæ•°æ® a è¿›è¡Œåˆ†ç±»ï¼Œåˆ†ç±»æ–¹æ³•ä¸ºï¼šæ­¤æ•°æ® aï¼ˆå››ä¸ªå­—èŠ‚å¤§å°ï¼‰çš„å››ä¸ªå­—èŠ‚ç›¸åŠ å¯¹ä¸€ä¸ªç»™å®šçš„å€¼ b å–æ¨¡ï¼Œå¦‚æœå¾—åˆ°çš„ç»“æœå°äºä¸€ä¸ªç»™å®šçš„å€¼ cï¼Œåˆ™æ•°æ® a ä¸ºæœ‰æ•ˆç±»å‹ï¼Œå…¶ç±»å‹ä¸ºå–æ¨¡çš„å€¼ï¼›å¦‚æœå¾—åˆ°çš„ç»“æœå¤§äºæˆ–è€…ç­‰äº cï¼Œåˆ™æ•°æ® a ä¸ºæ— æ•ˆç±»å‹ã€‚</p><p>ä¾‹å¦‚ï¼š</p><ol><li><p>ä¸€ä¸ªæ•°æ® a=0x01010101ï¼Œb=3ï¼ŒæŒ‰ç…§åˆ†ç±»æ–¹æ³•è®¡ç®— (0x01+0x01+0x01+0x01)%3=1</p><p>å¦‚æœ c=2ï¼Œåˆ™æ­¤ a ä¸ºæœ‰æ•ˆç±»å‹ï¼Œå…¶ç±»å‹ä¸º 1</p><p>å¦‚æœ c=1ï¼Œåˆ™æ­¤ a ä¸ºæ— æ•ˆç±»å‹</p></li><li><p>ä¸€ä¸ªæ•°æ® a=0x01010103ï¼Œb=3ï¼ŒæŒ‰ç…§åˆ†ç±»æ–¹æ³•è®¡ç®— (0x01+0x01+0x01+0x03)%3=0</p><p>å¦‚æœ c=2ï¼Œåˆ™æ­¤ a ä¸ºæœ‰æ•ˆç±»å‹ï¼Œå…¶ç±»å‹ä¸º 0</p><p>å¦‚æœ c=0ï¼Œåˆ™æ­¤ a ä¸ºæ— æ•ˆç±»å‹</p></li></ol><h3 id="è¾“å…¥æè¿°-4">è¾“å…¥æè¿°</h3><p>è¾“å…¥ 12 ä¸ªæ•°æ®ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªæ•°æ®ä¸º c</li><li>ç¬¬äºŒä¸ªæ•°æ®ä¸º b</li><li>å‰©ä½™ 10 ä¸ªæ•°æ®ä¸ºéœ€è¦åˆ†ç±»çš„æ•°æ®</li></ul><h3 id="è¾“å‡ºæè¿°-4">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæœ€å¤šæ•°æ®çš„æœ‰æ•ˆç±»å‹æœ‰å¤šå°‘ä¸ªæ•°æ®</p><h3 id="ç¤ºä¾‹-5">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 4 256 257 258 259 260 261 262 263 264 265<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>10 ä¸ªæ•°æ® 4 ä¸ªå­—èŠ‚ç›¸åŠ åçš„ç»“æœåˆ†åˆ«ä¸º 1 2 3 4 5 6 7 8 9 10</p><p>æ•…å¯¹ 4 å–æ¨¡çš„ç»“æœä¸º 1 2 3 0 1 2 3 0 1 2</p><p>c ä¸º 3ï¼Œæ‰€ä»¥ 0ã€1ã€2 éƒ½æ˜¯æœ‰æ•ˆç±»å‹</p><p>ç±»å‹ä¸º 1 å’Œ 2 çš„æœ‰ 3 ä¸ªæ•°æ®ï¼Œç±»å‹ä¸º 0 çš„åªæœ‰ 2 ä¸ªæ•°æ®ï¼Œæ•…è¾“å‡º 3</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 4 256 257 258 259 260 261 262 263 264 265<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>10 ä¸ªæ•°æ® 4 ä¸ªå­—èŠ‚ç›¸åŠ åçš„ç»“æœåˆ†åˆ«ä¸º 1 2 3 4 5 6 7 8 9 10</p><p>æ•…å¯¹ 4 å–æ¨¡çš„ç»“æœä¸º 1 2 3 0 1 2 3 0 1 2</p><p>c ä¸º 1ï¼Œæ‰€ä»¥åªæœ‰ 0 æ˜¯æœ‰æ•ˆç±»å‹ï¼Œç±»å‹ä¸º 0 çš„æœ‰ 2 ä¸ªæ•°æ®ï¼Œæ•…è¾“å‡º 2</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[<span class="hljs-number">1</span>]);<br>            Map&lt;Integer, Integer&gt;count = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt; strings.length; i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[i]);<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> sum(x);<br>                sum %= b;<br>                <span class="hljs-keyword">if</span> (sum &lt; c) &#123;<br>                    count.put(sum, count.getOrDefault(sum, <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> x : count.values()) &#123;<br>                ans = Math.max(ans, x);<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">byte1</span> <span class="hljs-operator">=</span> (x &gt;&gt; <span class="hljs-number">24</span>) &amp; <span class="hljs-number">0xFF</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">byte2</span> <span class="hljs-operator">=</span> (x &gt;&gt; <span class="hljs-number">16</span>) &amp; <span class="hljs-number">0xFF</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">byte3</span> <span class="hljs-operator">=</span> (x &gt;&gt; <span class="hljs-number">8</span>) &amp; <span class="hljs-number">0xFF</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">byte4</span> <span class="hljs-operator">=</span> x &amp; <span class="hljs-number">0xFF</span>;<br>        <span class="hljs-keyword">return</span> byte1 + byte2 + byte3 + byte4;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>5é”®é”®ç›˜çš„è¾“å‡º</h1><h2 id="é¢˜ç›®æè¿°-6">é¢˜ç›®æè¿°</h2><p>æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ 5 é”®é”®ç›˜ï¼Œä¸Šé¢æœ‰ aï¼Œctrl-cï¼Œctrl-xï¼Œctrl-vï¼Œctrl-a äº”ä¸ªé”®ï¼ŒåŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>a é”®ï¼šåœ¨å±å¹•ä¸Šè¾“å‡ºä¸€ä¸ªå­—æ¯ aï¼›</li><li>ctrl-cï¼ˆå¯¹åº”æ•°å­— 2ï¼‰ï¼šå°†å½“å‰é€‰æ‹©çš„å­—æ¯å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼›</li><li>ctrl-xï¼ˆå¯¹åº”æ•°å­— 3ï¼‰ï¼šå°†å½“å‰é€‰æ‹©çš„å­—æ¯å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¹¶æ¸…ç©ºé€‰æ‹©çš„å­—æ¯ï¼›</li><li>ctrl-vï¼ˆå¯¹åº”æ•°å­— 4ï¼‰ï¼šå°†å½“å‰å‰ªè´´æ¿é‡Œçš„å­—æ¯è¾“å‡ºåˆ°å±å¹•ï¼›</li><li>ctrl-aï¼ˆå¯¹åº”æ•°å­— 5ï¼‰ï¼šé€‰æ‹©å½“å‰å±å¹•ä¸Šçš„æ‰€æœ‰å­—æ¯ã€‚</li></ul><h3 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h3><ol><li>å‰ªè´´æ¿åˆå§‹ä¸ºç©ºï¼Œæ–°çš„å†…å®¹è¢«å¤åˆ¶åˆ°å‰ªè´´æ¿æ—¶ä¼šè¦†ç›–åŸæ¥çš„å†…å®¹ï¼›</li><li>å½“å±å¹•ä¸Šæ²¡æœ‰å­—æ¯æ—¶ï¼Œctrl-a æ— æ•ˆï¼›</li><li>å½“æ²¡æœ‰é€‰æ‹©å­—æ¯æ—¶ï¼Œctrl-c å’Œ ctrl-x æ— æ•ˆï¼›</li><li>å½“æœ‰å­—æ¯è¢«é€‰æ‹©æ—¶ï¼Œa å’Œ ctrl-v è¿™ä¸¤ä¸ªæœ‰è¾“å‡ºåŠŸèƒ½çš„é”®ä¼šå…ˆæ¸…ç©ºé€‰æ‹©çš„å­—æ¯ï¼Œå†è¿›è¡Œè¾“å‡ºã€‚</li></ol><h3 id="è¾“å…¥æè¿°-5">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸ºä¸€è¡Œï¼Œä¸ºç®€åŒ–è§£æï¼Œç”¨æ•°å­— 1-5 ä»£è¡¨äº”ä¸ªé”®çš„è¾“å…¥ï¼Œæ•°å­—ç”¨ç©ºæ ¼åˆ†éš”ï¼š</p><ul><li>1ï¼ša é”®</li><li>2ï¼šctrl-c</li><li>3ï¼šctrl-x</li><li>4ï¼šctrl-v</li><li>5ï¼šctrl-a</li></ul><h3 id="è¾“å‡ºæè¿°-5">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä¸€ä¸ªæ•°å­—ï¼Œä¸ºæœ€ç»ˆå±å¹•ä¸Šå­—æ¯çš„æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-6">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 1 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong>è¿ç»­é”®å…¥ 3 ä¸ª aï¼Œæ•…å±å¹•ä¸Šå­—æ¯çš„é•¿åº¦ä¸º 3ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 1 5 1 5 2 4 4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>è¾“å…¥ä¸¤ä¸ª a å ctrl-a é€‰æ‹©è¿™ä¸¤ä¸ª aï¼Œå†è¾“å…¥ a æ—¶é€‰æ‹©çš„ä¸¤ä¸ª a å…ˆè¢«æ¸…ç©ºï¼Œæ‰€ä»¥æ­¤æ—¶å±å¹•åªæœ‰ä¸€ä¸ª aï¼Œåç»­çš„ ctrl-aï¼Œctrl-c é€‰æ‹©å¹¶å¤åˆ¶äº†è¿™ä¸€ä¸ª aï¼Œæœ€åä¸¤ä¸ª ctrl-v åœ¨å±å¹•ä¸Šè¾“å‡ºä¸¤ä¸ª aï¼Œæ•…å±å¹•ä¸Šå­—æ¯çš„é•¿åº¦ä¸º 2ï¼ˆç¬¬ä¸€ä¸ª ctrl-v æ¸…ç©ºäº†å±å¹•ä¸Šçš„é‚£ä¸ª aï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String [] strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">screen</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//å±å¹•</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//å‰ªåˆ‡æ¿</span><br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">selected</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">//æ˜¯å¦è¢«é€‰æ‹©</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; strings.length; i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[i]);<br>                <span class="hljs-keyword">if</span> (x == <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (selected) &#123;<br>                        screen = <span class="hljs-string">&quot;a&quot;</span>;<br>                        selected = <span class="hljs-literal">false</span>;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        screen += <span class="hljs-string">&quot;a&quot;</span>;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == <span class="hljs-number">2</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (selected) &#123;<br>                        temp = screen;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == <span class="hljs-number">3</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (selected) &#123;<br>                        temp = screen;<br>                        screen = <span class="hljs-string">&quot;&quot;</span>;<br>                        selected = <span class="hljs-literal">false</span>;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == <span class="hljs-number">4</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (selected) &#123;<br>                        screen = temp;<br>                        selected = <span class="hljs-literal">false</span>;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        screen += temp;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x == <span class="hljs-number">5</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (!screen.equals(<span class="hljs-string">&quot;&quot;</span>)) &#123;<br>                        selected = <span class="hljs-literal">true</span>;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-comment">// System.out.println(&quot;screen=&quot; + screen + &quot;,temp=&quot; + temp + &quot;,selected=&quot; +</span><br>                <span class="hljs-comment">//                    selected);</span><br>            &#125;<br>            System.out.println(screen.length());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ£€æŸ¥æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„æ•°å­—ç»„åˆ</h1><h2 id="é¢˜ç›®æè¿°-7">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªæ­£æ•´æ•°æ•°ç»„ï¼Œæ£€æŸ¥æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³è§„åˆ™çš„æ•°ç»„ç»„åˆã€‚è§„åˆ™ï¼šA = B + 2Ã—Cã€‚è¦æ±‚æ•°ç»„ä¸­çš„æ¯ä¸ªæˆå‘˜åªèƒ½åœ¨ç»“æœç®—å¼ä¸­ä½¿ç”¨ä¸€æ¬¡ï¼ˆå¦‚æ•°ç»„æˆå‘˜ä¸º [0,0,1,5]ï¼Œç®—å¼ 0=0+2Ã—0 ä¸å…è®¸ï¼Œå› ä¸ºä½¿ç”¨äº† 3 ä¸ª 0ï¼‰ã€‚</p><h3 id="è¾“å…¥æè¿°-6">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œè¾“å…¥æ•°ç»„çš„å…ƒç´ ä¸ªæ•°ï¼›</p><p>ç¬¬äºŒè¡Œè¾“å‡ºæ‰€æœ‰æ•°ç»„å…ƒç´ ï¼Œç”¨ç©ºæ ¼éš”å¼€ã€‚</p><h3 id="è¾“å‡ºæè¿°-6">è¾“å‡ºæè¿°</h3><p>å¦‚æœå­˜åœ¨æ»¡è¶³è¦æ±‚çš„æ•°ï¼Œåœ¨åŒä¸€è¡Œé‡Œä¾æ¬¡è¾“å‡ºè§„åˆ™é‡Œ Aã€Bã€C çš„å–å€¼ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼›</p><p>å¦‚æœä¸å­˜åœ¨ï¼Œè¾“å‡º 0ã€‚</p><h3 id="ç¤ºä¾‹-7">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br>2 7 3 0<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">7 3 2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>7 = 3 + 2Ã—2ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ ä»…ä½¿ç”¨ä¸€æ¬¡ã€‚</p><h3 id="å¤‡æ³¨">å¤‡æ³¨</h3><ol><li>æ•°ç»„é•¿åº¦åœ¨ 3~100 ä¹‹é—´ï¼›</li><li>æ•°ç»„æˆå‘˜ä¸º 0~65535ï¼›</li><li>æ•°ç»„æˆå‘˜å¯ä»¥é‡å¤ï¼Œä½†æ¯ä¸ªæˆå‘˜åªèƒ½åœ¨ç»“æœç®—å¼ä¸­ä½¿ç”¨ä¸€æ¬¡ï¼›</li><li>ç”¨ä¾‹ä¿è¯æ¯ç»„æ•°å­—é‡Œæœ€å¤šåªæœ‰ä¸€ç»„ç¬¦åˆè¦æ±‚çš„è§£ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[<span class="hljs-number">0</span>]);<br>            <span class="hljs-type">int</span> []arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                arr[i - <span class="hljs-number">1</span>] = Integer.parseInt(strings[i]);<br>            &#125;<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>            Arrays.sort(arr);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; n; k++) &#123;<br>                        <span class="hljs-keyword">if</span> (arr[k] == arr[j] + arr[i] * <span class="hljs-number">2</span> &amp;&amp; i != j &amp;&amp; j != k &amp;&amp; i != k) &#123;<br>                            ans = <span class="hljs-literal">true</span>;<br>                            System.out.println(arr[k] + <span class="hljs-string">&quot; &quot;</span> + arr[j] + <span class="hljs-string">&quot; &quot;</span> + arr[i]);<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (!ans) &#123;<br>                System.out.println(<span class="hljs-number">0</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ•°ç»„æ‹¼æ¥</h1><h2 id="é¢˜ç›®æè¿°-8">é¢˜ç›®æè¿°</h2><p>ç°åœ¨æœ‰å¤šç»„æ•´æ•°æ•°ç»„ï¼Œéœ€è¦å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚åˆå¹¶è§„åˆ™ï¼šä»æ¯ä¸ªæ•°ç»„é‡ŒæŒ‰é¡ºåºå–å‡ºå›ºå®šé•¿åº¦çš„å†…å®¹åˆå¹¶åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œå–å®Œçš„å†…å®¹ä¼šåˆ é™¤æ‰ï¼›å¦‚æœè¯¥è¡Œä¸è¶³å›ºå®šé•¿åº¦æˆ–è€…å·²ç»ä¸ºç©ºï¼Œåˆ™ç›´æ¥å–å‡ºå‰©ä½™éƒ¨åˆ†çš„å†…å®¹æ”¾åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œç»§ç»­ä¸‹ä¸€è¡Œã€‚</p><h3 id="è¾“å…¥æè¿°-7">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œæ˜¯æ¯æ¬¡è¯»å–çš„å›ºå®šé•¿åº¦ï¼Œ0 &lt; é•¿åº¦ &lt; 10ï¼›</p><p>ç¬¬äºŒè¡Œæ˜¯æ•´æ•°æ•°ç»„çš„æ•°ç›®ï¼Œ0 &lt; æ•°ç›® &lt; 1000ï¼›</p><p>ç¬¬ 3-n è¡Œæ˜¯éœ€è¦åˆå¹¶çš„æ•°ç»„ï¼Œä¸åŒçš„æ•°ç»„ç”¨å›è½¦æ¢è¡Œåˆ†éš”ï¼Œæ•°ç»„å†…éƒ¨ç”¨é€—å·åˆ†éš”ï¼Œæœ€å¤§ä¸è¶…è¿‡ 100 ä¸ªå…ƒç´ ã€‚</p><h3 id="è¾“å‡ºæè¿°-7">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œç”¨é€—å·åˆ†éš”ã€‚</p><h3 id="ç¤ºä¾‹-8">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>2<br>2,5,6,7,9,5,7<br>1,7,4,3,4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2,5,6,1,7,4,7,9,5,3,4,7<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><ol><li>è·å¾—é•¿åº¦ 3 å’Œæ•°ç»„æ•°ç›® 2ï¼›</li><li>å…ˆéå†ç¬¬ä¸€è¡Œï¼Œè·å¾— 2,5,6ï¼›</li><li>å†éå†ç¬¬äºŒè¡Œï¼Œè·å¾— 1,7,4ï¼›</li><li>å†å¾ªç¯å›åˆ°ç¬¬ä¸€è¡Œï¼Œè·å¾— 7,9,5ï¼›</li><li>å†éå†ç¬¬äºŒè¡Œï¼Œè·å¾— 3,4ï¼›</li><li>å†å›åˆ°ç¬¬ä¸€è¡Œï¼Œè·å¾— 7ï¼ŒæŒ‰é¡ºåºæ‹¼æ¥æˆæœ€ç»ˆç»“æœã€‚</li></ol><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br>3<br>1,2,3,4,5,6<br>1,2,3<br>1,2,3,4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1,2,3,4,1,2,3,1,2,3,4,5,6<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= cnt; i++) &#123;<br>                list.add(sc.nextLine());<br>            &#125;<br>            Map&lt;Integer, Queue&lt;Integer&gt;&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i++) &#123;<br>                String []strings = list.get(i).split(<span class="hljs-string">&quot;,&quot;</span>);<br>                Queue&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>                <span class="hljs-keyword">for</span> (String str : strings) &#123;<br>                    queue.offer(Integer.parseInt(str));<br>                &#125;<br>                map.put(i, queue);<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            List&lt;Integer&gt;ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-keyword">while</span> (!map.isEmpty()) &#123;<br>                <span class="hljs-keyword">if</span> (map.containsKey(num)) &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>                        <span class="hljs-keyword">if</span> (map.get(num).isEmpty()) &#123;<br>                            map.remove(num);<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        ans.add(map.get(num).poll());<br>                    &#125;<br>                &#125;<br>                num++;<br>                num %= list.size();<br>            &#125;<br>            System.out.println(ans.toString().substring(<span class="hljs-number">1</span>, ans.toString().length() - <span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ•°åˆ—æè¿°</h1><h2 id="é¢˜ç›®æè¿°-9">é¢˜ç›®æè¿°</h2><p>æœ‰ä¸€ä¸ªæ•°åˆ— A [n]ï¼Œä» A [0] å¼€å§‹æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œæ•°åˆ—ä¸­ A [n+1] æ˜¯å¯¹ A [n] çš„æè¿°ï¼Œç”Ÿæˆè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>A [0] = 1ï¼ˆåˆå§‹é¡¹ï¼‰</li><li>A [1] = 11ï¼šå«ä¹‰æ˜¯ A [0] ç”± â€œ1 ä¸ª 1â€ ç»„æˆï¼Œå³ä»å·¦åˆ°å³è¿ç»­å‡ºç° 1 æ¬¡ 1</li><li>A [2] = 21ï¼šå«ä¹‰æ˜¯ A [1] ç”± â€œ2 ä¸ª 1â€ ç»„æˆï¼Œå³ä»å·¦åˆ°å³è¿ç»­å‡ºç° 2 æ¬¡ 1</li><li>A [3] = 1211ï¼šå«ä¹‰æ˜¯ A [2] ç”± â€œ1 ä¸ª 2ã€1 ä¸ª 1â€ ç»„æˆï¼Œå³ä»å·¦åˆ°å³å…ˆè¿ç»­å‡ºç° 1 æ¬¡ 2ï¼Œå†è¿ç»­å‡ºç° 1 æ¬¡ 1</li><li>A [4] = 111221ï¼šå«ä¹‰æ˜¯ A [3] ç”± â€œ1 ä¸ª 1ã€1 ä¸ª 2ã€2 ä¸ª 1â€ ç»„æˆï¼Œå³ä»å·¦åˆ°å³å…ˆè¿ç»­å‡ºç° 1 æ¬¡ 1ï¼Œå†è¿ç»­å‡ºç° 1 æ¬¡ 2ï¼Œæœ€åè¿ç»­å‡ºç° 2 æ¬¡ 1</li></ul><p>ç»™å®šæ•´æ•° nï¼ˆ0&lt;=n&lt;=59ï¼‰ï¼Œè¾“å‡ºæ•°åˆ—çš„ç¬¬ n é¡¹ç»“æœã€‚</p><h3 id="è¾“å…¥æè¿°-8">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæ•°åˆ—çš„ç¬¬ n é¡¹ï¼ˆ0&lt;=n&lt;=59ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-8">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæ•°åˆ—ç¬¬ n é¡¹çš„å­—ç¬¦ä¸²å†…å®¹ã€‚</p><h3 id="ç¤ºä¾‹-9">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">111221<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        List&lt;String&gt;list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            list.add(<span class="hljs-string">&quot;1&quot;</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> list.get(i - <span class="hljs-number">1</span>);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">str1</span> <span class="hljs-operator">=</span> process(str);<br>                <span class="hljs-comment">// System.out.println(str1);</span><br>                list.add(str1);<br>            &#125;<br>            System.out.println(list.get(n));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">process</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> str.length();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">char</span> ch;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">while</span> (i &lt; len) &#123;<br>            ch = str.charAt(i);<br>            <span class="hljs-keyword">while</span> (str.charAt(i) == ch &amp;&amp; i &lt; len) &#123;<br>                cnt++;<br>                i++;<br>                <span class="hljs-keyword">if</span> (i &gt;= len) &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            sb.append(cnt).append(ch);<br>            cnt = <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è€ƒå‹¤ä¿¡æ¯</h1><h2 id="é¢˜ç›®æè¿°-10">é¢˜ç›®æè¿°</h2><p>å…¬å¸ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ¥è¡¨ç¤ºå‘˜å·¥çš„å‡ºå‹¤ä¿¡æ¯ï¼š</p><ul><li>absentï¼šç¼ºå‹¤</li><li>lateï¼šè¿Ÿåˆ°</li><li>leaveearlyï¼šæ—©é€€</li><li>presentï¼šæ­£å¸¸ä¸Šç­</li></ul><p>ç°éœ€æ ¹æ®å‘˜å·¥å‡ºå‹¤ä¿¡æ¯ï¼Œåˆ¤æ–­æœ¬æ¬¡æ˜¯å¦èƒ½è·å¾—å‡ºå‹¤å¥–ï¼Œèƒ½è·å¾—å‡ºå‹¤å¥–çš„æ¡ä»¶å¦‚ä¸‹ï¼š</p><ol><li>ç¼ºå‹¤ä¸è¶…è¿‡ä¸€æ¬¡ï¼›</li><li>æ²¡æœ‰è¿ç»­çš„è¿Ÿåˆ° / æ—©é€€ï¼›</li><li>ä»»æ„è¿ç»­ 7 æ¬¡è€ƒå‹¤ï¼Œç¼ºå‹¤ / è¿Ÿåˆ° / æ—©é€€ä¸è¶…è¿‡ 3 æ¬¡ã€‚</li></ol><h3 id="è¾“å…¥æè¿°-9">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå‘˜å·¥ï¼›åé¢ n è¡Œï¼Œæ¯ä¸€è¡Œè¾“å…¥è‹¥å¹²ä¸ªå­—ç¬¦ä¸²ï¼ˆç”¨ç©ºæ ¼åˆ†éš”ï¼‰ï¼Œè¡¨ç¤ºç¬¬ i åå‘˜å·¥çš„å‡ºå‹¤ä¿¡æ¯ã€‚</p><h3 id="è¾“å‡ºæè¿°-9">è¾“å‡ºæè¿°</h3><p>è¾“å‡º n è¡Œï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºè¿™åå‘˜å·¥èƒ½å¦è·å¾—å‡ºå‹¤å¥–ï¼Œå¦‚æœå¯ä»¥ï¼Œåˆ™è¾“å‡º â€œtrueâ€ï¼Œå¦åˆ™è¾“å‡º â€œfalseâ€ã€‚</p><h3 id="ç¤ºä¾‹-10">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>present<br>present absent present present leaveearly present absent<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">true false<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>present<br>present present<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">true true<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> Map&lt;String, Integer&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">static</span> &#123;<br>        map.put(<span class="hljs-string">&quot;absent&quot;</span>, <span class="hljs-number">0</span>);<br>        map.put(<span class="hljs-string">&quot;late&quot;</span>, <span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-string">&quot;leaveearly&quot;</span>, <span class="hljs-number">1</span>);<br>        map.put(<span class="hljs-string">&quot;present&quot;</span>, <span class="hljs-number">2</span>);<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>                ans.append(judge(str) + <span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            System.out.println(ans.toString());<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">judge</span><span class="hljs-params">(String str)</span> &#123;<br>        String []strings = str.split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (String str1 : strings) &#123;<br>            sb.append(map.get(str1));<br>        &#125;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sb.toString();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">absentCnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> s.charAt(i);<br>            <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;0&#x27;</span>) &#123;<br>                absentCnt++;<br>                <span class="hljs-keyword">if</span> (absentCnt &gt; <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;1&#x27;</span>) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i + <span class="hljs-number">1</span>) == <span class="hljs-string">&#x27;1&#x27;</span> &amp;&amp; i + <span class="hljs-number">1</span> &lt; len) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (i &gt;= <span class="hljs-number">6</span>) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">badCnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i; j &gt;= i - <span class="hljs-number">6</span>; j--) &#123;<br>                    <span class="hljs-keyword">if</span> (s.charAt(j) != <span class="hljs-string">&#x27;2&#x27;</span>) &#123;<br>                        badCnt++;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (badCnt &gt; <span class="hljs-number">3</span>) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æŒ‰å•è¯ä¸‹æ ‡åŒºé—´ç¿»è½¬æ–‡ç« å†…å®¹</h1><h2 id="é¢˜ç›®æè¿°-11">é¢˜ç›®æè¿°</h2><p>è¾“å…¥ä¸€ä¸ªè‹±æ–‡æ–‡ç« ç‰‡æ®µï¼Œç¿»è½¬æŒ‡å®šåŒºé—´çš„å•è¯é¡ºåºï¼Œæ ‡ç‚¹ç¬¦å·å’Œæ™®é€šå­—æ¯ä¸€æ ·å¤„ç†ã€‚</p><p>ä¾‹å¦‚è¾“å…¥å­—ç¬¦ä¸² â€œI am a developer.â€ï¼ŒåŒºé—´ [0,3] åˆ™è¾“å‡º â€œdeveloper. a am Iâ€ã€‚</p><h3 id="è¾“å…¥æè¿°-10">è¾“å…¥æè¿°</h3><p>ä½¿ç”¨æ¢è¡Œéš”å¼€ä¸‰ä¸ªå‚æ•°ï¼š</p><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè‹±æ–‡æ–‡ç« å†…å®¹å³è‹±æ–‡å­—ç¬¦ä¸²ï¼›</p><p>ç¬¬äºŒä¸ªå‚æ•°ä¸ºåè½¬èµ·å§‹å•è¯ä¸‹æ ‡ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ï¼›</p><p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç»“æŸå•è¯ä¸‹æ ‡ã€‚</p><h3 id="è¾“å‡ºæè¿°-10">è¾“å‡ºæè¿°</h3><p>åè½¬åçš„è‹±æ–‡æ–‡ç« ç‰‡æ®µï¼Œæ‰€æœ‰å•è¯ä¹‹é—´ä»¥ä¸€ä¸ªåŠè§’ç©ºæ ¼åˆ†å‰²è¿›è¡Œè¾“å‡ºã€‚</p><h3 id="ç¤ºä¾‹-11">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">I am a developer.<br>1<br>2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">I a am developer.<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">Hello world!<br>0<br>1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">world! Hello<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>è¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åœ¨å‰é¢æˆ–è€…åé¢åŒ…å«å¤šä½™çš„ç©ºæ ¼ï¼Œä½†æ˜¯åè½¬åçš„ä¸èƒ½åŒ…å«å¤šä½™ç©ºæ ¼ã€‚</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">I am a developer.<br>0<br>3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">developer. a am I<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>å¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œå°†åè½¬åå•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°åªå«ä¸€ä¸ªã€‚</p><p><strong>ç¤ºä¾‹ 4</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">Hello!<br>0<br>3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">Hello!<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æŒ‡å®šåè½¬åŒºé—´åªæœ‰ä¸€ä¸ªå•è¯ï¼Œæˆ–æ— æœ‰æ•ˆå•è¯åˆ™ç»Ÿä¸€è¾“å‡ºåŸå­—ç¬¦ä¸²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            System.out.println(solve(strings, start, end));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">solve</span><span class="hljs-params">(String [] strings, <span class="hljs-type">int</span> start, <span class="hljs-type">int</span> end)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> strings.length;<br>        end = Math.min(end, n - <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (start &gt; n - <span class="hljs-number">1</span> || (end - start + <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; i++) &#123;<br>                sb.append(strings[i]).append(<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            sb.append(strings[n - <span class="hljs-number">1</span>]);<br>            <span class="hljs-keyword">return</span> sb.toString();<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> start, j = end;<br>        <span class="hljs-keyword">while</span> (i &lt; j) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> strings[i];<br>            strings[i] = strings[j];<br>            strings[j] = temp;<br>            i++;<br>            j--;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; n - <span class="hljs-number">1</span>; k++) &#123;<br>            sb.append(strings[k]).append(<span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        sb.append(strings[n - <span class="hljs-number">1</span>]);<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æœ€å¤§æ‹¬å·æ·±åº¦</h1><h2 id="é¢˜ç›®æè¿°-12">é¢˜ç›®æè¿°</h2><p>ç°æœ‰ä¸€å­—ç¬¦ä¸²ä»…ç”± â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€˜{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™å…­ç§æ‹¬å·ç»„æˆã€‚è‹¥å­—ç¬¦ä¸²æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼Œåˆ™ä¸ºæ— æ•ˆå­—ç¬¦ä¸²ï¼š</p><p>â‘ ä»»ä¸€ç±»å‹çš„å·¦å³æ‹¬å·æ•°é‡ä¸ç›¸ç­‰ï¼›</p><p>â‘¡å­˜åœ¨æœªæŒ‰æ­£ç¡®é¡ºåºï¼ˆå…ˆå·¦åå³ï¼‰é—­åˆçš„æ‹¬å·ã€‚</p><p>è¾“å‡ºæ‹¬å·çš„æœ€å¤§åµŒå¥—æ·±åº¦ï¼Œè‹¥å­—ç¬¦ä¸²æ— æ•ˆåˆ™è¾“å‡º 0ã€‚</p><p><strong>å¤‡æ³¨</strong>ï¼š0â‰¤å­—ç¬¦ä¸²é•¿åº¦â‰¤100000</p><h3 id="è¾“å…¥æè¿°-11">è¾“å…¥æè¿°</h3><p>ä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€˜{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™çš„å­—ç¬¦ä¸²</p><h3 id="è¾“å‡ºæè¿°-11">è¾“å‡ºæè¿°</h3><p>ä¸€ä¸ªæ•´æ•°ï¼Œæœ€å¤§çš„æ‹¬å·æ·±åº¦</p><h3 id="ç¤ºä¾‹-12">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">[]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæœ€å¤§åµŒå¥—æ·±åº¦ä¸º 1</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">([]&#123;()&#125;)<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æœ‰æ•ˆå­—ç¬¦ä¸²ï¼Œæœ€å¤§åµŒå¥—æ·±åº¦ä¸º 3</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">(]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ— æ•ˆå­—ç¬¦ä¸²ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„å·¦å³æ‹¬å·æ•°é‡ä¸ç›¸ç­‰</p><p><strong>ç¤ºä¾‹ 4</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">([)]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ— æ•ˆå­—ç¬¦ä¸²ï¼Œå­˜åœ¨æœªæŒ‰æ­£ç¡®é¡ºåºé—­åˆçš„æ‹¬å·</p><p><strong>ç¤ºä¾‹ 5</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">)(<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ— æ•ˆå­—ç¬¦ä¸²ï¼Œå­˜åœ¨æœªæŒ‰æ­£ç¡®é¡ºåºé—­åˆçš„æ‹¬å·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            System.out.println(solve(str));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span>  <span class="hljs-title function_">solve</span><span class="hljs-params">(String str)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        Stack&lt;Character&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> str.charAt(i);<br>            <span class="hljs-keyword">if</span> (stack.isEmpty()) &#123;<br>                <span class="hljs-keyword">if</span> (!(ch == <span class="hljs-string">&#x27;(&#x27;</span> || ch == <span class="hljs-string">&#x27;[&#x27;</span> || ch == <span class="hljs-string">&#x27;&#123;&#x27;</span>)) &#123;<br>                    ans = <span class="hljs-number">0</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                stack.push(ch);<br>                ans = Math.max(ans, stack.size());<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;(&#x27;</span> || ch == <span class="hljs-string">&#x27;[&#x27;</span> || ch == <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>                stack.push(ch);<br>                ans = Math.max(ans, stack.size());<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch1</span> <span class="hljs-operator">=</span> stack.peek();<br>                <span class="hljs-keyword">if</span> ((ch1 == <span class="hljs-string">&#x27;(&#x27;</span> &amp;&amp; ch != <span class="hljs-string">&#x27;)&#x27;</span>) || (ch1 == <span class="hljs-string">&#x27;[&#x27;</span> &amp;&amp; ch != <span class="hljs-string">&#x27;]&#x27;</span>) || (ch1 == <span class="hljs-string">&#x27;&#123;&#x27;</span> &amp;&amp;<br>                        ch != <span class="hljs-string">&#x27;&#125;&#x27;</span>)) &#123;<br>                    ans = <span class="hljs-number">0</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                stack.pop();<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å­—ç¬¦ä¸²åŠ å¯†</h1><h2 id="é¢˜ç›®æè¿°-13">é¢˜ç›®æè¿°</h2><p>ç»™ä½ ä¸€ä¸²æœªåŠ å¯†çš„å­—ç¬¦ä¸² strï¼Œé€šè¿‡å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—æ¯è¿›è¡Œæ”¹å˜æ¥å®ç°åŠ å¯†ï¼ŒåŠ å¯†è§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å¯¹å­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªå­—æ¯ str [i] åç§»ç‰¹å®šæ•°ç»„å…ƒç´  a [i] çš„é‡ï¼›</li><li>åç§»æ•°ç»„ a çš„åˆå§‹å€¼ï¼ša [0]=1ï¼Œa [1]=2ï¼Œa [2]=4ï¼›</li><li>å½“ i&gt;=3 æ—¶ï¼Œæ•°ç»„å…ƒç´  a [i] = a [i-1] + a [i-2] + a [i-3]ã€‚</li></ol><p>ä¾‹å¦‚ï¼šåŸæ–‡ abcde åŠ å¯†å bdgkrï¼Œå…¶ä¸­åç§»é‡åˆ†åˆ«æ˜¯ 1,2,4,7,13ã€‚</p><h3 id="è¾“å…¥æè¿°-12">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•° nï¼ˆ1&lt;=n&lt;=1000ï¼‰ï¼Œè¡¨ç¤ºæœ‰ n ç»„æµ‹è¯•æ•°æ®ï¼›</p><p>æ¯ç»„æ•°æ®åŒ…å«ä¸€è¡Œï¼Œä¸ºåŸæ–‡ strï¼ˆåªå«æœ‰å°å†™å­—æ¯ï¼Œ0 &lt; é•¿åº¦ &lt;=50ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-12">è¾“å‡ºæè¿°</h3><p>æ¯ç»„æµ‹è¯•æ•°æ®è¾“å‡ºä¸€è¡Œï¼Œè¡¨ç¤ºå­—ç¬¦ä¸²çš„å¯†æ–‡ã€‚</p><h3 id="ç¤ºä¾‹-13">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br>xy<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">ya<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>ç¬¬ä¸€ä¸ªå­—ç¬¦ x åç§»é‡æ˜¯ 1ï¼Œå³ä¸º yï¼Œç¬¬äºŒä¸ªå­—ç¬¦ y åç§»é‡æ˜¯ 2ï¼Œå³ä¸º aã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> []a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">100</span>];<br>            a[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>            a[<span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>            a[<span class="hljs-number">2</span>] = <span class="hljs-number">4</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; i &lt; <span class="hljs-number">50</span>; i++) &#123;<br>                a[i] = (a[i - <span class="hljs-number">1</span>] + a[i - <span class="hljs-number">2</span>] + a[i - <span class="hljs-number">3</span>]) % <span class="hljs-number">26</span>;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>                System.out.println(solve(str, a));<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">solve</span><span class="hljs-params">(String str, <span class="hljs-type">int</span> []a)</span> &#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> str.charAt(i);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; a[i]; j++) &#123;<br>                ch += <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span> (ch &gt; <span class="hljs-string">&#x27;z&#x27;</span>) &#123;<br>                    ch = <span class="hljs-string">&#x27;a&#x27;</span>;<br>                &#125;<br>            &#125;<br>            sb.append((<span class="hljs-type">char</span>)ch);<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ•´æ•°å¯¹æœ€å°å’Œ</h1><h2 id="é¢˜ç›®æè¿°-14">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ array1ã€array2ï¼Œæ•°ç»„å…ƒç´ æŒ‰å‡åºæ’åˆ—ã€‚å‡è®¾ä» array1ã€array2 ä¸­åˆ†åˆ«å–å‡ºä¸€ä¸ªå…ƒç´ å¯æ„æˆä¸€å¯¹å…ƒç´ ï¼Œç°åœ¨éœ€è¦å–å‡º k å¯¹å…ƒç´ ï¼Œå¹¶å¯¹å–å‡ºçš„æ‰€æœ‰å…ƒç´ æ±‚å’Œï¼Œè®¡ç®—å’Œçš„æœ€å°å€¼ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä¸¤å¯¹å…ƒç´ å¦‚æœå¯¹åº”äº array1ã€array2 ä¸­çš„ä¸¤ä¸ªä¸‹æ ‡å‡ç›¸åŒï¼Œåˆ™è§†ä¸ºåŒä¸€å¯¹å…ƒç´ ã€‚</p><h3 id="è¾“å…¥æè¿°-13">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸¤è¡Œæ•°ç»„ array1ã€array2ï¼Œæ¯è¡Œé¦–ä¸ªæ•°å­—ä¸ºæ•°ç»„å¤§å° size (0 &lt; size &lt;= 100)ï¼›</p><p>0 &lt; array1 [i] &lt;= 1000ï¼›</p><p>0 &lt; array2 [i] &lt;= 1000ï¼›</p><p>æ¥ä¸‹æ¥ä¸€è¡Œä¸ºæ­£æ•´æ•° kï¼ˆ0 &lt; k &lt;= array1.size () * array2.size ()ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-13">è¾“å‡ºæè¿°</h3><p>æ»¡è¶³è¦æ±‚çš„æœ€å°å’Œ</p><h3 id="ç¤ºä¾‹-14">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 1 1 2<br>3 1 2 3<br>2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>ç”¨ä¾‹ä¸­ï¼Œéœ€è¦å– 2 å¯¹å…ƒç´ </p><p>å–ç¬¬ä¸€ä¸ªæ•°ç»„ç¬¬ 0 ä¸ªå…ƒç´ ä¸ç¬¬äºŒä¸ªæ•°ç»„ç¬¬ 0 ä¸ªå…ƒç´ ç»„æˆ 1 å¯¹å…ƒç´  [1,1];</p><p>å–ç¬¬ä¸€ä¸ªæ•°ç»„ç¬¬ 1 ä¸ªå…ƒç´ ä¸ç¬¬äºŒä¸ªæ•°ç»„ç¬¬ 0 ä¸ªå…ƒç´ ç»„æˆ 1 å¯¹å…ƒç´  [1,1];</p><p>æ±‚å’Œä¸º 1+1+1+1=4ï¼Œä¸ºæ»¡è¶³è¦æ±‚çš„æœ€å°å’Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> []arr1 = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                             Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> []arr2 = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                             Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            List&lt;Integer&gt;list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr1.length; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; arr2.length; j++) &#123;<br>                    list.add(arr1[i] + arr2[j]);<br>                &#125;<br>            &#125;<br>            list.sort(<span class="hljs-literal">null</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; k; i++) &#123;<br>                ans += list.get(i);<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ±‚å­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ•´æ•°çš„æœ€å°å’Œ</h1><h2 id="é¢˜ç›®æè¿°-15">é¢˜ç›®æè¿°</h2><p>è¾“å…¥å­—ç¬¦ä¸² sï¼Œè¾“å‡º s ä¸­åŒ…å«æ‰€æœ‰æ•´æ•°çš„æœ€å°å’Œï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å­—ç¬¦ä¸² s åªåŒ…å« a~zã€A~Zã€+ã€-ï¼›</li><li>åˆæ³•çš„æ•´æ•°åŒ…æ‹¬æ­£æ•´æ•°ï¼ˆä¸€ä¸ªæˆ–è€…å¤šä¸ª 0-9 ç»„æˆï¼Œå¦‚ï¼š0ã€2ã€3ã€002ã€102ï¼‰ï¼›</li><li>è´Ÿæ•´æ•°ï¼ˆè´Ÿå·å¼€å¤´ï¼Œæ•°å­—éƒ¨åˆ†ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ª 0-9 ç»„æˆï¼Œå¦‚ - 2ã€-012ã€-23ã€-00023ï¼‰ã€‚</li></ol><h3 id="è¾“å…¥æè¿°-14">è¾“å…¥æè¿°</h3><p>åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²</p><h3 id="è¾“å‡ºæè¿°-14">è¾“å‡ºæè¿°</h3><p>æ‰€æœ‰æ•´æ•°çš„æœ€å°å’Œ</p><h3 id="ç¤ºä¾‹-15">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">bb1234aa<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">10<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>1+2+3+4=10</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">bb12-34aa<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-31<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>1+2-34=-31</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> str.length();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span> (i &lt; n) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> str.charAt(i);<br>                <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;-&#x27;</span>) &#123;<br>                    i++;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                    <span class="hljs-keyword">while</span> (str.charAt(i) &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; str.charAt(i) &lt;= <span class="hljs-string">&#x27;9&#x27;</span> &amp;&amp; i &lt; n) &#123;<br>                        x = x * <span class="hljs-number">10</span> + (str.charAt(i) - <span class="hljs-string">&#x27;0&#x27;</span>);<br>                        i++;<br>                        <span class="hljs-keyword">if</span> (i &gt;= n) &#123;<br>                            <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                    &#125;<br>                    ans -= x;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; ch &lt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>                    ans += ch - <span class="hljs-string">&#x27;0&#x27;</span>;<br>                &#125;<br>                i++;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ä¸¤æ•°ä¹‹å’Œç»å¯¹å€¼æœ€å°</h1><h2 id="é¢˜ç›®æè¿°-16">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªä»å°åˆ°å¤§çš„æœ‰åºæ•´æ•°åºåˆ—ï¼ˆå­˜åœ¨æ­£æ•´æ•°å’Œè´Ÿæ•´æ•°ï¼‰æ•°ç»„ numsï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºä¸¤ä¸ªæ•°ï¼Œå…¶å’Œçš„ç»å¯¹å€¼ (|nums [x]+nums [y]|) ä¸ºæœ€å°å€¼ï¼Œå¹¶è¿”å›è¿™ä¸ªç»å¯¹å€¼ã€‚æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆï¼Œä¸”æ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ ä¸èƒ½ä½¿ç”¨ä¸¤éã€‚</p><h3 id="è¾“å…¥æè¿°-15">è¾“å…¥æè¿°</h3><p>ä¸€ä¸ªé€šè¿‡ç©ºæ ¼åˆ†å‰²çš„æœ‰åºæ•´æ•°åºåˆ—å­—ç¬¦ä¸²ï¼Œæœ€å¤š 1000 ä¸ªæ•´æ•°ï¼Œä¸”æ•´æ•°æ•°å€¼èŒƒå›´æ˜¯ - 65535~65535ã€‚</p><h3 id="è¾“å‡ºæè¿°-15">è¾“å‡ºæè¿°</h3><p>ä¸¤æ•°ä¹‹å’Œç»å¯¹å€¼æœ€å°å€¼</p><h3 id="ç¤ºä¾‹-16">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-3 -1 5 7 11 15<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> [] arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                             Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; arr.length; j++) &#123;<br>                    ans = Math.min(ans, Math.abs(arr[i] + arr[j]));<br>                &#125;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—</h1><h2 id="é¢˜ç›®æè¿°-17">é¢˜ç›®æè¿°</h2><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä»…åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼Œæ±‚å­—ç¬¦ä¸²ä¸­åŒ…å«çš„æœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—çš„é•¿åº¦ï¼ˆæ¯”å¦‚ 12234 å±äºéä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—ï¼‰ã€‚</p><h3 id="è¾“å…¥æè¿°-16">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä»…åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—ï¼Œè¾“å…¥çš„å­—ç¬¦ä¸²æœ€å¤§ä¸è¶…è¿‡ 255 ä¸ªå­—ç¬¦ã€‚</p><h3 id="è¾“å‡ºæè¿°-16">è¾“å‡ºæè¿°</h3><p>æœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—çš„é•¿åº¦</p><h3 id="ç¤ºä¾‹-17">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">abc2234019A334bc<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>2234 ä¸ºæœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—ï¼Œæ‰€ä»¥é•¿åº¦ä¸º 4</p><p><strong>æµ‹è¯•ç”¨ä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">aaaaaa44ko543j123j7345677781<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">8<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>34567778 ä¸ºæœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—ï¼Œé•¿åº¦ä¸º 8</p><p><strong>æµ‹è¯•ç”¨ä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">aaaaa34567778a44ko543j123j71<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">8<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>34567778 ä¸ºæœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—ï¼Œé•¿åº¦ä¸º 8</p><p><strong>æµ‹è¯•ç”¨ä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">345678a44ko543j123j7134567778aa<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">9<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>134567778 ä¸ºæœ€é•¿çš„éä¸¥æ ¼é€’å¢è¿ç»­æ•°å­—åºåˆ—ï¼Œé•¿åº¦ä¸º 9</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;0&#x27;</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; str.length(); i++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> str.charAt(i);<br>                <span class="hljs-keyword">if</span> (ch &gt;= pre &amp;&amp; ch &lt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>                    len++;<br>                    pre = ch;<br>                    ans = Math.max(ans, len);<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; ch &lt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>                    len = <span class="hljs-number">1</span>;<br>                    pre = ch;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    len = <span class="hljs-number">0</span>;<br>                    pre = <span class="hljs-string">&#x27;0&#x27;</span>;<br>                &#125;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>åˆ†ç§¯æœ¨</h1><h2 id="é¢˜ç›®æè¿°-18">é¢˜ç›®æè¿°</h2><p>Solo å’Œ koko æ˜¯ä¸¤å…„å¼Ÿï¼Œå¦ˆå¦ˆç»™äº†ä»–ä»¬ä¸€å¤§å †ç§¯æœ¨ï¼Œæ¯å—ç§¯æœ¨ä¸Šéƒ½æœ‰è‡ªå·±çš„é‡é‡ã€‚ç°åœ¨ä»–ä»¬æƒ³è¦å°†è¿™äº›ç§¯æœ¨åˆ†æˆä¸¤å †ï¼š</p><ol><li>å“¥å“¥ Solo è´Ÿè´£åˆ†é…ï¼Œå¼Ÿå¼Ÿ koko è¦æ±‚ä¸¤ä¸ªäººè·å¾—çš„ç§¯æœ¨æ€»é‡é‡ â€œç›¸ç­‰â€ï¼ˆæ ¹æ® Koko çš„é€»è¾‘ï¼‰ï¼Œä¸ªæ•°å¯ä»¥ä¸åŒï¼Œä¸ç„¶å°±ä¼šå“­ï¼›</li><li>Koko çš„åŠ æ³•é€»è¾‘ï¼šå…ˆå°†ä¸¤ä¸ªæ•°è½¬æˆäºŒè¿›åˆ¶å†è¿›è¡ŒåŠ æ³•ï¼Œä¸”æ€»ä¼šå¿˜è®°è¿›ä½ï¼ˆæ¯ä¸ªè¿›ä½éƒ½å¿˜è®°ï¼‰ã€‚ä¾‹å¦‚ 25ï¼ˆ11001ï¼‰åŠ  11ï¼ˆ01011ï¼‰æ—¶ï¼Œkoko å¾—åˆ°çš„è®¡ç®—ç»“æœæ˜¯ 18ï¼ˆ10010ï¼‰ã€‚</li></ol><p>Solo æƒ³è¦å°½å¯èƒ½ä½¿è‡ªå·±å¾—åˆ°çš„ç§¯æœ¨æ€»é‡é‡æœ€å¤§ï¼Œä¸”ä¸è®© koko å“­ã€‚</p><h3 id="è¾“å…¥æè¿°-17">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° N (2â‰¤ N â‰¤100)ï¼Œè¡¨ç¤ºæœ‰å¤šå°‘å—ç§¯æœ¨ï¼›</p><p>ç¬¬äºŒè¡Œä¸ºç©ºæ ¼åˆ†å¼€çš„ N ä¸ªæ•´æ•° Ci (1 â‰¤ Ci â‰¤ 1000)ï¼Œè¡¨ç¤ºç¬¬ i å—ç§¯æœ¨çš„é‡é‡ã€‚</p><h3 id="è¾“å‡ºæè¿°-17">è¾“å‡ºæè¿°</h3><p>å¦‚æœèƒ½è®© koko ä¸å“­ï¼Œè¾“å‡º Solo æ‰€èƒ½è·å¾—ç§¯æœ¨çš„æœ€å¤§æ€»é‡é‡ï¼›å¦åˆ™è¾“å‡º â€œ-1â€ã€‚</p><h3 id="ç¤ºä¾‹-18">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>3 5 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">11<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>Solo èƒ½è·å¾—é‡é‡ä¸º 5 å’Œ 6 çš„ä¸¤å—ç§¯æœ¨ï¼Œ5 è½¬æ¢æˆäºŒè¿›åˆ¶æ˜¯ 101ï¼Œ6 çš„äºŒè¿›åˆ¶æ˜¯ 110ï¼ŒæŒ‰ç…§ koko çš„è®¡ç®—æ–¹æ³•ï¼ˆå¿˜è®°è¿›ä½ï¼‰ï¼Œç»“æœä¸º 3ï¼ˆäºŒè¿›åˆ¶ 011ï¼‰ã€‚koko è·å¾—é‡é‡ä¸º 3 çš„ç§¯æœ¨ï¼Œè€Œ solo è·å¾—é‡é‡ä¸º 11ï¼ˆåè¿›åˆ¶ï¼Œ5 + 6ï¼‰çš„ç§¯æœ¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            System.out.println(solve(arr));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">solve</span><span class="hljs-params">(<span class="hljs-type">int</span> []arr)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">minValue</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>            x ^= arr[i];<br>            sum += arr[i];<br>            minValue = Math.min(minValue, arr[i]);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (x != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> sum - minValue;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è¿ç»­å­—æ¯é•¿åº¦</h1><h2 id="é¢˜ç›®æè¿°-19">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåªåŒ…å«å¤§å†™å­—æ¯ï¼Œæ±‚åœ¨åŒ…å«åŒä¸€å­—æ¯çš„å­ä¸²ä¸­ï¼Œé•¿åº¦ç¬¬ k é•¿çš„å­ä¸²çš„é•¿åº¦ï¼Œç›¸åŒå­—æ¯åªå–æœ€é•¿çš„é‚£ä¸ªå­ä¸²ã€‚</p><h3 id="è¾“å…¥æè¿°-18">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œæœ‰ä¸€ä¸ªå­ä¸² (1 &lt; é•¿åº¦ &lt;=100)ï¼ŒåªåŒ…å«å¤§å†™å­—æ¯ã€‚</p><p>ç¬¬äºŒè¡Œä¸º k çš„å€¼ã€‚</p><h3 id="è¾“å‡ºæè¿°-18">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºè¿ç»­å‡ºç°æ¬¡æ•°ç¬¬ k å¤šçš„å­—æ¯çš„æ¬¡æ•°ã€‚</p><h3 id="ç¤ºä¾‹-19">ç¤ºä¾‹</h3><p><strong>ç”¨ä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">AAAAHHHBBCDHHHH<br>3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åŒä¸€å­—æ¯è¿ç»­å‡ºç°çš„æœ€å¤šçš„æ˜¯ A å’Œ Hï¼Œå››æ¬¡ï¼›</p><p>ç¬¬äºŒå¤šçš„æ˜¯ Hï¼Œ3 æ¬¡ï¼Œä½†æ˜¯ H å·²ç»å­˜åœ¨ 4 ä¸ªè¿ç»­çš„ï¼Œæ•…ä¸è€ƒè™‘ï¼›</p><p>ä¸‹ä¸ªæœ€é•¿å­ä¸²æ˜¯ BBï¼Œæ‰€ä»¥æœ€ç»ˆç­”æ¡ˆåº”è¯¥è¾“å‡º 2ã€‚</p><p><strong>ç”¨ä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">AABAAA<br>2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åŒä¸€å­—æ¯è¿ç»­å‡ºç°çš„æœ€å¤šçš„æ˜¯ Aï¼Œä¸‰æ¬¡ï¼›</p><p>ç¬¬äºŒå¤šçš„è¿˜æ˜¯ Aï¼Œä¸¤æ¬¡ï¼Œä½† A å·²ç»å­˜åœ¨æœ€å¤§è¿ç»­æ¬¡æ•°ä¸‰æ¬¡ï¼Œæ•…ä¸è€ƒè™‘ï¼›</p><p>ä¸‹ä¸ªæœ€é•¿å­ä¸²æ˜¯ Bï¼Œæ‰€ä»¥è¾“å‡º 1ã€‚</p><p><strong>ç”¨ä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">ABC<br>4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åªå«æœ‰ 3 ä¸ªåŒ…å«åŒä¸€å­—æ¯çš„å­ä¸²ï¼Œå°äº kï¼Œè¾“å‡º - 1ã€‚</p><p><strong>ç”¨ä¾‹ 4</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">ABC<br>2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>ä¸‰ä¸ªå­ä¸²é•¿åº¦å‡ä¸º 1ï¼Œæ‰€ä»¥æ­¤æ—¶ k = 1ï¼Œk=2ï¼Œk=3 è¿™ä¸‰ç§æƒ…å†µå‡è¾“å‡º 1ã€‚ç‰¹æ­¤è¯´æ˜ï¼Œé¿å…æ­§ä¹‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            System.out.println(solve(s, k));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">solve</span><span class="hljs-params">(String s, <span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s.length() &lt; k) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> []cnt = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [<span class="hljs-number">26</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n;) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span> (j + <span class="hljs-number">1</span> &lt; n &amp;&amp; s.charAt(j) == s.charAt(i)) &#123;<br>                j++;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> s.charAt(i) - <span class="hljs-string">&#x27;A&#x27;</span>;<br>            cnt[index] = Math.max(cnt[index], j - i);<br>            i = j;<br>        &#125;<br>        List&lt;Integer&gt;list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (cnt[i] &gt; <span class="hljs-number">0</span>) &#123;<br>                list.add(cnt[i]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (list.size() &lt; k) &#123;<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>        &#125;<br>        Arrays.sort(cnt);<br>        <span class="hljs-keyword">return</span> cnt[<span class="hljs-number">26</span> - k];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ»‘åŠ¨çª—å£æœ€å¤§å’Œ</h1><h2 id="é¢˜ç›®æè¿°-20">é¢˜ç›®æè¿°</h2><p>æœ‰ä¸€ä¸ª N ä¸ªæ•´æ•°çš„æ•°ç»„ï¼Œå’Œä¸€ä¸ªé•¿åº¦ä¸º M çš„çª—å£ï¼Œçª—å£ä»æ•°ç»„å†…çš„ç¬¬ä¸€ä¸ªæ•°å¼€å§‹æ»‘åŠ¨ç›´åˆ°çª—å£ä¸èƒ½æ»‘åŠ¨ä¸ºæ­¢ï¼Œæ¯æ¬¡çª—å£æ»‘åŠ¨äº§ç”Ÿä¸€ä¸ªçª—å£å’Œï¼ˆçª—å£å†…æ‰€æœ‰æ•°çš„å’Œï¼‰ï¼Œæ±‚çª—å£æ»‘åŠ¨äº§ç”Ÿçš„æ‰€æœ‰çª—å£å’Œçš„æœ€å¤§å€¼ã€‚</p><h3 id="è¾“å…¥æè¿°-19">è¾“å…¥æè¿°</h3><p>ç¬¬ä¸€è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° Nï¼Œè¡¨ç¤ºæ•´æ•°ä¸ªæ•°ã€‚ï¼ˆ0&lt;N&lt;100000ï¼‰</p><p>ç¬¬äºŒè¡Œè¾“å…¥ N ä¸ªæ•´æ•°ï¼Œæ•´æ•°çš„å–å€¼èŒƒå›´ä¸º [-100,100]ã€‚</p><p>ç¬¬ä¸‰è¡Œè¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° Mï¼ŒM ä»£è¡¨çª—å£å¤§å°ï¼ŒM&lt;=100000ï¼Œä¸” M&lt;=Nã€‚</p><h3 id="è¾“å‡ºæè¿°-19">è¾“å‡ºæè¿°</h3><p>çª—å£æ»‘åŠ¨äº§ç”Ÿçš„æ‰€æœ‰çª—å£å’Œçš„æœ€å¤§å€¼ã€‚</p><h3 id="ç¤ºä¾‹-20">ç¤ºä¾‹</h3><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">6<br>10 20 30 15 23 12<br>3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">68<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>çª—å£é•¿åº¦ä¸º 3ï¼Œçª—å£æ»‘åŠ¨äº§ç”Ÿçš„çª—å£å’Œåˆ†åˆ«ä¸º 10+20+30=60ï¼Œ20+30+15=65ï¼Œ30+15+23=68ï¼Œ15+23+12=50ï¼Œæ‰€ä»¥çª—å£æ»‘åŠ¨äº§ç”Ÿçš„æ‰€æœ‰çª—å£å’Œçš„æœ€å¤§å€¼ä¸º 68ã€‚</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> [] arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                             Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            System.out.println(solve(n, m, arr));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">solve</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> []arr)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>            sum += arr[i];<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">top</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        ans = Math.max(ans, sum);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> m; i &lt; n; i++) &#123;<br>            sum -= arr[top];<br>            sum += arr[i];<br>            top++;<br>            ans = Math.max(ans, sum);<br>        &#125;<br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç´ æ•°ä¹‹ç§¯</h1><h2 id="é¢˜ç›®æè¿°-21">é¢˜ç›®æè¿°</h2><p>RSA åŠ å¯†ç®—æ³•åœ¨ç½‘ç»œå®‰å…¨ä¸–ç•Œä¸­æ— å¤„ä¸åœ¨ï¼Œå®ƒåˆ©ç”¨äº†æå¤§æ•´æ•°å› æ•°åˆ†è§£çš„å›°éš¾åº¦ï¼Œæ•°æ®è¶Šå¤§ï¼Œå®‰å…¨ç³»æ•°è¶Šé«˜ï¼Œç»™å®šä¸€ä¸ª 32 ä½æ­£æ•´æ•°ï¼Œè¯·å¯¹å…¶è¿›è¡Œå› æ•°åˆ†è§£ï¼Œæ‰¾å‡ºæ˜¯å“ªä¸¤ä¸ªç´ æ•°çš„ä¹˜ç§¯ã€‚</p><h3 id="è¾“å…¥æè¿°-20">è¾“å…¥æè¿°</h3><p>ä¸€ä¸ªæ­£æ•´æ•° numï¼ˆ0&lt;num&lt;=2147483647ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-20">è¾“å‡ºæè¿°</h3><p>å¦‚æœæˆåŠŸæ‰¾åˆ°ï¼Œä»¥å•ä¸ªç©ºæ ¼åˆ†å‰²ï¼Œä»å°åˆ°å¤§è¾“å‡ºä¸¤ä¸ªç´ æ•°ï¼›åˆ†è§£å¤±è´¥ï¼Œè¯·è¾“å‡º - 1 -1ã€‚</p><h3 id="ç¤ºä¾‹-21">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">15<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 5<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>å› æ•°åˆ†è§£åï¼Œæ‰¾åˆ°ä¸¤ä¸ªç´ æ•° 3 å’Œ 5ï¼Œä½¿å¾— 3*5=15ï¼ŒæŒ‰ä»å°åˆ°å¤§æ’åˆ—åï¼Œè¾“å‡º 3 5ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">27<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-1 -1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>é€šè¿‡å› æ•°åˆ†è§£ï¼Œæ‰¾ä¸åˆ°ä»»ä½•ç´ æ•°ï¼Œä½¿å¾—ä»–ä»¬çš„ä¹˜ç§¯ä¸º 27ï¼Œè¾“å‡º - 1 -1ã€‚</p>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            System.out.println(solve(n));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span>  <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPrime</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-keyword">if</span> (n &lt; <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= Math.sqrt(n) + <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span>  <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">solve</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>; i &lt;= Math.sqrt(n) + <span class="hljs-number">1</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (isPrime(i) == <span class="hljs-literal">true</span> &amp;&amp; isPrime(n / i) == <span class="hljs-literal">true</span> &amp;&amp; n % i == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(i + <span class="hljs-string">&quot; &quot;</span> + n / i);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(<span class="hljs-string">&quot;-1 -1&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ä»¿ LISP è¿ç®—</h1><h2 id="é¢˜ç›®æè¿°-22">é¢˜ç›®æè¿°</h2><p>å°åŸºè®¾è®¡äº†ä¸€ç§ç®€åŒ–ç‰ˆçš„ LISP è¯­è¨€ï¼Œå…¶å”¯ä¸€çš„è¯­æ³•å°±æ˜¯æ‹¬å·è¦é…å¯¹ã€‚</p><p>å½¢å¦‚ (OP P1 P2 â€¦)ï¼Œæ‹¬å·å†…å…ƒç´ ç”±å•ä¸ªç©ºæ ¼åˆ†å‰²ã€‚</p><p>å…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´  OP ä¸ºæ“ä½œç¬¦ï¼Œåç»­å…ƒç´ å‡ä¸ºå…¶å‚æ•°ï¼Œå‚æ•°ä¸ªæ•°å–å†³äºæ“ä½œç¬¦ç±»å‹ã€‚</p><h3 id="æ³¨æ„">æ³¨æ„</h3><ol><li>å‚æ•° P1, P2 ä¹Ÿæœ‰å¯èƒ½æ˜¯å¦å¤–ä¸€ä¸ªåµŒå¥—çš„ (OP P1 P2 â€¦)ï¼›</li><li>å½“å‰ OP ç±»å‹ä¸º add /sub/mul /divï¼ˆå…¨å°å†™ï¼‰ï¼Œåˆ†åˆ«ä»£è¡¨æ•´æ•°çš„åŠ å‡ä¹˜é™¤æ³•ï¼Œç®€å•èµ·è§ï¼Œæ‰€æœ‰ OP å‚æ•°ä¸ªæ•°å‡ä¸º 2ï¼›</li><li>é¢˜ç›®æ¶‰åŠæ•°å­—å‡ä¸ºæ•´æ•°ï¼Œå¯èƒ½ä¸ºè´Ÿï¼›</li><li>ä¸è€ƒè™‘ 32 ä½æº¢å‡ºç¿»è½¬ï¼Œè®¡ç®—è¿‡ç¨‹ä¸­ä¹Ÿä¸ä¼šå‘ç”Ÿ 32 ä½æº¢å‡ºç¿»è½¬ï¼›</li><li>é™¤é›¶é”™è¯¯æ—¶ï¼Œè¾“å‡º â€œerrorâ€ï¼›</li><li>é™¤æ³•é‡é™¤ä¸å°½ï¼Œå‘ä¸‹å–æ•´ï¼Œå³ 3/2 = 1ã€‚</li></ol><h3 id="è¾“å…¥æ ¼å¼-2">è¾“å…¥æ ¼å¼</h3><p>è¾“å…¥ä¸ºé•¿åº¦ä¸è¶…è¿‡ 512512512 çš„å­—ç¬¦ä¸²ï¼Œç”¨ä¾‹ä¿è¯äº†æ— è¯­æ³•é”™è¯¯ã€‚</p><h3 id="è¾“å‡ºæ ¼å¼-2">è¾“å‡ºæ ¼å¼</h3><p>è¾“å‡ºè®¡ç®—ç»“æœæˆ–è€… â€œerrorâ€ã€‚</p><h3 id="æ ·ä¾‹">æ ·ä¾‹</h3><p><strong>æ ·ä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">(div 12 (sub 45 45))<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">error<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šè¯´æ˜</strong></p><p>45 å‡ 45 å¾— 0ï¼Œ12 é™¤ä»¥ 0 ä¸ºé™¤é›¶é”™è¯¯ï¼Œè¾“å‡º errorã€‚</p><p><strong>æ ·ä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">(add 1 (div -7 3))<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-2<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Šè¯´æ˜</strong></p><p>-7 é™¤ä»¥ 3 å‘ä¸‹å–æ•´å¾— - 3ï¼Œ1 åŠ  - 3 å¾— - 2ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> Stack&lt;Integer&gt;numStack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    <span class="hljs-keyword">static</span> Stack&lt;String&gt;opStack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">pos</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> s.charAt(i);<br>                <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                    opStack.push(s.substring(i + <span class="hljs-number">1</span>, i + <span class="hljs-number">4</span>));<br>                    i += <span class="hljs-number">4</span>;<br>                    pos = i + <span class="hljs-number">1</span>;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;)&#x27;</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (pos &lt; i) &#123;<br>                        numStack.push(Integer.parseInt(s.substring(pos, i)));<br>                        i += <span class="hljs-number">1</span>;<br>                        pos = i + <span class="hljs-number">1</span>;<br>                    &#125;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">num2</span> <span class="hljs-operator">=</span> numStack.pop();<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">num1</span> <span class="hljs-operator">=</span> numStack.pop();<br>                    calculate(num1, num2);<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27; &#x27;</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (pos &lt; i) &#123;<br>                        numStack.push(Integer.parseInt(s.substring(pos, i)));<br>                        pos = i + <span class="hljs-number">1</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">while</span> (opStack.size() != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">num2</span> <span class="hljs-operator">=</span> numStack.pop();<br>                <span class="hljs-type">int</span> <span class="hljs-variable">num1</span> <span class="hljs-operator">=</span> numStack.pop();<br>                calculate(num1, num2);<br>            &#125;<br>            System.out.println(numStack.get(<span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">op</span> <span class="hljs-operator">=</span> opStack.pop();<br>        <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;add&quot;</span>)) &#123;<br>            numStack.push(num1 + num2);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;sub&quot;</span>)) &#123;<br>            numStack.push(num1 - num2);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;mul&quot;</span>)) &#123;<br>            numStack.push(num1 * num2);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;div&quot;</span>)) &#123;<br>            <span class="hljs-keyword">if</span> (num2 == <span class="hljs-number">0</span>) &#123;<br>                System.out.println(<span class="hljs-string">&quot;error&quot;</span>);<br>                System.exit(<span class="hljs-number">0</span>);<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> num1 / num2; <span class="hljs-comment">//è€ƒè™‘è´Ÿæ•°çš„æƒ…å†µ</span><br>            <span class="hljs-keyword">if</span> (num1 % num2 != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span>) &#123;<br>                    x -= <span class="hljs-number">1</span>;<br>                &#125;<br>            &#125;<br>            numStack.push(x);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è´ªåƒè›‡</h1><h2 id="é¢˜ç›®æè¿°-23">é¢˜ç›®æè¿°</h2><p>è´ªåƒè›‡æ˜¯ä¸€ä¸ªç»å…¸æ¸¸æˆï¼Œè›‡çš„èº«ä½“ç”±è‹¥å¹²æ–¹æ ¼è¿æ¥è€Œæˆï¼Œèº«ä½“éšè›‡å¤´ç§»åŠ¨ã€‚è›‡å¤´è§¦ç¢°åˆ°é£Ÿç‰©æ—¶ï¼Œè›‡çš„é•¿åº¦ä¼šå¢åŠ ä¸€æ ¼ã€‚è›‡å¤´å’Œèº«ä½“çš„ä»»ä¸€æ–¹æ ¼æˆ–è€…æ¸¸æˆç‰ˆå›¾è¾¹ç•Œç¢°æ’æ—¶ï¼Œæ¸¸æˆç»“æŸã€‚</p><p>ä¸‹é¢è®©æˆ‘ä»¬æ¥å®Œæˆè´ªåƒè›‡æ¸¸æˆçš„æ¨¡æ‹Ÿï¼š</p><p><img src="https://a1.boltp.com/2025/12/06/6933ba1bc0859.png" alt="26bdc5c3c52a4e559f519d5282eab151(1).png"></p><p>ç»™å®šä¸€ä¸ª N<em>M çš„æ•°ç»„ arrï¼Œä»£è¡¨ N</em>M ä¸ªæ–¹æ ¼ç»„æˆçš„ç‰ˆå›¾ï¼Œè´ªåƒè›‡æ¯æ¬¡ç§»åŠ¨ä¸€ä¸ªæ–¹æ ¼ã€‚</p><ul><li>è‹¥ arr [i][j] == â€˜Hâ€™ï¼Œè¡¨ç¤ºè¯¥æ–¹æ ¼ä¸ºè´ªåƒè›‡çš„èµ·å§‹ä½ç½®ï¼›</li><li>è‹¥ arr [i][j] == â€˜Fâ€™ï¼Œè¡¨ç¤ºè¯¥æ–¹æ ¼ä¸ºé£Ÿç‰©ï¼›</li><li>è‹¥ arr [i][j] == â€˜Eâ€™ï¼Œè¡¨ç¤ºè¯¥æ–¹æ ¼ä¸ºç©ºæ ¼ã€‚</li></ul><p>è´ªåƒè›‡åˆå§‹é•¿åº¦ä¸º 1ï¼Œåˆå§‹ç§»åŠ¨æ–¹å‘ä¸ºå‘å·¦ã€‚</p><p>ä¸ºç»™å®šä¸€ç³»åˆ—è´ªåƒè›‡çš„ç§»åŠ¨æ“ä½œï¼Œè¿”å›æ“ä½œåè›‡çš„é•¿åº¦ï¼Œå¦‚æœåœ¨æ“ä½œæ‰§è¡Œå®Œä¹‹å‰å·²ç»æ¸¸æˆç»“æŸï¼Œè¿”å›æ¸¸æˆç»“æŸæ—¶è›‡çš„é•¿åº¦ã€‚</p><h3 id="è¾“å…¥æè¿°-21">è¾“å…¥æè¿°</h3><ol><li><p>ç¬¬ä¸€è¡Œä¸ºç©ºæ ¼åˆ†éš”çš„å­—æ¯ï¼Œä»£è¡¨è´ªåƒè›‡çš„ç§»åŠ¨æ“ä½œã€‚å­—æ¯å–å€¼ä¸º Uã€Dã€Lã€R å’Œ Gï¼š</p><ul><li><p>Uã€Dã€Lã€R åˆ†åˆ«è¡¨ç¤ºè´ªåƒè›‡å¾€ä¸Šã€ä¸‹ã€å·¦ã€å³è½¬å‘ï¼Œè½¬å‘æ—¶è´ªåƒè›‡ä¸ç§»åŠ¨ï¼›</p></li><li><p>G è¡¨ç¤ºè´ªåƒè›‡æŒ‰å½“å‰çš„æ–¹å‘ç§»åŠ¨ä¸€æ ¼ã€‚</p><p>ç”¨ä¾‹ä¿è¯è¾“å…¥çš„æ“ä½œæ­£ç¡®ã€‚</p></li></ul></li><li><p>ç¬¬äºŒè¡Œä¸ºç©ºæ ¼åˆ†éš”çš„ä¸¤ä¸ªæ•°ï¼ŒæŒ‡å®š N å’Œ Mï¼Œä¸ºæ•°ç»„çš„è¡Œå’Œåˆ—æ•°ã€‚</p></li><li><p>ä½™ä¸‹ N è¡Œæ¯è¡Œæ˜¯ç©ºæ ¼åˆ†éš”çš„ M ä¸ªå­—æ¯ã€‚å­—æ¯å–å€¼ä¸º Hã€F å’Œ Eï¼š</p><ul><li>H è¡¨ç¤ºè´ªåƒè›‡çš„èµ·å§‹ä½ç½®ï¼ˆç”¨ä¾‹ä¿è¯æœ‰ä¸”åªæœ‰ä¸€ä¸ª Hï¼‰ï¼›</li><li>F è¡¨ç¤ºé£Ÿç‰©ï¼›</li><li>E è¡¨ç¤ºè¯¥æ–¹æ ¼ä¸ºç©ºã€‚</li></ul></li></ol><h3 id="è¾“å‡ºæè¿°-21">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä¸€ä¸ªæ•°å­—ï¼Œä¸ºè›‡çš„é•¿åº¦ã€‚</p><h3 id="ç”¨ä¾‹-1">ç”¨ä¾‹ 1</h3><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">D G G<br>3 3<br>F F F<br>F F H<br>E F E<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åœ°å›¾è¡¨ç¤ºä¸ºï¼š</p><ul><li>è›‡å¤´ H (Head)</li><li>é£Ÿç‰© F (Food)</li><li>E è¡¨ç¤ºè¯¥æ–¹æ ¼ä¸ºç©º</li></ul><p>å››ä¸ªæ–¹å‘åˆ†åˆ«è¡¨ç¤ºä¸ºï¼š</p><ul><li>å‘ä¸Š U (up)</li><li>å‘ä¸‹ D (down)</li><li>å‘å·¦ L (Left)</li><li>å‘å³ R (Right)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []ops = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">1</span>];<br>            String [][]board = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[n + <span class="hljs-number">1</span>][m + <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                board[i] = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>            <span class="hljs-type">int</span> []startPos = <span class="hljs-literal">null</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;H&quot;</span>.equals(board[i][j])) &#123;<br>                        board[i][j] = <span class="hljs-string">&quot;E&quot;</span>;<br>                        startPos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;i, j&#125;;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (startPos != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            List&lt;<span class="hljs-type">int</span>[]&gt;snakeBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            snakeBody.add(startPos);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">direction</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;L&quot;</span>;<br>            <span class="hljs-keyword">for</span> (String op : ops) &#123;<br>                <span class="hljs-keyword">switch</span> (op) &#123;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;U&quot;</span>:<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;D&quot;</span>:<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;L&quot;</span>:<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;R&quot;</span>:<br>                        direction = op;<br>                        <span class="hljs-keyword">break</span>;<br>                    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;G&quot;</span>:<br>                        <span class="hljs-type">int</span> []head = snakeBody.get(<span class="hljs-number">0</span>);<br>                        <span class="hljs-type">int</span> []nextPos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[<span class="hljs-number">2</span>];<br>                        <span class="hljs-keyword">switch</span> (direction) &#123;<br>                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;U&quot;</span>:<br>                                nextPos[<span class="hljs-number">0</span>] = head[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span>; <span class="hljs-comment">// è¡Œå‡1ï¼ˆå‘ä¸Šï¼‰</span><br>                                nextPos[<span class="hljs-number">1</span>] = head[<span class="hljs-number">1</span>];<br>                                <span class="hljs-keyword">break</span>;<br>                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;D&quot;</span>:<br>                                nextPos[<span class="hljs-number">0</span>] = head[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>; <span class="hljs-comment">// è¡ŒåŠ 1ï¼ˆå‘ä¸‹ï¼‰</span><br>                                nextPos[<span class="hljs-number">1</span>] = head[<span class="hljs-number">1</span>];<br>                                <span class="hljs-keyword">break</span>;<br>                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;L&quot;</span>:<br>                                nextPos[<span class="hljs-number">0</span>] = head[<span class="hljs-number">0</span>];<br>                                nextPos[<span class="hljs-number">1</span>] = head[<span class="hljs-number">1</span>] - <span class="hljs-number">1</span>; <span class="hljs-comment">// åˆ—å‡1ï¼ˆå‘å·¦ï¼‰</span><br>                                <span class="hljs-keyword">break</span>;<br>                            <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;R&quot;</span>:<br>                                nextPos[<span class="hljs-number">0</span>] = head[<span class="hljs-number">0</span>];<br>                                nextPos[<span class="hljs-number">1</span>] = head[<span class="hljs-number">1</span>] + <span class="hljs-number">1</span>; <span class="hljs-comment">// åˆ—åŠ 1ï¼ˆå‘å³ï¼‰</span><br>                                <span class="hljs-keyword">break</span>;<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (nextPos[<span class="hljs-number">0</span>] &lt; <span class="hljs-number">0</span> || nextPos[<span class="hljs-number">0</span>] &gt;= n || nextPos[<span class="hljs-number">1</span>] &lt; <span class="hljs-number">0</span> || nextPos[<span class="hljs-number">1</span>] &gt;= m) &#123;<br>                            System.out.println(snakeBody.size());<br>                            System.exit(<span class="hljs-number">0</span>);<br>                        &#125;<br>                        <span class="hljs-type">boolean</span> <span class="hljs-variable">flag</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; snakeBody.size() - <span class="hljs-number">1</span>; i++) &#123;<br>                            <span class="hljs-type">int</span> [] bodyPart = snakeBody.get(i);<br>                            <span class="hljs-keyword">if</span> (bodyPart[<span class="hljs-number">0</span>] == nextPos[<span class="hljs-number">0</span>] &amp;&amp; bodyPart[<span class="hljs-number">1</span>] == nextPos[<span class="hljs-number">1</span>]) &#123;<br>                                flag = <span class="hljs-literal">true</span>;<br>                                <span class="hljs-keyword">break</span>;<br>                            &#125;<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (flag) &#123;<br>                            System.out.println(snakeBody.size());<br>                            System.exit(<span class="hljs-number">0</span>);<br>                        &#125;<br>                        <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;E&quot;</span>.equals(board[nextPos[<span class="hljs-number">0</span>]][nextPos[<span class="hljs-number">1</span>]])) &#123;<br>                            List&lt;<span class="hljs-type">int</span>[]&gt;newBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                            newBody.add(nextPos);<br>                            newBody.addAll(snakeBody.subList(<span class="hljs-number">0</span>, snakeBody.size() - <span class="hljs-number">1</span>));<br>                            snakeBody = newBody;<br>                        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;F&quot;</span>.equals(board[nextPos[<span class="hljs-number">0</span>]][nextPos[<span class="hljs-number">1</span>]])) &#123;<br>                            List&lt;<span class="hljs-type">int</span>[]&gt;newBody = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                            newBody.add(nextPos);<br>                            newBody.addAll(snakeBody);<br>                            snakeBody = newBody;<br>                            board[nextPos[<span class="hljs-number">0</span>]][nextPos[<span class="hljs-number">1</span>]] = <span class="hljs-string">&quot;E&quot;</span>;<br>                        &#125;<br>                        <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            System.out.println(snakeBody.size());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è§£å¯†çŠ¯ç½ªæ—¶é—´</h1><h2 id="é¢˜ç›®æè¿°-24">é¢˜ç›®æè¿°</h2><p>è­¦å¯Ÿåœ¨ä¾¦ç ´ä¸€ä¸ªæ¡ˆä»¶æ—¶ï¼Œå¾—åˆ°äº†çº¿äººç»™å‡ºçš„å¯èƒ½çŠ¯ç½ªæ—¶é—´ï¼Œå½¢å¦‚ â€œHH:MMâ€ è¡¨ç¤ºçš„æ—¶åˆ»ã€‚æ ¹æ®è­¦å¯Ÿå’Œçº¿äººçš„çº¦å®šï¼Œä¸ºäº†éšè”½ï¼Œè¯¥æ—¶é—´æ˜¯ä¿®æ”¹è¿‡çš„ï¼Œè§£å¯†è§„åˆ™ä¸ºï¼šåˆ©ç”¨å½“å‰å‡ºç°è¿‡çš„æ•°å­—ï¼Œæ„é€ ä¸‹ä¸€ä¸ªè·ç¦»å½“å‰æ—¶é—´æœ€è¿‘çš„æ—¶åˆ»ï¼Œåˆ™è¯¥æ—¶é—´ä¸ºå¯èƒ½çš„çŠ¯ç½ªæ—¶é—´ã€‚æ¯ä¸ªå‡ºç°æ•°å­—éƒ½å¯ä»¥è¢«æ— é™æ¬¡ä½¿ç”¨ã€‚</p><h3 id="è¾“å…¥æè¿°-22">è¾“å…¥æè¿°</h3><p>å½¢å¦‚<code>HH:MM</code>çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºåŸå§‹è¾“å…¥ã€‚</p><h3 id="è¾“å‡ºæè¿°-22">è¾“å‡ºæè¿°</h3><p>å½¢å¦‚<code>HH:MM</code>çš„å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ¨ç†å¤„ç†çš„çŠ¯ç½ªæ—¶é—´ã€‚</p><h3 id="å¤‡æ³¨-2">å¤‡æ³¨</h3><ol><li>å¯ä»¥ä¿è¯çº¿äººç»™å®šçš„å­—ç¬¦ä¸²ä¸€å®šæ˜¯åˆæ³•çš„ã€‚ä¾‹å¦‚ï¼Œâ€œ01:35â€ å’Œ â€œ11:08â€ æ˜¯åˆæ³•çš„ï¼Œâ€œ1:35â€ å’Œ â€œ11:8â€ æ˜¯ä¸åˆæ³•çš„ã€‚</li><li>æœ€è¿‘çš„æ—¶åˆ»å¯èƒ½åœ¨ç¬¬äºŒå¤©ã€‚</li></ol><h3 id="ç¤ºä¾‹-22">ç¤ºä¾‹</h3><table><thead><tr><th style="text-align:center">è¾“å…¥</th><th style="text-align:center">è¾“å‡º</th></tr></thead><tbody><tr><td style="text-align:center">20:12</td><td style="text-align:center">20:20</td></tr><tr><td style="text-align:center">23:59</td><td style="text-align:center">22:22</td></tr><tr><td style="text-align:center">12:58</td><td style="text-align:center">15:11</td></tr><tr><td style="text-align:center">18:52</td><td style="text-align:center">18:55</td></tr><tr><td style="text-align:center">23:52</td><td style="text-align:center">23:53</td></tr><tr><td style="text-align:center">09:17</td><td style="text-align:center">09:19</td></tr><tr><td style="text-align:center">07:08</td><td style="text-align:center">08:00</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> s.indexOf(<span class="hljs-string">&quot;:&quot;</span>);<br>            <span class="hljs-type">boolean</span> []vis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[<span class="hljs-number">10</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : s.toCharArray()) &#123;<br>                <span class="hljs-keyword">if</span> (ch != <span class="hljs-string">&#x27;:&#x27;</span>) &#123;<br>                    vis[ch - <span class="hljs-string">&#x27;0&#x27;</span>] = <span class="hljs-literal">true</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">hour</span> <span class="hljs-operator">=</span> Integer.parseInt(s.substring(<span class="hljs-number">0</span>, index)),<br>                minute = Integer.parseInt(s.substring(index + <span class="hljs-number">1</span>)), x = Integer.MAX_VALUE;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> hour * <span class="hljs-number">60</span> + minute;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ansHour</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ansMinute = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">24</span>; i++) &#123;<br>                <span class="hljs-keyword">if</span> (!(vis[i / <span class="hljs-number">10</span>] &amp;&amp; vis[i % <span class="hljs-number">10</span>])) &#123;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">60</span>; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (!(vis[j / <span class="hljs-number">10</span>] &amp;&amp; vis[j % <span class="hljs-number">10</span>])) &#123;<br>                        <span class="hljs-keyword">continue</span>;<br>                    &#125;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">times</span> <span class="hljs-operator">=</span> i * <span class="hljs-number">60</span> + j;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">sub</span> <span class="hljs-operator">=</span> times &gt; cur ? times - cur : <span class="hljs-number">24</span> * <span class="hljs-number">60</span> - (cur - times);<br>                    <span class="hljs-keyword">if</span> (sub &lt; x &amp;&amp; sub &gt; <span class="hljs-number">0</span>) &#123;<br>                        x = sub;<br>                        ansHour = i;<br>                        ansMinute = j;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            System.out.printf(<span class="hljs-string">&quot;%02d:%02d%n&quot;</span>, ansHour, ansMinute);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ±‚æ»¡è¶³æ¡ä»¶çš„æœ€é•¿å­ä¸²çš„é•¿åº¦</h1><h2 id="é¢˜ç›®æè¿°-25">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼ŒåªåŒ…å«å­—æ¯å’Œæ•°å­—ï¼ŒæŒ‰è¦æ±‚æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­çš„æœ€é•¿ï¼ˆè¿ç»­ï¼‰å­ä¸²çš„é•¿åº¦ï¼Œå­—ç¬¦ä¸²æœ¬èº«æ˜¯å…¶æœ€é•¿çš„å­ä¸²ï¼Œå­ä¸²è¦æ±‚ï¼š</p><ol><li>åªåŒ…å« 1 ä¸ªå­—æ¯ (a~z, A~Z)ï¼Œå…¶ä½™å¿…é¡»æ˜¯æ•°å­—ï¼›</li><li>å­—æ¯å¯ä»¥åœ¨å­ä¸²ä¸­çš„ä»»æ„ä½ç½®ã€‚</li></ol><p>å¦‚æœæ‰¾ä¸åˆ°æ»¡è¶³è¦æ±‚çš„å­ä¸²ï¼ˆå¦‚å…¨æ˜¯å­—æ¯æˆ–å…¨æ˜¯æ•°å­—ï¼‰ï¼Œåˆ™è¿”å› - 1ã€‚</p><h3 id="è¾“å…¥æè¿°-23">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸ºåªåŒ…å«å­—æ¯å’Œæ•°å­—çš„å­—ç¬¦ä¸²ã€‚</p><h3 id="è¾“å‡ºæè¿°-23">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„å­ä¸²çš„é•¿åº¦ã€‚</p><h3 id="ç¤ºä¾‹-23">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">abC124ACb<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ»¡è¶³æ¡ä»¶çš„æœ€é•¿å­ä¸²æ˜¯ C124 æˆ–è€… 124Aï¼Œé•¿åº¦éƒ½æ˜¯ 4ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">a5<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>å­—ç¬¦ä¸²è‡ªèº«å°±æ˜¯æ»¡è¶³æ¡ä»¶çš„å­ä¸²ï¼Œé•¿åº¦ä¸º 2ã€‚</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">aBB9<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ»¡è¶³æ¡ä»¶çš„å­ä¸²ä¸º B9ï¼Œé•¿åº¦ä¸º 2ã€‚</p><p><strong>ç¤ºä¾‹ 4</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">abcdef<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">-1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ²¡æœ‰æ»¡è¶³è¦æ±‚çš„å­ä¸²ï¼Œè¿”å› - 1ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, r = <span class="hljs-number">0</span>, charCount = <span class="hljs-number">0</span>, numCount = <span class="hljs-number">0</span>, ans = -<span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>            <span class="hljs-keyword">while</span> (r &lt; n) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(r) &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(r) &lt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>                    numCount++;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    charCount++;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (charCount == <span class="hljs-number">1</span> &amp;&amp; numCount &gt;= <span class="hljs-number">1</span>) &#123;<br>                    ans = Math.max(ans, r - l + <span class="hljs-number">1</span>);<br>                &#125;<br>                <span class="hljs-keyword">while</span> (charCount &gt; <span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (s.charAt(l) &gt;= <span class="hljs-string">&#x27;0&#x27;</span> &amp;&amp; s.charAt(l) &lt;= <span class="hljs-string">&#x27;9&#x27;</span>) &#123;<br>                        numCount--;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        charCount--;<br>                    &#125;<br>                    l++;<br>                &#125;<br>                r++;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æœºå™¨äººèµ°è¿·å®«</h1><h2 id="é¢˜ç›®æè¿°-26">é¢˜ç›®æè¿°</h2><p><img src="https://a1.boltp.com/2025/12/06/6933baaa1c1d8.png" alt="img"></p><p>æœºå™¨äººèµ°ä¸€ä¸ª<code>X*Y</code>çš„è¿·å®«ï¼Œè¿·å®«ä¸­æœ‰éšœç¢ç‰©ï¼ˆç”¨ 0 è¡¨ç¤ºï¼‰ï¼Œå¯é€šè¡Œæ–¹æ ¼ç”¨ #è¡¨ç¤ºã€‚æœºå™¨äººä»<code>(0,0)</code>çš„ä½ç½®èµ°åˆ°<code>(X,Y)</code>çš„ä½ç½®ï¼Œä¸”åªèƒ½å‘ Xã€Y åæ ‡å¢åŠ çš„æ–¹å‘èµ°ï¼ˆå‘ä¸‹æˆ–å‘å‰ï¼‰ï¼Œä¸èƒ½å›é€€ã€‚</p><p>è¿·å®«ä¸­å­˜åœ¨ä¸¤ç±»ç‰¹æ®Šæ–¹æ ¼ï¼š</p><ul><li>ä¸å¯è¾¾æ–¹æ ¼ï¼šæœºå™¨äººåœ¨è¡Œèµ°è·¯å¾„ä¸Šä¸å¯èƒ½èµ°åˆ°çš„æ–¹æ ¼ï¼›</li><li>é™·é˜±æ–¹æ ¼ï¼šèµ°è¿›ä¹‹åæ— æ³•æŠµè¾¾ç»ˆç‚¹çš„æ–¹æ ¼ã€‚</li></ul><p>è¦æ±‚è¾“å‡ºé™·é˜±æ–¹æ ¼å’Œä¸å¯è¾¾æ–¹æ ¼çš„æ•°é‡ã€‚</p><h3 id="è¾“å…¥æè¿°-24">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œä¸ºæˆ¿é—´çš„ X å’Œ Yï¼ˆ0&lt;=X/Y &lt;=1000ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œä¸ºæˆ¿é—´ä¸­çš„å¢™å£éšœç¢ç‰©ä¸ªæ•° Nï¼ˆ0&lt;= N &lt;=X*Yï¼‰ï¼›</li><li>æ¥ä¸‹æ¥ä¼šæœ‰ N è¡Œå¢™å£çš„åæ ‡ï¼ŒåŒä¸€è¡Œä¸­è‹¥æœ‰å¤šä¸ªéšœç¢ç‰©ï¼Œä»¥ç©ºæ ¼éš”å¼€ï¼Œæ‰€æœ‰æ•°æ®è¾“å…¥å‡åˆæ³•ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-24">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºé™·é˜±æ–¹æ ¼ä¸ä¸å¯è¾¾æ–¹æ ¼æ•°é‡ï¼Œä»¥ç©ºæ ¼éš”å¼€ã€‚</p><h3 id="ç¤ºä¾‹-24">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">6 4<br>5<br>0 2<br>1 2<br>2 2<br>4 1<br>5 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 3<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], m = arr[<span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> [][]map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>][m + <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; k; i++) &#123;<br>                arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                          Integer::parseInt).toArray();<br>                map[arr[<span class="hljs-number">0</span>]][arr[<span class="hljs-number">1</span>]] = <span class="hljs-number">1</span>;<br>            &#125;<br>            map[n - <span class="hljs-number">1</span>][m - <span class="hljs-number">1</span>] = <span class="hljs-number">2</span>;<br>            dfs(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, n, m, map);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans1</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ans2 = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; m; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (map[i][j] == -<span class="hljs-number">1</span>) &#123;<br>                        ans1++;<br>                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (map[i][j] == <span class="hljs-number">0</span>) &#123;<br>                        ans2++;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            System.out.println(ans1 + <span class="hljs-string">&quot; &quot;</span> + ans2);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> [][]map)</span> &#123;<br>        <span class="hljs-keyword">if</span> (map[x][y] == -<span class="hljs-number">1</span> || map[x][y] == <span class="hljs-number">1</span> || x &gt;= n || y &gt;= m) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (map[x][y] == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (map[x][y] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> dfs(x + <span class="hljs-number">1</span>, y, n, m, map);<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">up</span> <span class="hljs-operator">=</span> dfs(x, y + <span class="hljs-number">1</span>, n, m, map);<br>            <span class="hljs-keyword">if</span> (right || up) &#123;<br>                map[x][y] = <span class="hljs-number">2</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                map[x][y] = -<span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> map[x][y] == <span class="hljs-number">2</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>é«˜æ•ˆçš„ä»»åŠ¡è§„åˆ’</h1><h2 id="é¢˜ç›®æè¿°-27">é¢˜ç›®æè¿°</h2><p>ä½ æœ‰ n å°æœºå™¨ç¼–å·ä¸º 1~nï¼Œæ¯å°éƒ½éœ€è¦å®Œæˆä¸€é¡¹å·¥ä½œï¼Œæœºå™¨ç»è¿‡é…ç½®åéƒ½èƒ½ç‹¬ç«‹å®Œæˆä¸€é¡¹å·¥ä½œã€‚å‡è®¾ç¬¬ i å°æœºå™¨éœ€è¦èŠ± B åˆ†é’Ÿè¿›è¡Œè®¾ç½®ï¼Œç„¶åå¼€å§‹è¿è¡Œï¼ŒJ åˆ†é’Ÿåå®Œæˆä»»åŠ¡ã€‚ç°åœ¨éœ€è¦é€‰æ‹©å¸ƒç½®å·¥ä½œçš„é¡ºåºï¼Œä½¿å¾—ç”¨æœ€çŸ­çš„æ—¶é—´å®Œæˆæ‰€æœ‰å·¥ä½œã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä¸èƒ½åŒæ—¶å¯¹ä¸¤å°æœºå™¨è¿›è¡Œé…ç½®ï¼Œä½†é…ç½®å®Œæˆçš„æœºå™¨ä»¬å¯ä»¥åŒæ—¶æ‰§è¡Œå„è‡ªçš„å·¥ä½œã€‚</p><h3 id="è¾“å…¥æè¿°-25">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œè¾“å…¥ä»£è¡¨æ€»å…±æœ‰ M ç»„ä»»åŠ¡æ•°æ®ï¼ˆ1&lt;M&lt;=10ï¼‰ã€‚</li><li>æ¯ç»„æ•°æ®ç¬¬ä¸€è¡Œä¸ºä¸€ä¸ªæ•´æ•°æŒ‡å®šæœºå™¨çš„æ•°é‡ Nï¼ˆ0&lt;N&lt;=1000ï¼‰ã€‚</li><li>éšåçš„ N è¡Œæ¯è¡Œä¸¤ä¸ªæ•´æ•°ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤º Bï¼ˆ0&lt;=B&lt;=10000ï¼‰ï¼Œç¬¬äºŒä¸ªè¡¨ç¤º Jï¼ˆ0&lt;=J&lt;=10000ï¼‰ã€‚</li><li>æ¯ç»„æ•°æ®è¿ç»­è¾“å…¥ï¼Œä¸ä¼šç”¨ç©ºè¡Œåˆ†éš”ã€‚å„ç»„ä»»åŠ¡å•ç‹¬è®¡æ—¶ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-25">è¾“å‡ºæè¿°</h3><p>å¯¹äºæ¯ç»„ä»»åŠ¡ï¼Œè¾“å‡ºæœ€çŸ­å®Œæˆæ—¶é—´ï¼Œä¸”æ¯ç»„çš„ç»“æœç‹¬å ä¸€è¡Œã€‚</p><h3 id="ç¤ºä¾‹-25">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br>1<br>2 2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong></p><p>ç¬¬ä¸€è¡Œ 1 ä¸ºä¸€ç»„ä»»åŠ¡ï¼Œç¬¬äºŒè¡Œ 1 ä»£è¡¨åªæœ‰ä¸€å°æœºå™¨ï¼Œç¬¬ä¸‰è¡Œè¡¨ç¤ºè¯¥æœºå™¨é…ç½®éœ€ 2 åˆ†é’Ÿï¼Œæ‰§è¡Œéœ€ 2 åˆ†é’Ÿï¼Œæ€»è€—æ—¶ 2+2=4 åˆ†é’Ÿã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>2<br>1 1<br>2 2<br>3<br>1 1<br>2 2<br>3 3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br>7<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong></p><ul><li>ç¬¬ä¸€è¡Œ 2 ä»£è¡¨ä¸¤ç»„ä»»åŠ¡ï¼›</li><li>ç¬¬äºŒè¡Œ 2 ä»£è¡¨ç¬¬ä¸€ç»„ä»»åŠ¡æœ‰ 2 ä¸ªæœºå™¨ï¼›</li><li>ç¬¬ä¸‰è¡Œ 1 1 ä»£è¡¨æœºå™¨ 1 é…ç½®éœ€è¦ 1 åˆ†ã€è¿è¡Œéœ€è¦ 1 åˆ†ï¼›</li><li>ç¬¬å››è¡Œ 2 2 ä»£è¡¨æœºå™¨ 2 é…ç½®éœ€è¦ 2 åˆ†ã€è¿è¡Œéœ€è¦ 2 åˆ†ï¼›</li><li>ç¬¬äº”è¡Œ 3 ä»£è¡¨ç¬¬äºŒç»„ä»»åŠ¡éœ€è¦ 3 ä¸ªæœºå™¨ï¼›</li><li>ç¬¬ 6-8 è¡Œåˆ†åˆ«è¡¨ç¤º 3 ä¸ªæœºå™¨çš„é…ç½®ä¸è¿è¡Œæ—¶é—´ï¼›</li><li>ç¬¬ä¸€ç»„æœ€ä¼˜é¡ºåºä¸ºæœºå™¨ 2â†’æœºå™¨ 1ï¼šé…ç½®æ€»è€—æ—¶ 2+1=3 åˆ†é’Ÿï¼Œæœºå™¨ 2 è¿è¡Œç»“æŸæ—¶é—´ 3+2=5 åˆ†é’Ÿï¼Œæœºå™¨ 1 è¿è¡Œç»“æŸæ—¶é—´ 3+1=4 åˆ†é’Ÿï¼Œæ€»è€—æ—¶ 4 åˆ†é’Ÿï¼›</li><li>ç¬¬äºŒç»„æœ€ä¼˜é¡ºåºä¸ºæœºå™¨ 3â†’æœºå™¨ 2â†’æœºå™¨ 1ï¼šé…ç½®æ€»è€—æ—¶ 3+2+1=6 åˆ†é’Ÿï¼Œæœºå™¨ 3 è¿è¡Œç»“æŸæ—¶é—´ 6+3=9 åˆ†é’Ÿï¼Œæœºå™¨ 2 è¿è¡Œç»“æŸæ—¶é—´ 6+2=8 åˆ†é’Ÿï¼Œæœºå™¨ 1 è¿è¡Œç»“æŸæ—¶é—´ 6+1=7 åˆ†é’Ÿï¼Œæ€»è€—æ—¶ 7 åˆ†é’Ÿã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>                <span class="hljs-type">int</span> []dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-type">int</span> [][]a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n][<span class="hljs-number">2</span>];<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                                    Integer::parseInt).toArray();<br>                    a[j][<span class="hljs-number">0</span>] = arr[<span class="hljs-number">0</span>];<br>                    a[j][<span class="hljs-number">1</span>] = arr[<span class="hljs-number">1</span>];<br>                &#125;<br>                Arrays.sort(a, (arr1, arr2)-&gt;(arr2[<span class="hljs-number">1</span>] - arr1[<span class="hljs-number">1</span>]));<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    dp[j] = sum + a[j][<span class="hljs-number">0</span>] + a[j][<span class="hljs-number">1</span>];<br>                    sum += a[j][<span class="hljs-number">0</span>];<br>                    ans = Math.max(ans, dp[j]);<br>                &#125;<br>                System.out.println(ans);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>äºŒå‰æ ‘éå†</h1><h2 id="é¢˜ç›®æè¿°-28">é¢˜ç›®æè¿°</h2><p>æ ¹æ®ç»™å®šçš„äºŒå‰æ ‘ç»“æ„æè¿°å­—ç¬¦ä¸²ï¼Œè¾“å‡ºè¯¥äºŒå‰æ ‘æŒ‰ç…§ä¸­åºéå†ç»“æœå­—ç¬¦ä¸²ã€‚ä¸­åºéå†é¡ºåºä¸ºï¼šå·¦å­æ ‘ â†’ æ ¹ç»“ç‚¹ â†’ å³å­æ ‘ã€‚</p><h3 id="è¾“å…¥æè¿°-26">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸ºç”±å¤§å°å†™å­—æ¯ã€å·¦å³å¤§æ‹¬å·ã€é€—å·ç»„æˆçš„å­—ç¬¦ä¸²ï¼š</p><ul><li>å­—æ¯ä»£è¡¨ä¸€ä¸ªèŠ‚ç‚¹å€¼ï¼›</li><li>å·¦å³æ‹¬å·å†…åŒ…å«è¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼›</li><li>å·¦å³å­èŠ‚ç‚¹ä½¿ç”¨é€—å·åˆ†éš”ï¼Œé€—å·å‰ä¸ºç©ºåˆ™è¡¨ç¤ºå·¦å­èŠ‚ç‚¹ä¸ºç©ºï¼Œæ²¡æœ‰é€—å·åˆ™è¡¨ç¤ºå³å­èŠ‚ç‚¹ä¸ºç©ºã€‚</li></ul><p><strong>å¤‡æ³¨</strong>ï¼šäºŒå‰æ ‘èŠ‚ç‚¹æ•°æœ€å¤§ä¸è¶…è¿‡ 100ï¼›è¾“å…¥å­—ç¬¦ä¸²æ ¼å¼æ˜¯æ­£ç¡®çš„ï¼Œæ— éœ€è€ƒè™‘æ ¼å¼é”™è¯¯çš„æƒ…å†µã€‚</p><h3 id="è¾“å‡ºæè¿°-26">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸ºäºŒå‰æ ‘ä¸­åºéå†å„èŠ‚ç‚¹å€¼çš„æ‹¼æ¥ç»“æœã€‚</p><h3 id="ç¤ºä¾‹-26">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">a&#123;b&#123;d,e&#123;g,h&#123;,I&#125;&#125;&#125;,c&#123;f&#125;&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">dbgehIafc<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> &#123;<br>    <span class="hljs-type">char</span> val;<br>    TreeNode left;<br>    TreeNode right;<br>    TreeNode(<span class="hljs-type">char</span> x) &#123; val = x; &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">scanner</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">input</span> <span class="hljs-operator">=</span> scanner.nextLine().trim();<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> parse(input);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> inorder(root);<br>        System.out.println(result);<br>    &#125;<br><br>    <span class="hljs-comment">// è§£æå­—ç¬¦ä¸²ä¸ºäºŒå‰æ ‘</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> TreeNode <span class="hljs-title function_">parse</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s.isEmpty()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-comment">// æå–å½“å‰èŠ‚ç‚¹å€¼ï¼ˆç¬¬ä¸€ä¸ªå­—æ¯ï¼‰</span><br>        <span class="hljs-type">char</span> <span class="hljs-variable">val</span> <span class="hljs-operator">=</span> s.charAt(i++);<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(val);<br>        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰å­èŠ‚ç‚¹ï¼ˆæ˜¯å¦æœ‰ &#x27;&#123;&#x27;ï¼‰</span><br>        <span class="hljs-keyword">if</span> (i &lt; s.length() &amp;&amp; s.charAt(i) == <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> i;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">// æ‹¬å·å±‚æ•°è®¡æ•°å™¨</span><br>            i++; <span class="hljs-comment">// è·³è¿‡ &#x27;&#123;&#x27;</span><br>            <span class="hljs-comment">// æ‰¾åˆ°åŒ¹é…çš„ &#x27;&#125;&#x27;</span><br>            <span class="hljs-keyword">while</span> (i &lt; s.length() &amp;&amp; count &gt; <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">if</span> (s.charAt(i) == <span class="hljs-string">&#x27;&#123;&#x27;</span>) count++;<br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.charAt(i) == <span class="hljs-string">&#x27;&#125;&#x27;</span>) count--;<br>                i++;<br>            &#125;<br>            <span class="hljs-comment">// å­èŠ‚ç‚¹éƒ¨åˆ†ï¼ˆå»æ‰å¤–å±‚æ‹¬å·ï¼‰</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">children</span> <span class="hljs-operator">=</span> s.substring(start + <span class="hljs-number">1</span>, i - <span class="hljs-number">1</span>);<br>            <span class="hljs-comment">// åˆ†å‰²å·¦å³å­èŠ‚ç‚¹</span><br>            List&lt;String&gt; parts = splitChildren(children);<br>            node.left = parse(parts.get(<span class="hljs-number">0</span>));<br>            node.right = parse(parts.get(<span class="hljs-number">1</span>));<br>        &#125;<br>        <span class="hljs-keyword">return</span> node;<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ†å‰²å·¦å³å­èŠ‚ç‚¹å­—ç¬¦ä¸²</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;String&gt; <span class="hljs-title function_">splitChildren</span><span class="hljs-params">(String s)</span> &#123;<br>        List&lt;String&gt; parts = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ‹¬å·å±‚æ•°</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">splitIndex</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-comment">// éå†æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤–å±‚é€—å·</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> s.charAt(i);<br>            <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;&#123;&#x27;</span>) count++;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;&#125;&#x27;</span>) count--;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;,&#x27;</span> &amp;&amp; count == <span class="hljs-number">0</span>) &#123;<br>                splitIndex = i;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (splitIndex != -<span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// å­˜åœ¨åˆ†å‰²ç‚¹</span><br>            parts.add(s.substring(<span class="hljs-number">0</span>, splitIndex));<br>            parts.add(s.substring(splitIndex + <span class="hljs-number">1</span>));<br>        &#125; <span class="hljs-keyword">else</span> &#123; <span class="hljs-comment">// æ— åˆ†å‰²ç‚¹ï¼Œæ•´ä¸ªå­—ç¬¦ä¸²æ˜¯å·¦å­èŠ‚ç‚¹</span><br>            parts.add(s);<br>            parts.add(<span class="hljs-string">&quot;&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> parts;<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸­åºéå†äºŒå‰æ ‘</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">inorder</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>        <span class="hljs-keyword">return</span> inorder(root.left) + root.val + inorder(root.right);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ä¹¦ç±å æ”¾</h1><h2 id="é¢˜ç›®æè¿°-29">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ç»„ä¹¦çš„é•¿å®½ï¼Œå¹¶ä¸”åªæœ‰å½“ä¸€æœ¬ä¹¦çš„é•¿å®½åŒæ—¶å°äºå¦ä¸€æœ¬ä¹¦çš„é•¿å®½æ—¶ï¼Œä¸¤ä¹¦æ‰èƒ½å æ”¾åœ¨ä¸€èµ·ï¼Œæ±‚è¯¥ç»„ä¹¦ä¸­æœ€å¤šèƒ½æœ‰å¤šå°‘æœ¬ä¹¦å æ”¾åœ¨ä¸€èµ·ã€‚</p><h3 id="è¾“å…¥æè¿°-27">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸ºäºŒç»´åˆ—è¡¨å½¢å¼çš„ä¹¦çš„é•¿å®½æ•°æ®ï¼ˆå¦‚<code>[[20,16],[15,11],[10,10],[9,10]]</code>ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-27">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæœ€å¤šå¯å æ”¾çš„ä¹¦ç±æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-27">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">[[20,16],[15,11],[10,10],[9,10]]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong></p><p>å‰ä¸‰æœ¬å¯å æ”¾åœ¨ä¸€èµ·ï¼ˆ20,16ï¼‰â†’ï¼ˆ15,11ï¼‰â†’ï¼ˆ10,10ï¼‰ï¼Œç¬¬å››æœ¬å®½ 10 ä¸å°äºç¬¬ä¸‰æœ¬çš„å®½ 10ï¼Œæ— æ³•å æ”¾ï¼Œæ•…æœ€å¤š 3 æœ¬ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine().replaceAll(<span class="hljs-string">&quot;\\[&quot;</span>, <span class="hljs-string">&quot;&quot;</span>).replaceAll(<span class="hljs-string">&quot;\\]&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);<br>            String[] str = s.split(<span class="hljs-string">&quot;,&quot;</span>);<br>            <span class="hljs-type">int</span>[][] nums = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[str.length / <span class="hljs-number">2</span>][<span class="hljs-number">2</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>                nums[i][<span class="hljs-number">0</span>] = Integer.parseInt(str[i * <span class="hljs-number">2</span>]);<br>                nums[i][<span class="hljs-number">1</span>] = Integer.parseInt(str[i * <span class="hljs-number">2</span> + <span class="hljs-number">1</span>]);<br>            &#125;<br>            Arrays.sort(nums, (a, b) -&gt; (a[<span class="hljs-number">0</span>] == b[<span class="hljs-number">0</span>] ? b[<span class="hljs-number">1</span>] - a[<span class="hljs-number">1</span>] : a[<span class="hljs-number">0</span>] - b[<span class="hljs-number">0</span>]));<br>            <span class="hljs-type">int</span>[] dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[nums.length];<br>            Arrays.fill(dp, <span class="hljs-number">1</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>[] num : nums) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, right = res;<br>                <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">mid</span> <span class="hljs-operator">=</span> (right - left ) / <span class="hljs-number">2</span> + left;<br>                    <span class="hljs-keyword">if</span> (dp[mid] &lt; num[<span class="hljs-number">1</span>]) &#123;<br>                        left = mid + <span class="hljs-number">1</span>;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        right = mid;<br>                    &#125;<br>                &#125;<br>                dp[left] = num[<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span> (left == res) &#123;<br>                    res++;<br>                &#125;<br>            &#125;<br>            System.out.println(res);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>åŒºé—´äº¤é›†</h1><h2 id="é¢˜ç›®æè¿°-30">é¢˜ç›®æè¿°</h2><p>ç»™å®šä¸€ç»„é—­åŒºé—´ï¼Œå…¶ä¸­éƒ¨åˆ†åŒºé—´å­˜åœ¨äº¤é›†ã€‚ä»»æ„ä¸¤ä¸ªç»™å®šåŒºé—´çš„äº¤é›†ç§°ä¸ºå…¬å…±åŒºé—´ï¼ˆå¦‚<code>[1,2]</code>å’Œ<code>[2,3]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[2,2]</code>ï¼Œ<code>[3,5]</code>å’Œ<code>[3,6]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,5]</code>ï¼‰ã€‚å…¬å…±åŒºé—´ä¹‹é—´è‹¥å­˜åœ¨äº¤é›†ï¼Œåˆ™éœ€è¦åˆå¹¶ï¼ˆå¦‚<code>[1,3]</code>å’Œ<code>[3,5]</code>åŒºé—´å­˜åœ¨äº¤é›†<code>[3,3]</code>ï¼Œéœ€åˆå¹¶ä¸º<code>[1,5]</code>ï¼‰ã€‚æŒ‰å‡åºæ’åˆ—è¾“å‡ºåˆå¹¶åçš„åŒºé—´åˆ—è¡¨ã€‚</p><h3 id="è¾“å…¥æè¿°-28">è¾“å…¥æè¿°</h3><ol><li>è¾“å…¥ä¸ºä¸€ç»„åŒºé—´åˆ—è¡¨çš„ç®€åŒ–å½¢å¼ï¼ˆå»æ‰é€—å·å’Œæ‹¬å·ï¼‰ï¼ŒåŒºé—´æ•° N æ»¡è¶³ 0&lt;=N&lt;=1000ï¼›</li><li>åŒºé—´å…ƒç´  X æ»¡è¶³ -10000&lt;=X&lt;=10000ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-28">è¾“å‡ºæè¿°</h3><ol><li>æŒ‰å‡åºæ’åˆ—è¾“å‡ºåˆå¹¶åçš„åŒºé—´åˆ—è¡¨ï¼ˆç®€åŒ–å½¢å¼ï¼Œæ— æ‹¬å·å’Œé€—å·ï¼‰ï¼›</li><li>è‹¥æ— å…¬å…±åŒºé—´ï¼Œè¾“å‡º<code>None</code>ï¼›</li><li>å•ä¸ªåŒºé—´è®¤å®šä¸ºæ— å…¬å…±åŒºé—´ã€‚</li></ol><h3 id="ç¤ºä¾‹-28">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0 3 1 3 3 5 3 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 5<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><ul><li><code>[0,3]</code>å’Œ<code>[1,3]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[1,3]</code>ï¼›</li><li><code>[0,3]</code>å’Œ<code>[3,5]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,3]</code>ï¼›</li><li><code>[0,3]</code>å’Œ<code>[3,6]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,3]</code>ï¼›</li><li><code>[1,3]</code>å’Œ<code>[3,5]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,3]</code>ï¼›</li><li><code>[1,3]</code>å’Œ<code>[3,6]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,3]</code>ï¼›</li><li><code>[3,5]</code>å’Œ<code>[3,6]</code>çš„å…¬å…±åŒºé—´ä¸º<code>[3,5]</code>ï¼›</li><li>å…¬å…±åŒºé—´åˆ—è¡¨ä¸º<code>[[1,3],[3,3],[3,5]]</code>ï¼Œåˆå¹¶åä¸º<code>[1,5]</code>ã€‚</li></ul><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 6 2 5 5 7<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 6<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><ul><li><code>[1,6]</code>å’Œ<code>[2,5]</code>çš„äº¤é›†ä¸º<code>[2,5]</code>ï¼›</li><li><code>[1,6]</code>å’Œ<code>[5,7]</code>çš„äº¤é›†ä¸º<code>[5,6]</code>ï¼›</li><li><code>[2,5]</code>å’Œ<code>[5,7]</code>çš„äº¤é›†ä¸º<code>[5,5]</code>ï¼›</li><li>å…¬å…±åŒºé—´åˆå¹¶åä¸º<code>[2,6]</code>ã€‚</li></ul><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1 2 3 4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">None<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p><code>[1,2]</code>å’Œ<code>[3,4]</code>æ— å…¬å…±åŒºé—´ï¼Œæ•…è¾“å‡º<code>None</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        String[] str = in.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-type">int</span>[] arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[str.length];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>            arr[i] = Integer.parseInt(str[i]);<br>        &#125;<br>        <span class="hljs-comment">// å…ˆè®¡ç®—äº¤é›†</span><br>        List&lt;<span class="hljs-type">int</span>[]&gt; res = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i += <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">2</span>; j &lt; arr.length; j += <span class="hljs-number">2</span>) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> Math.max(arr[i], arr[j]);<br>                <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> Math.min(arr[i + <span class="hljs-number">1</span>], arr[j + <span class="hljs-number">1</span>]);<br>                <span class="hljs-keyword">if</span> (left &lt;= right) &#123;<br>                    res.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;left, right&#125;);<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// è®¡ç®—å®Œäº¤é›†ï¼ŒæŒ‰ä»å°åˆ°å¤§æ’åºï¼Œå·¦è¾¹ç•Œå‡åºï¼Œç›¸åŒï¼Œæœ‰è¾¹ç•Œå‡åº</span><br>        <span class="hljs-type">int</span>[][] ans = res.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[res.size()][]);<br>        Arrays.sort(ans, (a, b) -&gt; (a[<span class="hljs-number">0</span>] == b[<span class="hljs-number">0</span>] ? a[<span class="hljs-number">1</span>] - b[<span class="hljs-number">1</span>] : a[<span class="hljs-number">0</span>] - b[<span class="hljs-number">0</span>]));<br>        <span class="hljs-comment">// æ±‚äº¤é›†çš„å¹¶é›†</span><br>        <span class="hljs-type">int</span>[][] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[ans.length][<span class="hljs-number">2</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span>[] an : ans) &#123;<br>            <span class="hljs-keyword">if</span> (index == -<span class="hljs-number">1</span> || an[<span class="hljs-number">0</span>] &gt; result[index][<span class="hljs-number">1</span>]) &#123;<br>                result[++index] = an;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                result[index][<span class="hljs-number">1</span>] = Math.max(result[index][<span class="hljs-number">1</span>], an[<span class="hljs-number">1</span>]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span>[][] last = Arrays.copyOf(result, index + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; last.length; i++) &#123;<br>            System.out.print(last[i][<span class="hljs-number">0</span>]);<br>            System.out.print(<span class="hljs-string">&quot; &quot;</span>);<br>            System.out.print(last[i][<span class="hljs-number">1</span>]);<br>            <span class="hljs-keyword">if</span> (i != last.length - <span class="hljs-number">1</span>) &#123;<br>                System.out.print(<span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>åˆ†æœˆé¥¼</h1><h2 id="é¢˜ç›®æè¿°-31">é¢˜ç›®æè¿°</h2><p>å…¬å¸åˆ†æœˆé¥¼ï¼Œæœ‰<code>m</code>ä¸ªå‘˜å·¥ï¼Œä¹°äº†<code>n</code>ä¸ªæœˆé¥¼ï¼ˆ<code>m &lt;= n</code>ï¼‰ï¼Œæ¯ä¸ªå‘˜å·¥è‡³å°‘åˆ†ä¸€ä¸ªæœˆé¥¼ï¼Œä¹Ÿå¯ä»¥åˆ†åˆ°å¤šä¸ªã€‚è®¾å•äººåˆ†åˆ°æœ€å¤šæœˆé¥¼çš„ä¸ªæ•°ä¸º<code>Max1</code>ï¼Œç¬¬äºŒå¤šçš„ä¸º<code>Max2</code>ï¼Œéœ€æ»¡è¶³<code>Max1-Max2 &lt;= 3</code>ï¼›ä»¥æ­¤ç±»æ¨ï¼Œä»»æ„ç›¸é‚»æ’åçš„æœˆé¥¼æ•°å·®å€¼éƒ½éœ€<code>&lt;=3</code>ã€‚é—®æœ‰å¤šå°‘ç§åˆ†æœˆé¥¼çš„æ–¹æ³•ï¼Ÿ</p><p><strong>æ³¨æ„</strong>ï¼šä¸åŒé¡ºåºä½†æ•°å€¼ç»„åˆç›¸åŒçš„åˆ†æ³•ç®—åŒä¸€ç§ï¼ˆå¦‚ 1+3 å’Œ 3+1 ç®—ä¸€ç§ï¼‰ã€‚</p><h3 id="è¾“å…¥æè¿°-29">è¾“å…¥æè¿°</h3><p>æ¯ä¸€è¡Œè¾“å…¥<code>m</code>å’Œ<code>n</code>ï¼Œè¡¨ç¤º<code>m</code>ä¸ªå‘˜å·¥ã€<code>n</code>ä¸ªæœˆé¥¼ï¼ˆ<code>m &lt;= n</code>ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-29">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„åˆ†æ³•æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-29">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åˆæ³•åˆ†æ³•ï¼š4=1+3ã€4=2+2ï¼ˆ1+3 å’Œ 3+1 ç®—åŒä¸€ç§ï¼‰ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 5<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åˆæ³•åˆ†æ³•ï¼š5=1+1+3ã€5=1+2+3ã€‚</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 12<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">6<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ»¡è¶³è¦æ±‚çš„ 6 ç§åˆ†æ³•ï¼š</p><ol><li>12 = 1 + 4 + 7</li><li>12 = 2 + 4 + 6</li><li>12 = 2 + 5 + 5</li><li>12 = 3 + 3 + 6</li><li>12 = 3 + 4 + 5</li><li>12 = 4 + 4 + 4</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], n = arr[<span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> []a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [m];<br>            Arrays.fill(a, <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">if</span> (n == m) &#123;<br>                System.out.println(<span class="hljs-string">&quot;1&quot;</span>);<br>                System.exit(<span class="hljs-number">0</span>);<br>            &#125;<br>            System.out.println(dfs(m, n - m, a, <span class="hljs-number">0</span>));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> m, <span class="hljs-type">int</span> remaining, <span class="hljs-type">int</span> []arr, <span class="hljs-type">int</span> index)</span> &#123;<br>        <span class="hljs-keyword">if</span> (index == m) &#123;<br>            <span class="hljs-keyword">if</span> (remaining == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (remaining == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">if</span> (arr[index - <span class="hljs-number">1</span>] - arr[index] &lt;= <span class="hljs-number">3</span>) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= remaining; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> arr[index] + i;<br>            <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span> || (index &gt; <span class="hljs-number">0</span> &amp;&amp; arr[index - <span class="hljs-number">1</span>] &gt;= x &amp;&amp;<br>                               arr[index - <span class="hljs-number">1</span>] - x &lt;= <span class="hljs-number">3</span>)) &#123;<br>                arr[index] += i;<br>                result += dfs(m, remaining - i, arr, index + <span class="hljs-number">1</span>);<br>                arr[index] -= i;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ‰¾æœ€å°æ•°</h1><h2 id="é¢˜ç›®æè¿°-32">é¢˜ç›®æè¿°</h2><p>ç»™ä¸€ä¸ªæ­£æ•´æ•°<code>NUM1</code>ï¼ˆä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºï¼‰ï¼Œç§»é™¤<code>N</code>ä½æ•°å­—åå¾—åˆ°æ–°æ­£æ•´æ•°<code>NUM2</code>ï¼Œè¦æ±‚<code>NUM2</code>çš„å€¼æœ€å°ã€‚</p><h3 id="è¾“å…¥æè¿°-30">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œä¸ºå­—ç¬¦ä¸²å½¢å¼çš„æ­£æ•´æ•°<code>NUM1</code>ï¼Œé•¿åº¦å°äº 32ï¼›</li><li>ç¬¬äºŒè¡Œä¸ºéœ€è¦ç§»é™¤çš„æ•°å­—ä¸ªæ•°ï¼ˆå°äº<code>NUM1</code>é•¿åº¦ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-30">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæœ€å°å€¼<code>NUM2</code>çš„æ•°å­—å­—ç¬¦ä¸²ã€‚</p><h3 id="ç¤ºä¾‹-30">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">2615371<br>4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">131<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>ç§»é™¤ 2ã€6ã€5ã€7 è¿™å››ä¸ªæ•°å­—ï¼Œå‰©ä¸‹ 1ã€3ã€1 æŒ‰åŸæœ‰é¡ºåºæ’åˆ—ç»„æˆ 131ï¼Œä¸ºæœ€å°å€¼ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            Stack&lt;Character&gt;stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> s.charAt(i);<br>                <span class="hljs-keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek() &gt; ch &amp;&amp; n &gt; <span class="hljs-number">0</span>) &#123;<br>                    stack.pop();<br>                    n--;<br>                &#125;<br>                stack.push(ch);<br>            &#125;<br>            <span class="hljs-keyword">while</span> (n &gt; <span class="hljs-number">0</span>) &#123;<br>                stack.pop();<br>                n--;<br>            &#125;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : stack) &#123;<br>                <span class="hljs-keyword">if</span> (!(ans.length() == <span class="hljs-number">0</span> &amp;&amp; ch == <span class="hljs-string">&#x27;0&#x27;</span>)) &#123;<br>                    ans.append(ch);<br>                &#125;<br>            &#125;<br>            System.out.println(ans.length() == <span class="hljs-number">0</span> ? <span class="hljs-string">&quot;0&quot;</span> : ans.toString());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç®€æ˜“å†…å­˜æ± </h1><h2 id="é¢˜ç›®æè¿°-33">é¢˜ç›®æè¿°</h2><p>å®ç°ä¸€ä¸ªç®€æ˜“å†…å­˜æ± ï¼Œæ”¯æŒ<code>REQUEST</code>ï¼ˆåˆ†é…å†…å­˜ï¼‰å’Œ<code>RELEASE</code>ï¼ˆé‡Šæ”¾å†…å­˜ï¼‰ä¸¤ç§æ“ä½œï¼Œè§„åˆ™å¦‚ä¸‹ï¼š</p><ol><li>å†…å­˜æ± æ€»å¤§å°ä¸º 100 å­—èŠ‚ï¼›</li><li>å†…å­˜åˆ†é…å¿…é¡»æ˜¯è¿ç»­å†…å­˜ï¼Œä¼˜å…ˆä»ä½åœ°å€åˆ†é…ï¼›</li><li>é‡Šæ”¾çš„å†…å­˜å¯è¢«å†æ¬¡åˆ†é…ï¼Œå·²é‡Šæ”¾çš„ç©ºé—²å†…å­˜ä¸èƒ½äºŒæ¬¡é‡Šæ”¾ï¼›</li><li>ä¸ä¼šé‡Šæ”¾å·²ç”³è¯·å†…å­˜å—çš„ä¸­é—´åœ°å€ï¼Œé‡Šæ”¾ä»…é’ˆå¯¹é¦–åœ°å€å¯¹åº”çš„å•ä¸ªå†…å­˜å—ã€‚</li></ol><h3 id="è¾“å…¥æè¿°-31">è¾“å…¥æè¿°</h3><ol><li>é¦–è¡Œä¸ºæ•´æ•°<code>N</code>ï¼ˆ0 &lt; N &lt;= 100ï¼‰ï¼Œè¡¨ç¤ºæ“ä½œå‘½ä»¤çš„ä¸ªæ•°ï¼›</li><li>æ¥ä¸‹æ¥<code>N</code>è¡Œï¼Œæ¯è¡Œæ˜¯æ“ä½œå‘½ä»¤ï¼Œæ ¼å¼ä¸º<code>REQUEST=å¤§å°</code>æˆ–<code>RELEASE=é¦–åœ°å€</code>ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-31">è¾“å‡ºæè¿°</h3><ul><li><code>REQUEST</code>ï¼šåˆ†é…æˆåŠŸè¿”å›é¦–åœ°å€ï¼Œå†…å­˜ä¸è¶³ / å¤§å°ä¸º 0 è¾“å‡º<code>error</code>ï¼›</li><li><code>RELEASE</code>ï¼šé‡Šæ”¾æˆåŠŸæ— è¾“å‡ºï¼Œé‡Šæ”¾ä¸å­˜åœ¨çš„é¦–åœ°å€è¾“å‡º<code>error</code>ã€‚</li></ul><h3 id="ç¤ºä¾‹-31">ç¤ºä¾‹</h3><p><strong>æ ·ä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>REQUEST=10<br>REQUEST=20<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br>10<br></code></pre></td></tr></table></figure><p><strong>æ ·ä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex">5<br>REQUEST=10<br>REQUEST=20<br>RELEASE=0<br>REQUEST=20<br>REQUEST=10<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br>10<br>30<br>0<br></code></pre></td></tr></table></figure><p><strong>æç¤ºè¯´æ˜</strong></p><ul><li>ç¬¬ä¸€æ¡æŒ‡ä»¤ï¼šç”³è¯· 0~9 å­—èŠ‚ï¼Œè¿”å›é¦–åœ°å€ 0ï¼›</li><li>ç¬¬äºŒæ¡æŒ‡ä»¤ï¼šç”³è¯· 10~29 å­—èŠ‚ï¼Œè¿”å›é¦–åœ°å€ 10ï¼›</li><li>ç¬¬ä¸‰æ¡æŒ‡ä»¤ï¼šé‡Šæ”¾ 0~9 å­—èŠ‚ï¼Œæ— è¾“å‡ºï¼›</li><li>ç¬¬å››æ¡æŒ‡ä»¤ï¼š0~9 å­—èŠ‚ä¸è¶³ 20 å­—èŠ‚ï¼Œç”³è¯· 30~49 å­—èŠ‚ï¼Œè¿”å› 30ï¼›</li><li>ç¬¬äº”æ¡æŒ‡ä»¤ï¼šç”³è¯· 0~9 å­—èŠ‚ï¼Œè¿”å› 0ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>  <span class="hljs-variable">MAX_VALUE</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>    <span class="hljs-keyword">static</span> Map&lt;Integer, Integer&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            String [][]strings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[n][<span class="hljs-number">2</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                strings[i] = sc.nextLine().split(<span class="hljs-string">&quot;=&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> Integer.parseInt(strings[i][<span class="hljs-number">1</span>]);<br>                <span class="hljs-type">String</span> <span class="hljs-variable">op</span> <span class="hljs-operator">=</span> strings[i][<span class="hljs-number">0</span>];<br>                <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;REQUEST&quot;</span>)) &#123;<br>                    request(value);<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op.equals(<span class="hljs-string">&quot;RELEASE&quot;</span>)) &#123;<br>                    release(value);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    System.out.println(<span class="hljs-string">&quot;error&quot;</span>);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">request</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (value &gt; MAX_VALUE || value &lt;= <span class="hljs-number">0</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;error&quot;</span>);<br>            <span class="hljs-keyword">return</span> ;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">if</span> (map.isEmpty()) &#123;<br>            map.put(<span class="hljs-number">0</span>, value);<br>            System.out.println(<span class="hljs-string">&quot;0&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">for</span> (Integer requestHead : map.keySet()) &#123;<br>                <span class="hljs-keyword">if</span> (requestHead - pre &gt;= value) &#123;<br>                    map.put(pre, pre + value);<br>                    System.out.println(pre);<br>                    <span class="hljs-keyword">return</span> ;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    pre = map.get(requestHead);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (MAX_VALUE - pre &gt;= value) &#123;<br>                map.put(pre, pre + value);<br>                System.out.println(pre);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(<span class="hljs-string">&quot;error&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">release</span><span class="hljs-params">(<span class="hljs-type">int</span> value)</span> &#123;<br>        <span class="hljs-keyword">if</span> (map.containsKey(value)) &#123;<br>            map.remove(value);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;error&quot;</span>);<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h1>æœåŠ¡å¤±æ•ˆåˆ¤æ–­</h1><h2 id="é¢˜ç›®æè¿°-34">é¢˜ç›®æè¿°</h2><p>æŸç³»ç»Ÿä¸­æœ‰å¤šä¸ªå”¯ä¸€æ ‡è¯†çš„æœåŠ¡ï¼ˆå­—ç¬¦ä¸²ï¼Œé•¿åº¦ &lt;=10ï¼‰ï¼ŒæœåŠ¡é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼ˆå¦‚ A ä¾èµ– Bï¼Œåˆ™ B æ•…éšœä¼šå¯¼è‡´ A æ•…éšœï¼‰ï¼Œä¾èµ–å…·æœ‰ä¼ é€’æ€§ï¼ˆA ä¾èµ– Bã€B ä¾èµ– Cï¼ŒC æ•…éšœåˆ™ Aã€B å‡æ•…éšœï¼‰ã€‚ç»™å®šä¾èµ–å…³ç³»å’Œæ•…éšœæœåŠ¡åˆ—è¡¨ï¼Œè¾“å‡ºæ‰€æœ‰æ­£å¸¸æœåŠ¡ã€‚</p><h3 id="è¾“å…¥æè¿°-32">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œï¼šåŠè§’é€—å·åˆ†éš”çš„ä¾èµ–å…³ç³»åˆ—è¡¨ï¼ˆæ ¼å¼ï¼šæœåŠ¡ 1 - æœåŠ¡ 2ï¼Œè¡¨ç¤ºæœåŠ¡ 1 ä¾èµ–æœåŠ¡ 2ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œï¼šåŠè§’é€—å·åˆ†éš”çš„æ•…éšœæœåŠ¡åˆ—è¡¨ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-32">è¾“å‡ºæè¿°</h3><ol><li>è¾“å‡ºä¾èµ–å…³ç³»ä¸­æåŠçš„æ‰€æœ‰æ­£å¸¸æœåŠ¡ï¼ŒæŒ‰ä¾èµ–å…³ç³»åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡åºæ’åºï¼ŒåŠè§’é€—å·åˆ†éš”ï¼›</li><li>æ— æ­£å¸¸æœåŠ¡æ—¶è¾“å‡ºå•ä¸ªåŠè§’é€—å·ã€‚</li></ol><h3 id="ç¤ºä¾‹-32">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">a1-a2,a5-a6,a2-a3<br>a5,a2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">a6,a3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><ul><li>a1 ä¾èµ– a2ï¼Œa2 æ•…éšœâ†’a1 æ•…éšœï¼›a2 ä¾èµ– a3ï¼Œa2 æ•…éšœä¸å½±å“ a3ï¼›</li><li>a5 æ•…éšœä¸å½±å“ a6ï¼›</li><li>æ­£å¸¸æœåŠ¡ä¸º a6ã€a3ï¼ŒæŒ‰ä¾èµ–åˆ—è¡¨å‡ºç°æ¬¡åºè¾“å‡ºã€‚</li></ul><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">a1-a2<br>a2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">,<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>a1 ä¾èµ– a2ï¼Œa2 æ•…éšœâ†’a1 æ•…éšœï¼Œæ— æ­£å¸¸æœåŠ¡ï¼Œè¾“å‡ºå•ä¸ªé€—å·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> Map&lt;String, List&lt;String&gt;&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">static</span> Set&lt;String&gt;set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>);<br>            <span class="hljs-keyword">for</span> (String str : strings) &#123;<br>                String[]s = str.split(<span class="hljs-string">&quot;-&quot;</span>);<br>                set.add(s[<span class="hljs-number">0</span>]);<br>                set.add(s[<span class="hljs-number">1</span>]);<br>                map.computeIfAbsent(s[<span class="hljs-number">1</span>], k-&gt;<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;String&gt;()).add(s[<span class="hljs-number">0</span>]);<br>            &#125;<br>            Set&lt;String&gt; badSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>            Queue&lt;String&gt;queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>            strings = sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>);<br>            <span class="hljs-keyword">for</span> (String str : strings) &#123;<br>                queue.offer(str);<br>                badSet.add(str);<br>            &#125;<br>            <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;<br>                <span class="hljs-type">String</span> <span class="hljs-variable">cur</span> <span class="hljs-operator">=</span> queue.poll();<br>                List&lt;String&gt;list = map.getOrDefault(cur, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>                <span class="hljs-keyword">for</span> (String str : list) &#123;<br>                    <span class="hljs-keyword">if</span> (!badSet.contains(str)) &#123;<br>                        badSet.add(str);<br>                        queue.offer(str);<br>                    &#125;<br>                &#125;<br>            &#125;<br>            List&lt;String&gt;ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (String str : set) &#123;<br>                <span class="hljs-keyword">if</span> (!badSet.contains(str)) &#123;<br>                    ans.add(str);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (ans.isEmpty()) &#123;<br>                System.out.println(<span class="hljs-string">&quot;,&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                System.out.println(String.join(<span class="hljs-string">&quot;,&quot;</span>, ans));<br>            &#125;<br><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å›¾åƒç‰©ä½“çš„è¾¹ç•Œ</h1><h2 id="é¢˜ç›®æè¿°-35">é¢˜ç›®æè¿°</h2><p>ç»™å®š<code>Mè¡ŒNåˆ—</code>çš„äºŒç»´æ•°ç»„ï¼ˆä»…åŒ…å«åƒç´  1 å’Œ 5ï¼‰ï¼Œåƒç´  1 ä»£è¡¨çš„ç‰©ä½“çš„è¾¹ç•Œå®šä¹‰ä¸ºï¼šä¸åƒç´  5 ç›¸é‚»ï¼ˆ8 ä¸ªæ–¹å‘ï¼šä¸Šã€ä¸‹ã€å·¦ã€å³ã€å·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹ï¼‰çš„åƒç´  1 æ ¼å­ï¼›ç›¸é‚»çš„è¾¹ç•Œæ ¼å­å±äºåŒä¸€ä¸ªè¾¹ç•Œã€‚æ±‚åƒç´  1 ä»£è¡¨çš„ç‰©ä½“çš„è¾¹ç•Œä¸ªæ•°ã€‚</p><h3 id="è¾“å…¥æè¿°-33">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œï¼šè¡Œæ•°<code>M</code>ã€åˆ—æ•°<code>N</code>ï¼ˆ0&lt;M&lt;100ï¼Œ0&lt;N&lt;100ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œå¼€å§‹ï¼š<code>Mè¡ŒNåˆ—</code>çš„åƒç´ æ•°ç»„ï¼ˆä»…åŒ…å« 1 å’Œ 5ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-33">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºåƒç´  1 ä»£è¡¨çš„ç‰©ä½“çš„è¾¹ç•Œä¸ªæ•°ï¼Œæ— è¾¹ç•Œè¾“å‡º 0ã€‚</p><h3 id="ç¤ºä¾‹-33">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><p><img src="https://a1.boltp.com/2025/12/06/6933bd334d49a.png" alt="img"></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">6 6<br>1 1 1 1 1 1<br>1 5 1 1 1 1<br>1 1 1 1 1 1<br>1 1 1 1 1 1<br>1 1 1 1 1 1<br>1 1 1 1 1 5<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><ul><li>å·¦ä¸Šè§’ä¸ 5 ç›¸é‚»çš„ 1 ç»„æˆ 1 ä¸ªè¾¹ç•Œï¼›</li><li>å³ä¸‹è§’ä¸ 5 ç›¸é‚»çš„ 1 ç»„æˆ 1 ä¸ªè¾¹ç•Œï¼›</li><li>æ€»è¾¹ç•Œæ•°ä¸º 2ã€‚</li></ul><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><p><img src="https://a1.boltp.com/2025/12/06/6933bd334a322.png" alt="img"></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">6 6<br>1 1 1 1 1 1<br>1 5 1 1 1 1<br>1 1 1 1 1 1<br>1 1 1 1 1 1<br>1 1 1 1 5 1<br>1 1 1 1 1 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ‰€æœ‰ä¸ 5 ç›¸é‚»çš„ 1 æ ¼å­ç›¸äº’ç›¸é‚»ï¼Œä»…æ„æˆ 1 ä¸ªè¾¹ç•Œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> m, n;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> [][]grid;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String [] strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            m = Integer.parseInt(strings[<span class="hljs-number">0</span>]);<br>            n = Integer.parseInt(strings[<span class="hljs-number">1</span>]);<br>            grid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[m][n];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                grid[i] = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                              Integer::parseInt).toArray();<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-number">5</span>) &#123;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>; dx &lt; <span class="hljs-number">2</span>; dx++) &#123;<br>                            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>; dy &lt; <span class="hljs-number">2</span>; dy++) &#123;<br>                                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> dx + i;<br>                                <span class="hljs-type">int</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> dy + j;<br>                                <span class="hljs-keyword">if</span> (check(x, y) &amp;&amp; grid[x][y] == <span class="hljs-number">1</span>) &#123;<br>                                    grid[x][y] = <span class="hljs-number">2</span>;<br>                                &#125;<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (grid[i][j] == <span class="hljs-number">2</span>) &#123;<br>                        dfs(i, j);<br>                        ans++;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">check</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span> || x &gt;= m || y &lt; <span class="hljs-number">0</span> || y &gt;= n) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">if</span> (!check(x, y) || grid[x][y] != <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">return</span> ;<br>        &#125;<br>        grid[x][y] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dx</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>; dx &lt; <span class="hljs-number">2</span>; dx++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">dy</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>; dy &lt; <span class="hljs-number">2</span>; dy++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">xx</span> <span class="hljs-operator">=</span> dx + x;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">yy</span> <span class="hljs-operator">=</span> dy + y;<br>                dfs(xx, yy);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è·³æ ¼å­æ¸¸æˆ</h1><h2 id="é¢˜ç›®æè¿°-36">é¢˜ç›®æè¿°</h2><p>å°æ˜å’Œæœ‹å‹ä»¬ç©è·³æ ¼å­æ¸¸æˆï¼Œæ¯ä¸ªæ ¼å­æœ‰ç‰¹å®šåˆ†æ•°<code>score</code>ï¼ˆå¦‚<code>[1, -1, -6, 7, -17, 7]</code>ï¼‰ã€‚ä»èµ·ç‚¹<code>score[0]</code>å¼€å§‹ï¼Œæ¯æ¬¡æœ€å¤§æ­¥é•¿ä¸º<code>k</code>ï¼Œè¿”å›è·³åˆ°ç»ˆç‚¹<code>score[n-1]</code>æ—¶èƒ½å¾—åˆ°çš„æœ€å¤§å¾—åˆ†ã€‚</p><h3 id="è¾“å…¥æè¿°-34">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œè¾“å…¥æ ¼å­æ€»æ•°<code>n</code>ï¼›</li><li>ç¬¬äºŒè¡Œè¾“å…¥æ¯ä¸ªæ ¼å­çš„åˆ†æ•°<code>score[i]</code>ï¼›</li><li>ç¬¬ä¸‰è¡Œè¾“å…¥æœ€å¤§è·³æ­¥é•¿<code>k</code>ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-34">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºèƒ½å¾—åˆ°çš„æœ€å¤§å¾—åˆ†ã€‚</p><h3 id="å¤‡æ³¨-3">å¤‡æ³¨</h3><ul><li>æ ¼å­æ€»æ•°<code>n</code>å’Œæ­¥é•¿<code>k</code>çš„èŒƒå›´ï¼š<code>[1, 100000]</code>ï¼›</li><li>æ¯ä¸ªæ ¼å­åˆ†æ•°<code>score[i]</code>èŒƒå›´ï¼š<code>[-10000, 10000]</code>ã€‚</li></ul><h3 id="ç¤ºä¾‹-34">ç¤ºä¾‹</h3><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">6<br>1 -1 -6 7 -17 7<br>2<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">14<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>å°æ˜ä»<code>score[0]</code>å¼€å§‹ï¼Œä¾æ¬¡è·³åˆ°<code>score[1]</code>ã€<code>score[3]</code>ã€<code>score[5]</code>ï¼Œæ€»å¾—åˆ†<code>1 + (-1) + 7 + 7 = 14</code>ï¼Œä¸ºæœ€å¤§å¾—åˆ†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-keyword">if</span> (arr.length == <span class="hljs-number">1</span>) &#123;<br>                System.out.println(arr[<span class="hljs-number">0</span>]);<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-type">int</span> []dp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span> [n];<br>            PriorityQueue&lt;Integer&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriorityQueue</span>&lt;&gt;((a, b)-&gt;(b - a));<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) &#123;<br>                    dp[i] = arr[<span class="hljs-number">0</span>];<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    dp[i] = queue.peek() + arr[i];<br>                &#125;<br>                queue.add(dp[i]);<br>                <span class="hljs-keyword">if</span> (i - k &gt;= <span class="hljs-number">0</span>) &#123;<br>                    queue.remove(dp[i - k]);<br>                &#125;<br>            &#125;<br>            System.out.println(dp[n - <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ•°ç»„äºŒå‰æ ‘</h1><h2 id="é¢˜ç›®æè¿°-37">é¢˜ç›®æè¿°</h2><p>äºŒå‰æ ‘ç”¨æ•°ç»„å­˜å‚¨ï¼šæ ¹èŠ‚ç‚¹å€¼å­˜äºä¸‹æ ‡ 1ï¼Œä¸‹æ ‡<code>N</code>çš„èŠ‚ç‚¹ï¼Œå…¶å·¦å­èŠ‚ç‚¹å­˜äº<code>2N</code>ã€å³å­èŠ‚ç‚¹å­˜äº<code>2N+1</code>ï¼›å€¼<code>-1</code>è¡¨ç¤ºèŠ‚ç‚¹ä¸ºç©ºã€‚ç»™å®šå­˜å‚¨äºŒå‰æ ‘çš„æ•°ç»„ï¼Œæ±‚ä»æ ¹èŠ‚ç‚¹åˆ°æœ€å°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼ˆè·¯å¾„ç”±èŠ‚ç‚¹å€¼ç»„æˆï¼‰ã€‚</p><h3 id="è¾“å…¥æè¿°-35">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸€è¡Œä¸ºæ•°ç»„å†…å®¹ï¼Œå…ƒç´ ä¸ºæ­£æ•´æ•°ï¼ˆ<code>-1</code>è¡¨ç¤ºç©ºèŠ‚ç‚¹ï¼‰ï¼Œå…ƒç´ é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼›æ•°ç»„ç¬¬<code>N</code>ä¸ªå…ƒç´ å¯¹åº”ä¸‹æ ‡<code>N</code>ï¼ˆä¸‹æ ‡ 0 çœç•¥ï¼‰ï¼›æ ‘æœ€å¤š 7 å±‚ã€‚</p><h3 id="è¾“å‡ºæè¿°-35">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä»æ ¹èŠ‚ç‚¹åˆ°æœ€å°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸Šçš„èŠ‚ç‚¹å€¼ï¼Œç©ºæ ¼åˆ†éš”ï¼ˆä¿è¯æœ€å°å¶å­èŠ‚ç‚¹å”¯ä¸€ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-35">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 5 7 -1 -1 2 4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 7 2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æœ€å°å¶å­èŠ‚ç‚¹ä¸º 2ï¼Œè·¯å¾„æ˜¯ 3â†’7â†’2ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">5 9 8 -1 -1 7 -1 -1 -1 -1 -1 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">5 8 7 6<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æœ€å°å¶å­èŠ‚ç‚¹ä¸º 6ï¼Œè·¯å¾„æ˜¯ 5â†’8â†’7â†’6ï¼›æ•°ç»„ä»…å­˜å‚¨è‡³æœ€åä¸€ä¸ªéç©ºèŠ‚ç‚¹ï¼Œä¸å« â€œ7â€ å³å­èŠ‚ç‚¹çš„ - 1ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-comment">//è·å–å­˜æ”¾äºŒå‰æ ‘ä¿¡æ¯çš„æ•°ç»„</span><br>            <span class="hljs-type">int</span>[] array = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                              Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> array.length;<br>            <span class="hljs-comment">//åˆå§‹åŒ–æœ€å°å¶å­ç»“ç‚¹çš„å€¼</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Integer.MAX_VALUE;<br>            <span class="hljs-comment">//åˆå§‹åŒ–æœ€å°å¶å­ç»“ç‚¹çš„ä¸‹æ ‡</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">min_index</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">if</span> (array[i] != -<span class="hljs-number">1</span>) &#123;<br>                    <span class="hljs-comment">//è·³è¿‡éå¶å­ç»“ç‚¹</span><br>                    <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span> &lt; n &amp;&amp; array[(i + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>] != -<span class="hljs-number">1</span>) <span class="hljs-keyword">continue</span>;<br>                    <span class="hljs-keyword">if</span> ((i + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span> &lt; n &amp;&amp; array[(i + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>] != -<span class="hljs-number">1</span>) <span class="hljs-keyword">continue</span>;<br>                    <span class="hljs-comment">//é€šè¿‡æ¯”è¾ƒè·å–æœ€å°å¶å­ç»“ç‚¹</span><br>                    <span class="hljs-keyword">if</span> (min &gt; array[i]) &#123;<br>                        min_index = i;<br>                        min = array[i];<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">//å­˜æ”¾æœ€å°å¶å­ç»“ç‚¹åˆ°æ ¹è·¯å¾„çš„æ‰€æœ‰èŠ‚ç‚¹</span><br>            List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            list.add(min);<br>            <span class="hljs-comment">//é€šè¿‡å½“å‰èŠ‚ç‚¹ä¸‹æ ‡è®¡ç®—ä¸Šä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„ä¸‹æ ‡</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> min_index;<br>            <span class="hljs-keyword">while</span> (temp &gt; <span class="hljs-number">0</span>) &#123;<br>                temp = (temp - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>;<br>                list.add(array[temp]);<br>            &#125;<br>            <span class="hljs-comment">//å€’åºè¾“å‡ºæ ¹èŠ‚ç‚¹åˆ°æœ€å°å¶å­ç»“ç‚¹çš„è·¯å¾„</span><br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> list.size() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span> ; i--) &#123;<br>                System.out.print(list.get(i) + <span class="hljs-string">&quot; &quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è€ƒå¤å­¦å®¶</h1><h2 id="é¢˜ç›®æè¿°-38">é¢˜ç›®æè¿°</h2><p>è€ƒå¤çŸ³ç¢‘è¢«æ‰“ç¢æˆ<code>n</code>å—ï¼Œæ¯å—æœ‰ä¸€ä¸ª / è‹¥å¹²å­—ç¬¦ã€‚è¯·è¾“å‡ºçŸ³ç¢‘æ–‡å­—æ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œå¹¶æŒ‰å‡åºæ’åˆ—ã€‚</p><h3 id="è¾“å…¥æè¿°-36">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œè¾“å…¥<code>n</code>ï¼ˆçŸ³ç¢‘ç¢ç‰‡ä¸ªæ•°ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œä¾æ¬¡è¾“å…¥<code>n</code>ä¸ªç¢ç‰‡çš„æ–‡å­—å†…å®¹<code>s</code>ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-36">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæ‰€æœ‰ç»„åˆï¼ˆå‡åºæ’åˆ—ï¼‰ï¼Œè¡Œæœ«æ— å¤šä½™ç©ºæ ¼ã€‚</p><h3 id="ç¤ºä¾‹-36">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>a b c<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex">abc<br>acb<br>bac<br>bca<br>cab<br>cba<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>a b a<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">aab<br>aba<br>baa<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> []used;<br>    <span class="hljs-keyword">static</span> Set&lt;String&gt;ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            used = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[n + <span class="hljs-number">1</span>];<br>            dfs(n, <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>(), strings);<br>            <span class="hljs-keyword">for</span> (String str : ans) &#123;<br>                System.out.println(str);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> n, StringBuilder sb, String[]strings)</span> &#123;<br>        <span class="hljs-keyword">if</span> (sb.length() == n) &#123;<br>            ans.add(sb.toString());<br>            <span class="hljs-keyword">return</span> ;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (!used[i]) &#123;<br>                used[i] = <span class="hljs-literal">true</span>;<br>                sb.append(strings[i]);<br>                dfs(n, sb, strings);<br>                sb.deleteCharAt(sb.length() - <span class="hljs-number">1</span>);<br>                used[i] = <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è§£å‹æŠ¥æ–‡</h1><h2 id="é¢˜ç›®æè¿°-39">é¢˜ç›®æè¿°</h2><p>ä¸ºæå‡ä¼ è¾“æ•ˆç‡ï¼ŒæŠ¥æ–‡ä¼šæŒ‰è§„åˆ™å‹ç¼©ï¼š<code>n[str]</code>è¡¨ç¤ºæ–¹æ‹¬å·å†…çš„<code>str</code>é‡å¤<code>n</code>æ¬¡ï¼ˆ<code>0 &lt; n &lt;= 100</code>ï¼Œ<code>str</code>ä»…å«å°å†™å­—æ¯ï¼‰ã€‚ç»™å®šå‹ç¼©åçš„æŠ¥æ–‡ï¼Œè¿”å›è§£å‹åçš„åŸå§‹æŠ¥æ–‡ã€‚</p><h3 id="è¾“å…¥æè¿°-37">è¾“å…¥æè¿°</h3><p>è¾“å…¥å‹ç¼©åçš„æŠ¥æ–‡ï¼š</p><ol><li>æ— é¢å¤–ç©ºæ ¼ï¼Œæ–¹æ‹¬å·æ ¼å¼åˆæ³•ï¼›</li><li>åŸå§‹æŠ¥æ–‡æ— æ•°å­—ï¼Œæ•°å­—ä»…è¡¨ç¤ºé‡å¤æ¬¡æ•°ï¼ˆæ— <code>5b</code>/<code>3[8]</code>ç±»è¾“å…¥ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-37">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºè§£å‹åçš„åŸå§‹æŠ¥æ–‡ï¼ˆé•¿åº¦â‰¤1000ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-37">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3[k]2[mn]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">kkkmnmn<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p><code>k</code>é‡å¤ 3 æ¬¡ï¼Œ<code>mn</code>é‡å¤ 2 æ¬¡ï¼Œæ‹¼æ¥å¾—<code>kkkmnmn</code>ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3[m2[c]]<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">mccmccmcc<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p><code>m2[c]</code>è§£å‹ä¸º<code>mcc</code>ï¼Œé‡å¤ 3 æ¬¡å¾—<code>mccmccmcc</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            Stack&lt;Character&gt; strStack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">numSb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : s.toCharArray()) &#123;<br>                <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;]&#x27;</span>) &#123;<br>                    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>                    <span class="hljs-keyword">while</span> (!strStack.isEmpty() &amp;&amp; strStack.peek() != <span class="hljs-string">&#x27;[&#x27;</span>) &#123;<br>                        temp.append(strStack.pop());<br>                    &#125;<br>                    strStack.pop();<br>                    <span class="hljs-keyword">while</span> (!strStack.isEmpty() &amp;&amp; Character.isDigit(strStack.peek())) &#123;<br>                        numSb.append(strStack.pop());<br>                    &#125;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(numSb.reverse().toString());<br>                    numSb.setLength(<span class="hljs-number">0</span>);<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> temp.reverse().toString();<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; num; i++) &#123;<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch1 : str.toCharArray()) &#123;<br>                            strStack.push(ch1);<br>                        &#125;<br>                    &#125;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    strStack.push(ch);<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">while</span> (!strStack.isEmpty()) &#123;<br>                ans.append(strStack.pop());<br>            &#125;<br>            System.out.println(ans.reverse().toString());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æœ€é•¿çš„æŒ‡å®šç‘•ç–µåº¦çš„å…ƒéŸ³å­ä¸²</h1><h2 id="é¢˜ç›®æè¿°-40">é¢˜ç›®æè¿°</h2><h3 id="å®šä¹‰">å®šä¹‰</h3><ol><li>å…ƒéŸ³å­—ç¬¦ä¸²ï¼šå¼€å¤´å’Œç»“å°¾å‡ä¸ºå…ƒéŸ³å­—æ¯ï¼ˆ<code>aeiouAEIOU</code>ï¼‰çš„å­—ç¬¦ä¸²ï¼›</li><li>ç‘•ç–µåº¦ï¼šå…ƒéŸ³å­—ç¬¦ä¸²ä¸­æ··æ‚çš„éå…ƒéŸ³å­—æ¯æ•°é‡ï¼ˆå¦‚<code>abira</code>ç‘•ç–µåº¦ä¸º 2ï¼‰ï¼›</li><li>å­ä¸²ï¼šå­—ç¬¦ä¸²ä¸­ä»»æ„è¿ç»­å­—ç¬¦ç»„æˆçš„å­åºåˆ—ã€‚</li></ol><p>ç»™å®šå­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæŒ‡å®šç‘•ç–µåº¦çš„æœ€é•¿å…ƒéŸ³å­ä¸²ï¼Œè¾“å‡ºå…¶é•¿åº¦ï¼›æ— æ»¡è¶³æ¡ä»¶çš„å­ä¸²åˆ™è¾“å‡º 0ã€‚</p><h3 id="è¾“å…¥æè¿°-38">è¾“å…¥æè¿°</h3><ol><li>é¦–è¡Œè¾“å…¥æ•´æ•°<code>flaw</code>ï¼ˆé¢„æœŸç‘•ç–µåº¦ï¼Œ<code>[0, 65535]</code>ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œè¾“å…¥ä»…å«<code>a-z/A-Z</code>çš„å­—ç¬¦ä¸²ï¼ˆé•¿åº¦<code>(0, 65535]</code>ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-38">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæ»¡è¶³æ¡ä»¶çš„å…ƒéŸ³å­ä¸²é•¿åº¦ã€‚</p><h3 id="ç¤ºä¾‹-38">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br>asdbuiodevauufgh<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>aeueo<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br>aabeebuu<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">5<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æ»¡è¶³æ¡ä»¶çš„æœ€é•¿å…ƒéŸ³å­ä¸²ä¸º<code>aabee</code>å’Œ<code>eebuu</code>ï¼Œé•¿åº¦å‡ä¸º 5ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">flaw</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            Set&lt;Character&gt; set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : <span class="hljs-string">&quot;aeiouAEIOU&quot;</span>.toCharArray()) &#123;<br>                set.add(ch);<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> s.length();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            List&lt;Integer&gt; pos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-type">int</span> []num = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n + <span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-type">char</span> <span class="hljs-variable">ch</span> <span class="hljs-operator">=</span> s.charAt(i);<br>                <span class="hljs-keyword">if</span> (set.contains(ch)) &#123;<br>                    pos.add(i);<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    cnt++;<br>                &#125;<br>                num[i + <span class="hljs-number">1</span>] = cnt;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; r &lt; pos.size(); r++) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> pos.get(r);<br>                <span class="hljs-keyword">while</span> (l &lt;= r) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> pos.get(l);<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">curFlaw</span> <span class="hljs-operator">=</span> num[right + <span class="hljs-number">1</span>] - num[left + <span class="hljs-number">1</span>];<br>                    <span class="hljs-keyword">if</span> (curFlaw &gt; flaw) &#123;<br>                        l++;<br>                        <span class="hljs-keyword">continue</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (curFlaw == flaw) &#123;<br>                        ans = Math.max(ans, right - left + <span class="hljs-number">1</span>);<br>                    &#125;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            System.out.println(ans);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç›®å½•åˆ é™¤</h1><h2 id="é¢˜ç›®æè¿°-41">é¢˜ç›®æè¿°</h2><p>æŸæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ï¼šæ ¹ç›®å½• ID ä¸º 0ï¼Œæ¯ä¸ªç›®å½•æœ‰å”¯ä¸€ IDï¼Œä¸”ä»…æœ‰ä¸€ä¸ªçˆ¶ç›®å½•ï¼ˆæ ¹ç›®å½•æ— çˆ¶ç›®å½•ï¼‰ã€‚ç»™å®š<code>[å­ç›®å½•IDï¼Œçˆ¶ç›®å½•ID]</code>çš„çˆ¶å­å…³ç³»è¡¨ï¼Œä»¥åŠå¾…åˆ é™¤çš„ç›®å½• IDï¼Œåˆ é™¤è¯¥ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•åï¼Œè¿”å›å‰©ä½™ç›®å½• ID çš„é€’å¢åºåˆ—ã€‚</p><h3 id="è¾“å…¥æè¿°-39">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œï¼šçˆ¶å­å…³ç³»è¡¨çš„é•¿åº¦<code>m</code>ï¼›</li><li>æ¥ä¸‹æ¥<code>m</code>è¡Œï¼šæ¯è¡Œä¸€ä¸ªçˆ¶å­å…³ç³»å¯¹ï¼ˆå­ç›®å½• ID çˆ¶ç›®å½• IDï¼‰ï¼›</li><li>æœ€åä¸€è¡Œï¼šå¾…åˆ é™¤çš„ç›®å½• IDã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-39">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºå‰©ä½™ç›®å½• ID çš„é€’å¢åºåˆ—ï¼Œç©ºæ ¼åˆ†éš”ã€‚</p><h3 id="ç¤ºä¾‹-39">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">5<br>8 6<br>10 8<br>6 0<br>20 8<br>2 6<br>8<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 6<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>åˆ é™¤ 8 åŠå…¶å­ç›®å½•ï¼ˆ10ã€20ï¼‰ï¼Œå‰©ä½™ç›®å½•ä¸º 2ã€6ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            Set&lt;Integer&gt;set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();<br>            Map&lt;Integer, List&lt;Integer&gt;&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>                <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                                Integer::parseInt).toArray();<br>                set.add(arr[<span class="hljs-number">1</span>]);<br>                set.add(arr[<span class="hljs-number">0</span>]);<br>                map.computeIfAbsent(arr[<span class="hljs-number">1</span>], k-&gt;<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Integer&gt;()).add(arr[<span class="hljs-number">0</span>]);<br>            &#125;<br>            Set&lt;Integer&gt;badNum = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>            Queue&lt;Integer&gt;queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;<br>                queue.offer(arr[i]);<br>                badNum.add(arr[i]);<br>            &#125;<br>            <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> queue.poll();<br>                List&lt;Integer&gt;list = map.getOrDefault(x, Collections.emptyList());<br>                <span class="hljs-keyword">for</span> (Integer num : list) &#123;<br>                    <span class="hljs-keyword">if</span> (!badNum.contains(num)) &#123;<br>                        queue.offer(num);<br>                        badNum.add(num);<br>                    &#125;<br>                &#125;<br>            &#125;<br>            Set&lt;Integer&gt;ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeSet</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (Integer x : set) &#123;<br>                <span class="hljs-keyword">if</span> (!badNum.contains(x)) &#123;<br>                    ans.add(x);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (Integer x : ans) &#123;<br>                <span class="hljs-keyword">if</span> (x != <span class="hljs-number">0</span>) &#123;<br>                    System.out.print(x + <span class="hljs-string">&quot; &quot;</span>);<br>                &#125;<br>            &#125;<br>            System.out.println();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç«é”…</h1><h2 id="é¢˜ç›®æè¿°-42">é¢˜ç›®æè¿°</h2><p>ç«é”…ä¸­ä¸åŒæ—¶é—´ä¸‹èœï¼Œæ¯é“èœ<code>x</code>ç§’ä¸‹é”…ï¼Œéœ€ç…®<code>y</code>ç§’æ‰åˆšå¥½åˆé€‚ã€‚ä½ çš„æ‰‹é€Ÿä¸º<code>m</code>ï¼ˆæèœåè‡³å°‘éš”<code>m</code>ç§’æ‰èƒ½å†æï¼Œæ¯æ¬¡æ 1 ä¸ªï¼‰ï¼Œæ±‚æœ€å¤šèƒ½åƒåˆ°çš„åˆšå¥½åˆé€‚çš„èœçš„æ•°é‡ã€‚</p><h3 id="è¾“å…¥æè¿°-40">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œï¼šæ•´æ•°<code>n</code>ï¼ˆèœçš„ä¸ªæ•°ï¼‰ã€<code>m</code>ï¼ˆæ‰‹é€Ÿï¼Œ1 &lt; n, m &lt; 1000ï¼‰ï¼›</li><li>æ¥ä¸‹æ¥<code>n</code>è¡Œï¼šæ¯è¡Œä¸¤ä¸ªæ•°<code>x</code>ã€<code>y</code>ï¼ˆ1 &lt; x, y &lt; 1000ï¼‰ï¼Œè¡¨ç¤º<code>x</code>ç§’ä¸‹çš„èœéœ€ç…®<code>y</code>ç§’ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-40">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæœ€å¤šèƒ½åƒåˆ°çš„åˆšå¥½åˆé€‚çš„èœçš„æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-40">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 1<br>1 2<br>2 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> []arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], m = arr[<span class="hljs-number">1</span>];<br>            <span class="hljs-type">int</span> []a = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                arr = Arrays.stream(sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                          Integer::parseInt).toArray();<br>                <span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> arr[<span class="hljs-number">0</span>], y = arr[<span class="hljs-number">1</span>];<br>                a[i] = x + y;<br>            &#125;<br>            Arrays.sort(a);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">pre</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; a.length; i++) &#123;<br>                <span class="hljs-keyword">if</span> (a[i] &gt;= a[pre] + m) &#123;<br>                    cnt++;<br>                    pre = i;<br>                &#125;<br>            &#125;<br>            System.out.println(cnt);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æœåŠ¡å™¨å¹¿æ’­</h1><h2 id="é¢˜ç›®æè¿°-43">é¢˜ç›®æè¿°</h2><p>ç»™å®š<code>NÃ—N</code>çš„æœåŠ¡å™¨è¿æ¥çŸ©é˜µï¼ˆ<code>matrix[i][j]=1</code>è¡¨ç¤ºæœåŠ¡å™¨<code>i</code>å’Œ<code>j</code>ç›´æ¥è¿æ¥ï¼Œè¿æ¥å¯¹ç§°ä¸”è‡ªè¿ï¼‰ï¼Œå¹¿æ’­å¯é€šè¿‡ç›´æ¥ / é—´æ¥è¿æ¥ä¼ æ’­ã€‚æ±‚æœ€å°‘éœ€è¦å‘å‡ å°æœåŠ¡å™¨å‘é€å¹¿æ’­ï¼Œæ‰èƒ½è®©æ‰€æœ‰æœåŠ¡å™¨æ¥æ”¶ã€‚</p><h3 id="è¾“å…¥æè¿°-41">è¾“å…¥æè¿°</h3><p>è¾“å…¥<code>N</code>è¡Œï¼Œæ¯è¡Œ<code>N</code>ä¸ª 0/1ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼Œ<code>1&lt;=N&lt;=50</code>ã€‚</p><h3 id="è¾“å‡ºæè¿°-41">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºæœ€å°‘å¹¿æ’­çš„æœåŠ¡å™¨æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-41">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>1 1 0<br>1 1 1<br>0 1 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>æœåŠ¡å™¨ 0ã€1ã€2 äº’é€šï¼Œåªéœ€å¹¿æ’­ 1 å°ã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>1 0 0<br>0 1 0<br>0 0 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>3 å°æœåŠ¡å™¨äº’ä¸è¿æ¥ï¼Œéœ€åˆ†åˆ«å¹¿æ’­ã€‚</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>1 1<br>1 1<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>2 å°æœåŠ¡å™¨äº’é€šï¼Œåªéœ€å¹¿æ’­ 1 å°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        List&lt;String&gt;list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> sc.nextLine();<br>            <span class="hljs-keyword">if</span> (str.isEmpty()) &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            list.add(str);<br>        &#125;<br>        sc.close();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> list.size();<br>        <span class="hljs-type">int</span> [][]matrix = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n][n];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            matrix[i] = Arrays.stream(list.get(i).split(<span class="hljs-string">&quot; &quot;</span>)).mapToInt(<br>                            Integer::parseInt).toArray();<br>        &#125;<br>        Map&lt;Integer, Integer&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            map.put(i, i);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                <span class="hljs-keyword">if</span> (matrix[i][j] == <span class="hljs-number">1</span> &amp;&amp; i != j) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">tagI</span> <span class="hljs-operator">=</span> map.get(i);<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">tagJ</span> <span class="hljs-operator">=</span> map.get(j);<br>                    <span class="hljs-keyword">if</span> (tagI != tagJ) &#123;<br>                        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> Math.max(tagI, tagJ);<br>                        <span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Math.min(tagI, tagJ);<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; k &lt; n; k++) &#123;<br>                            <span class="hljs-keyword">if</span> (map.get(k) == max) &#123;<br>                                map.put(k, min);<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        Set&lt;Integer&gt;ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(map.values());<br>        System.out.println(ans.size());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>äºŒå‰æ ‘çš„å¹¿åº¦ä¼˜å…ˆéå†</h1><h2 id="é¢˜ç›®æè¿°-44">é¢˜ç›®æè¿°</h2><p>ç»™å®šäºŒå‰æ ‘çš„ååºéå†ï¼ˆå·¦â†’å³â†’çˆ¶ï¼‰å’Œä¸­åºéå†ï¼ˆå·¦â†’çˆ¶â†’å³ï¼‰ç»“æœï¼ˆèŠ‚ç‚¹ä¸ºå¤§å†™å­—æ¯ï¼Œæœ€å¤š 26 ä¸ªï¼‰ï¼Œè¾“å‡ºå±‚æ¬¡éå†ï¼ˆå¹¿åº¦ä¼˜å…ˆï¼‰ç»“æœã€‚</p><h3 id="è¾“å…¥æè¿°-42">è¾“å…¥æè¿°</h3><p>è¾“å…¥ä¸€è¡Œï¼Œä¸ºååºéå†å’Œä¸­åºéå†ç»“æœï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-42">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºå±‚æ¬¡éå†ç»“æœï¼ˆæ— ç©ºæ ¼ï¼‰ã€‚</p><h3 id="ç¤ºä¾‹-42">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">CBEFDA CBAEDF<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">ABDCEF<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TreeNode</span> &#123;<br>        <span class="hljs-type">char</span> val;<br>        TreeNode left;<br>        TreeNode right;<br>        TreeNode (<span class="hljs-type">char</span> val) &#123;<br>            <span class="hljs-built_in">this</span>.val = val;<br>        &#125;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">postOrder</span> <span class="hljs-operator">=</span> strings[<span class="hljs-number">0</span>];<br>            <span class="hljs-type">String</span> <span class="hljs-variable">inOrder</span> <span class="hljs-operator">=</span> strings[<span class="hljs-number">1</span>];<br>            <span class="hljs-type">TreeNode</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> build(postOrder, inOrder);<br>            bfs(root);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> TreeNode <span class="hljs-title function_">build</span><span class="hljs-params">(String postOrder, String inOrder)</span> &#123;<br>        <span class="hljs-keyword">if</span> (postOrder.isEmpty() || inOrder.isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br>        <span class="hljs-type">char</span> <span class="hljs-variable">rootVal</span> <span class="hljs-operator">=</span> postOrder.charAt(postOrder.length() - <span class="hljs-number">1</span>);<br>        <span class="hljs-type">TreeNode</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(rootVal);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> inOrder.indexOf(rootVal);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">leftInOrder</span> <span class="hljs-operator">=</span> inOrder.substring(<span class="hljs-number">0</span>, index);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">rightInOrder</span> <span class="hljs-operator">=</span> inOrder.substring(index + <span class="hljs-number">1</span>);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">lSize</span> <span class="hljs-operator">=</span> leftInOrder.length();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">leftPostOrder</span> <span class="hljs-operator">=</span> postOrder.substring(<span class="hljs-number">0</span>, lSize);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">rightPostOrder</span> <span class="hljs-operator">=</span> postOrder.substring(lSize, postOrder.length() - <span class="hljs-number">1</span>);<br>        root.left = build(leftPostOrder, leftInOrder);<br>        root.right = build(rightPostOrder, rightInOrder);<br>        <span class="hljs-keyword">return</span> root;<br>    &#125;<br>    <span class="hljs-comment">//æ³¨æ„ï¼šå±‚æ¬¡éå†!=å‰åºéå†</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bfs</span><span class="hljs-params">(TreeNode root)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> ;<br>        &#125;<br>        Queue&lt;TreeNode&gt;queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;&gt;();<br>        queue.offer(root);<br>        <span class="hljs-keyword">while</span> (!queue.isEmpty()) &#123;<br>            <span class="hljs-type">TreeNode</span> <span class="hljs-variable">curNode</span> <span class="hljs-operator">=</span> queue.poll();<br>            System.out.print(curNode.val);<br>            <span class="hljs-keyword">if</span> (curNode.left != <span class="hljs-literal">null</span>) &#123;<br>                queue.offer(curNode.left);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (curNode.right != <span class="hljs-literal">null</span>) &#123;<br>                queue.offer(curNode.right);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ‰¾å•è¯</h1><h2 id="é¢˜ç›®æè¿°-45">é¢˜ç›®æè¿°</h2><p>ç»™å®š<code>NÃ—N</code>çš„å¤§å†™å­—ç¬¦æ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å­—ç¬¦ä¸²ï¼Œè‹¥å­—ç¬¦ä¸²æŒ‰é¡ºåºå‡ºç°åœ¨æ•°ç»„ä¸­ï¼ˆç›¸é‚»å•å…ƒæ ¼ï¼Œå•å…ƒæ ¼ä¸é‡å¤ä½¿ç”¨ï¼‰ï¼Œè¾“å‡ºæ¯ä¸ªå­—ç¬¦çš„ä¸‹æ ‡åºåˆ—ï¼›å¦åˆ™è¾“å‡º<code>N</code>ã€‚</p><h3 id="è¾“å…¥æè¿°-43">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ 1 è¡Œï¼šæ•°å­—<code>N</code>ï¼ˆäºŒç»´æ•°ç»„è¡Œæ•°ï¼Œ0&lt;N&lt;=100ï¼‰ï¼›</li><li>ç¬¬ 2~N+1 è¡Œï¼šäºŒç»´å­—ç¬¦æ•°ç»„ï¼ˆæ¯è¡Œå­—ç¬¦ç”¨<code>,</code>åˆ†éš”ï¼‰ï¼›</li><li>ç¬¬ N+2 è¡Œï¼šå¾…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼ˆå¤§å†™ï¼Œé•¿åº¦ 0&lt;K&lt;1000ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-43">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºä¸‹æ ‡å­—ç¬¦ä¸²ï¼ˆæ ¼å¼ï¼šè¡Œï¼Œåˆ—ï¼Œè¡Œï¼Œåˆ—â€¦ï¼‰ï¼Œæ— åŒ¹é…åˆ™è¾“å‡º<code>N</code>ã€‚</p><h3 id="ç¤ºä¾‹-43">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs tex">4<br>A,C,C,F<br>C,D,E,D<br>B,E,S,S<br>F,E,C,A<br>ACCESS<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">0,0,0,1,0,2,1,2,2,2,2,3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>ACCESS å¯¹åº”ä¸‹æ ‡ä¾æ¬¡ä¸º [0,0]ã€[0,1]ã€[0,2]ã€[1,2]ã€[2,2]ã€[2,3]ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">char</span> [][]grid;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> [][]used;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []dx = &#123;-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>&#125;;<br>    <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> []dy = &#123;<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">static</span> String word;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            n = Integer.parseInt(sc.nextLine());<br>            grid = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[n][n];<br>            used = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[n][n];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                String []strings = sc.nextLine().split(<span class="hljs-string">&quot;,&quot;</span>);<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    grid[i][j] = strings[j].charAt(<span class="hljs-number">0</span>);<br>                &#125;<br>            &#125;<br>            word = sc.nextLine();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; n; j++) &#123;<br>                    <span class="hljs-keyword">if</span> (grid[i][j] == word.charAt(<span class="hljs-number">0</span>)) &#123;<br>                        List&lt;<span class="hljs-type">int</span>[]&gt;path = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                        path.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;i, j&#125;);<br>                        <span class="hljs-keyword">if</span> (dfs(<span class="hljs-number">0</span>, i, j, path )) &#123;<br>                            <span class="hljs-keyword">return</span>;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            System.out.println(<span class="hljs-string">&quot;N&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> cnt, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, List&lt;<span class="hljs-type">int</span>[]&gt;path)</span> &#123;<br>        <span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">0</span> || x &gt;= n || y &lt; <span class="hljs-number">0</span> || y &gt;= n || used[x][y] ||<br>                grid[x][y] != word.charAt(cnt)) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (cnt == word.length() - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; path.size(); i++) &#123;<br>                System.out.print(path.get(i)[<span class="hljs-number">0</span>] + <span class="hljs-string">&quot;,&quot;</span> + path.get(i)[<span class="hljs-number">1</span>]);<br>                <span class="hljs-keyword">if</span> (i &lt; path.size() - <span class="hljs-number">1</span>) &#123;<br>                    System.out.print(<span class="hljs-string">&quot;,&quot;</span>);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        used[x][y] = <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">xx</span> <span class="hljs-operator">=</span> x + dx[i], yy = y + dy[i];<br>            path.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;xx, yy&#125;);<br>            <span class="hljs-keyword">if</span> (dfs(cnt + <span class="hljs-number">1</span>, xx, yy, path)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>            path.remove(path.size() - <span class="hljs-number">1</span>);<br>        &#125;<br>        used[x][y] = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ‹›è˜</h1><h2 id="é¢˜ç›®æè¿°-46">é¢˜ç›®æè¿°</h2><p>ç»™å®š<code>n</code>åœºé¢è¯•çš„èµ·æ­¢æ—¶é—´ï¼ˆ<code>Si &lt; Ei</code>ï¼‰ï¼Œæ¯åé¢è¯•å®˜æ¯æ¬¡åªèƒ½é¢è¯• 1 äººï¼Œå®Œæˆåå¯ç«‹å³å¼€å§‹ä¸‹ä¸€åœºï¼Œä¸”æ¯äººæœ€å¤šé¢è¯•<code>m</code>äººæ¬¡ã€‚æ±‚è‡³å°‘éœ€è¦çš„é¢è¯•å®˜æ•°é‡ã€‚</p><h3 id="è¾“å…¥æè¿°-44">è¾“å…¥æè¿°</h3><ol><li>ç¬¬ä¸€è¡Œï¼šé¢è¯•å®˜æœ€å¤šé¢è¯•äººæ¬¡<code>m</code>ï¼ˆ1&lt;=m&lt;=500ï¼‰ï¼›</li><li>ç¬¬äºŒè¡Œï¼šé¢è¯•åœºæ¬¡<code>n</code>ï¼ˆ1&lt;=n&lt;=500ï¼‰ï¼›</li><li>æ¥ä¸‹æ¥<code>n</code>è¡Œï¼šæ¯åœºé¢è¯•çš„èµ·å§‹ã€ç»“æŸæ—¶é—´ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ã€‚</li></ol><h3 id="è¾“å‡ºæè¿°-44">è¾“å‡ºæè¿°</h3><p>è¾“å‡ºè‡³å°‘éœ€è¦çš„é¢è¯•å®˜æ•°é‡ã€‚</p><h3 id="ç¤ºä¾‹-44">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br>5<br>1 2<br>2 3<br>3 4<br>4 5<br>5 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>5 åœºæ— é‡å é¢è¯•ï¼Œæ¯äººæœ€å¤š 2 åœºï¼Œéœ€ 3 äººã€‚</p><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>3<br>1 2<br>2 3<br>3 4<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">1<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>3 åœºæ— é‡å ï¼Œæ¯äººæœ€å¤š 3 åœºï¼Œéœ€ 1 äººã€‚</p><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs tex">3<br>3<br>8 35<br>5 10<br>1 3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2<br></code></pre></td></tr></table></figure><p><strong>è¯´æ˜</strong></p><p>[5,10] å’Œ [8,35] é‡å ï¼Œéœ€ 2 äººã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> Integer.parseInt(sc.nextLine());<br>            <span class="hljs-type">int</span> [][]arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[n][<span class="hljs-number">2</span>];<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>                arr[i][<span class="hljs-number">0</span>] = Integer.parseInt(strings[<span class="hljs-number">0</span>]);<br>                arr[i][<span class="hljs-number">1</span>] = Integer.parseInt(strings[<span class="hljs-number">1</span>]);<br>            &#125;<br>            Arrays.sort(arr, (a, b)-&gt;a[<span class="hljs-number">1</span>] - b[<span class="hljs-number">1</span>]);<br>            List&lt;List&lt;Integer&gt;&gt; lists = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>                lists.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> []range : arr) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> range[<span class="hljs-number">0</span>];<br>                <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> range[<span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">for</span> (List&lt;Integer&gt;list : lists) &#123;<br>                    <span class="hljs-keyword">if</span> (list.size() &lt; m &amp;&amp; (list.isEmpty() || list.get(list.size() - <span class="hljs-number">1</span>) &lt;= start)) &#123;<br>                        list.add(end);<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">cnt</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (List&lt;Integer&gt; list : lists) &#123;<br>                <span class="hljs-comment">// System.out.println( list.toString());</span><br>                <span class="hljs-keyword">if</span> (!list.isEmpty()) &#123;<br>                    cnt++;<br>                &#125;<br>            &#125;<br>            System.out.println(cnt);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ–—åœ°ä¸»ä¹‹é¡ºå­</h1><h2 id="é¢˜ç›®æè¿°-47">é¢˜ç›®æè¿°</h2><p>æ–—åœ°ä¸»ä¸­é¡ºå­è§„åˆ™ï¼šç”±è‡³å°‘ 5 å¼ è¿ç»­é€’å¢çš„ç‰Œç»„æˆï¼ˆé¡ºåºï¼š3,4,5,6,7,8,9,10,J,Q,K,A,2ï¼‰ï¼Œä¸”ä¸å« 2ã€‚ç»™å®š 13 å¼ ç‰Œï¼Œè¾“å‡ºæ‰€æœ‰åˆæ³•é¡ºå­ï¼ˆæŒ‰é¦–å¼ ç‰Œå‡åºï¼Œæ— åˆ™è¾“å‡º Noï¼‰ã€‚</p><h3 id="è¾“å…¥æè¿°-45">è¾“å…¥æè¿°</h3><p>è¾“å…¥ 13 å¼ ç‰Œï¼ˆç©ºæ ¼åˆ†éš”ï¼Œæ— å¤§å°ç‹ï¼‰ã€‚</p><h3 id="è¾“å‡ºæè¿°-45">è¾“å‡ºæè¿°</h3><p>æ¯è¡Œè¾“å‡ºä¸€ä¸ªé¡ºå­ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰ï¼›æ— åˆ™è¾“å‡º Noã€‚</p><h3 id="ç¤ºä¾‹-45">ç¤ºä¾‹</h3><p><strong>ç¤ºä¾‹ 1</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 9 J 2 3 4 K A 7 9 A 5 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 4 5 6 7<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 2</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 9 J 10 3 4 K A 7 Q A 5 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tex">3 4 5 6 7<br>9 10 J Q K A<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ 3</strong></p><p><strong>è¾“å…¥</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">2 9 9 9 3 4 K A 10 Q A 5 6<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">No<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.*;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-comment">//æ‹¿ä¸‹</span><br>    <span class="hljs-keyword">static</span> String[] order = &#123;<span class="hljs-string">&quot;3&quot;</span>, <span class="hljs-string">&quot;4&quot;</span>, <span class="hljs-string">&quot;5&quot;</span>, <span class="hljs-string">&quot;6&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>, <span class="hljs-string">&quot;8&quot;</span>, <span class="hljs-string">&quot;9&quot;</span>, <span class="hljs-string">&quot;10&quot;</span>, <span class="hljs-string">&quot;J&quot;</span>, <span class="hljs-string">&quot;Q&quot;</span>, <span class="hljs-string">&quot;K&quot;</span>, <span class="hljs-string">&quot;A&quot;</span>&#125;;<br>    <span class="hljs-keyword">static</span> Map&lt;String, Integer&gt;map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-keyword">while</span> (sc.hasNextLine()) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; order.length; i++) &#123;<br>                map.put(order[i], i);<br>            &#125;<br>            String []strings = sc.nextLine().split(<span class="hljs-string">&quot; &quot;</span>);<br>            Set&lt;String&gt;uniqueCard = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (String card : strings) &#123;<br>                <span class="hljs-keyword">if</span> (!card.equals(<span class="hljs-string">&quot;2&quot;</span>)) &#123;<br>                    uniqueCard.add(card);<br>                &#125;<br>            &#125;<br>            List&lt;String&gt;list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(uniqueCard);<br>            list.sort(Comparator.comparingInt(map::get));<br>            List&lt;List&lt;String&gt;&gt;result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> list.size();<br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span> (i &lt; n) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> i;<br>                <span class="hljs-keyword">while</span> (i + <span class="hljs-number">1</span> &lt; n &amp;&amp; map.get(list.get(i + <span class="hljs-number">1</span>)) == map.get(list.get(i)) + <span class="hljs-number">1</span>) &#123;<br>                    i++;<br>                &#125;<br>                List&lt;String&gt;curList = list.subList(start, i + <span class="hljs-number">1</span>);<br>                <span class="hljs-keyword">if</span> (curList.size() &gt;= <span class="hljs-number">5</span>) &#123;<br>                    result.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(curList));<br>                &#125;<br>                i++;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (result.isEmpty()) &#123;<br>                System.out.println(<span class="hljs-string">&quot;No&quot;</span>);<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">for</span> (List&lt;String&gt;strList : result) &#123;<br>                    System.out.println(String.join(<span class="hljs-string">&quot; &quot;</span>, strList));<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;strong&gt;åä¸º OD æœºè¯•æ€»ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ ¸å¿ƒæ•°æ®&lt;br&gt;
ç¼–ç¨‹è¯­è¨€ï¼šJava&lt;br&gt;
æ€»åˆ†ï¼š300 åˆ†ï¼ˆæ»¡åˆ†400åˆ†ï¼‰&lt;br&gt;
å„é¢˜å¾—åˆ†æ‹†åˆ†ï¼š&lt;br&gt;
ç¬¬ä¸€é¢˜ï¼š100 åˆ† Ã—90% = 90 åˆ†&lt;br&gt;
ç¬¬äºŒé¢˜ï¼š100 åˆ† Ã—100</summary>
      
    
    
    
    <category term="åä¸ºOD" scheme="https://www.xwybq.top/categories/%E5%8D%8E%E4%B8%BAOD/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æœºè¯•é¢˜" scheme="https://www.xwybq.top/tags/%E6%9C%BA%E8%AF%95%E9%A2%98/"/>
    
    <category term="java" scheme="https://www.xwybq.top/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud</title>
    <link href="https://www.xwybq.top/posts/96a41905/"/>
    <id>https://www.xwybq.top/posts/96a41905/</id>
    <published>2025-09-21T02:59:21.000Z</published>
    <updated>2025-09-22T04:42:35.535Z</updated>
    
    <content type="html"><![CDATA[<h1>1. è®¤è¯†å¾®æœåŠ¡</h1><p>æœ¬ç« ä»å•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹åˆ‡å…¥ï¼Œåˆ†æå¤§å‹é¡¹ç›®é‡‡ç”¨å•ä½“æ¶æ„çš„é—®é¢˜ï¼Œä»¥åŠå¾®æœåŠ¡æ¶æ„çš„è§£å†³æ€è·¯ã€‚</p><h3 id="1-1-å•ä½“æ¶æ„">1.1 å•ä½“æ¶æ„</h3><p>å•ä½“æ¶æ„ï¼ˆmonolithic structureï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œæ•´ä¸ªé¡¹ç›®ä¸­æ‰€æœ‰åŠŸèƒ½æ¨¡å—éƒ½åœ¨<strong>åŒä¸€ä¸ªå·¥ç¨‹</strong>ä¸­å¼€å‘ï¼›éƒ¨ç½²æ—¶éœ€å¯¹æ‰€æœ‰æ¨¡å—ä¸€èµ·ç¼–è¯‘ã€æ‰“åŒ…ï¼›æ¶æ„è®¾è®¡å’Œå¼€å‘æ¨¡å¼éå¸¸ç®€å•ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf72dc1ec9f.png" alt=""></p><p>å½“é¡¹ç›®è§„æ¨¡è¾ƒå°æ—¶ï¼Œå•ä½“æ¶æ„ä¸Šæ‰‹å¿«ã€éƒ¨ç½²è¿ç»´æ–¹ä¾¿ï¼Œå› æ­¤æ—©æœŸå°å‹é¡¹ç›®å¤šé‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚</p><p>ä½†éšç€ä¸šåŠ¡è§„æ¨¡æ‰©å¤§ã€å›¢é˜Ÿäººå‘˜å¢åŠ ï¼Œå•ä½“æ¶æ„çš„é—®é¢˜é€æ¸å‡¸æ˜¾ï¼š</p><ul><li><strong>å›¢é˜Ÿåä½œæˆæœ¬é«˜</strong>ï¼šæ•°åäººåä½œåŒä¸€é¡¹ç›®æ—¶ï¼Œæ¨¡å—é—´ä»£ç è¾¹ç•Œæ¨¡ç³Šï¼Œåˆ†æ”¯åˆå¹¶æ˜“é™·å…¥ â€œå†²çªæ³¥æ½­â€ã€‚</li><li><strong>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½</strong>ï¼šä»»ä½•æ¨¡å—å˜æ›´éƒ½éœ€å‘å¸ƒ<strong>æ•´ä¸ªç³»ç»Ÿ</strong>ï¼Œæ¨¡å—é—´åˆ¶çº¦å¤šï¼Œä¸€æ¬¡å‘å¸ƒå¯èƒ½è€—æ—¶æ•°ååˆ†é’Ÿç”šè‡³æ•°å°æ—¶ã€‚</li><li><strong>ç³»ç»Ÿå¯ç”¨æ€§å·®</strong>ï¼šæ‰€æœ‰åŠŸèƒ½ä½œä¸ºä¸€ä¸ªæœåŠ¡éƒ¨ç½²ï¼Œç›¸äº’å½±å“å¤§ã€‚çƒ­ç‚¹åŠŸèƒ½è€—å°½èµ„æºæ—¶ï¼Œä¼šå¯¼è‡´å…¶ä»–æœåŠ¡ä¸å¯ç”¨ã€‚</li></ul><h4 id="å•ä½“æ¶æ„å¯ç”¨æ€§é—®é¢˜æ¼”ç¤ºï¼ˆä»¥é»‘é©¬å•†åŸä¸ºä¾‹ï¼‰">å•ä½“æ¶æ„å¯ç”¨æ€§é—®é¢˜æ¼”ç¤ºï¼ˆä»¥é»‘é©¬å•†åŸä¸ºä¾‹ï¼‰</h4><p>ä¸ºç›´è§‚å±•ç¤ºå•ä½“æ¶æ„çš„å¯ç”¨æ€§é—®é¢˜ï¼Œå¯¹é»‘é©¬å•†åŸçš„ <code>hm-service</code> æ¨¡å—åšå¦‚ä¸‹æ”¹é€ ä¸æµ‹è¯•ï¼š</p><ol><li><p><strong>ä¿®æ”¹ä»£ç æ¨¡æ‹Ÿè€—æ—¶</strong>ï¼šä¿®æ”¹ <code>com.hmall.controller.HelloController</code> ä¸­çš„ <code>hello</code> æ–¹æ³•ï¼Œæ¨¡æ‹Ÿæ¥å£æ‰§è¡Œè€—æ—¶ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf730d29dc5.png" alt=""></p></li><li><p><strong>å¯åŠ¨é¡¹ç›®ä¸æ¥å£æµ‹è¯•</strong>ï¼šå¯åŠ¨é¡¹ç›®åï¼Œæœ‰ä¸¤ä¸ªæ— éœ€ç™»å½•å³å¯è®¿é—®çš„æ¥å£ï¼š</p><ul><li><p><a href="http://localhost:8080/hi">http://localhost:8080/hi</a></p></li><li><p><a href="http://localhost:8080/search/list">http://localhost:8080/search/list</a></p><p>æµ‹è¯•å‘ç°<code>/search/list</code>æ¥å£å“åº”æ­£å¸¸ï¼ˆè€—æ—¶çº¦ 30 æ¯«ç§’ï¼‰ã€‚</p></li></ul></li><li><p><strong>æ¨¡æ‹Ÿçƒ­ç‚¹æ¥å£é«˜å¹¶å‘</strong>ï¼šå‡è®¾ <code>/hi</code> æ˜¯<strong>çƒ­ç‚¹æ¥å£</strong>ï¼Œä½¿ç”¨ Jemeter æ¨¡æ‹Ÿ 500 ä¸ªç”¨æˆ·å¹¶å‘è®¿é—®ã€‚è¯¾å‰èµ„æ–™æä¾›äº† Jemeter æµ‹è¯•è„šæœ¬ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf73b6dd172.png" alt=""></p></li><li><p><strong>å¯¼å…¥ Jemeter å¹¶æ‰§è¡Œæµ‹è¯•ï¼š</strong></p><p><img src="https://a1.boltp.com/2025/09/21/68cf74551b3ee.png" alt=""></p><p>ç”±äº <code>/hi</code> æ¥å£æ‰§è¡Œè€—æ—¶ï¼ˆ500 æ¯«ç§’ï¼‰ï¼ŒæœåŠ¡ç«¯å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œè¯·æ±‚ä¼šé€æ¸ç§¯å‹ï¼Œæœ€ç»ˆè€—å°½ Tomcat èµ„æºã€‚æ­¤æ—¶ï¼ŒåŸæœ¬æ­£å¸¸çš„ <code>/search/list</code> æ¥å£ä¹Ÿä¼šè¢«æ‹–æ…¢ã€‚</p></li><li><p><strong>éªŒè¯å½±å“</strong>ï¼šå¯åŠ¨ Jemeter æµ‹è¯•åï¼Œåœ¨æµè§ˆå™¨è®¿é—® <code>http://localhost:8080/search/list</code>ï¼Œä¼šå‘ç°å“åº”é€Ÿåº¦ææ…¢ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7489e6e5b.png" alt=""></p><p>è‹¥è¿›ä¸€æ­¥æé«˜ <code>/hi</code> çš„å¹¶å‘ï¼Œ<code>/search/list</code> çš„å“åº”ä¼šæ›´æ…¢ï¼Œç”šè‡³è¶…æ—¶ã€‚</p></li></ol><p>å¯è§ï¼Œå•ä½“æ¶æ„çš„å¯ç”¨æ€§è¾ƒå·®ï¼ŒåŠŸèƒ½é—´ç›¸äº’å½±å“å¤§ã€‚å³ä½¿åš<strong>æ°´å¹³æ‰©å±•</strong>ï¼ˆå¢åŠ æœºå™¨ï¼‰ï¼Œçƒ­ç‚¹æ¥å£ä»ä¼šå ç”¨èµ„æºï¼Œæ— æ³•ä»æ ¹æœ¬ä¸Šè§£å†³æ‰©å±•æ€§é—®é¢˜ã€‚</p><h3 id="1-2-å¾®æœåŠ¡">1.2 å¾®æœåŠ¡</h3><p>å¾®æœåŠ¡æ¶æ„çš„æ ¸å¿ƒæ˜¯<strong>æœåŠ¡åŒ–</strong>ï¼šå°†å•ä½“æ¶æ„ä¸­çš„åŠŸèƒ½æ¨¡å—ä»å•ä½“åº”ç”¨ä¸­æ‹†åˆ†å‡ºæ¥ï¼Œ<strong>ç‹¬ç«‹éƒ¨ç½²ä¸ºå¤šä¸ªæœåŠ¡</strong>ã€‚åŒæ—¶éœ€æ»¡è¶³ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><ul><li><strong>å•ä¸€èŒè´£</strong>ï¼šä¸€ä¸ªå¾®æœåŠ¡è´Ÿè´£ä¸€éƒ¨åˆ†ä¸šåŠ¡åŠŸèƒ½ï¼Œä¸”æ ¸å¿ƒæ•°æ®ä¸ä¾èµ–äºå…¶ä»–æ¨¡å—ã€‚</li><li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡æœ‰ç‹¬ç«‹çš„å¼€å‘ã€æµ‹è¯•ã€å‘å¸ƒã€è¿ç»´å›¢é˜Ÿï¼Œäººå‘˜è§„æ¨¡ä¸è¶…è¿‡ 10 äººï¼ˆâ€œ2 å¼ æŠ«è¨èƒ½å–‚é¥±â€ åŸåˆ™ï¼‰ã€‚</li><li><strong>æœåŠ¡è‡ªæ²»</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡ç‹¬ç«‹æ‰“åŒ…éƒ¨ç½²ï¼Œè®¿é—®è‡ªå·±çš„æ•°æ®åº“ï¼Œå¹¶åšå¥½<strong>æœåŠ¡éš”ç¦»</strong>ï¼Œé¿å…å½±å“å…¶ä»–æœåŠ¡ã€‚</li></ul><h4 id="å¾®æœåŠ¡æ‹†åˆ†ç¤ºä¾‹ï¼ˆé»‘é©¬å•†åŸï¼‰">å¾®æœåŠ¡æ‹†åˆ†ç¤ºä¾‹ï¼ˆé»‘é©¬å•†åŸï¼‰</h4><p>é»‘é©¬å•†åŸå¯å°†<strong>å•†å“ã€ç”¨æˆ·ã€è´­ç‰©è½¦ã€äº¤æ˜“</strong>ç­‰æ¨¡å—æ‹†åˆ†ï¼Œç”±ä¸åŒå›¢é˜Ÿç‹¬ç«‹å¼€å‘å’Œéƒ¨ç½²ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf750acb4a2.png" alt=""></p><h4 id="å¾®æœåŠ¡å¯¹å•ä½“é—®é¢˜çš„è§£å†³">å¾®æœåŠ¡å¯¹å•ä½“é—®é¢˜çš„è§£å†³</h4><p>å•ä½“æ¶æ„çš„é—®é¢˜åœ¨å¾®æœåŠ¡æ¶æ„ä¸‹å¾—åˆ°æ”¹å–„ï¼š</p><ul><li><strong>å›¢é˜Ÿåä½œæˆæœ¬é«˜</strong>ï¼šæœåŠ¡æ‹†åˆ†åï¼Œæ¯ä¸ªæœåŠ¡ä»£ç é‡å‡å°‘ï¼Œå‚ä¸å¼€å‘çš„äººå‘˜é€šå¸¸ 1~3 åï¼Œåä½œæˆæœ¬å¤§å¹…é™ä½ã€‚</li><li><strong>ç³»ç»Ÿå‘å¸ƒæ•ˆç‡ä½</strong>ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼Œæ¨¡å—å˜æ›´æ—¶ä»…éœ€æ‰“åŒ…éƒ¨ç½²å¯¹åº”æœåŠ¡ã€‚</li><li><strong>ç³»ç»Ÿå¯ç”¨æ€§å·®</strong>ï¼šæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ä¸”éš”ç¦»ï¼Œä½¿ç”¨ä¸“å±æœåŠ¡å™¨èµ„æºï¼Œä¸ä¼šç›¸äº’å½±å“ã€‚</li></ul><p>å¾®æœåŠ¡æ¶æ„æ˜¯<strong>åˆ†å¸ƒå¼æ¶æ„çš„æœ€ä½³å®è·µ</strong>ï¼Œé€‚åˆå¤§å‹äº’è”ç½‘é¡¹ç›®å¼€å‘ã€‚ä½†æ‹†åˆ†åä¹Ÿä¼šé¢ä¸´æ–°é—®é¢˜ï¼ˆå¦‚è·¨æœåŠ¡ä¸šåŠ¡å¤„ç†ã€é¡µé¢è¯·æ±‚è·¯ç”±ã€æœåŠ¡éš”ç¦»ç­‰ï¼‰ï¼Œåç»­ä¼šé€æ­¥è®²è§£ã€‚</p><h3 id="1-3-SpringCloud">1.3 SpringCloud</h3><p>å¾®æœåŠ¡æ‹†åˆ†åï¼Œè·¨æœåŠ¡åä½œã€è·¯ç”±ã€éš”ç¦»ç­‰é—®é¢˜éœ€è¦ä¸“é—¨çš„ç»„ä»¶è§£å†³ã€‚<strong>SpringCloud</strong>æ˜¯ Java é¢†åŸŸæœ€å…¨é¢çš„å¾®æœåŠ¡ç»„ä»¶é›†åˆï¼Œä¾æ‰˜ SpringBoot çš„è‡ªåŠ¨è£…é…èƒ½åŠ›ï¼Œå¤§å¹…é™ä½äº†é¡¹ç›®æ­å»ºå’Œç»„ä»¶ä½¿ç”¨çš„æˆæœ¬ï¼Œæ˜¯ä¸­å°å‹ä¼ä¸šå®ç°å¾®æœåŠ¡å¼€å‘çš„ä¼˜é€‰æ–¹æ¡ˆã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf757308070.png" alt=""></p><p>SpringCloud å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-cloud#overview">https://spring.io/projects/spring-cloud#overview</a></p><h4 id="SpringCloud-ä¸-SpringBoot-ç‰ˆæœ¬å¯¹åº”">SpringCloud ä¸ SpringBoot ç‰ˆæœ¬å¯¹åº”</h4><p>ç›®å‰ Spring Cloud æœ€æ–°ç‰ˆæœ¬ä¸º <strong>2025.0.xï¼ˆä»£å· Northfieldsï¼‰</strong>ï¼Œä¾èµ– JDK 17ï¼Œå¯¹åº” Spring Boot 3.5.x ç‰ˆæœ¬ã€‚Spring Cloud å„ç‰ˆæœ¬ä¸ Spring Boot çš„é€‚é…éµå¾ªä¸¥æ ¼çš„å…¼å®¹æ€§è§„èŒƒï¼Œä¸”éƒ¨åˆ†æ—©æœŸç‰ˆæœ¬å·²æ­£å¼åœæ­¢æ”¯æŒï¼ˆEnd of Life, EOLï¼‰ã€‚ä¼ä¸šä¸­å¸¸æ ¹æ®ç¨³å®šæ€§éœ€æ±‚é€‰æ‹©æ¬¡æ–°ç‰ˆæœ¬ï¼ˆå¦‚ 2024.0.xã€2023.0.xï¼‰è¿›è¡Œè½åœ°ã€‚</p><table><thead><tr><th>Spring Cloud ç‰ˆæœ¬ï¼ˆRelease Trainï¼‰</th><th>Spring Boot ç‰ˆæœ¬</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>2025.0.xï¼ˆNorthfieldsï¼‰</td><td>3.5.x</td><td>æœ€æ–°ç‰ˆæœ¬ï¼Œä¾èµ– JDK 17</td></tr><tr><td>2024.0.xï¼ˆMoorgateï¼‰</td><td>3.4.x</td><td>æ¬¡æ–°ç‰ˆæœ¬ï¼Œç¨³å®šæ€§å·²è¿‡éªŒè¯</td></tr><tr><td>2023.0.xï¼ˆLeytonï¼‰</td><td>3.3.xã€3.2.x</td><td>é€‚é… Spring Boot 3.x ä¸»æµç‰ˆæœ¬</td></tr><tr><td>2022.0.xï¼ˆKilburnï¼‰</td><td>3.0.xã€3.1.xï¼ˆä» 2022.0.3 ç‰ˆæœ¬å¼€å§‹é€‚é…ï¼‰</td><td>æ—©æœŸ Spring Boot 3.x é€‚é…ç‰ˆæœ¬</td></tr><tr><td>2021.0.xï¼ˆJubileeï¼‰</td><td>2.6.xã€2.7.xï¼ˆä» 2021.0.3 ç‰ˆæœ¬å¼€å§‹é€‚é…ï¼‰</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>2020.0.xï¼ˆIlfordï¼‰</td><td>2.4.xã€2.5.xï¼ˆä» 2020.0.3 ç‰ˆæœ¬å¼€å§‹é€‚é…ï¼‰</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>Hoxton</td><td>2.2.xã€2.3.xï¼ˆä» SR5 ç‰ˆæœ¬å¼€å§‹é€‚é…ï¼‰</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>Greenwich</td><td>2.1.x</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>Finchley</td><td>2.0.x</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>Edgware</td><td>1.5.x</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr><tr><td>Dalston</td><td>1.5.x</td><td>å·²åœæ­¢æ”¯æŒï¼ˆEOLï¼‰</td></tr></tbody></table><blockquote><p>æ³¨ï¼šæ ¹æ® Spring Cloud å®˜æ–¹è¯´æ˜ï¼Œ<strong>Dalstonã€Edgwareã€Finchleyã€Greenwichã€2020.0.xï¼ˆIlfordï¼‰ã€2021.0.xï¼ˆJubileeï¼‰ã€2022.0.xï¼ˆKilburnï¼‰å‡å·²åœæ­¢æ”¯æŒ</strong>ï¼Œä¸å†æä¾› bug ä¿®å¤åŠå®‰å…¨æ›´æ–°ï¼Œå»ºè®®é¿å…åœ¨æ–°ç³»ç»Ÿä¸­ä½¿ç”¨ï¼Œå¹¶é€æ­¥å°†æ—§ç³»ç»Ÿè¿ç§»è‡³ 2023.0.x åŠä»¥ä¸Šç‰ˆæœ¬ã€‚</p></blockquote><p>æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ <strong>Spring Cloud 2021.0.x + Spring Boot 2.7.x</strong>ã€‚</p><p>æ­¤å¤–ï¼Œ<code>SpringCloudAlibaba</code> ä¹Ÿå·²æˆä¸º SpringCloud ç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œè¯¾ç¨‹ä¸­ä¼šä½¿ç”¨å…¶éƒ¨åˆ†ç»„ä»¶ã€‚</p><h4 id="çˆ¶å·¥ç¨‹ä¾èµ–é…ç½®ï¼ˆé»‘é©¬å•†åŸï¼‰">çˆ¶å·¥ç¨‹ä¾èµ–é…ç½®ï¼ˆé»‘é©¬å•†åŸï¼‰</h4><p>åœ¨é»‘é©¬å•†åŸçš„çˆ¶å·¥ç¨‹ <code>hmall</code> ä¸­ï¼Œå·²é…ç½® SpringCloud å’Œ SpringCloudAlibaba çš„ä¾èµ–ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7804175fc.png" alt=""></p><p>è¿™æ ·ï¼Œåç»­ä½¿ç”¨ SpringCloud æˆ– SpringCloudAlibaba ç»„ä»¶æ—¶ï¼Œæ— éœ€å•ç‹¬æŒ‡å®šç‰ˆæœ¬ã€‚</p><h1>2. å¾®æœåŠ¡æ‹†åˆ†</h1><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é»‘é©¬å•†åŸå•ä½“é¡¹ç›®æ‹†åˆ†ä¸ºå¾®æœåŠ¡é¡¹ç›®ï¼Œå¹¶è§£å†³è¿‡ç¨‹ä¸­å‡ºç°çš„é—®é¢˜ã€‚</p><h3 id="2-1-ç†Ÿæ‚‰é»‘é©¬å•†åŸ">2.1 ç†Ÿæ‚‰é»‘é©¬å•†åŸ</h3><p>é¦–å…ˆéœ€ç†Ÿæ‚‰é»‘é©¬å•†åŸé¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf794d363e0.png" alt=""></p><p>å¯ç›´æ¥å¯åŠ¨é¡¹ç›®æµ‹è¯•æ•ˆæœï¼Œä½†éœ€ä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ï¼ˆåœ¨ <code>application-local.yaml</code> ä¸­ï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">hm:</span><br>  <span class="hljs-attr">db:</span><br>    <span class="hljs-attr">host:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># ä¿®æ”¹ä¸ºä½ Ubuntuç³»ç»Ÿæ‰€åœ¨è™šæ‹Ÿæœºçš„IPåœ°å€</span><br>    <span class="hljs-attr">pw:</span> <span class="hljs-number">123</span> <span class="hljs-comment"># ä¿®æ”¹ä¸ºDockerä¸­MySQLçš„å¯†ç </span><br></code></pre></td></tr></table></figure><p>åŒæ—¶éœ€é…ç½®å¯åŠ¨é¡¹æ¿€æ´» <code>local</code> ç¯å¢ƒï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf797f76153.png" alt=""></p><h4 id="2-1-1-ç™»å½•ä¸šåŠ¡">2.1.1 ç™»å½•ä¸šåŠ¡</h4><p>ç™»å½•ä¸šåŠ¡æµç¨‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf79b1b939d.png" alt=""></p><p>æœåŠ¡ç«¯å…¥å£ä¸º <code>com.hmall.controller.UserController</code> ä¸­çš„ <code>login</code> æ–¹æ³•ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf79cdae134.png" alt=""></p><h4 id="2-1-2-æœç´¢å•†å“">2.1.2 æœç´¢å•†å“</h4><p>åœ¨é¦–é¡µæœç´¢æ¡†è¾“å…¥å…³é”®å­—å¹¶ç‚¹å‡»æœç´¢ï¼Œè¿›å…¥æœç´¢åˆ—è¡¨é¡µé¢ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf79eb1035d.png" alt=""></p><p>è¯¥é¡µé¢è°ƒç”¨æ¥å£ <code>/search/list</code>ï¼ŒæœåŠ¡ç«¯å…¥å£ä¸º <code>com.hmall.controller.SearchController</code> ä¸­çš„ <code>search</code> æ–¹æ³•ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7a8263a39.png" alt="image"></p><h4 id="2-1-3-è´­ç‰©è½¦ä¸šåŠ¡">2.1.3 è´­ç‰©è½¦ä¸šåŠ¡</h4><ul><li><p>åŠ å…¥è´­ç‰©è½¦ï¼šåœ¨å•†å“åˆ—è¡¨ç‚¹å‡» â€œåŠ å…¥è´­ç‰©è½¦â€ æŒ‰é’®ï¼Œå•†å“åŠ å…¥è´­ç‰©è½¦ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7a0e05531.png" alt="image"></p></li><li><p>è´­ç‰©è½¦åˆ—è¡¨é¡µï¼šåŠ å…¥æˆåŠŸåè¿›å…¥è´­ç‰©è½¦åˆ—è¡¨é¡µï¼Œå¯æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤è´­ç‰©è½¦å•†å“ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7aa04b42d.png" alt="image"></p></li></ul><p>ç›¸å…³åŠŸèƒ½å…¥å£ä¸º <code>com.hmall.controller.CartController</code>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7b7170f04.png" alt="image"></p><p>æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨æ—¶ï¼Œéœ€åˆ¤æ–­å•†å“æœ€æ–°ä»·æ ¼å’ŒçŠ¶æ€ï¼Œå› æ­¤è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œä¸šåŠ¡æµç¨‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7b9cb4b99.png" alt="image"></p><h4 id="2-1-4-ä¸‹å•ä¸šåŠ¡">2.1.4 ä¸‹å•ä¸šåŠ¡</h4><ul><li><p>è®¢å•ç»“ç®—é¡µï¼šåœ¨è´­ç‰©è½¦é¡µé¢ç‚¹å‡» â€œç»“ç®—â€ æŒ‰é’®ï¼Œè¿›å…¥è®¢å•ç»“ç®—é¡µé¢ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7bc65a74d.png" alt="image"></p></li><li><p>æäº¤è®¢å•ï¼šç‚¹å‡» â€œæäº¤è®¢å•â€ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œ 3 ä»¶äº‹ï¼š</p><ul><li>åˆ›å»ºæ–°è®¢å•</li><li>æ‰£å‡å•†å“åº“å­˜</li><li>æ¸…ç†è´­ç‰©è½¦å•†å“</li></ul></li></ul><p>ä¸šåŠ¡å…¥å£ä¸º <code>com.hmall.controller.OrderController</code> ä¸­çš„ <code>createOrder</code> æ–¹æ³•ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7bf502d70.png" alt="image"></p><h4 id="2-1-5-æ”¯ä»˜ä¸šåŠ¡">2.1.5 æ”¯ä»˜ä¸šåŠ¡</h4><p>ä¸‹å•åè·³è½¬åˆ°æ”¯ä»˜é¡µé¢ï¼ˆç›®å‰ä»…æ”¯æŒä½™é¢æ”¯ä»˜ï¼‰ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7c2103136.png" alt="image"></p><p>é€‰æ‹© â€œä½™é¢æ”¯ä»˜â€ åï¼ŒæœåŠ¡ç«¯ä¼šåˆ›å»ºæ”¯ä»˜æµæ°´å•å¹¶è¿”å›æµæ°´å•å·ï¼›ç”¨æˆ·è¾“å…¥å¯†ç ç‚¹å‡» â€œç¡®è®¤æ”¯ä»˜â€ æ—¶ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼š</p><ul><li>æ ¡éªŒç”¨æˆ·å¯†ç </li><li>æ‰£å‡ä½™é¢</li><li>ä¿®æ”¹æ”¯ä»˜æµæ°´çŠ¶æ€</li><li>ä¿®æ”¹äº¤æ˜“è®¢å•çŠ¶æ€</li></ul><p>è¯·æ±‚å…¥å£ä¸º <code>com.hmall.controller.PayController</code>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7c6033cb3.png" alt="image"></p><h3 id="2-2-æœåŠ¡æ‹†åˆ†åŸåˆ™">2.2 æœåŠ¡æ‹†åˆ†åŸåˆ™</h3><p>æœåŠ¡æ‹†åˆ†éœ€é‡ç‚¹è€ƒè™‘ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li>ä»€ä¹ˆæ—¶å€™æ‹†ï¼Ÿ</li><li>å¦‚ä½•æ‹†ï¼Ÿ</li></ul><h4 id="2-2-1-ä»€ä¹ˆæ—¶å€™æ‹†">2.2.1 ä»€ä¹ˆæ—¶å€™æ‹†</h4><ul><li><strong>åˆåˆ›é¡¹ç›®</strong>ï¼šä¼˜å…ˆéªŒè¯å¯è¡Œæ€§ï¼Œå»ºè®®é‡‡ç”¨<strong>å•ä½“æ¶æ„</strong>ã€‚åŸå› æ˜¯ï¼š<ul><li>å¼€å‘æˆæœ¬ä½ï¼Œå¯å¿«é€Ÿäº§å‡ºäº§å“æŠ•å…¥å¸‚åœºéªŒè¯</li><li>è‹¥äº§å“ä¸ç¬¦åˆå¸‚åœºéœ€æ±‚ï¼ŒæŸå¤±è¾ƒå°</li><li>ç¼ºç‚¹ï¼šåæœŸæ‹†åˆ†å¯èƒ½é¢ä¸´ä»£ç è€¦åˆé—®é¢˜ï¼ˆå‰æ˜“åéš¾ï¼‰</li></ul></li><li><strong>å¤§å‹é¡¹ç›®</strong>ï¼šç«‹é¡¹æ—¶ç›®æ ‡æ˜ç¡®ï¼Œå»ºè®®ç›´æ¥é‡‡ç”¨<strong>å¾®æœåŠ¡æ¶æ„</strong>ã€‚åŸå› æ˜¯ï¼š<ul><li>é•¿è¿œè€ƒè™‘ï¼Œé¿å…åæœŸæ‹†åˆ†çš„éº»çƒ¦</li><li>ç¼ºç‚¹ï¼šå‰æœŸæŠ•å…¥äººåŠ›å’Œæ—¶é—´æˆæœ¬é«˜ï¼ˆå‰éš¾åæ˜“ï¼‰</li></ul></li></ul><h4 id="2-2-2-æ€ä¹ˆæ‹†">2.2.2 æ€ä¹ˆæ‹†</h4><p>å¾®æœåŠ¡æ‹†åˆ†çš„æ ¸å¿ƒç›®æ ‡æ˜¯<strong>é«˜å†…èšã€ä½è€¦åˆ</strong>ï¼š</p><ul><li><strong>é«˜å†…èš</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡èŒè´£å•ä¸€ï¼Œå†…éƒ¨ä¸šåŠ¡å…³è”åº¦é«˜ã€å®Œæ•´æ€§å¼ºã€‚ä¿®æ”¹ä¸šåŠ¡æ—¶åº”å°½é‡ä»…æ¶‰åŠå½“å‰æœåŠ¡ï¼Œé™ä½å˜æ›´æˆæœ¬ã€‚</li><li><strong>ä½è€¦åˆ</strong>ï¼šæœåŠ¡åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œå‡å°‘å¯¹å…¶ä»–æœåŠ¡çš„ä¾èµ–ï¼›è‹¥æœ‰ä¾èµ–ï¼Œéœ€ä¿è¯æ¥å£ç¨³å®šæ€§ï¼ˆå¤–è§‚ä¸å˜ï¼‰ã€‚ä¾‹å¦‚ï¼šè®¢å•æœåŠ¡éœ€å•†å“æ•°æ®æ—¶ï¼Œåº”è°ƒç”¨å•†å“æœåŠ¡çš„æ¥å£ï¼Œè€Œéç›´æ¥è®¿é—®å•†å“æ•°æ®åº“ï¼Œé¿å…æ•°æ®è€¦åˆã€‚</li></ul><h5 id="æ‹†åˆ†æ–¹å¼">æ‹†åˆ†æ–¹å¼</h5><ol><li><strong>çºµå‘æ‹†åˆ†</strong>ï¼šæŒ‰åŠŸèƒ½æ¨¡å—æ‹†åˆ†ï¼ˆå¦‚é»‘é©¬å•†åŸçš„ç”¨æˆ·ã€è®¢å•ã€è´­ç‰©è½¦ç­‰æ¨¡å—ï¼‰ï¼Œæé«˜æœåŠ¡å†…èšæ€§ã€‚</li><li><strong>æ¨ªå‘æ‹†åˆ†</strong>ï¼šæŠ½å–å„æ¨¡å—çš„å…¬å…±ä¸šåŠ¡ä¸ºé€šç”¨æœåŠ¡ï¼ˆå¦‚æ¶ˆæ¯å‘é€ã€é£æ§ç®¡ç†ï¼‰ï¼Œæé«˜å¤ç”¨æ€§ï¼Œé™ä½è€¦åˆã€‚</li></ol><p>é»‘é©¬å•†åŸæŒ‰çºµå‘æ‹†åˆ†å¯åˆ†ä¸ºï¼š</p><ul><li>ç”¨æˆ·æœåŠ¡</li><li>å•†å“æœåŠ¡</li><li>è®¢å•æœåŠ¡</li><li>è´­ç‰©è½¦æœåŠ¡</li><li>æ”¯ä»˜æœåŠ¡</li></ul><h3 id="2-3-æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡">2.3 æ‹†åˆ†è´­ç‰©è½¦ã€å•†å“æœåŠ¡</h3><p>å¾®æœåŠ¡é¡¹ç›®çš„ä¸¤ç§å·¥ç¨‹ç»“æ„ï¼š</p><ul><li><strong>å®Œå…¨è§£è€¦</strong>ï¼šæ¯ä¸ªæœåŠ¡ç‹¬ç«‹å·¥ç¨‹ï¼ˆå¯è·¨è¯­è¨€ï¼‰ï¼Œè€¦åˆåº¦ä½ä½†ç®¡ç†éº»çƒ¦ã€‚</li><li><strong>Maven èšåˆ</strong>ï¼šçˆ¶å·¥ç¨‹ä¸‹çš„å¤šä¸ª Moduleï¼Œé›†ä¸­ç®¡ç†ï¼ˆé€‚åˆæˆè¯¾ï¼‰ï¼Œä½†ç¼–è¯‘æ—¶é—´è¾ƒé•¿ã€‚</li></ul><p>è¯¾ç¨‹é‡‡ç”¨<strong>Maven èšåˆå·¥ç¨‹</strong>ï¼ŒåŸºäºé»‘é©¬å•†åŸçˆ¶å·¥ç¨‹ <code>hmall</code> æ‹†åˆ†æœåŠ¡ï¼ˆçˆ¶å·¥ç¨‹å·²é¢„è®¾ SpringBootã€SpringCloud ä¾èµ–ç‰ˆæœ¬ï¼‰ã€‚</p><h4 id="2-3-1-å•†å“æœåŠ¡ï¼ˆitem-serviceï¼‰">2.3.1 å•†å“æœåŠ¡ï¼ˆitem-serviceï¼‰</h4><ol><li><p><strong>åˆ›å»º Module</strong>ï¼šåœ¨ <code>hmall</code> çˆ¶å·¥ç¨‹ä¸­åˆ›å»º Maven æ¨¡å—ï¼Œå‘½åä¸º <code>item-service</code>ï¼ŒJDK ç‰ˆæœ¬ä¸º 11ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7deba5c00.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf7dfe5d052.png" alt="image"><img src="https://a1.boltp.com/2025/09/21/68cf7e17a2cdc.png" alt="image"></p></li><li><p><strong>é…ç½®ä¾èµ–ï¼ˆpom.xmlï¼‰</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hmall<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>item-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å…¬å…±æ¨¡å— --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hm-common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- Web --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- æ•°æ®åº“ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- MyBatis-Plus --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å•å…ƒæµ‹è¯• --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™å¯åŠ¨ç±»</strong>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7e50e177a.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.item;<br><br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@MapperScan(&quot;com.hmall.item.mapper&quot;)</span> <span class="hljs-comment">// æ‰«æMapperæ¥å£</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(ItemApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼šä» <code>hm-service</code> æ‹·è´é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ <code>application.yaml</code>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7f2fc673b.png" alt="image"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span> <span class="hljs-comment"># å•†å“æœåŠ¡ç«¯å£</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">item-service</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-item?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">$&#123;hm.db.pw&#125;</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">default-enum-type-handler:</span> <span class="hljs-string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">update-strategy:</span> <span class="hljs-string">not_null</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.hmall:</span> <span class="hljs-string">debug</span><br>  <span class="hljs-attr">pattern:</span><br>    <span class="hljs-attr">dateformat:</span> <span class="hljs-string">HH:mm:ss:SSS</span><br>  <span class="hljs-attr">file:</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span><br><span class="hljs-attr">knife4j:</span> <span class="hljs-comment"># Swaggeræ–‡æ¡£é…ç½®</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">openapi:</span><br>    <span class="hljs-attr">title:</span> <span class="hljs-string">å•†å“æœåŠ¡æ¥å£æ–‡æ¡£</span><br>    <span class="hljs-attr">description:</span> <span class="hljs-string">&quot;å•†å“æœåŠ¡æ¥å£æ–‡æ¡£ä¿¡æ¯&quot;</span><br>    <span class="hljs-attr">email:</span> <span class="hljs-string">zhanghuyi@itcast.cn</span><br>    <span class="hljs-attr">concat:</span> <span class="hljs-string">è™å“¥</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.itcast.cn</span><br>    <span class="hljs-attr">version:</span> <span class="hljs-string">v1.0.0</span><br>    <span class="hljs-attr">group:</span><br>      <span class="hljs-attr">default:</span><br>        <span class="hljs-attr">group-name:</span> <span class="hljs-string">default</span><br>        <span class="hljs-attr">api-rule:</span> <span class="hljs-string">package</span><br>        <span class="hljs-attr">api-rule-resources:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-string">com.hmall.item.controller</span><br></code></pre></td></tr></table></figure><p>ï¼ˆ<code>application-dev.yaml</code> å’Œ <code>application-local.yaml</code> ç›´æ¥æ‹·è´ï¼Œä¿®æ”¹æ•°æ®åº“è¿æ¥å‚æ•°ä¸º Ubuntu è™šæ‹Ÿæœºçš„ IP å’Œå¯†ç ï¼‰</p></li><li><p><strong>æ‹·è´å•†å“ç›¸å…³ä»£ç </strong>ï¼šå°† <code>hm-service</code> ä¸­ä¸å•†å“ç®¡ç†ç›¸å…³çš„ä»£ç ï¼ˆå®ä½“ç±»ã€Controllerã€Serviceã€Mapper ç­‰ï¼‰æ‹·è´åˆ° <code>item-service</code>ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf7fe333cfd.png" alt="image"></p></li><li><p><strong>ä¿®æ”¹ä»£ç ä¾èµ–</strong>ï¼šè°ƒæ•´ <code>ItemServiceImpl</code> ä¸­ <code>deductStock</code> æ–¹æ³•çš„ <code>ItemMapper</code> åŒ…è·¯å¾„ï¼ˆå› åŒ…ç»“æ„å˜åŒ–ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf806278dcd.png" alt="image"></p></li><li><p><strong>å¯¼å…¥æ•°æ®åº“è¡¨</strong>ï¼šåœ¨ Docker çš„ MySQL ä¸­æ‰§è¡Œè¯¾å‰èµ„æ–™æä¾›çš„ SQL æ–‡ä»¶ï¼Œåˆ›å»º <code>hm-item</code> æ•°æ®åº“ï¼ˆæ¯ä¸ªå¾®æœåŠ¡ç‹¬ç«‹æ•°æ®åº“ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8091d4ac8.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf80f3d0be6.png" alt="image"></p></li><li><p><strong>å¯åŠ¨ä¸æµ‹è¯•</strong>ï¼š</p><ul><li><p>é…ç½®å¯åŠ¨é¡¹ï¼Œæ¿€æ´»<code>local</code>ç¯å¢ƒï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf816542aa8.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf81882e36c.png" alt="image"></p></li><li><p>å¯åŠ¨ <code>ItemApplication</code>ï¼Œè®¿é—® Swagger æ–‡æ¡£ï¼š<a href="http://localhost:8081/doc.html">http://localhost:8081/doc.html</a></p></li><li><p>æµ‹è¯• â€œæ ¹æ® id æ‰¹é‡æŸ¥è¯¢å•†å“â€ æ¥å£ï¼Œå‚æ•°ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">100002672302,100002624500,100002533430<br></code></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf820a3d387.png" alt="image"></p></li></ul></li></ol><h4 id="2-3-2-è´­ç‰©è½¦æœåŠ¡ï¼ˆcart-serviceï¼‰">2.3.2 è´­ç‰©è½¦æœåŠ¡ï¼ˆcart-serviceï¼‰</h4><ol><li><p><strong>åˆ›å»º Module</strong>ï¼šåœ¨ <code>hmall</code> çˆ¶å·¥ç¨‹ä¸­åˆ›å»º Maven æ¨¡å—ï¼Œå‘½åä¸º <code>cart-service</code>ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf821c5e9b7.png" alt="image"></p></li><li><p><strong>é…ç½®ä¾èµ–ï¼ˆpom.xmlï¼‰</strong>ï¼šä¸ <code>item-service</code> ç±»ä¼¼ï¼Œä»…æ¨¡å—åä¸º <code>cart-service</code>ã€‚</p></li><li><p><strong>ç¼–å†™å¯åŠ¨ç±»</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.cart;<br><br><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@MapperScan(&quot;com.hmall.cart.mapper&quot;)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CartApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(CartApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼šæ‹·è´ <code>item-service</code> çš„é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹ <code>application.yaml</code>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span> <span class="hljs-comment"># è´­ç‰©è½¦æœåŠ¡ç«¯å£</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">cart-service</span> <span class="hljs-comment"># æœåŠ¡åç§°</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://$&#123;hm.db.host&#125;:3306/hm-cart?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br><span class="hljs-comment"># å…¶ä»–é…ç½®åŸºæœ¬ä¸item-serviceä¸€è‡´ï¼Œåªéœ€è¦æŠŠitemæ”¹æˆcartå³å¯ï¼Œç•¥...</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ‹·è´è´­ç‰©è½¦ç›¸å…³ä»£ç </strong>ï¼šå°† <code>hm-service</code> ä¸­ä¸è´­ç‰©è½¦ç›¸å…³çš„ä»£ç æ‹·è´åˆ° <code>cart-service</code>ï¼Œæœ€ç»ˆç»“æ„ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf82a040d69.png" alt="image"></p></li><li><p><strong>ä¿®æ”¹ä»£ç </strong>ï¼šåœ¨ <code>CartServiceImpl</code> ä¸­å¤„ç†ä¾èµ–é—®é¢˜ï¼š</p><ul><li>æš‚æ—¶å†™æ­»ç”¨æˆ· IDï¼ˆå› ç™»å½•åŠŸèƒ½æœªæ‹†åˆ†ï¼Œå¯ä»¥å†™æˆ1Lï¼‰</li><li>æ³¨é‡ŠæŸ¥è¯¢å•†å“ä¿¡æ¯çš„ä»£ç ï¼ˆéœ€è°ƒç”¨å•†å“æœåŠ¡ï¼Œå¾…åç»­è§£å†³ï¼Œæš‚æ—¶å…ˆæŠŠ<code>handleCartItems</code>å‡½æ•°å†…å®¹æ³¨é‡Šæ‰ï¼‰</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf82c3b32e7.png" alt="image"></p></li><li><p><strong>å¯¼å…¥æ•°æ®åº“è¡¨</strong>ï¼šæ‰§è¡Œè¯¾å‰èµ„æ–™çš„ SQL æ–‡ä»¶ï¼Œåˆ›å»º <code>hm-cart</code> æ•°æ®åº“åŠ <code>cart</code> è¡¨ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf83398aafb.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf8351574a8.png" alt="image"></p></li><li><p><strong>å¯åŠ¨ä¸æµ‹è¯•</strong>ï¼š</p><ul><li><p>é…ç½®å¯åŠ¨é¡¹æ¿€æ´»<code>local</code>ç¯å¢ƒï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8380bc9bf.png" alt="image"></p></li><li><p>å¯åŠ¨ <code>CartApplication</code>ï¼Œè®¿é—® Swagger æ–‡æ¡£ï¼š<code>http://localhost:8082/doc.html</code></p></li><li><p>æµ‹è¯• â€œæŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨â€ æ¥å£ï¼Œç»“æœä¸­å•†å“ç›¸å…³å­—æ®µä¸ºç©ºï¼ˆå› ä»£ç æ³¨é‡Šï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf839c4c62f.png" alt="image"></p></li></ul></li></ol><h4 id="é—®é¢˜ï¼šå¦‚ä½•åœ¨-cart-service-ä¸­æŸ¥è¯¢-item-service-çš„å•†å“ä¿¡æ¯ï¼Ÿ">é—®é¢˜ï¼šå¦‚ä½•åœ¨ cart-service ä¸­æŸ¥è¯¢ item-service çš„å•†å“ä¿¡æ¯ï¼Ÿ</h4><p>å½“å‰è´­ç‰©è½¦æœåŠ¡æŸ¥è¯¢å•†å“ä¿¡æ¯çš„ä»£ç è¢«æ³¨é‡Šï¼Œéœ€è§£å†³<strong>æœåŠ¡é—´é€šä¿¡</strong>é—®é¢˜ï¼Œåç»­å°†ä»‹ç»å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨æ–¹æ¡ˆã€‚</p><h3 id="2-4-æœåŠ¡è°ƒç”¨">2.4 æœåŠ¡è°ƒç”¨</h3><p>åœ¨æ‹†åˆ†è´­ç‰©è½¦æœåŠ¡æ—¶ï¼Œå‘ç°<strong>è´­ç‰©è½¦æŸ¥è¯¢éœ€ä¾èµ–å•†å“æœåŠ¡çš„å•†å“ä¿¡æ¯</strong>ï¼Œä½†å•†å“é€»è¾‘å·²è¿ç§»è‡³ <code>item-service</code>ï¼Œå¯¼è‡´è´­ç‰©è½¦æ•°æ®ä¸å®Œæ•´ã€‚å› æ­¤éœ€å°†<strong>æœ¬åœ°æ–¹æ³•è°ƒç”¨</strong>æ”¹é€ ä¸º<strong>è·¨å¾®æœåŠ¡çš„è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼ŒRemote Procedure Callï¼‰</strong>ã€‚</p><h4 id="2-4-1-è¿œç¨‹è°ƒç”¨æµç¨‹">2.4.1 è¿œç¨‹è°ƒç”¨æµç¨‹</h4><p>è´­ç‰©è½¦æŸ¥è¯¢å•†å“çš„æµç¨‹å˜ä¸ºï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8bbdc52a9.png" alt="image"></p><p>ä»£ç ä¸­éœ€æ”¹é€ çš„æ ¸å¿ƒæ­¥éª¤ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8c7d3dc4a.png" alt="image"></p><h4 id="2-4-2-å¦‚ä½•å®ç°è·¨æœåŠ¡-HTTP-è°ƒç”¨ï¼Ÿ">2.4.2 å¦‚ä½•å®ç°è·¨æœåŠ¡ HTTP è°ƒç”¨ï¼Ÿ</h4><p>å‰ç«¯é€šè¿‡æµè§ˆå™¨å‘é€ HTTP è¯·æ±‚å¯å®ç° â€œè¿œç¨‹æŸ¥è¯¢æœåŠ¡ç«¯æ•°æ®â€ï¼ˆå¦‚ Swagger æµ‹è¯•å•†å“æ¥å£ <code>http://localhost:8081/items</code>ï¼‰ã€‚åŒç†ï¼Œè‹¥åœ¨ <code>cart-service</code> ä¸­æ¨¡æ‹Ÿ â€œæµè§ˆå™¨å‘é€ HTTP è¯·æ±‚â€ï¼Œå³å¯è°ƒç”¨ <code>item-service</code> çš„æ¥å£ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8cae591c5.png" alt="image"></p><h5 id="2-4-2-1-RestTemplateï¼ˆSpring-HTTP-è¯·æ±‚å·¥å…·ï¼‰">2.4.2.1 RestTemplateï¼ˆSpring HTTP è¯·æ±‚å·¥å…·ï¼‰</h5><p>Spring æä¾› <code>RestTemplate</code> ç®€åŒ– HTTP è¯·æ±‚å‘é€ï¼Œæ”¯æŒ GETã€POSTã€PUTã€DELETE ç­‰å¤šç§è¯·æ±‚ç±»å‹ã€‚</p><p><strong><code>RestTemplate</code> è¯´æ˜</strong>ï¼š</p><blockquote><p>åŒæ­¥ HTTP å®¢æˆ·ç«¯ï¼ŒåŸºäºåº•å±‚ HTTP åº“ï¼ˆå¦‚ JDK <code>HttpURLConnection</code>ã€Apache HttpComponents ç­‰ï¼‰å°è£…æ¨¡æ¿æ–¹æ³•ã€‚æ”¯æŒå¸¸è§ HTTP åœºæ™¯ï¼Œä¸”å¯é…ç½®ä¸ºå…±äº«ç»„ä»¶ï¼ˆå¯åŠ¨æ—¶åˆå§‹åŒ–ï¼Œé¿å…å¹¶å‘ä¿®æ”¹ï¼‰ã€‚</p></blockquote><p><img src="https://a1.boltp.com/2025/09/21/68cf8ce47030f.png" alt="image"></p><h5 id="2-4-2-2-æ³¨å†Œ-RestTemplate-ä¸º-Spring-Bean">2.4.2.2 æ³¨å†Œ RestTemplate ä¸º Spring Bean</h5><p>åœ¨ <code>cart-service</code> ä¸­åˆ›å»ºé…ç½®ç±»ï¼Œå°† <code>RestTemplate</code> æ³¨å†Œåˆ° Spring å®¹å™¨ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8d0e72929.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.cart.config;<br><br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.client.RestTemplate;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteCallConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RestTemplate <span class="hljs-title function_">restTemplate</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestTemplate</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-4-3-è¿œç¨‹è°ƒç”¨å®æˆ˜ï¼ˆè´­ç‰©è½¦è°ƒç”¨å•†å“æœåŠ¡ï¼‰">2.4.3 è¿œç¨‹è°ƒç”¨å®æˆ˜ï¼ˆè´­ç‰©è½¦è°ƒç”¨å•†å“æœåŠ¡ï¼‰</h4><p>ä¿®æ”¹ <code>cart-service</code> ä¸­ <code>CartServiceImpl</code> çš„ <code>handleCartItems</code> æ–¹æ³•ï¼Œé€šè¿‡ <code>RestTemplate</code> å‘é€ HTTP è¯·æ±‚åˆ° <code>item-service</code>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8d6b41153.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleCartItems</span><span class="hljs-params">(List&lt;CartVO&gt; vos)</span> &#123;<br>    <span class="hljs-comment">// 1. è·å–å•†å“IDé›†åˆ</span><br>    Set&lt;Long&gt; itemIds = vos.stream().map(CartVO::getItemId).collect(Collectors.toSet());<br>    <br>    <span class="hljs-comment">// 2. å‘é€HTTP GETè¯·æ±‚åˆ°item-serviceçš„å•†å“æŸ¥è¯¢æ¥å£</span><br>    ResponseEntity&lt;List&lt;ItemDTO&gt;&gt; response = restTemplate.exchange(<br>            <span class="hljs-string">&quot;http://localhost:8081/items?ids=&#123;ids&#125;&quot;</span>, <span class="hljs-comment">// è¯·æ±‚è·¯å¾„ï¼ˆå¸¦è·¯å¾„å‚æ•°ï¼‰</span><br>            HttpMethod.GET,                         <span class="hljs-comment">// è¯·æ±‚æ–¹æ³•</span><br>            <span class="hljs-literal">null</span>,                                   <span class="hljs-comment">// è¯·æ±‚ä½“ï¼ˆGETæ— è¯·æ±‚ä½“ï¼‰</span><br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParameterizedTypeReference</span>&lt;List&lt;ItemDTO&gt;&gt;() &#123;&#125;, <span class="hljs-comment">// å“åº”ç±»å‹ï¼ˆæ³›å‹åˆ—è¡¨ï¼‰</span><br>            Map.of(<span class="hljs-string">&quot;ids&quot;</span>, CollUtil.join(itemIds, <span class="hljs-string">&quot;,&quot;</span>)) <span class="hljs-comment">// è·¯å¾„å‚æ•°ï¼ˆå•†å“IDæ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ï¼‰</span><br>    );<br>    <br>    <span class="hljs-comment">// 3. è§£æå“åº”</span><br>    <span class="hljs-keyword">if</span> (!response.getStatusCode().is2xxSuccessful()) &#123;<br>        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// è¯·æ±‚å¤±è´¥ï¼Œç›´æ¥è¿”å›</span><br>    &#125;<br>    List&lt;ItemDTO&gt; items = response.getBody();<br>    <span class="hljs-keyword">if</span> (CollUtils.isEmpty(items)) &#123;<br>        <span class="hljs-keyword">return</span>; <span class="hljs-comment">// å•†å“åˆ—è¡¨ä¸ºç©ºï¼Œç›´æ¥è¿”å›</span><br>    &#125;<br>    <br>    <span class="hljs-comment">// 4. è½¬æ¢ä¸ºâ€œå•†å“ID -&gt; å•†å“DTOâ€çš„Mapï¼Œæ–¹ä¾¿åç»­å¡«å……è´­ç‰©è½¦VO</span><br>    Map&lt;Long, ItemDTO&gt; itemMap = items.stream()<br>            .collect(Collectors.toMap(ItemDTO::getId, Function.identity()));<br>    <br>    <span class="hljs-comment">// 5. å¡«å……è´­ç‰©è½¦VOçš„å•†å“ä¿¡æ¯</span><br>    <span class="hljs-keyword">for</span> (CartVO v : vos) &#123;<br>        <span class="hljs-type">ItemDTO</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> itemMap.get(v.getItemId());<br>        <span class="hljs-keyword">if</span> (item != <span class="hljs-literal">null</span>) &#123;<br>            v.setNewPrice(item.getPrice());<br>            v.setStatus(item.getStatus());<br>            v.setStock(item.getStock());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-4-4-æµ‹è¯•è¿œç¨‹è°ƒç”¨">2.4.4 æµ‹è¯•è¿œç¨‹è°ƒç”¨</h4><p>é‡å¯ <code>cart-service</code>ï¼Œå†æ¬¡æµ‹è¯• â€œæŸ¥è¯¢æˆ‘çš„è´­ç‰©è½¦åˆ—è¡¨â€ æ¥å£ï¼Œå•†å“ç›¸å…³æ•°æ®ï¼ˆä»·æ ¼ã€åº“å­˜ã€çŠ¶æ€ç­‰ï¼‰å¯æ­£å¸¸è¿”å›ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8d832aca6.png" alt="image"></p><h3 id="2-5-æ€»ç»“">2.5 æ€»ç»“</h3><h4 id="å¾®æœåŠ¡æ‹†åˆ†æ—¶æœº">å¾®æœåŠ¡æ‹†åˆ†æ—¶æœº</h4><ul><li><strong>åˆ›ä¸šå‹å…¬å¸</strong>ï¼šå…ˆä»¥<strong>å•ä½“æ¶æ„</strong>å¿«é€Ÿè¿­ä»£ï¼ŒéªŒè¯å¸‚åœºæ¨¡å‹ï¼›ä¸šåŠ¡è·‘é€šåï¼Œå†éšè§„æ¨¡æ‰©å¤§æ‹†åˆ†å¾®æœåŠ¡ï¼ˆå‰æ˜“åéš¾ï¼‰ã€‚</li><li><strong>å¤§å‹ä¼ä¸š</strong>ï¼šé¡¹ç›®åˆæœŸç›´æ¥æ­å»º<strong>å¾®æœåŠ¡æ¶æ„</strong>ï¼ˆèµ„æºå……è¶³ï¼Œå‰éš¾åæ˜“ï¼‰ã€‚</li></ul><h4 id="å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™">å¾®æœåŠ¡æ‹†åˆ†åŸåˆ™</h4><ul><li>æ ¸å¿ƒç›®æ ‡ï¼š<strong>é«˜å†…èšã€ä½è€¦åˆ</strong>ã€‚</li><li>æ‹†åˆ†æ–¹å¼ï¼š<ul><li><strong>çºµå‘æ‹†åˆ†</strong>ï¼šæŒ‰ä¸šåŠ¡åŠŸèƒ½æ¨¡å—æ‹†åˆ†ï¼ˆå¦‚ç”¨æˆ·ã€è®¢å•ã€å•†å“ï¼‰ã€‚</li><li><strong>æ¨ªå‘æ‹†åˆ†</strong>ï¼šæŠ½å–é€šç”¨ä¸šåŠ¡ä¸ºç‹¬ç«‹æœåŠ¡ï¼ˆå¦‚æ¶ˆæ¯ã€é£æ§ï¼‰ï¼Œæé«˜å¤ç”¨æ€§ã€‚</li></ul></li></ul><h4 id="å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼‰">å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼‰</h4><p>å¾®æœåŠ¡é—´è¿œç¨‹è°ƒç”¨ç§°ä¸º RPCï¼Œå¸¸è§å®ç°æ–¹å¼ï¼š</p><ul><li><strong>åŸºäº HTTP åè®®</strong>ï¼šä¸å…³å¿ƒæœåŠ¡æä¾›è€…æŠ€æœ¯ï¼Œä»…ä¾èµ– HTTP æ¥å£ï¼Œç¬¦åˆå¾®æœåŠ¡è§£è€¦éœ€æ±‚ã€‚</li><li><strong>åŸºäº Dubbo åè®®</strong>ï¼šé«˜æ€§èƒ½äºŒè¿›åˆ¶åè®®ï¼Œéœ€æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…éµå¾ª Dubbo è§„èŒƒã€‚</li></ul><p>è¯¾ç¨‹é‡‡ç”¨ <strong>HTTP æ–¹å¼</strong>ï¼Œé€šè¿‡ Spring <code>RestTemplate</code> å®ç°ï¼š</p><ol><li>æ³¨å†Œ <code>RestTemplate</code> åˆ° Spring å®¹å™¨ã€‚</li><li>è°ƒç”¨ <code>RestTemplate</code> æ–¹æ³•å‘é€è¯·æ±‚ï¼ˆå¦‚ <code>getForObject</code>ã€<code>postForObject</code>ã€<code>exchange</code> ç­‰ï¼‰ã€‚</li></ol><h1>3. æœåŠ¡æ³¨å†Œå’Œå‘ç°</h1><p>ä¸Šä¸€ç« å®ç°äº†å¾®æœåŠ¡æ‹†åˆ†åŠè·¨æœåŠ¡è¿œç¨‹è°ƒç”¨ï¼Œä½†æ‰‹åŠ¨å‘é€ HTTP è¯·æ±‚çš„æ–¹å¼å­˜åœ¨é—®é¢˜ã€‚å½“å•†å“æœåŠ¡ï¼ˆ<code>item-service</code>ï¼‰å¤šå®ä¾‹éƒ¨ç½²æ—¶ï¼Œä¼šé¢ä¸´<strong>åœ°å€ç®¡ç†ã€è°ƒç”¨é€‰æ‹©ã€æ•…éšœå¤„ç†ã€åŠ¨æ€æ‰©å±•</strong>ç­‰æŒ‘æˆ˜ã€‚</p><p>è¯•æƒ³ä¸€ä¸‹ï¼Œå‡å¦‚å•†å“å¾®æœåŠ¡è¢«è°ƒç”¨è¾ƒå¤šï¼Œä¸ºäº†åº”å¯¹æ›´é«˜çš„å¹¶å‘ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å¤šå®ä¾‹éƒ¨ç½²ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf8f83f1ca3.png" alt="image"></p><p>æ­¤æ—¶ï¼Œæ¯ä¸ª<code>item-service</code>çš„å®ä¾‹å…¶IPæˆ–ç«¯å£ä¸åŒï¼Œé—®é¢˜æ¥äº†ï¼š</p><ul><li>item-serviceè¿™ä¹ˆå¤šå®ä¾‹ï¼Œcart-serviceå¦‚ä½•çŸ¥é“æ¯ä¸€ä¸ªå®ä¾‹çš„åœ°å€ï¼Ÿ</li><li>httpè¯·æ±‚è¦å†™urlåœ°å€ï¼Œ<code>cart-service</code>æœåŠ¡åˆ°åº•è¯¥è°ƒç”¨å“ªä¸ªå®ä¾‹å‘¢ï¼Ÿ</li><li>å¦‚æœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒæŸä¸€ä¸ª<code>item-service</code>å®ä¾‹å®•æœºï¼Œ<code>cart-service</code>ä¾ç„¶åœ¨è°ƒç”¨è¯¥æ€ä¹ˆåŠï¼Ÿ</li><li>å¦‚æœå¹¶å‘å¤ªé«˜ï¼Œ<code>item-service</code>ä¸´æ—¶å¤šéƒ¨ç½²äº†Nå°å®ä¾‹ï¼Œ<code>cart-service</code>å¦‚ä½•çŸ¥é“æ–°å®ä¾‹çš„åœ°å€ï¼Ÿ</li></ul><p>ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼Œéœ€å¼•å…¥<strong>æ³¨å†Œä¸­å¿ƒ</strong>ã€‚</p><h3 id="3-1-æ³¨å†Œä¸­å¿ƒåŸç†">3.1 æ³¨å†Œä¸­å¿ƒåŸç†</h3><p>å¾®æœåŠ¡è¿œç¨‹è°ƒç”¨æ¶‰åŠä¸¤ä¸ªè§’è‰²ï¼š</p><ul><li><strong>æœåŠ¡æä¾›è€…</strong>ï¼šæä¾›æ¥å£ä¾›å…¶ä»–æœåŠ¡è®¿é—®ï¼ˆå¦‚ <code>item-service</code>ï¼‰ã€‚</li><li><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼šè°ƒç”¨å…¶ä»–æœåŠ¡çš„æ¥å£ï¼ˆå¦‚ <code>cart-service</code>ï¼‰ã€‚</li></ul><p>æ³¨å†Œä¸­å¿ƒæ˜¯ç®¡ç†æœåŠ¡åœ°å€çš„æ ¸å¿ƒç»„ä»¶ï¼Œä¸‰è€…å…³ç³»å¦‚ä¸‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf900b4b6fb.png" alt="image"></p><p><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼š</p><ol><li><strong>æœåŠ¡æ³¨å†Œ</strong>ï¼šæœåŠ¡å¯åŠ¨æ—¶ï¼Œå°†è‡ªèº«ä¿¡æ¯ï¼ˆæœåŠ¡åã€IPã€ç«¯å£ï¼‰æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒã€‚</li><li><strong>æœåŠ¡è®¢é˜…</strong>ï¼šæ¶ˆè´¹è€…ä»æ³¨å†Œä¸­å¿ƒè·å–ç›®æ ‡æœåŠ¡çš„å®ä¾‹åˆ—è¡¨ã€‚</li><li><strong>è´Ÿè½½å‡è¡¡</strong>ï¼šæ¶ˆè´¹è€…ä»å®ä¾‹åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªå®ä¾‹å‘èµ·è°ƒç”¨ã€‚</li><li><strong>åŠ¨æ€æ›´æ–°ï¼š</strong><ul><li>æœåŠ¡æä¾›è€…å®šæœŸå‘é€<strong>å¿ƒè·³</strong>åˆ°æ³¨å†Œä¸­å¿ƒï¼ŒæŠ¥å‘Šå¥åº·çŠ¶æ€ã€‚</li><li>æ³¨å†Œä¸­å¿ƒè‹¥é•¿æ—¶é—´æœªæ”¶åˆ°å¿ƒè·³ï¼Œå°†å‰”é™¤è¯¥å®ä¾‹ã€‚</li><li>æ–°å®ä¾‹å¯åŠ¨æ—¶è‡ªåŠ¨æ³¨å†Œï¼Œæ³¨å†Œä¸­å¿ƒä¼šå°†å˜æ›´é€šçŸ¥æ¶ˆè´¹è€…ï¼Œæ›´æ–°å…¶æœ¬åœ°å®ä¾‹åˆ—è¡¨ã€‚</li></ul></li></ol><h3 id="3-2-Nacos-æ³¨å†Œä¸­å¿ƒ">3.2 Nacos æ³¨å†Œä¸­å¿ƒ</h3><p>å›½å†…å¸¸ç”¨çš„æ³¨å†Œä¸­å¿ƒæ¡†æ¶æœ‰ Eurekaã€Nacosã€Consul ç­‰ã€‚è¯¾ç¨‹é€‰æ‹©<strong>Nacos</strong>ï¼ˆAlibaba å‡ºå“ï¼‰ï¼ŒåŸå› æ˜¯ä¸­æ–‡æ–‡æ¡£ä¸°å¯Œï¼Œä¸”å…¼å…·é…ç½®ç®¡ç†åŠŸèƒ½ã€‚</p><p>Nacos å®˜ç½‘ï¼š<a href="https://nacos.io/">https://nacos.io/</a></p><h4 id="3-2-1-éƒ¨ç½²-Nacosï¼ˆåŸºäº-Dockerï¼‰">3.2.1 éƒ¨ç½² Nacosï¼ˆåŸºäº Dockerï¼‰</h4><ol><li><p><strong>å‡†å¤‡ MySQL æ•°æ®åº“</strong>ï¼š</p><ul><li>å°†è¯¾å‰èµ„æ–™ä¸­çš„ Nacos åˆå§‹åŒ– SQL æ–‡ä»¶å¯¼å…¥ Docker çš„ MySQL å®¹å™¨ã€‚</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf91e89e3d9.png" alt="image"></p><ul><li>æœ€ç»ˆç”Ÿæˆçš„è¡¨ç»“æ„ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf921ad4f3c.png" alt="image"></p></li><li><p><strong>é…ç½® Nacos ç¯å¢ƒå˜é‡</strong>ï¼š</p><ul><li>æ‰¾åˆ°è¯¾å‰èµ„æ–™çš„<code>nacos</code>æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹<code>nacos/custom.env</code>ä¸­çš„ MySQL åœ°å€ä¸ºè™šæ‹Ÿæœº IPï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf926d0972e.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf927eec7f0.png" alt="image"></p></li><li><p><strong>ä¸Šä¼ å¹¶éƒ¨ç½² Nacos</strong>ï¼š</p><ul><li><p>å°† <code>nacos</code> ç›®å½•ä¸Šä¼ è‡³ Ubuntu è™šæ‹Ÿæœºçš„ <code>/root</code> ç›®å½•ã€‚</p></li><li><p>æ‰§è¡Œ Docker å‘½ä»¤å¯åŠ¨ Nacosï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \<br>--name nacos \<br>--env-file ./nacos/custom.env \<br>-p 8848:8848 \<br>-p 9848:9848 \<br>-p 9849:9849 \<br>--restart=always \<br>nacos/nacos-server:v2.1.0-slim<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>è®¿é—® Nacos æ§åˆ¶å°</strong>ï¼š</p><ul><li>åœ°å€ï¼š<code>http://è™šæ‹ŸæœºIP:8848/nacos/</code>ï¼ˆæ›¿æ¢ä¸ºå®é™… IPï¼‰ã€‚</li><li>ç™»å½•è´¦å·å¯†ç å‡ä¸º<code>nacos</code>ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf92d5637e4.png" alt="image"></p></li></ol><h3 id="3-3-æœåŠ¡æ³¨å†Œï¼ˆä»¥item-serviceä¸ºä¾‹ï¼‰">3.3 æœåŠ¡æ³¨å†Œï¼ˆä»¥<code>item-service</code>ä¸ºä¾‹ï¼‰</h3><p>å°†æœåŠ¡æ³¨å†Œåˆ° Nacos çš„æ­¥éª¤ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>é‡å¯</li></ul><h4 id="3-3-1-å¼•å…¥ä¾èµ–">3.3.1 å¼•å…¥ä¾èµ–</h4><p>åœ¨ <code>item-service</code> çš„ <code>pom.xml</code> ä¸­æ·»åŠ  Nacos æ³¨å†Œä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- NacosæœåŠ¡æ³¨å†Œå‘ç° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="3-3-2-é…ç½®-Nacos-åœ°å€">3.3.2 é…ç½® Nacos åœ°å€</h4><p>åœ¨ <code>item-service</code> çš„ <code>application.yaml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">item-service</span> <span class="hljs-comment"># æœåŠ¡åç§°ï¼ˆå¿…é¡»å”¯ä¸€ï¼Œç”¨äºæœåŠ¡å‘ç°ï¼‰</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># Nacosåœ°å€ï¼ˆæ›¿æ¢ä¸ºå®é™…è™šæ‹ŸæœºIPï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="3-3-3-å¯åŠ¨å¤šå®ä¾‹å¹¶éªŒè¯">3.3.3 å¯åŠ¨å¤šå®ä¾‹å¹¶éªŒè¯</h4><ol><li><p><strong>é…ç½®å¤šå®ä¾‹</strong>ï¼š</p><ul><li><p>ä¸º<code>item-service</code>æ–°å¢å¯åŠ¨é¡¹ï¼Œä¿®æ”¹ç«¯å£ï¼ˆå¦‚ 8083ï¼‰é¿å…å†²çªï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf932e312ca.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cf932e9ce3f.png" alt="image"></p></li></ul></li><li><p><strong>å¯åŠ¨å®ä¾‹</strong>ï¼š</p><ul><li>å¯åŠ¨ä¸¤ä¸ª <code>item-service</code> å®ä¾‹ï¼ˆç«¯å£ 8081 å’Œ 8083ï¼‰ã€‚</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf934861540.png" alt="image"></p></li><li><p><strong>éªŒè¯æ³¨å†Œç»“æœ</strong>ï¼š</p><ul><li>ç™»å½• Nacos æ§åˆ¶å°ï¼Œåœ¨ â€œæœåŠ¡åˆ—è¡¨â€ ä¸­æŸ¥çœ‹<code>item-service</code>ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf93746f4a1.png" alt="image"></p><ul><li>ç‚¹å‡» â€œè¯¦æƒ…â€ å¯æŸ¥çœ‹ä¸¤ä¸ªå®ä¾‹çš„ IP å’Œç«¯å£ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf9384d4ea4.png" alt="image"></p></li></ol><h3 id="3-4-æœåŠ¡å‘ç°ï¼ˆä»¥cart-serviceä¸ºä¾‹ï¼‰">3.4 æœåŠ¡å‘ç°ï¼ˆä»¥<code>cart-service</code>ä¸ºä¾‹ï¼‰</h3><p>æœåŠ¡æ¶ˆè´¹è€…é€šè¿‡ Nacos è·å–æœåŠ¡å®ä¾‹åˆ—è¡¨å¹¶è°ƒç”¨çš„æ­¥éª¤ï¼š</p><ul><li>å¼•å…¥ä¾èµ–</li><li>é…ç½®Nacosåœ°å€</li><li>å‘ç°å¹¶è°ƒç”¨æœåŠ¡</li></ul><h4 id="3-4-1-å¼•å…¥ä¾èµ–">3.4.1 å¼•å…¥ä¾èµ–</h4><p>åœ¨ <code>cart-service</code> çš„ <code>pom.xml</code> ä¸­æ·»åŠ ä¾èµ–ï¼ˆåŒ…å«æœåŠ¡æ³¨å†Œå’Œå‘ç°åŠŸèƒ½ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- NacosæœåŠ¡æ³¨å†Œå‘ç° --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- SpringCloudè´Ÿè½½å‡è¡¡ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ï¼ˆæ³¨ï¼šè´Ÿè½½å‡è¡¡ä¾èµ–ç”¨äºä»å¤šå®ä¾‹ä¸­é€‰æ‹©ä¸€ä¸ªè¿›è¡Œè°ƒç”¨ï¼‰</p><h4 id="3-4-2-é…ç½®-Nacos-åœ°å€">3.4.2 é…ç½® Nacos åœ°å€</h4><p>åœ¨ <code>cart-service</code> çš„ <code>application.yaml</code> ä¸­æ·»åŠ é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># Nacosåœ°å€ï¼ˆæ›¿æ¢ä¸ºå®é™…è™šæ‹ŸæœºIPï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="3-4-3-å‘ç°å¹¶è°ƒç”¨æœåŠ¡">3.4.3 å‘ç°å¹¶è°ƒç”¨æœåŠ¡</h4><ol><li><p><strong>æ³¨å…¥<code>DiscoveryClient</code></strong>ï¼šSpringCloud è‡ªåŠ¨è£…é…çš„ <code>DiscoveryClient</code> å¯ç”¨äºè·å–æœåŠ¡å®ä¾‹åˆ—è¡¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DiscoveryClient discoveryClient;<br></code></pre></td></tr></table></figure><p><img src="https://a1.boltp.com/2025/09/21/68cf942ec7108.png" alt="image"></p></li><li><p><strong>ä¿®æ”¹è¿œç¨‹è°ƒç”¨é€»è¾‘</strong>ï¼šä» Nacos è·å– <code>item-service</code> çš„å®ä¾‹åˆ—è¡¨ï¼Œé€šè¿‡è´Ÿè½½å‡è¡¡ï¼ˆå¦‚éšæœºç®—æ³•ï¼‰é€‰æ‹©ä¸€ä¸ªå®ä¾‹è°ƒç”¨ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf94759d47b.png" alt="image"></p></li><li><p><strong>æµ‹è¯•éªŒè¯</strong>ï¼šå¯åŠ¨ <code>cart-service</code>ï¼Œé€šè¿‡ Swagger æµ‹è¯•è´­ç‰©è½¦æŸ¥è¯¢æ¥å£ï¼Œå¯æ­£å¸¸è·å–å•†å“æ•°æ®ï¼Œä¸”è°ƒç”¨ä¼šéšæœºåˆ†é…åˆ° <code>item-service</code> çš„ä¸¤ä¸ªå®ä¾‹ã€‚</p></li></ol><h3 id="æ€»ç»“">æ€»ç»“</h3><ul><li><strong>æ³¨å†Œä¸­å¿ƒä½œç”¨</strong>ï¼šè§£å†³æœåŠ¡åœ°å€ç®¡ç†ã€åŠ¨æ€æ‰©ç¼©å®¹ã€æ•…éšœè‡ªåŠ¨å‰”é™¤ç­‰é—®é¢˜ã€‚</li><li><strong>Nacos ä¼˜åŠ¿</strong>ï¼šä¸­æ–‡æ”¯æŒå¥½ï¼Œå…¼å…·æœåŠ¡æ³¨å†Œå‘ç°å’Œé…ç½®ç®¡ç†åŠŸèƒ½ã€‚</li><li><strong>æ ¸å¿ƒæµç¨‹</strong>ï¼šæœåŠ¡æ³¨å†Œï¼ˆå¯åŠ¨æ—¶ä¸ŠæŠ¥åœ°å€ï¼‰â†’ æœåŠ¡å‘ç°ï¼ˆæ¶ˆè´¹è€…è®¢é˜…å®ä¾‹åˆ—è¡¨ï¼‰â†’ è´Ÿè½½å‡è¡¡ï¼ˆé€‰æ‹©å®ä¾‹è°ƒç”¨ï¼‰â†’ åŠ¨æ€æ›´æ–°ï¼ˆåŸºäºå¿ƒè·³å’Œé€šçŸ¥ï¼‰ã€‚</li></ul><h1>4. OpenFeign</h1><p>ä¸Šä¸€ç« é€šè¿‡ Nacos å®ç°æœåŠ¡æ²»ç†ï¼Œç”¨<code>RestTemplate</code>å®ç°è¿œç¨‹è°ƒç”¨ï¼Œä½†å­˜åœ¨<strong>ä»£ç å¤æ‚ã€è°ƒç”¨ä½“éªŒä¸ç»Ÿä¸€</strong>çš„é—®é¢˜ï¼ˆéœ€æ‰‹åŠ¨å¤„ç†æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ã€HTTP è¯·æ±‚æ„å»ºï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf9562b4a8a.png" alt="image"></p><p>OpenFeign å¯é€šè¿‡<strong>å£°æ˜å¼æ³¨è§£</strong>ç®€åŒ–è¿œç¨‹è°ƒç”¨ï¼Œè®©å…¶åƒæœ¬åœ°æ–¹æ³•è°ƒç”¨ä¸€æ ·ä¾¿æ·ã€‚</p><h2 id="4-1-å¿«é€Ÿå…¥é—¨">4.1 å¿«é€Ÿå…¥é—¨</h2><p>ä»¥<code>cart-service</code>è°ƒç”¨<code>item-service</code>çš„å•†å“æŸ¥è¯¢æ¥å£ä¸ºä¾‹ï¼Œæ¼”ç¤º OpenFeign çš„ä½¿ç”¨ã€‚</p><h3 id="4-1-1-å¼•å…¥ä¾èµ–">4.1.1 å¼•å…¥ä¾èµ–</h3><p>åœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ  OpenFeign åŠè´Ÿè½½å‡è¡¡ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- OpenFeign æ ¸å¿ƒä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- è´Ÿè½½å‡è¡¡ä¾èµ–ï¼ˆOpenFeignè°ƒç”¨éœ€é…åˆè´Ÿè½½å‡è¡¡ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-1-2-å¯ç”¨-OpenFeign">4.1.2 å¯ç”¨ OpenFeign</h3><p>åœ¨<code>cart-service</code>çš„å¯åŠ¨ç±»<code>CartApplication</code>ä¸Šæ·»åŠ <code>@EnableFeignClients</code>æ³¨è§£ï¼Œå¼€å¯ OpenFeign åŠŸèƒ½ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf959f33fa2.png" alt="image"></p><h3 id="4-1-3-ç¼–å†™-Feign-å®¢æˆ·ç«¯">4.1.3 ç¼–å†™ Feign å®¢æˆ·ç«¯</h3><p>å®šä¹‰æ¥å£ï¼Œé€šè¿‡ SpringMVC æ³¨è§£å£°æ˜è¿œç¨‹è°ƒç”¨çš„æ ¸å¿ƒå‚æ•°ï¼ˆè¯·æ±‚æ–¹å¼ã€è·¯å¾„ã€å‚æ•°ã€è¿”å›å€¼ï¼‰ï¼ŒOpenFeign ä¼šè‡ªåŠ¨ç”Ÿæˆå®ç°ç±»ã€‚</p><p>åœ¨<code>cart-service</code>ä¸­åˆ›å»º<code>ItemClient</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.cart.client;<br><br><span class="hljs-keyword">import</span> com.hmall.cart.domain.dto.ItemDTO;<br><span class="hljs-keyword">import</span> org.springframework.cloud.openfeign.FeignClient;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestParam;<br><br><span class="hljs-keyword">import</span> java.util.Collection;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@FeignClient(&quot;item-service&quot;)</span> <span class="hljs-comment">// å£°æ˜æœåŠ¡åç§°ï¼ˆå¯¹åº”Nacosä¸­çš„æœåŠ¡åï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemClient</span> &#123;<br><br>    <span class="hljs-comment">// æ³¨è§£ä¸item-serviceçš„Controlleræ¥å£ä¿æŒä¸€è‡´</span><br>    <span class="hljs-meta">@GetMapping(&quot;/items&quot;)</span> <span class="hljs-comment">// è¯·æ±‚æ–¹å¼+è·¯å¾„</span><br>    List&lt;ItemDTO&gt; <span class="hljs-title function_">queryItemByIds</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;ids&quot;)</span> Collection&lt;Long&gt; ids)</span>; <span class="hljs-comment">// è¯·æ±‚å‚æ•°+è¿”å›å€¼ç±»å‹</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-1-4-ä½¿ç”¨-Feign-å®¢æˆ·ç«¯">4.1.4 ä½¿ç”¨ Feign å®¢æˆ·ç«¯</h3><p>åœ¨<code>CartServiceImpl</code>ä¸­æ³¨å…¥<code>ItemClient</code>ï¼Œç›´æ¥è°ƒç”¨æ¥å£æ–¹æ³•ï¼ˆæ— éœ€æ‰‹åŠ¨å¤„ç†æœåŠ¡å‘ç°ã€HTTP è¯·æ±‚ï¼‰ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf978fbd98d.png" alt="image"></p><p><strong>ä¼˜åŠ¿</strong>ï¼šOpenFeign è‡ªåŠ¨å®Œæˆã€ŒæœåŠ¡å‘ç°â†’è´Ÿè½½å‡è¡¡â†’HTTP è¯·æ±‚å‘é€â†’å“åº”è§£æã€å…¨æµç¨‹ï¼Œä»£ç ç®€æ´ä¸”ä¸æœ¬åœ°è°ƒç”¨ä½“éªŒä¸€è‡´ã€‚</p><h2 id="4-2-è¿æ¥æ± ä¼˜åŒ–">4.2 è¿æ¥æ± ä¼˜åŒ–</h2><p>Feign åº•å±‚ä¾èµ– HTTP å®¢æˆ·ç«¯å®ç°ï¼Œé»˜è®¤ä½¿ç”¨<code>HttpURLConnection</code>ï¼ˆæ— è¿æ¥æ± ï¼Œæ€§èƒ½å·®ï¼‰ã€‚æ¨èæ›¿æ¢ä¸º<strong>æ”¯æŒè¿æ¥æ± </strong>çš„<code>OKHttp</code>æˆ–<code>Apache HttpClient</code>ï¼Œæå‡å¹¶å‘æ€§èƒ½ã€‚</p><h3 id="4-2-1-å¼•å…¥-OKHttp-ä¾èµ–">4.2.1 å¼•å…¥ OKHttp ä¾èµ–</h3><p>åœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Feign-OKHttp ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>feign-okhttp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4-2-2-å¼€å¯è¿æ¥æ± ">4.2.2 å¼€å¯è¿æ¥æ± </h3><p>åœ¨<code>cart-service</code>çš„<code>application.yaml</code>ä¸­é…ç½®å¯ç”¨ OKHttpï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">okhttp:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯OKHttpè¿æ¥æ± </span><br></code></pre></td></tr></table></figure><h3 id="4-2-3-éªŒè¯è¿æ¥æ± ç”Ÿæ•ˆ">4.2.3 éªŒè¯è¿æ¥æ± ç”Ÿæ•ˆ</h3><p>é€šè¿‡æ–­ç‚¹è°ƒè¯•éªŒè¯åº•å±‚å®¢æˆ·ç«¯æ˜¯å¦åˆ‡æ¢ä¸º OKHttpï¼š</p><ol><li>åœ¨<code>org.springframework.cloud.openfeign.loadbalancer.FeignBlockingLoadBalancerClient</code>çš„<code>execute</code>æ–¹æ³•å¤„æ‰“æ–­ç‚¹ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cf97e7aec5d.png" alt="image"></p><ol><li>ä»¥ Debug æ¨¡å¼å¯åŠ¨<code>cart-service</code>ï¼Œè°ƒç”¨è´­ç‰©è½¦æŸ¥è¯¢æ¥å£ï¼Œè¿›å…¥æ–­ç‚¹ã€‚</li><li>è§‚å¯Ÿ<code>client</code>å¯¹è±¡ç±»å‹ï¼Œç¡®è®¤æ˜¯<code>OkHttpClient</code>ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cf9844f124b.png" alt="image"></p><h2 id="4-3-æœ€ä½³å®è·µï¼ˆFeign-å®¢æˆ·ç«¯æŠ½å–ï¼‰">4.3 æœ€ä½³å®è·µï¼ˆFeign å®¢æˆ·ç«¯æŠ½å–ï¼‰</h2><p>å¤šä¸ªæœåŠ¡ï¼ˆå¦‚<code>cart-service</code>ã€<code>trade-service</code>ï¼‰å¯èƒ½éœ€è¦è°ƒç”¨åŒä¸€æœåŠ¡ï¼ˆå¦‚<code>item-service</code>ï¼‰çš„æ¥å£ï¼Œè‹¥æ¯ä¸ªæœåŠ¡éƒ½é‡å¤å®šä¹‰ Feign å®¢æˆ·ç«¯ï¼Œä¼šå¯¼è‡´<strong>ä»£ç å†—ä½™</strong>ã€‚è§£å†³æ–¹å¼æ˜¯å°† Feign å®¢æˆ·ç«¯æŠ½å–åˆ°å…¬å…±æ¨¡å—ã€‚</p><h3 id="4-3-1-æ€è·¯åˆ†æ">4.3.1 æ€è·¯åˆ†æ</h3><p>ä¸¤ç§æŠ½å–æ–¹æ¡ˆå¯¹æ¯”ï¼š</p><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>æ–¹æ¡ˆ 1ï¼šå…¬å…±æ¨¡å—æŠ½å–</td><td>æŠ½å–åˆ°ç‹¬ç«‹çš„<code>hm-api</code>æ¨¡å—</td><td>ç»“æ„æ¸…æ™°ï¼ŒæŠ½å–ç®€å•</td><td>æœåŠ¡é—´è€¦åˆåº¦è¾ƒé«˜</td></tr><tr><td>æ–¹æ¡ˆ 2ï¼šæœåŠ¡å†…æŠ½å–</td><td>æ¯ä¸ªæœåŠ¡å•ç‹¬æŠ½å– API æ¨¡å—</td><td>è€¦åˆåº¦ä½</td><td>ç»“æ„å¤æ‚ï¼Œç»´æŠ¤æˆæœ¬é«˜</td></tr></tbody></table><p><img src="https://a1.boltp.com/2025/09/21/68cf98a7d689d.png" alt="image"></p><p>è¯¾ç¨‹é‡‡ç”¨<strong>æ–¹æ¡ˆ 1</strong>ï¼ˆé€‚åˆç°æœ‰é¡¹ç›®ç»“æ„ï¼‰ã€‚</p><h3 id="4-3-2-åˆ›å»ºå…¬å…±-API-æ¨¡å—ï¼ˆhm-apiï¼‰">4.3.2 åˆ›å»ºå…¬å…± API æ¨¡å—ï¼ˆhm-apiï¼‰</h3><ol><li><p><strong>åˆ›å»º Module</strong>ï¼šåœ¨<code>hmall</code>çˆ¶å·¥ç¨‹ä¸‹åˆ›å»º<code>hm-api</code>æ¨¡å—ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cf98c5a9daa.png" alt="image"></p></li><li><p><strong>é…ç½®ä¾èµ–ï¼ˆpom.xmlï¼‰</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hmall<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hm-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- OpenFeign æ ¸å¿ƒä¾èµ– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è´Ÿè½½å‡è¡¡ä¾èµ– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- Swaggeræ³¨è§£ä¾èµ–ï¼ˆæ¥å£æ–‡æ¡£ç›¸å…³ï¼‰ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.swagger<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>swagger-annotations<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.6.6<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ‹·è´ Feign å®¢æˆ·ç«¯åŠ DTO</strong>ï¼šå°†<code>cart-service</code>ä¸­çš„<code>ItemClient</code>å’Œ<code>ItemDTO</code>æ‹·è´åˆ°<code>hm-api</code>æ¨¡å—ï¼Œæœ€ç»ˆç»“æ„ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf98df89a93.png" alt="image"></p></li></ol><h3 id="4-3-3-æœåŠ¡å¼•å…¥å…¬å…±æ¨¡å—">4.3.3 æœåŠ¡å¼•å…¥å…¬å…±æ¨¡å—</h3><ol><li><p><strong>å¼•å…¥ä¾èµ–</strong>ï¼šåœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ <code>hm-api</code>ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- å¼•å…¥å…¬å…±APIæ¨¡å— --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hm-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤å†—ä½™ä»£ç </strong>ï¼šåˆ é™¤<code>cart-service</code>ä¸­åŸæœ‰<code>ItemClient</code>å’Œ<code>ItemDTO</code>ã€‚</p></li><li><p><strong>è§£å†³æ‰«æé—®é¢˜</strong>ï¼šå¯åŠ¨<code>cart-service</code>ä¼šæŠ¥é”™ â€”â€”<code>ItemClient</code>ä½äº<code>com.hmall.api.client</code>åŒ…ï¼Œè€Œå¯åŠ¨ç±»æ‰«æèŒƒå›´æ˜¯<code>com.hmall.cart</code>ï¼Œæ— æ³•è¯†åˆ« Feign å®¢æˆ·ç«¯ã€‚</p><p>ä¸¤ç§è§£å†³æ–¹å¼ï¼š</p><ul><li><strong>æ–¹å¼ 1ï¼šæŒ‡å®šæ‰«æåŒ…</strong>ï¼ˆæ¨èï¼Œé€‚ç”¨äºå¤šä¸ª Feign å®¢æˆ·ç«¯ï¼‰ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf9ab46e1c8.png" alt="image"></p><ul><li><strong>æ–¹å¼ 2ï¼šæŒ‡å®š Feign å®¢æˆ·ç«¯ç±»</strong>ï¼ˆé€‚ç”¨äºå°‘é‡å®¢æˆ·ç«¯ï¼‰ï¼š</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cf9ac4659c8.png" alt="image"></p></li></ol><h2 id="4-4-æ—¥å¿—é…ç½®">4.4 æ—¥å¿—é…ç½®</h2><p>OpenFeign çš„æ—¥å¿—è¾“å‡ºéœ€æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>Feign å®¢æˆ·ç«¯æ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«ä¸º<code>DEBUG</code>ã€‚</li><li>é…ç½® Feign çš„æ—¥å¿—çº§åˆ«ï¼ˆé»˜è®¤<code>NONE</code>ï¼Œä¸è¾“å‡ºæ—¥å¿—ï¼‰ã€‚</li></ol><h3 id="4-4-1-Feign-æ—¥å¿—çº§åˆ«">4.4.1 Feign æ—¥å¿—çº§åˆ«</h3><table><thead><tr><th>çº§åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>NONE</td><td>ä¸è®°å½•ä»»ä½•æ—¥å¿—ï¼ˆé»˜è®¤ï¼‰</td></tr><tr><td>BASIC</td><td>è®°å½•è¯·æ±‚æ–¹æ³•ã€URLã€å“åº”çŠ¶æ€ç ã€æ‰§è¡Œæ—¶é—´</td></tr><tr><td>HEADERS</td><td>åœ¨ BASIC åŸºç¡€ä¸Šï¼Œå¢åŠ è¯·æ±‚ / å“åº”å¤´ä¿¡æ¯</td></tr><tr><td>FULL</td><td>è®°å½•å®Œæ•´è¯·æ±‚ / å“åº”ï¼ˆå¤´ã€ä½“ã€å…ƒæ•°æ®ï¼‰</td></tr></tbody></table><h3 id="4-4-2-é…ç½®æ—¥å¿—çº§åˆ«">4.4.2 é…ç½®æ—¥å¿—çº§åˆ«</h3><ol><li><p><strong>å®šä¹‰æ—¥å¿—é…ç½®ç±»</strong>ï¼šåœ¨<code>hm-api</code>æ¨¡å—ä¸­åˆ›å»ºé…ç½®ç±»ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cf9afc0d92b.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.api.config;<br><br><span class="hljs-keyword">import</span> feign.Logger;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultFeignConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Logger.Level <span class="hljs-title function_">feignLogLevel</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Logger.Level.FULL; <span class="hljs-comment">// é…ç½®ä¸ºFULLçº§åˆ«</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç”Ÿæ•ˆé…ç½®</strong>ï¼š</p><ul><li><p><strong>å±€éƒ¨ç”Ÿæ•ˆ</strong>ï¼ˆä»…å¯¹æŒ‡å®š FeignClient ç”Ÿæ•ˆï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FeignClient(</span><br><span class="hljs-meta">    value = &quot;item-service&quot;, </span><br><span class="hljs-meta">    configuration = DefaultFeignConfig.class // ç»‘å®šé…ç½®ç±»</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ItemClient</span> &#123; ... &#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>å…¨å±€ç”Ÿæ•ˆ</strong>ï¼ˆå¯¹æ‰€æœ‰ FeignClient ç”Ÿæ•ˆï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableFeignClients(</span><br><span class="hljs-meta">    basePackages = &quot;com.hmall.api.client&quot;,</span><br><span class="hljs-meta">    defaultConfiguration = DefaultFeignConfig.class // å…¨å±€é…ç½®</span><br><span class="hljs-meta">)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CartApplication</span> &#123; ... &#125;<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>é…ç½®åŒ…æ—¥å¿—çº§åˆ«</strong>ï¼šåœ¨<code>cart-service</code>çš„<code>application.yaml</code>ä¸­æ·»åŠ ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.hmall.api.client:</span> <span class="hljs-string">debug</span> <span class="hljs-comment"># Feignå®¢æˆ·ç«¯æ‰€åœ¨åŒ…çš„æ—¥å¿—çº§åˆ«ä¸ºDEBUG</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="4-4-3-æ—¥å¿—ç¤ºä¾‹ï¼ˆFULL-çº§åˆ«ï¼‰">4.4.3 æ—¥å¿—ç¤ºä¾‹ï¼ˆFULL çº§åˆ«ï¼‰</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; GET http://item-service/items?ids=100000006163 HTTP/1.1<br>17:35:32:148 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] ---&gt; END HTTP (0-byte body)<br>17:35:32:278 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- HTTP/1.1 200  (127ms)<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] connection: keep-alive<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] content-type: application/json<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] date: Fri, 26 May 2023 09:35:32 GMT<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] keep-alive: timeout=60<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] transfer-encoding: chunked<br>17:35:32:279 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] <br>17:35:32:280 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] [&#123;&quot;id&quot;:100000006163,&quot;name&quot;:&quot;å·´å¸ƒè±†(BOBDOG)æŸ”è–„æ‚¦åŠ¨å©´å„¿æ‹‰æ‹‰è£¤XXLç 80ç‰‡(15kgä»¥ä¸Š)&quot;,&quot;price&quot;:67100,&quot;stock&quot;:10000,&quot;image&quot;:&quot;https://m.360buyimg.com/mobilecms/s720x720_jfs/t23998/350/2363990466/222391/a6e9581d/5b7cba5bN0c18fb4f.jpg!q70.jpg.webp&quot;,&quot;category&quot;:&quot;æ‹‰æ‹‰è£¤&quot;,&quot;brand&quot;:&quot;å·´å¸ƒè±†&quot;,&quot;spec&quot;:&quot;&#123;&#125;&quot;,&quot;sold&quot;:11,&quot;commentCount&quot;:33343434,&quot;isAD&quot;:false,&quot;status&quot;:2&#125;]<br>17:35:32:281 DEBUG 18620 --- [nio-8082-exec-1] com.hmall.api.client.ItemClient          : [ItemClient#queryItemByIds] &lt;--- END HTTP (369-byte body)<br></code></pre></td></tr></table></figure><p>ç¬¬å››ç« å®Œæˆå¾®æœåŠ¡æ‹†åˆ†åï¼Œå®é™…è”è°ƒä¸­æš´éœ²äº†<strong>å¤šå…¥å£ç»´æŠ¤ã€ç”¨æˆ·ä¿¡æ¯ä¼ é€’ã€é…ç½®å†—ä½™</strong>ç­‰é—®é¢˜ã€‚æ‰€ä»¥åç»­å°†ä¼šé€šè¿‡<strong>å¾®æœåŠ¡ç½‘å…³</strong>è§£å†³è¯·æ±‚å…¥å£ä¸é‰´æƒé—®é¢˜ï¼Œé€šè¿‡<strong>Nacos ç»Ÿä¸€é…ç½®</strong>è§£å†³é…ç½®ç®¡ç†é—®é¢˜ã€‚</p><h1>5. ç½‘å…³è·¯ç”±</h1><h2 id="5-1-è®¤è¯†ç½‘å…³">5.1 è®¤è¯†ç½‘å…³</h2><h3 id="5-1-1-ç½‘å…³çš„å®šä¹‰ä¸ä½œç”¨">5.1.1 ç½‘å…³çš„å®šä¹‰ä¸ä½œç”¨</h3><p>ç½‘å…³æ˜¯ç½‘ç»œæ•°æ®ä¼ è¾“çš„ â€œå…³å£â€ï¼Œè´Ÿè´£åœ¨ä¸åŒç½‘ç»œé—´è¿›è¡Œ<strong>è·¯ç”±è½¬å‘ã€å®‰å…¨æ ¡éªŒã€æ•°æ®è¿‡æ»¤</strong>ã€‚é€šä¿—æ¥è®²ï¼Œç½‘å…³ç±»ä¼¼å›­åŒºä¼ è¾¾å®¤çš„ â€œå¤§çˆ·â€ï¼Œæ‰¿æ‹…ä¸¤å¤§æ ¸å¿ƒèŒè´£ï¼š</p><ul><li><strong>å®‰å…¨æ‹¦æˆª</strong>ï¼šéªŒè¯è®¿é—®è€…èº«ä»½ï¼Œæ‹¦æˆªéæ³•è¯·æ±‚ï¼›</li><li><strong>è·¯ç”±è½¬å‘</strong>ï¼šæ¥æ”¶å¤–éƒ¨è¯·æ±‚ï¼Œä¼ é€’ç»™ç›®æ ‡æ¥æ”¶è€…ã€‚</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cfb070c42bd.png" alt="image"></p><p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œå‰ç«¯è¯·æ±‚ä¸ç›´æ¥è®¿é—®å¾®æœåŠ¡ï¼Œå¿…é¡»ç»è¿‡ç½‘å…³å±‚ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç½‘å…³å¯¹è¯·æ±‚è¿›è¡Œ<strong>ç™»å½•èº«ä»½æ ¡éªŒ</strong>ï¼Œæ ¡éªŒé€šè¿‡æ‰å…è®¸æ”¾è¡Œï¼›</li><li>æ ¡éªŒé€šè¿‡åï¼Œç½‘å…³æ ¹æ®è¯·æ±‚ç‰¹å¾åˆ¤æ–­ç›®æ ‡å¾®æœåŠ¡ï¼Œå°†è¯·æ±‚<strong>è½¬å‘</strong>è‡³å¯¹åº”æœåŠ¡ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cfb0765a39b.png" alt="image"></p><h3 id="5-1-2-SpringCloud-ä¸­çš„ç½‘å…³æ–¹æ¡ˆ">5.1.2 SpringCloud ä¸­çš„ç½‘å…³æ–¹æ¡ˆ</h3><p>SpringCloud æä¾›ä¸¤ç§ç½‘å…³å®ç°ï¼Œç›®å‰ä¸»æµä¸º SpringCloudGatewayï¼š</p><table><thead><tr><th>ç½‘å…³æ–¹æ¡ˆ</th><th>æŠ€æœ¯åŸºç¡€</th><th>æ€§èƒ½ç‰¹ç‚¹</th><th>ç°çŠ¶</th></tr></thead><tbody><tr><td>Netflix Zuul</td><td>Servlet 3.x</td><td>åŒæ­¥é˜»å¡æ¨¡å‹</td><td>å·²æ·˜æ±°</td></tr><tr><td>SpringCloudGateway</td><td>Spring WebFlux</td><td>å“åº”å¼ç¼–ç¨‹ï¼Œé«˜åå</td><td>ä¸»æµæ¨è</td></tr></tbody></table><p>SpringCloudGateway å®˜æ–¹ç½‘ç«™ï¼š<a href="https://spring.io/projects/spring-cloud-gateway#learn">https://spring.io/projects/spring-cloud-gateway#learn</a></p><h2 id="5-2-å¿«é€Ÿå…¥é—¨ï¼šå®ç°ç½‘å…³è·¯ç”±">5.2 å¿«é€Ÿå…¥é—¨ï¼šå®ç°ç½‘å…³è·¯ç”±</h2><p>ç½‘å…³æœ¬èº«æ˜¯ç‹¬ç«‹çš„å¾®æœåŠ¡ï¼Œéœ€é€šè¿‡åˆ›å»ºæ¨¡å—ã€é…ç½®ä¾èµ–ä¸è·¯ç”±è§„åˆ™å®ç°åŠŸèƒ½ã€‚æ ¸å¿ƒæ­¥éª¤ä¸ºï¼š<strong>åˆ›å»ºé¡¹ç›®â†’å¼•å…¥ä¾èµ–â†’ç¼–å†™å¯åŠ¨ç±»â†’é…ç½®è·¯ç”±â†’æµ‹è¯•éªŒè¯</strong>ã€‚</p><h3 id="5-2-1-æ­¥éª¤-1ï¼šåˆ›å»ºç½‘å…³æ¨¡å—ï¼ˆhm-gatewayï¼‰">5.2.1 æ­¥éª¤ 1ï¼šåˆ›å»ºç½‘å…³æ¨¡å—ï¼ˆhm-gatewayï¼‰</h3><p>åœ¨<code>hmall</code>çˆ¶å·¥ç¨‹ä¸‹æ–°å»º Maven æ¨¡å—ï¼Œå‘½åä¸º<code>hm-gateway</code>ï¼Œä½œä¸ºç½‘å…³å¾®æœåŠ¡ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb0d6718ba.png" alt="image"></p><h3 id="5-2-2-æ­¥éª¤-2ï¼šå¼•å…¥æ ¸å¿ƒä¾èµ–">5.2.2 æ­¥éª¤ 2ï¼šå¼•å…¥æ ¸å¿ƒä¾èµ–</h3><p>åœ¨<code>hm-gateway</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ ç½‘å…³ã€Nacos æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hmall<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hm-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>11<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- å…¬å…±æ¨¡å—ï¼ˆå·¥å…·ç±»ã€é€šç”¨DTOï¼‰ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.heima<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hm-common<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- SpringCloudGateway æ ¸å¿ƒä¾èµ– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- NacosæœåŠ¡å‘ç°ï¼ˆç½‘å…³ä»Nacosè·å–å¾®æœåŠ¡åœ°å€ï¼‰ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- è´Ÿè½½å‡è¡¡ï¼ˆç½‘å…³è½¬å‘æ—¶å®ç°å®ä¾‹è´Ÿè½½å‡è¡¡ï¼‰ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">finalName</span>&gt;</span>$&#123;project.artifactId&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">finalName</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-3-æ­¥éª¤-3ï¼šç¼–å†™å¯åŠ¨ç±»">5.2.3 æ­¥éª¤ 3ï¼šç¼–å†™å¯åŠ¨ç±»</h3><p>åœ¨<code>com.hmall.gateway</code>åŒ…ä¸‹åˆ›å»ºå¯åŠ¨ç±»ï¼Œæ— éœ€é¢å¤–æ³¨è§£ï¼ˆ<code>@SpringBootApplication</code>åŒ…å«è‡ªåŠ¨é…ç½®ï¼‰ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb0f40345f.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.gateway;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GatewayApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(GatewayApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-4-æ­¥éª¤-4ï¼šé…ç½®è·¯ç”±è§„åˆ™">5.2.4 æ­¥éª¤ 4ï¼šé…ç½®è·¯ç”±è§„åˆ™</h3><p>åœ¨<code>hm-gateway</code>çš„<code>resources</code>ç›®å½•åˆ›å»º<code>application.yaml</code>ï¼Œé…ç½®ç«¯å£ã€Nacos åœ°å€åŠè·¯ç”±è§„åˆ™ï¼ˆéœ€æ›¿æ¢ Nacos åœ°å€ä¸ºå®é™…è™šæ‹Ÿæœº IPï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span> <span class="hljs-comment"># ç½‘å…³ç«¯å£ï¼ˆå‰ç«¯ç»Ÿä¸€è®¿é—®å…¥å£ï¼‰</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">gateway</span> <span class="hljs-comment"># ç½‘å…³æœåŠ¡åï¼ˆæ³¨å†Œåˆ°Nacosï¼‰</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># NacosæœåŠ¡åœ°å€</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>        <span class="hljs-comment"># 1. å•†å“æœåŠ¡è·¯ç”±</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">item</span> <span class="hljs-comment"># è·¯ç”±å”¯ä¸€IDï¼ˆè‡ªå®šä¹‰ï¼Œä¸å¯é‡å¤ï¼‰</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://item-service</span> <span class="hljs-comment"># ç›®æ ‡æœåŠ¡ï¼ˆlb=è´Ÿè½½å‡è¡¡ï¼Œä»Nacosæ‹‰å–å®ä¾‹ï¼‰</span><br>          <span class="hljs-attr">predicates:</span> <span class="hljs-comment"># è·¯ç”±æ–­è¨€ï¼ˆåŒ¹é…è¯·æ±‚è·¯å¾„ï¼‰</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/items/**,/search/**</span> <span class="hljs-comment"># åŒ¹é…/items/ã€/search/ä¸‹æ‰€æœ‰è·¯å¾„</span><br>        <span class="hljs-comment"># 2. è´­ç‰©è½¦æœåŠ¡è·¯ç”±</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">cart</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://cart-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/carts/**</span><br>        <span class="hljs-comment"># 3. ç”¨æˆ·æœåŠ¡è·¯ç”±</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://user-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/users/**,/addresses/**</span><br>        <span class="hljs-comment"># 4. äº¤æ˜“æœåŠ¡è·¯ç”±</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">trade</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://trade-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/orders/**</span><br>        <span class="hljs-comment"># 5. æ”¯ä»˜æœåŠ¡è·¯ç”±</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">pay</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://pay-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/pay-orders/**</span><br></code></pre></td></tr></table></figure><h3 id="5-2-5-æ­¥éª¤-5ï¼šæµ‹è¯•è·¯ç”±åŠŸèƒ½">5.2.5 æ­¥éª¤ 5ï¼šæµ‹è¯•è·¯ç”±åŠŸèƒ½</h3><ol><li><p><strong>å¯åŠ¨æœåŠ¡</strong>ï¼šä¾æ¬¡å¯åŠ¨ Nacosã€<code>GatewayApplication</code>ã€<code>item-service</code>ï¼›</p></li><li><p><strong>è®¿é—®æµ‹è¯•</strong>ï¼šé€šè¿‡ç½‘å…³è®¿é—®å•†å“æ¥å£ï¼ŒURL æ ¼å¼ä¸º<code>http://ç½‘å…³IP:ç½‘å…³ç«¯å£/å¾®æœåŠ¡æ¥å£è·¯å¾„</code></p><p>ï¼Œä¾‹å¦‚ï¼š<a href="http://localhost:8080/items/page?pageNo=1&amp;pageSize=1">http://localhost:8080/items/page?pageNo=1&amp;pageSize=1</a></p></li><li><p><strong>éªŒè¯ç»“æœ</strong>ï¼šæ¥å£è¿”å›å•†å“æ•°æ®ï¼Œè¯´æ˜è·¯ç”±è½¬å‘æˆåŠŸã€‚</p></li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cfb15bd3997.png" alt="image"></p><p>å¯åŠ¨<code>user-service</code>ã€<code>cart-service</code>åï¼Œå‰ç«¯å¯é€šè¿‡<code>http://localhost:8080</code>ç»Ÿä¸€å…¥å£è®¿é—®æ‰€æœ‰å¾®æœåŠ¡åŠŸèƒ½ï¼Œæ— éœ€ç»´æŠ¤å¤šä¸ªæœåŠ¡åœ°å€ã€‚</p><h2 id="5-3-è·¯ç”±è§„åˆ™ä¸æ–­è¨€è¯¦è§£">5.3 è·¯ç”±è§„åˆ™ä¸æ–­è¨€è¯¦è§£</h2><h3 id="5-3-1-è·¯ç”±è§„åˆ™æ ¸å¿ƒç»“æ„">5.3.1 è·¯ç”±è§„åˆ™æ ¸å¿ƒç»“æ„</h3><p>è·¯ç”±è§„åˆ™çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼Œ<code>routes</code>æ˜¯<code>RouteDefinition</code>çš„é›†åˆï¼Œæ”¯æŒå¤šè§„åˆ™é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">routes:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">item</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://item-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/items/**,/search/**</span><br></code></pre></td></tr></table></figure><p><code>routes</code>å¯¹åº”çš„ç±»å‹åŠ<code>RouteDefinition</code>æ ¸å¿ƒå±æ€§ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb1cc13330.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cfb1cc6a7e1.png" alt="image"></p><p><code>RouteDefinition</code>æ ¸å¿ƒå±æ€§è¯´æ˜ï¼š</p><table><thead><tr><th>å±æ€§å</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>id</code></td><td>è·¯ç”±å”¯ä¸€æ ‡è¯†ï¼ˆè‡ªå®šä¹‰ï¼Œä¸å¯é‡å¤ï¼‰</td></tr><tr><td><code>predicates</code></td><td>è·¯ç”±æ–­è¨€ï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆå½“å‰è§„åˆ™</td></tr><tr><td><code>filters</code></td><td>è·¯ç”±è¿‡æ»¤ï¼šè¯·æ±‚ / å“åº”çš„åŠ å·¥é€»è¾‘ï¼ˆåç»­è®²è§£ï¼‰</td></tr><tr><td><code>uri</code></td><td>ç›®æ ‡æœåŠ¡åœ°å€ï¼š<code>lb://æœåŠ¡å</code>ä»£è¡¨è´Ÿè½½å‡è¡¡ï¼Œä» Nacos è·å–å®ä¾‹åˆ—è¡¨</td></tr></tbody></table><h3 id="5-3-2-å¸¸ç”¨è·¯ç”±æ–­è¨€ç±»å‹">5.3.2 å¸¸ç”¨è·¯ç”±æ–­è¨€ç±»å‹</h3><p>è·¯ç”±æ–­è¨€æ˜¯ç½‘å…³åŒ¹é…è¯·æ±‚çš„ â€œè§„åˆ™â€ï¼ŒSpringCloudGateway æ”¯æŒå¤šç§æ–­è¨€ç±»å‹ï¼Œè¦†ç›–è·¯å¾„ã€å‚æ•°ã€æ—¶é—´ç­‰åœºæ™¯ï¼š</p><table><thead><tr><th>æ–­è¨€åç§°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>After</td><td>åŒ¹é…æŸä¸ªæ—¶é—´ç‚¹<strong>ä¹‹å</strong>çš„è¯·æ±‚</td><td><code>- After=2037-01-20T17:42:47.789-07:00[America/Denver]</code></td></tr><tr><td>Before</td><td>åŒ¹é…æŸä¸ªæ—¶é—´ç‚¹<strong>ä¹‹å‰</strong>çš„è¯·æ±‚</td><td><code>- Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</code></td></tr><tr><td>Between</td><td>åŒ¹é…ä¸¤ä¸ªæ—¶é—´ç‚¹<strong>ä¹‹é—´</strong>çš„è¯·æ±‚</td><td><code>- Between=2037-01-20T17:42:47.789-07:00[America/Denver], 2037-01-21T17:42:47.789-07:00[America/Denver]</code></td></tr><tr><td>Cookie</td><td>åŒ¹é…åŒ…å«<strong>æŒ‡å®š Cookie</strong>çš„è¯·æ±‚</td><td><code>- Cookie=chocolate, ch.p</code>ï¼ˆCookie é”®ä¸º chocolateï¼Œå€¼åŒ¹é… ch.p æ­£åˆ™ï¼‰</td></tr><tr><td>Header</td><td>åŒ¹é…åŒ…å«<strong>æŒ‡å®šè¯·æ±‚å¤´</strong>çš„è¯·æ±‚</td><td><code>- Header=X-Request-Id, \d+</code>ï¼ˆè¯·æ±‚å¤´é”®ä¸º X-Request-Idï¼Œå€¼ä¸ºæ•°å­—ï¼‰</td></tr><tr><td>Host</td><td>åŒ¹é…è®¿é—®<strong>æŒ‡å®šåŸŸå</strong>çš„è¯·æ±‚</td><td><code>- Host=**.somehost.org,**.anotherhost.org</code>ï¼ˆåŒ¹é…äºŒçº§åŸŸåï¼‰</td></tr><tr><td>Method</td><td>åŒ¹é…<strong>æŒ‡å®š HTTP æ–¹æ³•</strong>çš„è¯·æ±‚</td><td><code>- Method=GET,POST</code>ï¼ˆä»…å…è®¸ GETã€POST è¯·æ±‚ï¼‰</td></tr><tr><td><strong>Path</strong></td><td>åŒ¹é…<strong>æŒ‡å®šè·¯å¾„</strong>çš„è¯·æ±‚ï¼ˆæœ€å¸¸ç”¨ï¼‰</td><td><code>- Path=/red/&#123;segment&#125;,/blue/**</code>ï¼ˆ/red/xxx æˆ– /blue/ ä¸‹æ‰€æœ‰è·¯å¾„ï¼‰</td></tr><tr><td>Query</td><td>åŒ¹é…åŒ…å«<strong>æŒ‡å®šå‚æ•°</strong>çš„è¯·æ±‚</td><td><code>- Query=name</code>ï¼ˆå¿…é¡»åŒ…å« name å‚æ•°ï¼‰ï¼›<code>- Query=name, Jack</code>ï¼ˆname å‚æ•°å€¼ä¸º Jackï¼‰</td></tr><tr><td>RemoteAddr</td><td>åŒ¹é…<strong>æŒ‡å®š IP æ¥æº</strong>çš„è¯·æ±‚</td><td><code>- RemoteAddr=192.168.1.1/24</code>ï¼ˆIP åœ¨ 192.168.1.0-255 èŒƒå›´ï¼‰</td></tr><tr><td>Weight</td><td>åŸºäº<strong>æƒé‡</strong>çš„è·¯ç”±ï¼ˆè´Ÿè½½å‡è¡¡æ‰©å±•ï¼‰</td><td><code>- Weight=group1, 80</code>ï¼ˆgroup1 åˆ†ç»„ä¸­å  80% æƒé‡ï¼‰</td></tr></tbody></table><h3 id="5-3-3-æ–­è¨€ç»„åˆä½¿ç”¨">5.3.3 æ–­è¨€ç»„åˆä½¿ç”¨</h3><p>å¤šä¸ªæ–­è¨€ä¹‹é—´ä¸º **â€œä¸â€ å…³ç³» **ï¼Œéœ€åŒæ—¶æ»¡è¶³æ‰ä¼šè§¦å‘è·¯ç”±ã€‚ä¾‹å¦‚ï¼šä»…å…è®¸ GET è¯·æ±‚è®¿é—®<code>/items</code>è·¯å¾„ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">item</span><br>  <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://item-service</span><br>  <span class="hljs-attr">predicates:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/items/**</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">Method=GET</span> <span class="hljs-comment"># åŒæ—¶æ»¡è¶³è·¯å¾„å’Œæ–¹æ³•æ–­è¨€</span><br></code></pre></td></tr></table></figure><h1>6. ç½‘å…³ç™»å½•æ ¡éªŒ</h1><h2 id="6-1-é‰´æƒæ€è·¯åˆ†æ">6.1 é‰´æƒæ€è·¯åˆ†æ</h2><p>å•ä½“æ¶æ„ä¸­ï¼Œä¸€æ¬¡ç™»å½•æ ¡éªŒå³å¯åœ¨æ‰€æœ‰ä¸šåŠ¡ä¸­å…±äº«ç”¨æˆ·ä¿¡æ¯ï¼›ä½†å¾®æœåŠ¡æ‹†åˆ†åï¼ŒæœåŠ¡ç‹¬ç«‹éƒ¨ç½²ã€æ•°æ®ä¸å…±äº«ï¼Œè‹¥æ¯ä¸ªå¾®æœåŠ¡å•ç‹¬å®ç°ç™»å½•æ ¡éªŒï¼Œä¼šå­˜åœ¨<strong>ç§˜é’¥æ³„éœ²é£é™©</strong>å’Œ<strong>ä»£ç å†—ä½™é—®é¢˜</strong>ã€‚</p><h3 id="6-1-1-æ ¸å¿ƒç—›ç‚¹">6.1.1 æ ¸å¿ƒç—›ç‚¹</h3><ul><li><strong>å®‰å…¨æ€§å·®</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éœ€å­˜å‚¨ JWT ç§˜é’¥ï¼Œæ˜“æ³„éœ²ï¼›</li><li><strong>å¼€å‘æ•ˆç‡ä½</strong>ï¼šé‡å¤ç¼–å†™ç™»å½•æ ¡éªŒã€æƒé™åˆ¤æ–­ä»£ç ã€‚</li></ul><h3 id="6-1-2-ç½‘å…³ç»Ÿä¸€é‰´æƒæ–¹æ¡ˆ">6.1.2 ç½‘å…³ç»Ÿä¸€é‰´æƒæ–¹æ¡ˆ</h3><p>ç½‘å…³ä½œä¸ºæ‰€æœ‰è¯·æ±‚çš„å…¥å£ï¼Œå¯é›†ä¸­å¤„ç†ç™»å½•æ ¡éªŒï¼Œè§£å†³ä¸Šè¿°é—®é¢˜ï¼š</p><ul><li><strong>ç§˜é’¥é›†ä¸­ç®¡ç†</strong>ï¼šä»…ç½‘å…³å’Œç”¨æˆ·æœåŠ¡ä¿å­˜ JWT ç§˜é’¥ï¼›</li><li><strong>ä»£ç ç»Ÿä¸€å¼€å‘</strong>ï¼šç™»å½•æ ¡éªŒé€»è¾‘ä»…åœ¨ç½‘å…³å®ç°ä¸€æ¬¡ã€‚</li></ul><p><strong>é‰´æƒæµç¨‹</strong>ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb3e45d129.png" alt="image"></p><h3 id="6-1-3-å¾…è§£å†³é—®é¢˜">6.1.3 å¾…è§£å†³é—®é¢˜</h3><ul><li>å¦‚ä½•åœ¨ç½‘å…³è½¬å‘è¯·æ±‚å‰æ‰§è¡Œç™»å½•æ ¡éªŒï¼Ÿ</li><li>ç½‘å…³æ ¡éªŒé€šè¿‡åï¼Œå¦‚ä½•å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ï¼Ÿ</li><li>å¾®æœåŠ¡é—´è°ƒç”¨ï¼ˆä¸ç»è¿‡ç½‘å…³ï¼‰å¦‚ä½•ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼Ÿ</li></ul><h2 id="6-2-ç½‘å…³è¿‡æ»¤å™¨ï¼šé‰´æƒçš„æŠ€æœ¯åŸºç¡€">6.2 ç½‘å…³è¿‡æ»¤å™¨ï¼šé‰´æƒçš„æŠ€æœ¯åŸºç¡€</h2><p>ç½‘å…³çš„è¯·æ±‚å¤„ç†ä¾èµ–<strong>è¿‡æ»¤å™¨é“¾</strong>ï¼Œç™»å½•æ ¡éªŒéœ€é€šè¿‡è¿‡æ»¤å™¨åœ¨è¯·æ±‚è½¬å‘å‰æ‰§è¡Œã€‚</p><h3 id="6-2-1-Gateway-å·¥ä½œåŸç†">6.2.1 Gateway å·¥ä½œåŸç†</h3><p>Gateway å¤„ç†è¯·æ±‚çš„æ ¸å¿ƒæµç¨‹ï¼š</p><ol><li>å®¢æˆ·ç«¯è¯·æ±‚è¿›å…¥ç½‘å…³ï¼Œ<code>HandlerMapping</code>åŒ¹é…å¯¹åº”çš„è·¯ç”±è§„åˆ™ï¼ˆ<code>Route</code>ï¼‰ï¼›</li><li><code>WebHandler</code>åŠ è½½è¯¥è·¯ç”±çš„<strong>è¿‡æ»¤å™¨é“¾ï¼ˆFilter Chainï¼‰</strong>ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œè¿‡æ»¤å™¨ï¼›</li><li>è¿‡æ»¤å™¨é€»è¾‘åˆ†ä¸º<code>pre</code>ï¼ˆè½¬å‘å‰ï¼‰å’Œ<code>post</code>ï¼ˆå“åº”åï¼‰ä¸¤éƒ¨åˆ†ï¼Œä»…<code>pre</code>é€»è¾‘å…¨éƒ¨é€šè¿‡åï¼Œè¯·æ±‚æ‰ä¼šè½¬å‘åˆ°å¾®æœåŠ¡ï¼›</li><li>å¾®æœåŠ¡è¿”å›å“åº”åï¼Œå€’åºæ‰§è¡Œè¿‡æ»¤å™¨çš„<code>post</code>é€»è¾‘ï¼Œæœ€ç»ˆè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cfb4240f38c.png" alt="image"></p><p>å…³é”®ç»“è®ºï¼šç™»å½•æ ¡éªŒé€»è¾‘éœ€å®ç°ä¸º<code>pre</code>é˜¶æ®µçš„è¿‡æ»¤å™¨ï¼Œä¸”æ‰§è¡Œé¡ºåºéœ€åœ¨è¯·æ±‚è½¬å‘è¿‡æ»¤å™¨ï¼ˆ<code>NettyRoutingFilter</code>ï¼‰ä¹‹å‰ã€‚</p><h3 id="6-2-2-ç½‘å…³è¿‡æ»¤å™¨ç±»å‹">6.2.2 ç½‘å…³è¿‡æ»¤å™¨ç±»å‹</h3><p>Gateway æä¾›ä¸¤ç§æ ¸å¿ƒè¿‡æ»¤å™¨ï¼Œå‡æ”¯æŒè‡ªå®šä¹‰ï¼š</p><table><thead><tr><th>è¿‡æ»¤å™¨ç±»å‹</th><th>ä½œç”¨èŒƒå›´</th><th>é…ç½®æ–¹å¼</th></tr></thead><tbody><tr><td><code>GatewayFilter</code></td><td>æŒ‡å®šè·¯ç”±ï¼ˆçµæ´»ï¼‰</td><td>éœ€åœ¨ yaml ä¸­é…ç½®</td></tr><tr><td><code>GlobalFilter</code></td><td>æ‰€æœ‰è·¯ç”±ï¼ˆå…¨å±€ï¼‰</td><td>æ— éœ€é…ç½®ï¼Œè‡ªåŠ¨ç”Ÿæ•ˆ</td></tr></tbody></table><p>ä¸¤ç§è¿‡æ»¤å™¨çš„æ–¹æ³•ç­¾åä¸€è‡´ï¼Œæœ€ç»ˆä¼šè¢«ç»Ÿä¸€å°è£…åˆ°è¿‡æ»¤å™¨é“¾ä¸­ï¼ŒæŒ‰<code>Order</code>æ’åºæ‰§è¡Œï¼ˆå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> exchange è¯·æ±‚ä¸Šä¸‹æ–‡ï¼ˆå«requestã€responseï¼‰</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> chain è¿‡æ»¤å™¨é“¾ï¼ˆç”¨äºä¼ é€’è¯·æ±‚ï¼‰</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span> æ ‡è®°è¯·æ±‚æ˜¯å¦æ”¾è¡Œï¼šchain.filter(exchange) ä¸ºæ”¾è¡Œ</span><br><span class="hljs-comment"> */</span><br>Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;<br></code></pre></td></tr></table></figure><h3 id="6-2-3-å†…ç½®-GatewayFilter-ä½¿ç”¨">6.2.3 å†…ç½® GatewayFilter ä½¿ç”¨</h3><p>Gateway å†…ç½®å¤šç§<code>GatewayFilter</code>ï¼ˆå¦‚æ·»åŠ è¯·æ±‚å¤´ã€è·¯å¾„é‡å†™ï¼‰ï¼Œæ— éœ€ç¼–ç ï¼Œç›´æ¥åœ¨ yaml ä¸­é…ç½®å³å¯ã€‚</p><h4 id="ç¤ºä¾‹ï¼šæ·»åŠ è¯·æ±‚å¤´è¿‡æ»¤å™¨">ç¤ºä¾‹ï¼šæ·»åŠ è¯·æ±‚å¤´è¿‡æ»¤å™¨</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-comment"># ä½œç”¨äºæ‰€æœ‰è·¯ç”±çš„é»˜è®¤è¿‡æ»¤å™¨</span><br>      <span class="hljs-attr">default-filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=X-Gateway,</span> <span class="hljs-string">hmall-gateway</span> <span class="hljs-comment"># ç»™æ‰€æœ‰è¯·æ±‚æ·»åŠ å¤´ä¿¡æ¯</span><br>      <span class="hljs-attr">routes:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">item</span><br>          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://item-service</span><br>          <span class="hljs-attr">predicates:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/items/**</span><br>          <span class="hljs-comment"># ä»…ä½œç”¨äºå½“å‰è·¯ç”±çš„è¿‡æ»¤å™¨</span><br>          <span class="hljs-attr">filters:</span><br>            <span class="hljs-bullet">-</span> <span class="hljs-string">AddRequestHeader=X-Service,</span> <span class="hljs-string">item-service</span><br></code></pre></td></tr></table></figure><h2 id="6-3-è‡ªå®šä¹‰è¿‡æ»¤å™¨">6.3 è‡ªå®šä¹‰è¿‡æ»¤å™¨</h2><p>å®é™…ä¸šåŠ¡ä¸­ï¼Œå†…ç½®è¿‡æ»¤å™¨æ— æ³•æ»¡è¶³å¤æ‚éœ€æ±‚ï¼ˆå¦‚ç™»å½•æ ¡éªŒï¼‰ï¼Œéœ€è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€‚</p><h3 id="6-3-1-è‡ªå®šä¹‰-GatewayFilter">6.3.1 è‡ªå®šä¹‰ GatewayFilter</h3><p>éœ€ç»§æ‰¿<code>AbstractGatewayFilterFactory</code>ï¼Œæ”¯æŒåŠ¨æ€é…ç½®å‚æ•°ï¼Œä½œç”¨äºæŒ‡å®šè·¯ç”±ã€‚</p><h4 id="ç¤ºä¾‹-1ï¼šåŸºç¡€æ— å‚è¿‡æ»¤å™¨">ç¤ºä¾‹ 1ï¼šåŸºç¡€æ— å‚è¿‡æ»¤å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-comment">// ç±»åå¿…é¡»ä»¥GatewayFilterFactoryä¸ºåç¼€</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintAnyGatewayFilterFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractGatewayFilterFactory</span>&lt;Object&gt; &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> GatewayFilter <span class="hljs-title function_">apply</span><span class="hljs-params">(Object config)</span> &#123;<br>        <span class="hljs-keyword">return</span> (exchange, chain) -&gt; &#123;<br>            System.out.println(<span class="hljs-string">&quot;GatewayFilteræ‰§è¡Œäº†&quot;</span>);<br>            <span class="hljs-keyword">return</span> chain.filter(exchange); <span class="hljs-comment">// æ”¾è¡Œ</span><br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é…ç½®ä½¿ç”¨</strong>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">default-filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">PrintAny</span> <span class="hljs-comment"># ç›´æ¥ä½¿ç”¨ç±»åå‰ç¼€</span><br></code></pre></td></tr></table></figure><h4 id="ç¤ºä¾‹-2ï¼šå¸¦å‚æ•°çš„è¿‡æ»¤å™¨">ç¤ºä¾‹ 2ï¼šå¸¦å‚æ•°çš„è¿‡æ»¤å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintParamGatewayFilterFactory</span> <br>       <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractGatewayFilterFactory</span>&lt;PrintParamGatewayFilterFactory.Config&gt; &#123;<br><br>    <span class="hljs-comment">// è¿‡æ»¤å™¨é€»è¾‘ï¼ˆæ”¯æŒæ’åºï¼‰</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> GatewayFilter <span class="hljs-title function_">apply</span><span class="hljs-params">(Config config)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderedGatewayFilter</span>((exchange, chain) -&gt; &#123;<br>            <span class="hljs-comment">// è·å–é…ç½®å‚æ•°</span><br>            System.out.println(<span class="hljs-string">&quot;a=&quot;</span> + config.getA() + <span class="hljs-string">&quot;, b=&quot;</span> + config.getB());<br>            <span class="hljs-keyword">return</span> chain.filter(exchange);<br>        &#125;, <span class="hljs-number">100</span>); <span class="hljs-comment">// æ‰§è¡Œé¡ºåºï¼š100</span><br>    &#125;<br><br>    <span class="hljs-comment">// è‡ªå®šä¹‰é…ç½®ç±»ï¼ˆå­˜å‚¨å‚æ•°ï¼‰</span><br>    <span class="hljs-meta">@Data</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span> &#123;<br>        <span class="hljs-keyword">private</span> String a;<br>        <span class="hljs-keyword">private</span> String b;<br>    &#125;<br><br>    <span class="hljs-comment">// æŒ‡å®šå‚æ•°é¡ºåºï¼ˆç”¨äºyamlç®€æ´é…ç½®ï¼‰</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">shortcutFieldOrder</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> List.of(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// æŒ‡å®šé…ç½®ç±»ç±»å‹</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Class&lt;Config&gt; <span class="hljs-title function_">getConfigClass</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> Config.class;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>é…ç½®ä½¿ç”¨</strong>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># æ–¹å¼1ï¼šæŒ‰é¡ºåºä¼ å‚ï¼ˆç®€æ´ï¼‰</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">default-filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-string">PrintParam=123,</span> <span class="hljs-number">456</span><br><br><span class="hljs-comment"># æ–¹å¼2ï¼šæŒ‡å®šå‚æ•°åï¼ˆçµæ´»ï¼‰</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">gateway:</span><br>      <span class="hljs-attr">default-filters:</span><br>        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">PrintParam</span><br>          <span class="hljs-attr">args:</span><br>            <span class="hljs-attr">a:</span> <span class="hljs-number">123</span><br>            <span class="hljs-attr">b:</span> <span class="hljs-number">456</span><br></code></pre></td></tr></table></figure><h3 id="6-3-2-è‡ªå®šä¹‰-GlobalFilter">6.3.2 è‡ªå®šä¹‰ GlobalFilter</h3><p>ç›´æ¥å®ç°<code>GlobalFilter</code>å’Œ<code>Ordered</code>æ¥å£ï¼Œä½œç”¨äºæ‰€æœ‰è·¯ç”±ï¼Œæ— éœ€é…ç½®ï¼Œé€‚åˆå…¨å±€é€»è¾‘ï¼ˆå¦‚ç™»å½•æ ¡éªŒï¼‰ã€‚</p><h4 id="ç¤ºä¾‹ï¼šç®€å•æ‹¦æˆªè¿‡æ»¤å™¨">ç¤ºä¾‹ï¼šç®€å•æ‹¦æˆªè¿‡æ»¤å™¨</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthGlobalFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GlobalFilter</span>, Ordered &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;<br>        <span class="hljs-comment">// æ‹¦æˆªæœªç™»å½•è¯·æ±‚</span><br>        System.out.println(<span class="hljs-string">&quot;æœªç™»å½•ï¼Œæ‹¦æˆªè¯·æ±‚&quot;</span>);<br>        <span class="hljs-type">ServerHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> exchange.getResponse();<br>        response.setRawStatusCode(<span class="hljs-number">401</span>); <span class="hljs-comment">// 401æœªæˆæƒ</span><br>        <span class="hljs-keyword">return</span> response.setComplete(); <span class="hljs-comment">// ç»ˆæ­¢è¯·æ±‚</span><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// æ‰§è¡Œé¡ºåºï¼š0ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="6-4-å®æˆ˜ï¼šç½‘å…³ç™»å½•æ ¡éªŒï¼ˆåŸºäº-JWTï¼‰">6.4 å®æˆ˜ï¼šç½‘å…³ç™»å½•æ ¡éªŒï¼ˆåŸºäº JWTï¼‰</h2><p>åˆ©ç”¨<code>GlobalFilter</code>å®ç° JWT æ ¡éªŒï¼Œæ ¸å¿ƒæµç¨‹ï¼š<strong>æ’é™¤ç™½åå•â†’è·å– tokenâ†’æ ¡éªŒ tokenâ†’ä¼ é€’ç”¨æˆ·ä¿¡æ¯â†’æ”¾è¡Œ</strong>ã€‚</p><h3 id="6-4-1-å‡†å¤‡-JWT-å·¥å…·">6.4.1 å‡†å¤‡ JWT å·¥å…·</h3><p>ä»<code>hm-service</code>æ‹·è´ JWT ç›¸å…³å·¥å…·åˆ°ç½‘å…³æ¨¡å—ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb5b1dff52.png" alt="image"></p><ul><li><code>JwtTool</code>ï¼šJWT ç”Ÿæˆã€è§£æå·¥å…·ï¼›</li><li><code>JwtProperties</code>ï¼šJWT é…ç½®ï¼ˆç§˜é’¥ã€è¿‡æœŸæ—¶é—´ï¼‰ï¼›</li><li><code>AuthProperties</code>ï¼šç™½åå•é…ç½®ï¼ˆæ— éœ€æ ¡éªŒçš„è·¯å¾„ï¼‰ï¼›</li><li>ç§˜é’¥æ–‡ä»¶<code>hmall.jks</code>ã€‚</li></ul><p><strong>é…ç½® yaml å‚æ•°</strong>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">hm:</span><br>  <span class="hljs-attr">jwt:</span><br>    <span class="hljs-attr">location:</span> <span class="hljs-string">classpath:hmall.jks</span> <span class="hljs-comment"># ç§˜é’¥æ–‡ä»¶è·¯å¾„</span><br>    <span class="hljs-attr">alias:</span> <span class="hljs-string">hmall</span> <span class="hljs-comment"># ç§˜é’¥åˆ«å</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">hmall123</span> <span class="hljs-comment"># ç§˜é’¥å¯†ç </span><br>    <span class="hljs-attr">tokenTTL:</span> <span class="hljs-string">30m</span> <span class="hljs-comment"># tokenæœ‰æ•ˆæœŸ</span><br>  <span class="hljs-attr">auth:</span><br>    <span class="hljs-attr">excludePaths:</span> <span class="hljs-comment"># ç™½åå•è·¯å¾„ï¼ˆæ— éœ€ç™»å½•ï¼‰</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/search/**</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/users/login</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/items/**</span><br></code></pre></td></tr></table></figure><h3 id="6-4-2-å®ç°ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨">6.4.2 å®ç°ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨</h3><p><img src="https://a1.boltp.com/2025/09/21/68cfb5f67cb71.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.gateway.filter;<br><br><span class="hljs-keyword">import</span> com.hmall.common.exception.UnauthorizedException;<br><span class="hljs-keyword">import</span> com.hmall.common.utils.CollUtils;<br><span class="hljs-keyword">import</span> com.hmall.gateway.config.AuthProperties;<br><span class="hljs-keyword">import</span> com.hmall.gateway.util.JwtTool;<br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;<br><span class="hljs-keyword">import</span> org.springframework.core.Ordered;<br><span class="hljs-keyword">import</span> org.springframework.http.server.reactive.ServerHttpRequest;<br><span class="hljs-keyword">import</span> org.springframework.http.server.reactive.ServerHttpResponse;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> org.springframework.util.AntPathMatcher;<br><span class="hljs-keyword">import</span> org.springframework.web.server.ServerWebExchange;<br><span class="hljs-keyword">import</span> reactor.core.publisher.Mono;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-meta">@EnableConfigurationProperties(AuthProperties.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthGlobalFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GlobalFilter</span>, Ordered &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> JwtTool jwtTool;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AuthProperties authProperties;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AntPathMatcher</span> <span class="hljs-variable">antPathMatcher</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AntPathMatcher</span>(); <span class="hljs-comment">// è·¯å¾„åŒ¹é…å·¥å…·</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Mono&lt;Void&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> &#123;<br>        <span class="hljs-comment">// 1. æ’é™¤ç™½åå•è·¯å¾„</span><br>        <span class="hljs-type">ServerHttpRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> exchange.getRequest();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> request.getPath().toString();<br>        <span class="hljs-keyword">if</span> (isExclude(path)) &#123;<br>            <span class="hljs-keyword">return</span> chain.filter(exchange); <span class="hljs-comment">// æ”¾è¡Œ</span><br>        &#125;<br><br>        <span class="hljs-comment">// 2. è·å–è¯·æ±‚å¤´ä¸­çš„token</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">if</span> (!CollUtils.isEmpty(request.getHeaders().get(<span class="hljs-string">&quot;authorization&quot;</span>))) &#123;<br>            token = request.getHeaders().get(<span class="hljs-string">&quot;authorization&quot;</span>).get(<span class="hljs-number">0</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// 3. æ ¡éªŒtoken</span><br>        Long userId;<br>        <span class="hljs-keyword">try</span> &#123;<br>            userId = jwtTool.parseToken(token); <span class="hljs-comment">// è§£ætokenè·å–ç”¨æˆ·ID</span><br>        &#125; <span class="hljs-keyword">catch</span> (UnauthorizedException e) &#123;<br>            <span class="hljs-comment">// æ ¡éªŒå¤±è´¥ï¼Œè¿”å›401</span><br>            <span class="hljs-type">ServerHttpResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> exchange.getResponse();<br>            response.setRawStatusCode(<span class="hljs-number">401</span>);<br>            <span class="hljs-keyword">return</span> response.setComplete();<br>        &#125;<br><br>        <span class="hljs-comment">// 4. ä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼ˆåç»­è¡¥å……ï¼‰</span><br>        System.out.println(<span class="hljs-string">&quot;ç™»å½•ç”¨æˆ·IDï¼š&quot;</span> + userId);<br><br>        <span class="hljs-comment">// 5. æ”¾è¡Œ</span><br>        <span class="hljs-keyword">return</span> chain.filter(exchange);<br>    &#125;<br><br>    <span class="hljs-comment">// åˆ¤æ–­è·¯å¾„æ˜¯å¦åœ¨ç™½åå•ä¸­</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isExclude</span><span class="hljs-params">(String path)</span> &#123;<br>        <span class="hljs-keyword">for</span> (String pattern : authProperties.getExcludePaths()) &#123;<br>            <span class="hljs-keyword">if</span> (antPathMatcher.match(pattern, path)) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// ä¼˜å…ˆæ‰§è¡Œ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-4-3-æµ‹è¯•é‰´æƒæ•ˆæœ">6.4.3 æµ‹è¯•é‰´æƒæ•ˆæœ</h3><ol><li><p><strong>å¯åŠ¨æœåŠ¡</strong>ï¼šç½‘å…³ã€ç”¨æˆ·æœåŠ¡ã€å•†å“æœåŠ¡ï¼›</p></li><li><p>æµ‹è¯•ç™½åå•è·¯å¾„ï¼šè®¿é—® <a href="http://localhost:8080/items/1">http://localhost:8080/items/1</a> ï¼Œæœªç™»å½•å¯æ­£å¸¸è¿”å›æ•°æ®ï¼›</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb62607d6f.png" alt="image"></p></li><li><p>æµ‹è¯•å—ä¿æŠ¤è·¯å¾„ï¼šè®¿é—® <a href="http://localhost:8080/carts">http://localhost:8080/carts</a> ï¼Œæœªç™»å½•è¿”å› 401ï¼›</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb635ad2d3.png" alt="image"></p></li></ol><h2 id="6-5-å¾®æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯">6.5 å¾®æœåŠ¡è·å–ç”¨æˆ·ä¿¡æ¯</h2><p>ç½‘å…³æ ¡éªŒé€šè¿‡åï¼Œéœ€å°†ç”¨æˆ·ä¿¡æ¯ä¼ é€’ç»™å¾®æœåŠ¡ã€‚é€šè¿‡<strong>è¯·æ±‚å¤´ + æ‹¦æˆªå™¨ + ThreadLocal</strong>å®ç°ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb66e86c9b.png" alt="image"></p><ul><li>ç½‘å…³ï¼šå°†ç”¨æˆ· ID å­˜å…¥è¯·æ±‚å¤´ï¼›</li><li>å¾®æœåŠ¡ï¼šé€šè¿‡æ‹¦æˆªå™¨è¯»å–è¯·æ±‚å¤´ï¼Œå­˜å…¥ ThreadLocal ä¾›ä¸šåŠ¡ä½¿ç”¨ã€‚</li></ul><h3 id="6-5-1-ç½‘å…³ä¼ é€’ç”¨æˆ·ä¿¡æ¯">6.5.1 ç½‘å…³ä¼ é€’ç”¨æˆ·ä¿¡æ¯</h3><p>ä¿®æ”¹ç™»å½•æ ¡éªŒæ‹¦æˆªå™¨çš„å¤„ç†é€»è¾‘ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°è¯·æ±‚å¤´ä¸­ï¼š</p><h3 id="image6-5-2-å¾®æœåŠ¡æ‹¦æˆªå™¨è·å–ç”¨æˆ·"><img src="https://a1.boltp.com/2025/09/21/68cfb6a31923d.png" alt="image">6.5.2 å¾®æœåŠ¡æ‹¦æˆªå™¨è·å–ç”¨æˆ·</h3><p>åœ¨<code>hm-common</code>æ¨¡å—å®ç°æ‹¦æˆªå™¨ï¼Œç»Ÿä¸€å¤„ç†ç”¨æˆ·ä¿¡æ¯ï¼ˆæ‰€æœ‰å¾®æœåŠ¡å¤ç”¨ï¼‰ã€‚</p><h4 id="æ­¥éª¤-1ï¼šThreadLocal-å·¥å…·ç±»">æ­¥éª¤ 1ï¼šThreadLocal å·¥å…·ç±»</h4><p><code>hm-common</code>ä¸­å·²æä¾›<code>UserContext</code>ï¼Œç”¨äºå­˜å‚¨å½“å‰çº¿ç¨‹çš„ç”¨æˆ·ä¿¡æ¯ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb6c7f0bff.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cfb6e3404c5.png" alt="image"></p><h4 id="æ­¥éª¤-2ï¼šå®ç°æ‹¦æˆªå™¨">æ­¥éª¤ 2ï¼šå®ç°æ‹¦æˆªå™¨</h4><p><img src="https://a1.boltp.com/2025/09/21/68cfb76e623a2.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.common.interceptor;<br><br><span class="hljs-keyword">import</span> cn.hutool.core.util.StrUtil;<br><span class="hljs-keyword">import</span> com.hmall.common.utils.UserContext;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;<br><br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;<br><span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInfoInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> &#123;<br>        <span class="hljs-comment">// è¯»å–è¯·æ±‚å¤´ä¸­çš„ç”¨æˆ·ID</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">&quot;user-info&quot;</span>);<br>        <span class="hljs-keyword">if</span> (StrUtil.isNotBlank(userId)) &#123;<br>            UserContext.setUser(Long.valueOf(userId)); <span class="hljs-comment">// å­˜å…¥ThreadLocal</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ”¾è¡Œ</span><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> &#123;<br>        UserContext.removeUser(); <span class="hljs-comment">// æ¸…é™¤ThreadLocal</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ­¥éª¤-3ï¼šè‡ªåŠ¨è£…é…æ‹¦æˆªå™¨">æ­¥éª¤ 3ï¼šè‡ªåŠ¨è£…é…æ‹¦æˆªå™¨</h4><p>åœ¨<code>hm-common</code>ä¸­é…ç½®æ‹¦æˆªå™¨ï¼Œå¹¶é€šè¿‡ SpringBoot è‡ªåŠ¨è£…é…ç”Ÿæ•ˆï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb7831ac24.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.common.config;<br><br><span class="hljs-keyword">import</span> com.hmall.common.interceptor.UserInfoInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnClass;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.DispatcherServlet;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;<br><span class="hljs-keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConditionalOnClass(DispatcherServlet.class)</span> <span class="hljs-comment">// ä»…å½“å­˜åœ¨SpringMVCæ—¶ç”Ÿæ•ˆ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>        registry.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserInfoInterceptor</span>()); <span class="hljs-comment">// æ³¨å†Œæ‹¦æˆªå™¨</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ­¥éª¤-4ï¼šé…ç½®è‡ªåŠ¨è£…é…">æ­¥éª¤ 4ï¼šé…ç½®è‡ªåŠ¨è£…é…</h4><p>åœ¨<code>hm-common</code>çš„<code>resources/META-INF/spring.factories</code>ä¸­æ·»åŠ é…ç½®ï¼Œç¡®ä¿å¾®æœåŠ¡èƒ½æ‰«æåˆ°ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb7a25968d.png" alt="image"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="hljs-string">\</span><br><span class="hljs-string">  com.hmall.common.config.MvcConfig</span><br></code></pre></td></tr></table></figure><h3 id="6-5-3-æ¢å¤ä¸šåŠ¡ä»£ç ">6.5.3 æ¢å¤ä¸šåŠ¡ä»£ç </h3><p>ä»¥è´­ç‰©è½¦æœåŠ¡ä¸ºä¾‹ï¼Œæ¢å¤<code>CartServiceImpl</code>ä¸­è¯»å–å½“å‰ç”¨æˆ·çš„é€»è¾‘ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfb7cd8ae75.png" alt="image"></p><h2 id="6-6-OpenFeign-ä¼ é€’ç”¨æˆ·ä¿¡æ¯">6.6 OpenFeign ä¼ é€’ç”¨æˆ·ä¿¡æ¯</h2><p>å¾®æœåŠ¡é—´é€šè¿‡ OpenFeign è°ƒç”¨æ—¶ï¼Œä¸ç»è¿‡ç½‘å…³ï¼Œéœ€æ‰‹åŠ¨ä¼ é€’ç”¨æˆ·ä¿¡æ¯ã€‚åˆ©ç”¨ Feign çš„<code>RequestInterceptor</code>å®ç°è‡ªåŠ¨æºå¸¦è¯·æ±‚å¤´ã€‚</p><h3 id="6-6-1-å®ç°-Feign-æ‹¦æˆªå™¨">6.6.1 å®ç° Feign æ‹¦æˆªå™¨</h3><p>åœ¨<code>hm-api</code>æ¨¡å—çš„<code>DefaultFeignConfig</code>ä¸­æ·»åŠ æ‹¦æˆªå™¨ï¼Œè‡ªåŠ¨å°†ç”¨æˆ· ID å­˜å…¥è¯·æ±‚å¤´ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.api.config;<br><br><span class="hljs-keyword">import</span> com.hmall.common.utils.UserContext;<br><span class="hljs-keyword">import</span> feign.RequestInterceptor;<br><span class="hljs-keyword">import</span> feign.RequestTemplate;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultFeignConfig</span> &#123;<br>    <span class="hljs-comment">// å…¶ä»–é…ç½®ï¼ˆå¦‚æ—¥å¿—çº§åˆ«ï¼‰...</span><br><br>    <span class="hljs-comment">// Feignè¯·æ±‚æ‹¦æˆªå™¨ï¼šè‡ªåŠ¨ä¼ é€’ç”¨æˆ·ä¿¡æ¯</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> RequestInterceptor <span class="hljs-title function_">userInfoRequestInterceptor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestInterceptor</span>() &#123;<br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">apply</span><span class="hljs-params">(RequestTemplate template)</span> &#123;<br>                <span class="hljs-comment">// ä»ThreadLocalè·å–ç”¨æˆ·ID</span><br>                <span class="hljs-type">Long</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> UserContext.getUser();<br>                <span class="hljs-keyword">if</span> (userId != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-comment">// æ·»åŠ è¯·æ±‚å¤´</span><br>                    template.header(<span class="hljs-string">&quot;user-info&quot;</span>, userId.toString());<br>                &#125;<br>            &#125;<br>        &#125;;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="6-6-2-æµ‹è¯•å¾®æœåŠ¡é—´è°ƒç”¨">6.6.2 æµ‹è¯•å¾®æœåŠ¡é—´è°ƒç”¨</h3><p>ä»¥ â€œä¸‹å•ä¸šåŠ¡â€ ä¸ºä¾‹ï¼š</p><ol><li>å‰ç«¯è¯·æ±‚è®¢å•æœåŠ¡ï¼ˆ<code>trade-service</code>ï¼‰åˆ›å»ºè®¢å•ï¼›</li><li>è®¢å•æœåŠ¡é€šè¿‡ OpenFeign è°ƒç”¨è´­ç‰©è½¦æœåŠ¡ï¼ˆ<code>cart-service</code>ï¼‰æ¸…ç†è´­ç‰©è½¦ï¼›</li><li>è´­ç‰©è½¦æœåŠ¡é€šè¿‡æ‹¦æˆªå™¨è¯»å–<code>user-info</code>è¯·æ±‚å¤´ï¼Œè·å–å½“å‰ç”¨æˆ· IDï¼Œå®Œæˆæ¸…ç†ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cfb84be04ee.png" alt="image"></p><p>æ­¤æ—¶ï¼Œå¾®æœåŠ¡é—´è°ƒç”¨å¯æ­£å¸¸è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ— éœ€é¢å¤–ä¼ é€’å‚æ•°ã€‚</p><h1>7. é…ç½®ç®¡ç†</h1><h2 id="7-1-é…ç½®ç®¡ç†æ¦‚è¿°">7.1 é…ç½®ç®¡ç†æ¦‚è¿°</h2><h3 id="7-1-1-å¾®æœåŠ¡é…ç½®çš„æ ¸å¿ƒç—›ç‚¹">7.1.1 å¾®æœåŠ¡é…ç½®çš„æ ¸å¿ƒç—›ç‚¹</h3><p>å‰æ–‡è§£å†³äº†è¿œç¨‹è°ƒç”¨ã€æœåŠ¡æ³¨å†Œå‘ç°ã€ç½‘å…³è·¯ç”±ç­‰é—®é¢˜ï¼Œä½†ä»å­˜åœ¨ä¸‰å¤§é…ç½®ç›¸å…³ç—›ç‚¹ï¼š</p><ul><li><strong>é…ç½®é‡å¤</strong>ï¼šæ¯ä¸ªå¾®æœåŠ¡éƒ½åŒ…å«æ•°æ®åº“ã€æ—¥å¿—ã€Swagger ç­‰é‡å¤é…ç½®ï¼Œç»´æŠ¤æˆæœ¬é«˜ï¼›</li><li><strong>ä¿®æ”¹ç¹ç</strong>ï¼šé…ç½®å†™æ­»åœ¨æœ¬åœ°æ–‡ä»¶ï¼Œä¿®æ”¹åéœ€é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆï¼›</li><li><strong>è·¯ç”±é™æ€</strong>ï¼šç½‘å…³è·¯ç”±é…ç½®å›ºåŒ–ï¼Œå˜æ›´éœ€é‡å¯ç½‘å…³ã€‚</li></ul><h3 id="7-1-2-Nacos-é…ç½®ä¸­å¿ƒè§£å†³æ–¹æ¡ˆ">7.1.2 Nacos é…ç½®ä¸­å¿ƒè§£å†³æ–¹æ¡ˆ</h3><p>Nacos å…¼å…·<strong>æœåŠ¡æ³¨å†Œå‘ç°</strong>å’Œ<strong>é…ç½®ç®¡ç†</strong>åŒé‡èƒ½åŠ›ï¼Œå¯å®ç°é…ç½®çš„é›†ä¸­å­˜å‚¨ã€åŠ¨æ€æ›´æ–°ï¼Œä¸”æ— éœ€é‡å¯æœåŠ¡ã€‚å…¶æ ¸å¿ƒä»·å€¼ï¼š</p><ul><li>é›†ä¸­ç®¡ç†å…±äº«é…ç½®ï¼Œæ¶ˆé™¤é‡å¤ï¼›</li><li>é…ç½®å˜æ›´å®æ—¶æ¨é€ï¼Œå®ç°çƒ­æ›´æ–°ï¼›</li><li>æ”¯æŒç½‘å…³åŠ¨æ€è·¯ç”±ï¼Œæ— éœ€é‡å¯ç½‘å…³ã€‚</li></ul><p><img src="https://a1.boltp.com/2025/09/21/68cfba2618f96.png" alt="image"></p><h2 id="7-2-é…ç½®å…±äº«ï¼šæ¶ˆé™¤é‡å¤é…ç½®">7.2 é…ç½®å…±äº«ï¼šæ¶ˆé™¤é‡å¤é…ç½®</h2><p>é…ç½®å…±äº«æ˜¯å°†å¤šä¸ªå¾®æœåŠ¡çš„é€šç”¨é…ç½®ï¼ˆå¦‚æ•°æ®åº“ã€æ—¥å¿—ï¼‰æŠ½å–åˆ° Nacos é›†ä¸­ç®¡ç†ï¼Œå¾®æœåŠ¡æŒ‰éœ€æ‹‰å–åˆå¹¶ã€‚ä»¥<code>cart-service</code>ä¸ºä¾‹ï¼Œåˆ†ä¸¤æ­¥å®ç°ï¼š</p><h3 id="7-2-1-æ­¥éª¤-1ï¼šåœ¨-Nacos-æ·»åŠ å…±äº«é…ç½®">7.2.1 æ­¥éª¤ 1ï¼šåœ¨ Nacos æ·»åŠ å…±äº«é…ç½®</h3><p>è¯†åˆ«<code>cart-service</code>ä¸­çš„é‡å¤é…ç½®ï¼Œåœ¨ Nacos æ§åˆ¶å°åˆ›å»ºå¯¹åº”å…±äº«é…ç½®æ–‡ä»¶ï¼ˆ<code>é…ç½®ç®¡ç†â†’é…ç½®åˆ—è¡¨â†’+</code>ï¼‰ã€‚</p><h4 id="1-å…±äº«æ•°æ®åº“é…ç½®ï¼ˆdataIdï¼šshared-jdbc-yamlï¼‰">1. å…±äº«æ•°æ®åº“é…ç½®ï¼ˆdataIdï¼šshared-jdbc.yamlï¼‰</h4><p><img src="https://a1.boltp.com/2025/09/21/68cfbacca8d34.png" alt="image"></p><p><img src="https://a1.boltp.com/2025/09/21/68cfbaccb5379.png" alt="image"></p><p><strong>é…ç½®å†…å®¹</strong>ï¼ˆæ”¯æŒåŠ¨æ€å‚æ•°ï¼Œé»˜è®¤å€¼ + è¦†ç›–æœºåˆ¶ï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://$&#123;hm.db.host:192.168.150.101&#125;:$&#123;hm.db.port:3306&#125;/$&#123;hm.db.database&#125;?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">$&#123;hm.db.un:root&#125;</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">$&#123;hm.db.pw:123&#125;</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">default-enum-type-handler:</span> <span class="hljs-string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">update-strategy:</span> <span class="hljs-string">not_null</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">auto</span><br></code></pre></td></tr></table></figure><h4 id="2-å…±äº«æ—¥å¿—é…ç½®ï¼ˆdataIdï¼šshared-log-yamlï¼‰">2. å…±äº«æ—¥å¿—é…ç½®ï¼ˆdataIdï¼šshared-log.yamlï¼‰</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.hmall:</span> <span class="hljs-string">debug</span><br>  <span class="hljs-attr">pattern:</span><br>    <span class="hljs-attr">dateformat:</span> <span class="hljs-string">HH:mm:ss:SSS</span><br>  <span class="hljs-attr">file:</span><br>    <span class="hljs-attr">path:</span> <span class="hljs-string">&quot;logs/$&#123;spring.application.name&#125;&quot;</span><br></code></pre></td></tr></table></figure><h4 id="3-å…±äº«-Swagger-é…ç½®ï¼ˆdataIdï¼šshared-swagger-yamlï¼‰">3. å…±äº« Swagger é…ç½®ï¼ˆdataIdï¼šshared-swagger.yamlï¼‰</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">knife4j:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">openapi:</span><br>    <span class="hljs-attr">title:</span> <span class="hljs-string">$&#123;hm.swagger.title:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£&#125;</span><br>    <span class="hljs-attr">description:</span> <span class="hljs-string">$&#123;hm.swagger.description:é»‘é©¬å•†åŸæ¥å£æ–‡æ¡£&#125;</span><br>    <span class="hljs-attr">email:</span> <span class="hljs-string">$&#123;hm.swagger.email:zhanghuyi@itcast.cn&#125;</span><br>    <span class="hljs-attr">concat:</span> <span class="hljs-string">$&#123;hm.swagger.concat:è™å“¥&#125;</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">https://www.itcast.cn</span><br>    <span class="hljs-attr">version:</span> <span class="hljs-string">v1.0.0</span><br>    <span class="hljs-attr">group:</span><br>      <span class="hljs-attr">default:</span><br>        <span class="hljs-attr">group-name:</span> <span class="hljs-string">default</span><br>        <span class="hljs-attr">api-rule:</span> <span class="hljs-string">package</span><br>        <span class="hljs-attr">api-rule-resources:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-string">$&#123;hm.swagger.package&#125;</span><br></code></pre></td></tr></table></figure><h3 id="7-2-2-æ­¥éª¤-2ï¼šå¾®æœåŠ¡æ‹‰å–å…±äº«é…ç½®">7.2.2 æ­¥éª¤ 2ï¼šå¾®æœåŠ¡æ‹‰å–å…±äº«é…ç½®</h3><p>å¾®æœåŠ¡éœ€é€šè¿‡<code>bootstrap.yaml</code>ï¼ˆå¼•å¯¼é˜¶æ®µåŠ è½½ï¼‰æŒ‡å®š Nacos åœ°å€åŠå…±äº«é…ç½®ï¼Œå†åˆå¹¶æœ¬åœ°<code>application.yaml</code>ã€‚</p><h4 id="1-å¼•å…¥ä¾èµ–">1. å¼•å…¥ä¾èµ–</h4><p>åœ¨<code>cart-service</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ  Nacos é…ç½®åŠ bootstrap ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Nacosé…ç½®ç®¡ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- åŠ è½½bootstrapæ–‡ä»¶ï¼ˆä¼˜å…ˆçº§é«˜äºapplication.yamlï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-åˆ›å»º-bootstrap-yaml">2. åˆ›å»º bootstrap.yaml</h4><p><code>bootstrap.yaml</code>åœ¨ SpringCloud å¼•å¯¼é˜¶æ®µåŠ è½½ï¼Œç”¨äºé…ç½® Nacos åœ°å€åŠå…±äº«é…ç½®ï¼ˆè§£å†³ â€œå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹â€ çš„ Nacos åœ°å€è·å–é—®é¢˜ï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">cart-service</span> <span class="hljs-comment"># æœåŠ¡å</span><br>  <span class="hljs-attr">profiles:</span><br>    <span class="hljs-attr">active:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># æ¿€æ´»çš„ç¯å¢ƒ</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># Nacosåœ°å€ï¼ˆUbuntuè™šæ‹ŸæœºIPï¼‰</span><br>      <span class="hljs-attr">config:</span><br>        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span> <span class="hljs-comment"># é…ç½®æ–‡ä»¶æ ¼å¼</span><br>        <span class="hljs-attr">shared-configs:</span> <span class="hljs-comment"># æ‹‰å–çš„å…±äº«é…ç½®åˆ—è¡¨</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-jdbc.yaml</span> <span class="hljs-comment"># æ•°æ®åº“+MyBatisé…ç½®</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-log.yaml</span> <span class="hljs-comment"># æ—¥å¿—é…ç½®</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-swagger.yaml</span> <span class="hljs-comment"># Swaggeré…ç½®</span><br></code></pre></td></tr></table></figure><h4 id="3-ç®€åŒ–æœ¬åœ°-application-yaml">3. ç®€åŒ–æœ¬åœ° application.yaml</h4><p>åˆ é™¤é‡å¤é…ç½®ï¼Œä»…ä¿ç•™æœåŠ¡ç‰¹æœ‰é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8082</span> <span class="hljs-comment"># æœåŠ¡ç«¯å£</span><br><span class="hljs-attr">feign:</span><br>  <span class="hljs-attr">okhttp:</span><br>    <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¼€å¯Feignçš„OKHttpè¿æ¥æ± </span><br><span class="hljs-attr">hm:</span><br>  <span class="hljs-attr">swagger:</span><br>    <span class="hljs-attr">title:</span> <span class="hljs-string">è´­ç‰©è½¦æœåŠ¡æ¥å£æ–‡æ¡£</span> <span class="hljs-comment"># è¦†ç›–å…±äº«é…ç½®çš„title</span><br>    <span class="hljs-attr">package:</span> <span class="hljs-string">com.hmall.cart.controller</span> <span class="hljs-comment"># æ¥å£æ‰«æåŒ…</span><br>  <span class="hljs-attr">db:</span><br>    <span class="hljs-attr">database:</span> <span class="hljs-string">hm-cart</span> <span class="hljs-comment"># æ•°æ®åº“åï¼ˆå¯¹åº”shared-jdbcä¸­çš„$&#123;hm.db.database&#125;ï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="4-éªŒè¯æ•ˆæœ">4. éªŒè¯æ•ˆæœ</h4><p>é‡å¯<code>cart-service</code>ï¼ŒéªŒè¯æ•°æ®åº“è¿æ¥ã€æ—¥å¿—è¾“å‡ºã€Swagger æ–‡æ¡£å‡æ­£å¸¸ç”Ÿæ•ˆï¼Œè¯´æ˜å…±äº«é…ç½®æ‹‰å–æˆåŠŸã€‚</p><h3 id="7-2-3-å…³é”®åŸç†ï¼šé…ç½®åŠ è½½é¡ºåº">7.2.3 å…³é”®åŸç†ï¼šé…ç½®åŠ è½½é¡ºåº</h3><p>SpringCloud é…ç½®åŠ è½½ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š</p><ol><li>Nacos å…±äº«é…ç½®ï¼ˆ<code>shared-configs</code>ï¼‰ï¼›</li><li>Nacos æœåŠ¡ç‰¹æœ‰é…ç½®ï¼ˆ<code>[æœåŠ¡å]-[ç¯å¢ƒ].yaml</code>ï¼‰ï¼›</li><li>æœ¬åœ°<code>application-[ç¯å¢ƒ].yaml</code>ï¼›</li><li>æœ¬åœ°<code>application.yaml</code>ã€‚</li></ol><p><img src="https://a1.boltp.com/2025/09/21/68cfbb797a214.png" alt="image"></p><h2 id="7-3-é…ç½®çƒ­æ›´æ–°ï¼šæ— éœ€é‡å¯ç”Ÿæ•ˆ">7.3 é…ç½®çƒ­æ›´æ–°ï¼šæ— éœ€é‡å¯ç”Ÿæ•ˆ</h2><p>é…ç½®çƒ­æ›´æ–°æŒ‡ Nacos é…ç½®ä¿®æ”¹åï¼Œå¾®æœåŠ¡å®æ—¶æ„ŸçŸ¥å¹¶åº”ç”¨æ–°é…ç½®ï¼Œæ— éœ€é‡å¯ã€‚ä»¥ â€œè´­ç‰©è½¦ä¸Šé™â€ ä¸ºä¾‹å®ç°ã€‚</p><h3 id="7-3-1-æ­¥éª¤-1ï¼šåœ¨-Nacos-æ·»åŠ çƒ­æ›´æ–°é…ç½®">7.3.1 æ­¥éª¤ 1ï¼šåœ¨ Nacos æ·»åŠ çƒ­æ›´æ–°é…ç½®</h3><p>åˆ›å»ºæœåŠ¡ç‰¹æœ‰é…ç½®ï¼ˆdataIdï¼š<code>cart-service.yaml</code>ï¼Œæ‰€æœ‰ç¯å¢ƒå…±äº«ï¼‰ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbbfb8a9a5.png" alt="image"></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">hm:</span><br>  <span class="hljs-attr">cart:</span><br>    <span class="hljs-attr">maxAmount:</span> <span class="hljs-number">1</span> <span class="hljs-comment"># è´­ç‰©è½¦å•†å“æ•°é‡ä¸Šé™ï¼ˆåˆå§‹å€¼1ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="7-3-2-æ­¥éª¤-2ï¼šå¾®æœåŠ¡è¯»å–çƒ­æ›´æ–°é…ç½®">7.3.2 æ­¥éª¤ 2ï¼šå¾®æœåŠ¡è¯»å–çƒ­æ›´æ–°é…ç½®</h3><p>é€šè¿‡<code>@ConfigurationProperties</code>æ³¨è§£ç»‘å®šé…ç½®ï¼Œè‡ªåŠ¨æ”¯æŒçƒ­æ›´æ–°ï¼ˆæ— éœ€<code>@RefreshScope</code>ï¼‰ã€‚</p><h4 id="1-åˆ›å»ºé…ç½®ç»‘å®šç±»">1. åˆ›å»ºé…ç½®ç»‘å®šç±»</h4><p><img src="https://a1.boltp.com/2025/09/21/68cfbc2256eab.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.cart.config;<br><br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;hm.cart&quot;)</span> <span class="hljs-comment">// ç»‘å®šé…ç½®å‰ç¼€</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CartProperties</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer maxAmount; <span class="hljs-comment">// å¯¹åº”nacosä¸­çš„hm.cart.maxAmount</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-ä¸šåŠ¡ä¸­ä½¿ç”¨é…ç½®">2. ä¸šåŠ¡ä¸­ä½¿ç”¨é…ç½®</h4><p>ä¿®æ”¹<code>CartServiceImpl</code>ï¼Œæ›¿æ¢ç¡¬ç¼–ç çš„è´­ç‰©è½¦ä¸Šé™ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbc3e3c94f.png" alt="image"></p><h3 id="7-3-3-æ­¥éª¤-3ï¼šæµ‹è¯•çƒ­æ›´æ–°æ•ˆæœ">7.3.3 æ­¥éª¤ 3ï¼šæµ‹è¯•çƒ­æ›´æ–°æ•ˆæœ</h3><ol><li><p>åˆå§‹æµ‹è¯•ï¼šæ·»åŠ  2 ä¸ªå•†å“åˆ°è´­ç‰©è½¦ï¼Œè§¦å‘ â€œè¶…è¿‡ä¸Šé™ 1â€ çš„å¼‚å¸¸ï¼›</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbca1b97ae.png" alt="image"></p></li><li><p>ä¿®æ”¹ Nacos é…ç½®ï¼šå°†<code>maxAmount</code>æ”¹ä¸º 5ï¼›</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbca20b6c7.png" alt="image"></p></li><li><p>æ— éœ€é‡å¯æµ‹è¯•ï¼šå†æ¬¡æ·»åŠ å•†å“ï¼Œå¯æˆåŠŸæ·»åŠ ï¼ˆä¸Šé™å˜ä¸º 5ï¼‰ï¼Œçƒ­æ›´æ–°ç”Ÿæ•ˆã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbca2d8b25.png" alt="image"></p></li></ol><h2 id="7-4-åŠ¨æ€è·¯ç”±ï¼šç½‘å…³è·¯ç”±çƒ­æ›´æ–°">7.4 åŠ¨æ€è·¯ç”±ï¼šç½‘å…³è·¯ç”±çƒ­æ›´æ–°</h2><p>ç½‘å…³é»˜è®¤å°†è·¯ç”±é…ç½®ç¼“å­˜åˆ°å†…å­˜ï¼Œæ— æ³•é€šè¿‡æ™®é€šçƒ­æ›´æ–°ä¿®æ”¹ã€‚éœ€æ‰‹åŠ¨ç›‘å¬ Nacos é…ç½®å˜æ›´ï¼Œæ›´æ–°ç½‘å…³è·¯ç”±è¡¨ã€‚</p><h3 id="7-4-1-æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ">7.4.1 æ ¸å¿ƒéš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h3><table><thead><tr><th>éš¾ç‚¹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç›‘å¬ Nacos é…ç½®å˜æ›´</td><td>åˆ©ç”¨<code>NacosConfigManager</code>è·å–<code>ConfigService</code>ï¼Œæ·»åŠ ç›‘å¬å™¨</td></tr><tr><td>æ›´æ–°ç½‘å…³è·¯ç”±è¡¨</td><td>åˆ©ç”¨<code>RouteDefinitionWriter</code>æ¥å£ä¿å­˜ / åˆ é™¤è·¯ç”±</td></tr></tbody></table><h3 id="7-4-2-æ­¥éª¤-1ï¼šç½‘å…³æ•´åˆ-Nacos-é…ç½®">7.4.2 æ­¥éª¤ 1ï¼šç½‘å…³æ•´åˆ Nacos é…ç½®</h3><h4 id="1-å¼•å…¥ä¾èµ–-2">1. å¼•å…¥ä¾èµ–</h4><p>åœ¨<code>hm-gateway</code>çš„<code>pom.xml</code>ä¸­æ·»åŠ ä¾èµ–ï¼ˆåŒå¾®æœåŠ¡é…ç½®å…±äº«ï¼‰ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- Nacosé…ç½®ç®¡ç† --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- åŠ è½½bootstrapæ–‡ä»¶ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-bootstrap<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-é…ç½®-bootstrap-yaml">2. é…ç½® bootstrap.yaml</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">gateway</span> <span class="hljs-comment"># ç½‘å…³æœåŠ¡å</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.150</span><span class="hljs-number">.101</span> <span class="hljs-comment"># Nacosåœ°å€</span><br>      <span class="hljs-attr">config:</span><br>        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span><br>        <span class="hljs-attr">shared-configs:</span><br>          <span class="hljs-bullet">-</span> <span class="hljs-attr">dataId:</span> <span class="hljs-string">shared-log.yaml</span> <span class="hljs-comment"># å…±äº«æ—¥å¿—é…ç½®</span><br></code></pre></td></tr></table></figure><h4 id="3-ç®€åŒ–-application-yaml">3. ç®€åŒ– application.yaml</h4><p>åˆ é™¤æœ¬åœ°è·¯ç”±é…ç½®ï¼Œä»…ä¿ç•™é‰´æƒç›¸å…³é…ç½®ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span> <span class="hljs-comment"># ç½‘å…³ç«¯å£</span><br><span class="hljs-attr">hm:</span><br>  <span class="hljs-attr">jwt:</span><br>    <span class="hljs-attr">location:</span> <span class="hljs-string">classpath:hmall.jks</span> <span class="hljs-comment"># ç§˜é’¥åœ°å€</span><br>    <span class="hljs-attr">alias:</span> <span class="hljs-string">hmall</span> <span class="hljs-comment"># ç§˜é’¥åˆ«å</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">hmall123</span> <span class="hljs-comment"># ç§˜é’¥å¯†ç </span><br>    <span class="hljs-attr">tokenTTL:</span> <span class="hljs-string">30m</span> <span class="hljs-comment"># ç™»å½•æœ‰æ•ˆæœŸ</span><br>  <span class="hljs-attr">auth:</span><br>    <span class="hljs-attr">excludePaths:</span> <span class="hljs-comment"># æ— éœ€ç™»å½•æ ¡éªŒçš„è·¯å¾„</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/search/**</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/users/login</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">/items/**</span><br></code></pre></td></tr></table></figure><h3 id="7-4-3-æ­¥éª¤-2ï¼šå®ç°åŠ¨æ€è·¯ç”±åŠ è½½å™¨">7.4.3 æ­¥éª¤ 2ï¼šå®ç°åŠ¨æ€è·¯ç”±åŠ è½½å™¨</h3><p>ç¼–å†™<code>DynamicRouteLoader</code>ç±»ï¼Œç›‘å¬ Nacos è·¯ç”±é…ç½®å¹¶æ›´æ–°ç½‘å…³è·¯ç”±è¡¨ã€‚</p><h4 id="1-åŠ¨æ€è·¯ç”±åŠ è½½å™¨ä»£ç ">1. åŠ¨æ€è·¯ç”±åŠ è½½å™¨ä»£ç </h4><p><img src="https://a1.boltp.com/2025/09/21/68cfbd2fec33d.png" alt="image"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hmall.gateway.route;<br><br><span class="hljs-keyword">import</span> cn.hutool.json.JSONUtil;<br><span class="hljs-keyword">import</span> com.alibaba.cloud.nacos.NacosConfigManager;<br><span class="hljs-keyword">import</span> com.alibaba.nacos.api.config.listener.Listener;<br><span class="hljs-keyword">import</span> com.alibaba.nacos.api.exception.NacosException;<br><span class="hljs-keyword">import</span> com.hmall.common.utils.CollUtils;<br><span class="hljs-keyword">import</span> lombok.RequiredArgsConstructor;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.springframework.cloud.gateway.route.RouteDefinition;<br><span class="hljs-keyword">import</span> org.springframework.cloud.gateway.route.RouteDefinitionWriter;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-keyword">import</span> reactor.core.publisher.Mono;<br><br><span class="hljs-keyword">import</span> javax.annotation.PostConstruct;<br><span class="hljs-keyword">import</span> java.util.HashSet;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.Set;<br><span class="hljs-keyword">import</span> java.util.concurrent.Executor;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicRouteLoader</span> &#123;<br><br>    <span class="hljs-comment">// è·¯ç”±æ›´æ–°å·¥å…·ï¼ˆSpringCloud Gatewayæä¾›ï¼‰</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RouteDefinitionWriter writer;<br>    <span class="hljs-comment">// Nacosé…ç½®ç®¡ç†ï¼ˆè‡ªåŠ¨è£…é…ï¼Œç”¨äºè·å–ConfigServiceï¼‰</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NacosConfigManager nacosConfigManager;<br><br>    <span class="hljs-comment">// Nacosä¸­è·¯ç”±é…ç½®çš„dataIdå’Œgroup</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">dataId</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;gateway-routes.json&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">group</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;DEFAULT_GROUP&quot;</span>;<br>    <span class="hljs-comment">// è®°å½•å·²åŠ è½½çš„è·¯ç”±IDï¼Œç”¨äºæ›´æ–°å‰åˆ é™¤æ—§è·¯ç”±</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Set&lt;String&gt; routeIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();<br><br>    <span class="hljs-comment">// é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œåˆå§‹åŒ–</span><br>    <span class="hljs-meta">@PostConstruct</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRouteConfigListener</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> NacosException &#123;<br>        <span class="hljs-comment">// 1. æ³¨å†Œç›‘å¬å™¨å¹¶é¦–æ¬¡æ‹‰å–é…ç½®ï¼ˆgetConfigAndSignListener=æ‹‰å–+ç›‘å¬ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">configInfo</span> <span class="hljs-operator">=</span> nacosConfigManager.getConfigService()<br>                .getConfigAndSignListener(dataId, group, <span class="hljs-number">5000</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Listener</span>() &#123;<br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">getExecutor</span><span class="hljs-params">()</span> &#123;<br>                        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤çº¿ç¨‹æ± </span><br>                    &#125;<br><br>                    <span class="hljs-comment">// é…ç½®å˜æ›´æ—¶è§¦å‘</span><br>                    <span class="hljs-meta">@Override</span><br>                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receiveConfigInfo</span><span class="hljs-params">(String configInfo)</span> &#123;<br>                        updateConfigInfo(configInfo);<br>                    &#125;<br>                &#125;);<br>        <span class="hljs-comment">// 2. é¦–æ¬¡å¯åŠ¨åŠ è½½è·¯ç”±</span><br>        updateConfigInfo(configInfo);<br>    &#125;<br><br>    <span class="hljs-comment">// è§£æé…ç½®å¹¶æ›´æ–°è·¯ç”±è¡¨</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateConfigInfo</span><span class="hljs-params">(String configInfo)</span> &#123;<br>        log.debug(<span class="hljs-string">&quot;ç›‘å¬åˆ°è·¯ç”±é…ç½®å˜æ›´ï¼š&#123;&#125;&quot;</span>, configInfo);<br>        <span class="hljs-comment">// 1. JSONååºåˆ—åŒ–ä¸ºRouteDefinitionåˆ—è¡¨</span><br>        List&lt;RouteDefinition&gt; routeDefinitions = JSONUtil.toList(configInfo, RouteDefinition.class);<br>        <span class="hljs-comment">// 2. æ¸…ç©ºæ—§è·¯ç”±</span><br>        routeIds.forEach(routeId -&gt; writer.delete(Mono.just(routeId)).subscribe());<br>        routeIds.clear();<br>        <span class="hljs-comment">// 3. åŠ è½½æ–°è·¯ç”±</span><br>        <span class="hljs-keyword">if</span> (CollUtils.isNotEmpty(routeDefinitions)) &#123;<br>            routeDefinitions.forEach(route -&gt; &#123;<br>                writer.save(Mono.just(route)).subscribe(); <span class="hljs-comment">// ä¿å­˜æ–°è·¯ç”±</span><br>                routeIds.add(route.getId()); <span class="hljs-comment">// è®°å½•è·¯ç”±ID</span><br>            &#125;);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="7-4-4-æ­¥éª¤-3ï¼šåœ¨-Nacos-æ·»åŠ è·¯ç”±é…ç½®">7.4.4 æ­¥éª¤ 3ï¼šåœ¨ Nacos æ·»åŠ è·¯ç”±é…ç½®</h3><p>åˆ›å»º JSON æ ¼å¼çš„è·¯ç”±é…ç½®ï¼ˆdataIdï¼š<code>gateway-routes.json</code>ï¼Œç±»å‹ï¼šJSONï¼‰ï¼š</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbda70d0a7.png" alt="image"></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;item&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;predicates&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Path&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_genkey_0&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/items/**&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;_genkey_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/search/**&quot;</span><span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;filters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lb://item-service&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;cart&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;predicates&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Path&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_genkey_0&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/carts/**&quot;</span><span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;filters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lb://cart-service&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;user&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;predicates&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Path&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_genkey_0&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/users/**&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">&quot;_genkey_1&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/addresses/**&quot;</span><span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;filters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lb://user-service&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;trade&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;predicates&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Path&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_genkey_0&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/orders/**&quot;</span><span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;filters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lb://trade-service&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pay&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;predicates&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Path&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;_genkey_0&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;/pay-orders/**&quot;</span><span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;filters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;uri&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;lb://pay-service&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">]</span><br></code></pre></td></tr></table></figure><h3 id="7-4-5-æ­¥éª¤-4ï¼šæµ‹è¯•åŠ¨æ€è·¯ç”±">7.4.5 æ­¥éª¤ 4ï¼šæµ‹è¯•åŠ¨æ€è·¯ç”±</h3><ol><li><p><strong>åˆå§‹æµ‹è¯•</strong>ï¼šå¯åŠ¨ç½‘å…³åï¼Œè®¿é—® <a href="http://localhost:8080/search/list%EF%BC%8C%E8%BF%94%E5%9B%9E">http://localhost:8080/search/listï¼Œè¿”å›</a> 404ï¼ˆæ— è·¯ç”±é…ç½®ï¼‰ï¼›</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbdf720fed.png" alt="image"></p></li><li><p><strong>æ·»åŠ  Nacos é…ç½®</strong>ï¼šæäº¤<code>gateway-routes.json</code>åï¼Œæ— éœ€é‡å¯ç½‘å…³ï¼›</p></li><li><p><strong>éªŒè¯è·¯ç”±</strong>ï¼šå†æ¬¡è®¿é—®åŒä¸€åœ°å€ï¼Œè¿”å›å•†å“åˆ—è¡¨ï¼ˆè·¯ç”±ç”Ÿæ•ˆï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/21/68cfbe09b308c.png" alt="image"></p></li></ol><h2 id="7-5-æ€»ç»“">7.5 æ€»ç»“</h2><table><thead><tr><th>åŠŸèƒ½</th><th>å®ç°æ–¹å¼</th><th>æ ¸å¿ƒç»„ä»¶ / æ³¨è§£</th></tr></thead><tbody><tr><td>é…ç½®å…±äº«</td><td>Nacos é›†ä¸­å­˜å‚¨ï¼Œå¾®æœåŠ¡é€šè¿‡ bootstrap æ‹‰å–</td><td><code>bootstrap.yaml</code>ã€<code>shared-configs</code></td></tr><tr><td>é…ç½®çƒ­æ›´æ–°</td><td><code>@ConfigurationProperties</code>ç»‘å®šé…ç½®</td><td><code>@ConfigurationProperties</code></td></tr><tr><td>åŠ¨æ€è·¯ç”±</td><td>ç›‘å¬ Nacos é…ç½®ï¼Œæ›´æ–°ç½‘å…³è·¯ç”±è¡¨</td><td><code>NacosConfigManager</code>ã€<code>RouteDefinitionWriter</code></td></tr></tbody></table><p>Nacos é…ç½®ä¸­å¿ƒå½»åº•è§£å†³äº†å¾®æœåŠ¡é…ç½®çš„é‡å¤ã€é™æ€ã€éš¾ç»´æŠ¤é—®é¢˜ï¼Œæ˜¯å¾®æœåŠ¡æ¶æ„çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ä¹‹ä¸€ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1. è®¤è¯†å¾®æœåŠ¡&lt;/h1&gt;
&lt;p&gt;æœ¬ç« ä»å•ä½“æ¶æ„çš„ä¼˜ç¼ºç‚¹åˆ‡å…¥ï¼Œåˆ†æå¤§å‹é¡¹ç›®é‡‡ç”¨å•ä½“æ¶æ„çš„é—®é¢˜ï¼Œä»¥åŠå¾®æœåŠ¡æ¶æ„çš„è§£å†³æ€è·¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-1-å•ä½“æ¶æ„&quot;&gt;1.1 å•ä½“æ¶æ„&lt;/h3&gt;
&lt;p&gt;å•ä½“æ¶æ„ï¼ˆmonolithic structureï¼‰ï¼šé¡¾åæ€ä¹‰ï¼Œæ•´ä¸ªé¡¹ç›®</summary>
      
    
    
    
    <category term="Java" scheme="https://www.xwybq.top/categories/Java/"/>
    
    
    <category term="SpringCloud" scheme="https://www.xwybq.top/tags/SpringCloud/"/>
    
    <category term="Linux" scheme="https://www.xwybq.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Docker</title>
    <link href="https://www.xwybq.top/posts/5c266b64/"/>
    <id>https://www.xwybq.top/posts/5c266b64/</id>
    <published>2025-09-20T04:06:42.000Z</published>
    <updated>2025-09-20T05:46:50.180Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2><p>åœ¨å­¦ä¹  Linux æ“ä½œç³»ç»Ÿå’Œé¡¹ç›®éƒ¨ç½²æ—¶ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°å‘½ä»¤ç¹å¤šã€è½¯ä»¶å®‰è£…å¤æ‚ã€ç¯å¢ƒä¾èµ–å†²çªç­‰é—®é¢˜ã€‚å°¤å…¶åœ¨å¾®æœåŠ¡æ—¶ä»£ï¼Œæˆç™¾ä¸Šåƒå°æœåŠ¡å™¨çš„éƒ¨ç½²è¿ç»´æ›´æ˜¯æŒ‘æˆ˜ã€‚Docker æŠ€æœ¯çš„å‡ºç°ï¼Œé€šè¿‡å®¹å™¨åŒ–è§£å†³äº†ç¯å¢ƒéš”ç¦»ä¸å¿«é€Ÿéƒ¨ç½²çš„é—®é¢˜ï¼Œè®©é¡¹ç›®éƒ¨ç½²å˜å¾—ç®€å•é«˜æ•ˆã€‚</p><p>æœ¬æ–‡åŸºäº Ubuntu 24.04 LTS ç³»ç»Ÿï¼Œæ•´ç† Docker æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼ŒåŒ…æ‹¬åŸºç¡€å‘½ä»¤ã€æ•°æ®å·ã€é•œåƒæ„å»ºã€ç½‘ç»œé…ç½®åŠé¡¹ç›®éƒ¨ç½²ï¼Œå¹¶è¡¥å……å®ç”¨æ‰©å±•å†…å®¹ã€‚</p><h2 id="1-å¿«é€Ÿå…¥é—¨">1. å¿«é€Ÿå…¥é—¨</h2><h3 id="1-1-å®‰è£…-Docker">1.1 å®‰è£… Docker</h3><p>Docker æ”¯æŒä¸»æµæ“ä½œç³»ç»Ÿï¼Œä½†å®‰è£…æ–¹å¼å› ç³»ç»Ÿè€Œå¼‚ã€‚ä»¥ Ubuntu 24.04 LTS ä¸ºä¾‹ï¼Œå¯ç›´æ¥å‚è€ƒå®˜æ–¹å®‰è£…æ–‡æ¡£ï¼š<a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></p><p><img src="https://a1.boltp.com/2025/09/20/68ce2a7a2f9dc.png" alt="image"></p><p>æŒ‰ç…§æ–‡æ¡£æç¤ºé€æ­¥æ‰§è¡Œå‘½ä»¤å³å¯ï¼Œä¹Ÿå¯å‚è€ƒè§†é¢‘æ•™ç¨‹æ“ä½œï¼š<a href="https://www.bilibili.com/video/BV183B1Y2EGk/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffdc8ef30147923fee0d363c8e4b12bb">https://www.bilibili.com/video/BV183B1Y2EGk/?spm_id_from=333.337.search-card.all.click&amp;vd_source=ffdc8ef30147923fee0d363c8e4b12bb</a></p><p>å¯¹äºå…¶ä»–ç³»ç»Ÿï¼ˆå¦‚ CentOSï¼‰ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­é€‰æ‹©å¯¹åº”ç³»ç»Ÿçš„å®‰è£…æŒ‡å—å³å¯ã€‚</p><p>Docker é»˜è®¤ä»å®˜æ–¹ä»“åº“ï¼ˆ<code>Docker Hub</code>ï¼‰æ‹‰å–é•œåƒï¼Œç”±äºè¯¥ä»“åº“æœåŠ¡å™¨ä½äºå›½å¤–ï¼Œå›½å†…ç”¨æˆ·ç›´æ¥è®¿é—®æ—¶å¯èƒ½å› ç½‘ç»œé“¾è·¯é•¿ã€å¸¦å®½é™åˆ¶æˆ–åœ°åŸŸè®¿é—®ç­–ç•¥ï¼Œå‡ºç°æ‹‰å–è¶…æ—¶ã€é€Ÿåº¦å¡é¡¿ç­‰é—®é¢˜ã€‚é’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œå¯é‡‡ç”¨ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><strong>é•œåƒåŠ é€Ÿ</strong>ï¼šé€šè¿‡å›½å†…äº‘å‚å•†ï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰æä¾›çš„ â€œé•œåƒåŠ é€Ÿå™¨â€ï¼Œå°†æ‹‰å–è¯·æ±‚è½¬å‘è‡³å›½å†…èŠ‚ç‚¹ï¼Œå¤§å¹…æå‡æ‹‰å–é€Ÿåº¦ã€‚</li><li><strong>VPN</strong>ï¼šé€šè¿‡åˆè§„çš„è™šæ‹Ÿä¸“ç”¨ç½‘ç»œè¿æ¥å›½å¤–ç½‘ç»œï¼Œç»•å¼€åœ°åŸŸé™åˆ¶ï¼Œç›´æ¥è®¿é—® <code>Docker Hub</code>ã€‚</li></ul><p>Ubuntu 24.04 é€šè¿‡ <code>/etc/docker/daemon.json</code> é…ç½®åŠ é€Ÿï¼Œä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼š</p><ol><li><p>ç™»å½•é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡ï¼Œè·å–ä¸“å±åŠ é€Ÿåœ°å€ï¼ˆå¦‚ <code>https://xxxx.mirror.aliyuncs.com</code>ï¼‰</p></li><li><p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/docker/daemon.json &lt;&lt;-<span class="hljs-string">&#x27;EOF&#x27;</span><br>&#123;<br>  <span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<span class="hljs-string">&quot;https://xxxx.mirror.aliyuncs.com&quot;</span>]<br>&#125;<br>EOF<br></code></pre></td></tr></table></figure></li><li><p>é‡å¯ Docker ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure></li></ol><h3 id="1-2-éƒ¨ç½²-MySQLï¼ˆDocker-æ–¹å¼å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼ï¼‰">1.2 éƒ¨ç½² MySQLï¼ˆDocker æ–¹å¼å¯¹æ¯”ä¼ ç»Ÿæ–¹å¼ï¼‰</h3><p>ä½¿ç”¨ Docker éƒ¨ç½²è½¯ä»¶æ¯”ä¼ ç»Ÿæ–¹å¼æ›´é«˜æ•ˆã€‚ä»¥ MySQL ä¸ºä¾‹ï¼š</p><h4 id="ä¼ ç»Ÿéƒ¨ç½²-MySQL-æ­¥éª¤">ä¼ ç»Ÿéƒ¨ç½² MySQL æ­¥éª¤</h4><ul><li>æœç´¢å¹¶ä¸‹è½½ Ubuntu ç‰ˆæœ¬çš„ MySQL å®‰è£…åŒ…ï¼ˆ<code>mysql-server_8.0_amd64.deb</code>ï¼‰</li><li>æ‰‹åŠ¨è§£å†³ä¾èµ–å†²çªï¼ˆå¦‚ <code>libmysqlclient-dev</code> ç­‰ï¼‰</li><li>æ‰§è¡Œ <code>dpkg -i</code> å®‰è£…å¹¶é€šè¿‡ <code>mysql_secure_installation</code> é…ç½®</li><li>è°ƒæ•´ <code>/etc/mysql/my.cnf</code> é…ç½®æ–‡ä»¶</li></ul><h4 id="Docker-éƒ¨ç½²-MySQL-æ­¥éª¤ï¼ˆä»…éœ€-1-æ¡å‘½ä»¤ï¼‰">Docker éƒ¨ç½² MySQL æ­¥éª¤ï¼ˆä»…éœ€ 1 æ¡å‘½ä»¤ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name mysql \<br>  -p 3306:3306 \<br>  -e TZ=Asia/Shanghai \<br>  -e MYSQL_ROOT_PASSWORD=123 \<br>  mysql<br></code></pre></td></tr></table></figure><p><strong>é•œåƒåç§°æ ¼å¼</strong>ï¼š<code>REPOSITORY:TAG</code>ï¼ˆå¦‚ <code>mysql:8.0</code>ï¼ŒæœªæŒ‡å®š TAG åˆ™é»˜è®¤ <code>latest</code>ï¼‰</p><p><strong>è¿è¡Œæ•ˆæœå¦‚å›¾ï¼š</strong></p><p><img src="https://a1.boltp.com/2025/09/20/68ce2f045b20e.png" alt=""></p><p>MySQLå®‰è£…å®Œæ¯•ï¼ç°åœ¨é€šè¿‡ä»»æ„å®¢æˆ·ç«¯å·¥å…·å³å¯è¿æ¥åˆ°MySQLå•¦</p><h3 id="1-3-æ ¸å¿ƒæ¦‚å¿µè§£æ">1.3 æ ¸å¿ƒæ¦‚å¿µè§£æ</h3><table><thead><tr><th>æ¦‚å¿µ</th><th>è‹±æ–‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>é•œåƒ</td><td>Image</td><td>åŒ…å«åº”ç”¨ç¨‹åºã€ä¾èµ–ç¯å¢ƒã€é…ç½®æ–‡ä»¶çš„åªè¯»æ¨¡æ¿ï¼ˆå¦‚ MySQL é•œåƒå« MySQL åŠè¿è¡Œåº“ï¼‰</td></tr><tr><td>å®¹å™¨</td><td>Container</td><td>é•œåƒè¿è¡Œåçš„å®ä¾‹ï¼Œæ˜¯ç‹¬ç«‹éš”ç¦»çš„è¿è¡Œç¯å¢ƒ</td></tr><tr><td>é•œåƒä»“åº“</td><td>Registry</td><td>å­˜å‚¨é•œåƒçš„æœåŠ¡å™¨ï¼ˆå®˜æ–¹ï¼šDockerHubï¼›ç¬¬ä¸‰æ–¹ï¼šé˜¿é‡Œäº‘ / åä¸ºäº‘ï¼›ç§æœ‰ï¼šä¼ä¸šè‡ªå»ºï¼‰</td></tr></tbody></table><h3 id="1-4-å‘½ä»¤è§£è¯»ï¼ˆéƒ¨ç½²-MySQL-å‘½ä»¤æ‹†è§£ï¼‰">1.4 å‘½ä»¤è§£è¯»ï¼ˆéƒ¨ç½² MySQL å‘½ä»¤æ‹†è§£ï¼‰</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \          <span class="hljs-comment"># åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼Œ-d è¡¨ç¤ºåå°è¿è¡Œ</span><br>  --name mysql \              <span class="hljs-comment"># å®¹å™¨å‘½åä¸º mysqlï¼ˆè‡ªå®šä¹‰ï¼‰</span><br>  -p 3306:3306 \              <span class="hljs-comment"># ç«¯å£æ˜ å°„ï¼šå®¿ä¸»æœº3306 â†’ å®¹å™¨å†…3306ï¼ˆå®¹å™¨éš”ç¦»éœ€æ˜ å°„æ‰èƒ½å¤–éƒ¨è®¿é—®ï¼‰</span><br>  -e TZ=Asia/Shanghai \       <span class="hljs-comment"># ç¯å¢ƒå˜é‡ï¼šè®¾ç½®å®¹å™¨æ—¶åŒºä¸ºä¸Šæµ·</span><br>  -e MYSQL_ROOT_PASSWORD=123 \# ç¯å¢ƒå˜é‡ï¼šè®¾ç½® MySQL root å¯†ç <br>  mysql                       <span class="hljs-comment"># é•œåƒåç§°ï¼ˆé»˜è®¤æ‹‰å– latest ç‰ˆæœ¬ï¼Œå¯æŒ‡å®šå¦‚ mysql:8.0ï¼‰</span><br></code></pre></td></tr></table></figure><p><strong>é•œåƒåç§°æ ¼å¼</strong>ï¼š<code>REPOSITORY:TAG</code>ï¼ˆå¦‚ <code>mysql:8.0</code>ï¼ŒæœªæŒ‡å®š TAG åˆ™é»˜è®¤ <code>latest</code>ï¼‰</p><p><strong>æ€»ç»“ä¸€ä¸‹ï¼š</strong></p><p>Dockeræœ¬èº«åŒ…å«ä¸€ä¸ªåå°æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Dockerå‘½ä»¤å‘Šè¯‰DockeræœåŠ¡ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿéƒ¨ç½²æŒ‡å®šçš„åº”ç”¨ã€‚DockeræœåŠ¡éƒ¨ç½²åº”ç”¨æ—¶ï¼Œé¦–å…ˆè¦å»æœç´¢å¹¶ä¸‹è½½åº”ç”¨å¯¹åº”çš„é•œåƒï¼Œç„¶åæ ¹æ®é•œåƒåˆ›å»ºå¹¶å…è®¸å®¹å™¨ï¼Œåº”ç”¨å°±éƒ¨ç½²å®Œæˆäº†ã€‚</p><p>ç”¨ä¸€å¹…å›¾æ ‡ç¤ºå¦‚ä¸‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/20/68ce3057c725f.png" alt=""></p><h2 id="2-Docker-åŸºç¡€">2. Docker åŸºç¡€</h2><h3 id="2-1-å¸¸è§å‘½ä»¤ï¼ˆUbuntu-24-04-éœ€åŠ -sudoï¼‰">2.1 å¸¸è§å‘½ä»¤ï¼ˆUbuntu 24.04 éœ€åŠ  <code>sudo</code>ï¼‰</h3><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>docker pull</code></td><td>æ‹‰å–é•œåƒåˆ°æœ¬åœ°</td><td><code>sudo docker pull nginx:latest</code></td></tr><tr><td><code>docker images</code></td><td>æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒ</td><td><code>sudo docker images</code></td></tr><tr><td><code>docker rmi</code></td><td>åˆ é™¤æœ¬åœ°é•œåƒï¼ˆéœ€å…ˆåˆ ä¾èµ–å®¹å™¨ï¼‰</td><td><code>sudo docker rmi mysql:latest</code></td></tr><tr><td><code>docker run</code></td><td>åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼ˆä¸å¯é‡å¤åˆ›å»ºåŒåå®¹å™¨ï¼‰</td><td><code>sudo docker run -d --name nginx nginx</code></td></tr><tr><td><code>docker stop</code></td><td>åœæ­¢è¿è¡Œä¸­çš„å®¹å™¨</td><td><code>sudo docker stop mysql</code></td></tr><tr><td><code>docker start</code></td><td>å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</td><td><code>sudo docker start mysql</code></td></tr><tr><td><code>docker restart</code></td><td>é‡å¯å®¹å™¨</td><td><code>sudo docker restart mysql</code></td></tr><tr><td><code>docker rm</code></td><td>åˆ é™¤å®¹å™¨ï¼ˆè¿è¡Œä¸­éœ€åŠ  <code>-f</code> å¼ºåˆ¶åˆ é™¤ï¼‰</td><td><code>sudo docker rm -f mysql</code></td></tr><tr><td><code>docker ps</code></td><td>æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼ˆ<code>-a</code> æŸ¥çœ‹æ‰€æœ‰ï¼‰</td><td><code>sudo docker ps -a</code></td></tr><tr><td><code>docker logs</code></td><td>æŸ¥çœ‹å®¹å™¨è¿è¡Œæ—¥å¿—ï¼ˆ<code>-f</code> å®æ—¶è·Ÿè¸ªï¼‰</td><td><code>sudo docker logs -f mysql</code></td></tr><tr><td><code>docker exec</code></td><td>è¿›å…¥å®¹å™¨å†…éƒ¨ï¼ˆ<code>-it</code> äº¤äº’æ¨¡å¼ï¼‰</td><td><code>sudo docker exec -it mysql bash</code></td></tr><tr><td><code>docker save</code></td><td>ä¿å­˜é•œåƒä¸ºæœ¬åœ°å‹ç¼©åŒ…</td><td><code>sudo docker save -o nginx.tar nginx</code></td></tr><tr><td><code>docker load</code></td><td>åŠ è½½æœ¬åœ°å‹ç¼©åŒ…ä¸ºé•œåƒ</td><td><code>sudo docker load -i nginx.tar</code></td></tr><tr><td><code>docker inspect</code></td><td>æŸ¥çœ‹å®¹å™¨ / é•œåƒè¯¦ç»†ä¿¡æ¯</td><td><code>sudo docker inspect mysql</code></td></tr></tbody></table><p>ç”¨ä¸€å‰¯å›¾æ¥è¡¨ç¤ºè¿™äº›å‘½ä»¤çš„å…³ç³»ï¼š</p><p><img src="https://a1.boltp.com/2025/09/20/68ce316337013.png" alt=""></p><p>è¡¥å……ï¼š</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯æ¬¡é‡å¯è™šæ‹Ÿæœºæˆ‘ä»¬éƒ½éœ€è¦æ‰‹åŠ¨å¯åŠ¨Dockerå’ŒDockerä¸­çš„å®¹å™¨ã€‚é€šè¿‡å‘½ä»¤å¯ä»¥å®ç°å¼€æœºè‡ªå¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># Dockerå¼€æœºè‡ªå¯</span><br><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> docker<br><br><span class="hljs-comment"># Dockerå®¹å™¨å¼€æœºè‡ªå¯</span><br><span class="hljs-built_in">sudo</span> docker update --restart=always [å®¹å™¨å/å®¹å™¨<span class="hljs-built_in">id</span>]<br></code></pre></td></tr></table></figure><h4 id="2-1-2-æ¼”ç¤ºï¼ˆä»¥-Nginx-ä¸ºä¾‹ï¼‰">2.1.2 æ¼”ç¤ºï¼ˆä»¥ Nginx ä¸ºä¾‹ï¼‰</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç¬¬1æ­¥ï¼Œå»DockerHubæŸ¥çœ‹nginxé•œåƒä»“åº“åŠç›¸å…³ä¿¡æ¯</span><br><br><span class="hljs-comment"># ç¬¬2æ­¥ï¼Œæ‹‰å–Nginxé•œåƒ</span><br><span class="hljs-built_in">sudo</span> docker pull nginx<br><br><span class="hljs-comment"># ç¬¬3æ­¥ï¼ŒæŸ¥çœ‹é•œåƒ</span><br><span class="hljs-built_in">sudo</span> docker images<br><span class="hljs-comment"># ç»“æœå¦‚ä¸‹ï¼š</span><br>REPOSITORY   TAG       IMAGE ID       CREATED         SIZE<br>nginx        latest    605c77e624dd   16 months ago   141MB<br>mysql        latest    3218b38490ce   17 months ago   516MB<br><br><span class="hljs-comment"># ç¬¬4æ­¥ï¼Œåˆ›å»ºå¹¶è¿è¡ŒNginxå®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker run -d --name nginx -p 80:80 nginx<br><br><span class="hljs-comment"># ç¬¬5æ­¥ï¼ŒæŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker ps<br><span class="hljs-comment"># ä¹Ÿå¯ä»¥åŠ æ ¼å¼åŒ–æ–¹å¼è®¿é—®ï¼Œæ ¼å¼ä¼šæ›´åŠ æ¸…çˆ½</span><br><span class="hljs-built_in">sudo</span> docker ps --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># ç¬¬6æ­¥ï¼Œè®¿é—®ç½‘é¡µï¼Œåœ°å€ï¼šhttp://localhost</span><br><br><span class="hljs-comment"># ç¬¬7æ­¥ï¼Œåœæ­¢å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker stop nginx<br><br><span class="hljs-comment"># ç¬¬8æ­¥ï¼ŒæŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker ps -a --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># ç¬¬9æ­¥ï¼Œå†æ¬¡å¯åŠ¨nginxå®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker start nginx<br><br><span class="hljs-comment"># ç¬¬10æ­¥ï¼Œå†æ¬¡æŸ¥çœ‹å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker ps --format <span class="hljs-string">&quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;</span><br><br><span class="hljs-comment"># ç¬¬11æ­¥ï¼ŒæŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯</span><br><span class="hljs-built_in">sudo</span> docker inspect nginx<br><br><span class="hljs-comment"># ç¬¬12æ­¥ï¼Œè¿›å…¥å®¹å™¨,æŸ¥çœ‹å®¹å™¨å†…ç›®å½•</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it nginx bash<br><span class="hljs-comment"># æˆ–è€…ï¼Œå¯ä»¥è¿›å…¥MySQL</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it mysql mysql -uroot -p<br><br><span class="hljs-comment"># ç¬¬13æ­¥ï¼Œåˆ é™¤å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> nginx<br><span class="hljs-comment"># å‘ç°æ— æ³•åˆ é™¤ï¼Œå› ä¸ºå®¹å™¨è¿è¡Œä¸­ï¼Œå¼ºåˆ¶åˆ é™¤å®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> -f nginx<br></code></pre></td></tr></table></figure><h4 id="2-1-3-å‘½ä»¤åˆ«åé…ç½®ï¼ˆç®€åŒ–æ“ä½œï¼‰">2.1.3 å‘½ä»¤åˆ«åé…ç½®ï¼ˆç®€åŒ–æ“ä½œï¼‰</h4><p>Ubuntu 24.04 å¯é€šè¿‡ä¿®æ”¹ <code>~/.bashrc</code> è®¾ç½®åˆ«åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆæ™®é€šç”¨æˆ·ç”¨ ~/.bashrcï¼Œroot ç”¨æˆ·ç”¨ /root/.bashrcï¼‰</span><br>vi ~/.bashrc<br><span class="hljs-comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹</span><br><span class="hljs-built_in">alias</span> dps=<span class="hljs-string">&#x27;sudo docker ps --format &quot;table &#123;&#123;.ID&#125;&#125;\t&#123;&#123;.Image&#125;&#125;\t&#123;&#123;.Ports&#125;&#125;\t&#123;&#123;.Status&#125;&#125;\t&#123;&#123;.Names&#125;&#125;&quot;&#x27;</span><br><span class="hljs-built_in">alias</span> dis=<span class="hljs-string">&#x27;sudo docker images&#x27;</span><br><span class="hljs-comment"># ä½¿åˆ«åç”Ÿæ•ˆ</span><br><span class="hljs-built_in">source</span> ~/.bashrc<br></code></pre></td></tr></table></figure><h3 id="2-2-æ•°æ®å·ï¼ˆå®¹å™¨ä¸å®¿ä¸»æœºæ•°æ®äº’é€šï¼‰">2.2 æ•°æ®å·ï¼ˆå®¹å™¨ä¸å®¿ä¸»æœºæ•°æ®äº’é€šï¼‰</h3><p>å®¹å™¨é»˜è®¤éš”ç¦»ï¼Œæ•°æ®å·å¯å®ç°å®¹å™¨å†…ç›®å½•ä¸å®¿ä¸»æœºç›®å½•çš„æ˜ å°„ï¼Œè§£å†³æ•°æ®æŒä¹…åŒ–ã€é…ç½®ä¿®æ”¹ç­‰é—®é¢˜ã€‚</p><h4 id="2-2-1-ä»€ä¹ˆæ˜¯æ•°æ®å·">2.2.1 ä»€ä¹ˆæ˜¯æ•°æ®å·</h4><p>æ•°æ®å·ï¼ˆvolumeï¼‰æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼Œæ˜¯å®¹å™¨å†…ç›®å½•ä¸å®¿ä¸»æœºç›®å½•ä¹‹é—´æ˜ å°„çš„æ¡¥æ¢ã€‚</p><p>ä»¥ Nginx ä¸ºä¾‹ï¼Œå…¶ <code>html</code>ï¼ˆé™æ€èµ„æºï¼‰å’Œ <code>conf</code>ï¼ˆé…ç½®æ–‡ä»¶ï¼‰ç›®å½•éœ€ä¸å®¿ä¸»æœºå…³è”ï¼Œæ•°æ®å·æŒ‚è½½é€»è¾‘å¦‚ä¸‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/20/68ce35dff40a3.png" alt=""></p><p>åœ¨ä¸Šå›¾ä¸­ï¼š</p><ul><li>åˆ›å»ºäº†ä¸¤ä¸ªæ•°æ®å·ï¼š<code>conf</code>ã€<code>html</code></li><li>Nginx å®¹å™¨å†…éƒ¨çš„ <code>conf</code> ç›®å½•å’Œ <code>html</code> ç›®å½•åˆ†åˆ«ä¸ä¸¤ä¸ªæ•°æ®å·å…³è”</li><li>æ•°æ®å·åˆ†åˆ«æŒ‡å‘å®¿ä¸»æœºçš„ <code>/var/lib/docker/volumes/conf/_data</code> å’Œ <code>/var/lib/docker/volumes/html/_data</code></li></ul><h4 id="2-2-2-æ•°æ®å·å‘½ä»¤">2.2.2 æ•°æ®å·å‘½ä»¤</h4><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>docker volume create</code></td><td>åˆ›å»ºæ•°æ®å·</td><td><code>sudo docker volume create nginx-html</code></td></tr><tr><td><code>docker volume ls</code></td><td>æŸ¥çœ‹æ‰€æœ‰æ•°æ®å·</td><td><code>sudo docker volume ls</code></td></tr><tr><td><code>docker volume rm</code></td><td>åˆ é™¤æŒ‡å®šæ•°æ®å·</td><td><code>sudo docker volume rm nginx-html</code></td></tr><tr><td><code>docker volume inspect</code></td><td>æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…</td><td><code>sudo docker inspect nginx-html</code></td></tr><tr><td><code>docker volume prune</code></td><td>æ¸…é™¤æœªä½¿ç”¨çš„æ•°æ®å·</td><td><code>sudo docker volume prune</code></td></tr></tbody></table><h4 id="2-2-3-å®æˆ˜ï¼šæŒ‚è½½æ•°æ®å·åˆ°-Nginx">2.2.3 å®æˆ˜ï¼šæŒ‚è½½æ•°æ®å·åˆ° Nginx</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ›å»ºå¹¶å¯åŠ¨ Nginx å®¹å™¨ï¼ŒæŒ‚è½½æ•°æ®å· nginx-html åˆ°å®¹å™¨å†… /usr/share/nginx/html</span><br><span class="hljs-built_in">sudo</span> docker run -d --name nginx -p 80:80 -v nginx-html:/usr/share/nginx/html nginx<br><br><span class="hljs-comment"># æŸ¥çœ‹æ•°æ®å·è¯¦æƒ…ï¼ˆè·å–å®¿ä¸»æœºæ˜ å°„è·¯å¾„ï¼‰</span><br><span class="hljs-built_in">sudo</span> docker inspect nginx-html<br><span class="hljs-comment"># å®¿ä¸»æœºè·¯å¾„é€šå¸¸ä¸º /var/lib/docker/volumes/nginx-html/_data</span><br><br><span class="hljs-comment"># ä¿®æ”¹å®¿ä¸»æœºæ–‡ä»¶ï¼Œå®¹å™¨å†…è‡ªåŠ¨åŒæ­¥</span><br><span class="hljs-built_in">sudo</span> vi /var/lib/docker/volumes/nginx-html/_data/index.html<br><span class="hljs-comment"># è®¿é—® localhost éªŒè¯æ•ˆæœ</span><br></code></pre></td></tr></table></figure><h4 id="2-2-4-å®æˆ˜ï¼šç›´æ¥æŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼ˆæ›´çµæ´»ï¼‰">2.2.4 å®æˆ˜ï¼šç›´æ¥æŒ‚è½½å®¿ä¸»æœºç›®å½•ï¼ˆæ›´çµæ´»ï¼‰</h4><p>Ubuntu 24.04 æ”¯æŒç›´æ¥å°†å®¿ä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨ï¼Œæ— éœ€æ•°æ®å·ä¸­é—´å±‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. å®¿ä¸»æœºåˆ›å»ºç›®å½•ï¼ˆä»¥ MySQL ä¸ºä¾‹ï¼‰</span><br><span class="hljs-built_in">mkdir</span> -p ~/mysql/&#123;conf,data,init&#125;<br><br><span class="hljs-comment"># 2. å¤åˆ¶é…ç½®æ–‡ä»¶åˆ° conf ç›®å½•ã€åˆå§‹åŒ– SQL åˆ° init ç›®å½•</span><br>ã€æ­¤å¤„éœ€è¡¥å……å›¾ç‰‡ï¼šè¯¾å‰èµ„æ–™ä¸­ mysql ç›®å½•ç»“æ„æˆªå›¾ï¼ˆå« confã€dataã€init å­ç›®å½•ï¼‰ã€‘<br>ã€æ­¤å¤„éœ€è¡¥å……å›¾ç‰‡ï¼šinit ç›®å½•ä¸‹åˆå§‹åŒ– SQL è„šæœ¬å’Œ conf ç›®å½•ä¸‹é…ç½®æ–‡ä»¶çš„æˆªå›¾ã€‘<br><br><span class="hljs-comment"># 3. å¯åŠ¨ MySQL å®¹å™¨ï¼ŒæŒ‚è½½å®¿ä¸»æœºç›®å½•</span><br><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name mysql \<br>  -p 3306:3306 \<br>  -e TZ=Asia/Shanghai \<br>  -e MYSQL_ROOT_PASSWORD=123 \<br>  -v ~/mysql/data:/var/lib/mysql \    <span class="hljs-comment"># æ•°æ®æŒä¹…åŒ–</span><br>  -v ~/mysql/conf:/etc/mysql/conf.d \ <span class="hljs-comment"># é…ç½®æ–‡ä»¶æŒ‚è½½</span><br>  -v ~/mysql/init:/docker-entrypoint-initdb.d \ <span class="hljs-comment"># åˆå§‹åŒ–è„šæœ¬æŒ‚è½½</span><br>  mysql<br><br><span class="hljs-comment"># 4. æŸ¥çœ‹å®¿ä¸»æœºç›®å½•ï¼Œç¡®è®¤ data è‡ªåŠ¨åˆ›å»º</span><br><span class="hljs-built_in">ls</span> -l ~/mysql<br><span class="hljs-comment"># ç»“æœï¼š</span><br>æ€»ç”¨é‡ 4<br>drwxr-xr-x. 2 root    root   20 5æœˆ  19 15:11 conf<br>drwxr-xr-x. 7 polkitd root 4096 5æœˆ  19 15:11 data<br>drwxr-xr-x. 2 root    root   23 5æœˆ  19 15:11 init<br><br><span class="hljs-comment"># 5. éªŒè¯æ•°æ®åº“åˆå§‹åŒ–ç»“æœ</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it mysql mysql -uroot -p123<br><span class="hljs-comment"># æŸ¥çœ‹ç¼–ç ï¼ˆåº”ä¸º utf8mb4ï¼‰</span><br>show variables like <span class="hljs-string">&quot;%char%&quot;</span>;<br><span class="hljs-comment"># æŸ¥çœ‹æ•°æ®åº“ï¼ˆåº”æœ‰ hmall åº“ï¼‰</span><br>show databases;<br></code></pre></td></tr></table></figure><h3 id="2-3-è‡ªå®šä¹‰é•œåƒï¼ˆDockerfile-å®æˆ˜ï¼‰">2.3 è‡ªå®šä¹‰é•œåƒï¼ˆDockerfile å®æˆ˜ï¼‰</h3><p>å½“ç°æœ‰é•œåƒæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå¯é€šè¿‡ Dockerfile æ„å»ºè‡ªå®šä¹‰é•œåƒã€‚</p><h4 id="2-3-1-é•œåƒç»“æ„">2.3.1 é•œåƒç»“æ„</h4><p>é•œåƒé‡‡ç”¨ â€œåˆ†å±‚å åŠ â€ æœºåˆ¶ï¼Œæ¯ä¸€å±‚å¯¹åº” Dockerfile ä¸­çš„ä¸€æ¡æŒ‡ä»¤ï¼Œå¤ç”¨æ€§å¼ºï¼ˆå¦‚ Java é•œåƒå¯åŸºäºå®˜æ–¹ JDK é•œåƒå åŠ ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/20/68ce3722444b2.png" alt=""></p><h4 id="2-3-2-Dockerfile-æ ¸å¿ƒæŒ‡ä»¤">2.3.2 Dockerfile æ ¸å¿ƒæŒ‡ä»¤</h4><table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>FROM</code></td><td>æŒ‡å®šåŸºç¡€é•œåƒï¼ˆå¿…é¡»ä¸ºç¬¬ä¸€æ¡æŒ‡ä»¤ï¼‰</td><td><code>FROM openjdk:11.0-jre-buster</code></td></tr><tr><td><code>ENV</code></td><td>è®¾ç½®ç¯å¢ƒå˜é‡</td><td><code>ENV TZ=Asia/Shanghai</code></td></tr><tr><td><code>COPY</code></td><td>æ‹·è´æœ¬åœ°æ–‡ä»¶åˆ°é•œåƒ</td><td><code>COPY ./hm-service.jar /app.jar</code></td></tr><tr><td><code>RUN</code></td><td>æ‰§è¡Œ Linux å‘½ä»¤ï¼ˆæ„å»ºæ—¶è¿è¡Œï¼‰</td><td><code>RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime</code></td></tr><tr><td><code>EXPOSE</code></td><td>å£°æ˜å®¹å™¨ç›‘å¬ç«¯å£ï¼ˆä»…è¯´æ˜ï¼Œä¸æ˜ å°„ï¼‰</td><td><code>EXPOSE 8080</code></td></tr><tr><td><code>ENTRYPOINT</code></td><td>å®¹å™¨å¯åŠ¨å‘½ä»¤ï¼ˆä¸å¯è¢«è¦†ç›–ï¼‰</td><td><code>ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]</code></td></tr></tbody></table><h4 id="2-3-3-å®æˆ˜ï¼šæ„å»º-Java-åº”ç”¨é•œåƒ">2.3.3 å®æˆ˜ï¼šæ„å»º Java åº”ç”¨é•œåƒ</h4><ol><li><p><strong>å‡†å¤‡æ–‡ä»¶</strong>ï¼šå°† <code>docker-demo.jar</code> å’Œ Dockerfile æ”¾å…¥ <code>~/demo</code> ç›®å½•</p><p><img src="https://a1.boltp.com/2025/09/20/68ce383375757.png" alt=""></p><p><img src="https://a1.boltp.com/2025/09/20/68ce3875d6fdf.png" alt=""></p></li><li><p><strong>ç¼–å†™ Dockerfile</strong>ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># åŸºç¡€é•œåƒï¼ˆå« JRE ç¯å¢ƒï¼‰</span><br><span class="hljs-keyword">FROM</span> openjdk:<span class="hljs-number">11.0</span>-jre-buster<br><span class="hljs-comment"># è®¾ç½®æ—¶åŒº</span><br><span class="hljs-keyword">ENV</span> TZ=Asia/Shanghai<br><span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">ln</span> -snf /usr/share/zoneinfo/<span class="hljs-variable">$TZ</span> /etc/localtime &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$TZ</span> &gt; /etc/timezone</span><br><span class="hljs-comment"># æ‹·è´ jar åŒ…</span><br><span class="hljs-keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /app.jar</span><br><span class="hljs-comment"># å£°æ˜ç«¯å£</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8080</span><br><span class="hljs-comment"># å¯åŠ¨å‘½ä»¤</span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;java&quot;</span>, <span class="hljs-string">&quot;-jar&quot;</span>, <span class="hljs-string">&quot;/app.jar&quot;</span>]</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ„å»ºé•œåƒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># è¿›å…¥é•œåƒç›®å½•</span><br><span class="hljs-built_in">cd</span> /root/demo<br><span class="hljs-comment"># å¼€å§‹æ„å»º</span><br>docker build -t docker-demo:1.0 .<br></code></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><img src="https://a1.boltp.com/2025/09/20/68ce3909a9637.png" alt=""></p><p>æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æŸ¥çœ‹é•œåƒåˆ—è¡¨ï¼š</span><br>docker images<br><span class="hljs-comment"># ç»“æœ</span><br>REPOSITORY    TAG       IMAGE ID       CREATED          SIZE<br>docker-demo   1.0       d6ab0b9e64b9   27 minutes ago   327MB<br>nginx         latest    605c77e624dd   16 months ago    141MB<br>mysql         latest    3218b38490ce   17 months ago    516MB<br></code></pre></td></tr></table></figure></li><li><p><strong>è¿è¡Œè‡ªå®šä¹‰é•œåƒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1.åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨</span><br>docker run -d --name <span class="hljs-built_in">dd</span> -p 8080:8080 docker-demo:1.0<br><span class="hljs-comment"># 2.æŸ¥çœ‹å®¹å™¨</span><br>dps<br><span class="hljs-comment"># ç»“æœ</span><br>CONTAINER ID   IMAGE             PORTS                                                  STATUS         NAMES<br>78a000447b49   docker-demo:1.0   0.0.0.0:8080-&gt;8080/tcp, :::8090-&gt;8090/tcp              Up 2 seconds   <span class="hljs-built_in">dd</span><br>f63cfead8502   mysql             0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp   Up 2 hours     mysql<br><br><span class="hljs-comment"># 3.è®¿é—®</span><br>curl localhost:8080/hello/count<br><span class="hljs-comment"># ç»“æœï¼š</span><br>&lt;h5&gt;æ¬¢è¿è®¿é—®é»‘é©¬å•†åŸ, è¿™æ˜¯æ‚¨ç¬¬1æ¬¡è®¿é—®&lt;h5&gt;<br></code></pre></td></tr></table></figure></li></ol><h3 id="2-4-ç½‘ç»œï¼ˆå®¹å™¨é—´é€šä¿¡ï¼‰">2.4 ç½‘ç»œï¼ˆå®¹å™¨é—´é€šä¿¡ï¼‰</h3><p>Docker é»˜è®¤ç½‘ç»œéš”ç¦»ï¼Œè‡ªå®šä¹‰ç½‘ç»œå¯å®ç°å®¹å™¨é€šè¿‡ â€œåˆ«åâ€ äº’é€šï¼Œé¿å…ä¾èµ–åŠ¨æ€ IPã€‚</p><h4 id="2-4-1-å¸¸è§ç½‘ç»œå‘½ä»¤">2.4.1 å¸¸è§ç½‘ç»œå‘½ä»¤</h4><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>docker network create</code></td><td>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</td><td><code>sudo docker network create hmall-net</code></td></tr><tr><td><code>docker network ls</code></td><td>æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œ</td><td><code>sudo docker network ls</code></td></tr><tr><td><code>docker network connect</code></td><td>è®©å®¹å™¨åŠ å…¥ç½‘ç»œ</td><td><code>sudo docker network connect hmall-net mysql</code></td></tr><tr><td><code>docker network disconnect</code></td><td>è®©å®¹å™¨ç¦»å¼€ç½‘ç»œ</td><td><code>sudo docker network disconnect hmall-net mysql</code></td></tr></tbody></table><h4 id="2-4-2-å®æˆ˜ï¼šè‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨äº’é€š">2.4.2 å®æˆ˜ï¼šè‡ªå®šä¹‰ç½‘ç»œå®ç°å®¹å™¨äº’é€š</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 1. åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</span><br><span class="hljs-built_in">sudo</span> docker network create hmall-net<br><br><span class="hljs-comment"># 2. å¯åŠ¨ MySQL å¹¶åŠ å…¥ç½‘ç»œï¼ˆæŒ‡å®šåˆ«å dbï¼‰</span><br><span class="hljs-built_in">sudo</span> docker run -d --name mysql --network hmall-net --<span class="hljs-built_in">alias</span> db -e MYSQL_ROOT_PASSWORD=123 mysql<br><br><span class="hljs-comment"># 3. å¯åŠ¨ Java åº”ç”¨å¹¶åŠ å…¥åŒä¸€ç½‘ç»œ</span><br><span class="hljs-built_in">sudo</span> docker run -d --name <span class="hljs-built_in">dd</span> --network hmall-net -p 8080:8080 hmall:1.0<br><br><span class="hljs-comment"># 4. éªŒè¯é€šä¿¡ï¼ˆè¿›å…¥ Java å®¹å™¨ ping MySQLï¼‰</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">exec</span> -it hmall bash<br>ping db  <span class="hljs-comment"># å¯é€šè¿‡åˆ«å db æˆ–å®¹å™¨å mysql è®¿é—®</span><br></code></pre></td></tr></table></figure><h2 id="3-é¡¹ç›®éƒ¨ç½²å®æˆ˜ï¼ˆé»‘é©¬å•†åŸï¼‰">3. é¡¹ç›®éƒ¨ç½²å®æˆ˜ï¼ˆé»‘é©¬å•†åŸï¼‰</h2><h3 id="3-1-é¡¹ç›®ç»“æ„">3.1 é¡¹ç›®ç»“æ„</h3><p>è¯¾å‰èµ„æ–™æä¾›çš„é¡¹ç›®åŒ…å«ï¼š</p><ul><li>åç«¯ï¼š<code>hmall</code>ï¼ˆJava é¡¹ç›®ï¼Œç«¯å£ 8080ï¼‰</li><li>å‰ç«¯ï¼š<code>hmall-portal</code>ï¼ˆç”¨æˆ·ç«¯ï¼Œç«¯å£ 18080ï¼‰ã€<code>hmall-admin</code>ï¼ˆç®¡ç†ç«¯ï¼Œç«¯å£ 18081ï¼‰</li></ul><table><thead><tr><th>é¡¹ç›®</th><th>å®¹å™¨å</th><th>ç«¯å£</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>hmall</td><td>hmall</td><td>8080</td><td>åç«¯ API å…¥å£</td></tr><tr><td>hmall-portal</td><td>nginx</td><td>18080</td><td>ç”¨æˆ·ç«¯å‰ç«¯å…¥å£</td></tr><tr><td>hmall-admin</td><td>nginx</td><td>18081</td><td>ç®¡ç†ç«¯å‰ç«¯å…¥å£</td></tr><tr><td>MySQL</td><td>mysql</td><td>3306</td><td>æ•°æ®åº“</td></tr></tbody></table><h3 id="3-2-éƒ¨ç½²æ­¥éª¤">3.2 éƒ¨ç½²æ­¥éª¤</h3><h4 id="3-2-1-éƒ¨ç½²åç«¯-Java-é¡¹ç›®">3.2.1 éƒ¨ç½²åç«¯ Java é¡¹ç›®</h4><ol><li><p><strong>æ‰“åŒ…é¡¹ç›®</strong>ï¼šç”¨ IDEA æ‰“åŒ… <code>hm-service</code> æ¨¡å—ï¼Œå¾—åˆ° <code>hm-service.jar</code></p><p><img src="https://a1.boltp.com/2025/09/20/68ce3b255b994.png" alt=""></p></li><li><p><strong>ä¸Šä¼ æ–‡ä»¶</strong>ï¼šå°† <code>hm-service.jar</code> å’Œ Dockerfile ä¸Šä¼ åˆ° Ubuntu 24.04 çš„ <code>~/</code> ç›®å½•</p><p><img src="https://a1.boltp.com/2025/09/20/68ce3b93b0b22.png" alt=""></p></li><li><p><strong>æ„å»ºé•œåƒå¹¶å¯åŠ¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æ„å»ºé•œåƒ</span><br><span class="hljs-built_in">sudo</span> docker build -t hmall .<br><span class="hljs-comment"># å¯åŠ¨å®¹å™¨ï¼ˆåŠ å…¥è‡ªå®šä¹‰ç½‘ç»œï¼‰</span><br><span class="hljs-built_in">sudo</span> docker run -d --name hmall --network hmall-net -p 8080:8080 hmall<br></code></pre></td></tr></table></figure></li><li><p><strong>éªŒè¯</strong>ï¼šè®¿é—® <code>http://localhost:8080/search/list</code></p></li></ol><h4 id="3-2-2-éƒ¨ç½²å‰ç«¯ï¼ˆNginx-ä»£ç†ï¼‰">3.2.2 éƒ¨ç½²å‰ç«¯ï¼ˆNginx ä»£ç†ï¼‰</h4><ol><li><p><strong>å‡†å¤‡æ–‡ä»¶</strong>ï¼šæŠŠæ•´ä¸ªnginxç›®å½•ä¸Šä¼ åˆ°è™šæ‹Ÿæœºçš„<code>~</code>ç›®å½•ä¸‹ï¼š</p><p><img src="https://a1.boltp.com/2025/09/20/68ce3c8beff3e.png" alt=""></p></li><li><p><strong>å¯åŠ¨ Nginx å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run -d \<br>  --name nginx \<br>  -p 18080:18080 \<br>  -p 18081:18081 \<br>  -v ~/nginx/html:/usr/share/nginx/html \<br>  -v ~/nginx/nginx.conf:/etc/nginx/nginx.conf \<br>  --network hmall-net \<br>  nginx<br></code></pre></td></tr></table></figure></li><li><p><strong>éªŒè¯</strong>ï¼š</p><ul><li><p>ç”¨æˆ·ç«¯ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">http://localhost:18080<br></code></pre></td></tr></table></figure><p><img src="https://a1.boltp.com/2025/09/20/68ce3ceb2759a.png" alt=""></p></li><li><p>ç®¡ç†ç«¯ï¼š<code>http://localhost:18081</code></p></li></ul></li></ol><h3 id="3-3-Docker-Composeï¼ˆæ‰¹é‡éƒ¨ç½²å¤šå®¹å™¨ï¼‰">3.3 Docker Composeï¼ˆæ‰¹é‡éƒ¨ç½²å¤šå®¹å™¨ï¼‰</h3><h4 id="3-3-1-åŸºæœ¬è¯­æ³•">3.3.1 åŸºæœ¬è¯­æ³•</h4><p><code>docker-compose.yml</code> æ–‡ä»¶é€šè¿‡ â€œæœåŠ¡ï¼ˆserviceï¼‰â€ å®šä¹‰å®¹å™¨é…ç½®ï¼Œä¸ <code>docker run</code> å‚æ•°å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p><table><thead><tr><th>docker run å‚æ•°</th><th>docker compose æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--name</code></td><td><code>container_name</code></td><td>å®¹å™¨åç§°</td></tr><tr><td><code>-p</code></td><td><code>ports</code></td><td>ç«¯å£æ˜ å°„</td></tr><tr><td><code>-e</code></td><td><code>environment</code></td><td>ç¯å¢ƒå˜é‡</td></tr><tr><td><code>-v</code></td><td><code>volumes</code></td><td>æ•°æ®å· / ç›®å½•æŒ‚è½½</td></tr><tr><td><code>--network</code></td><td><code>networks</code></td><td>ç½‘ç»œé…ç½®</td></tr></tbody></table><h4 id="3-3-2-é»‘é©¬å•†åŸ-Compose-é…ç½®æ–‡ä»¶">3.3.2 é»‘é©¬å•†åŸ Compose é…ç½®æ–‡ä»¶</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">&quot;3.8&quot;</span><br><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">mysql:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">mysql</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;3306:3306&quot;</span><br>    <span class="hljs-attr">environment:</span><br>      <span class="hljs-attr">TZ:</span> <span class="hljs-string">Asia/Shanghai</span><br>      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-number">123</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/conf:/etc/mysql/conf.d&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/data:/var/lib/mysql&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./mysql/init:/docker-entrypoint-initdb.d&quot;</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br>  <span class="hljs-attr">hmall:</span><br>    <span class="hljs-attr">build:</span> <br>      <span class="hljs-attr">context:</span> <span class="hljs-string">.</span><br>      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">hmall</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;8080:8080&quot;</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span><br>  <span class="hljs-attr">nginx:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18080:18080&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;18081:18081&quot;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./nginx/nginx.conf:/etc/nginx/nginx.conf&quot;</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;./nginx/html:/usr/share/nginx/html&quot;</span><br>    <span class="hljs-attr">depends_on:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hmall</span><br>    <span class="hljs-attr">networks:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">hm-net</span><br><span class="hljs-attr">networks:</span><br>  <span class="hljs-attr">hm-net:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">hmall-net</span><br></code></pre></td></tr></table></figure><h4 id="3-3-3-åŸºç¡€å‘½ä»¤">3.3.3 åŸºç¡€å‘½ä»¤</h4><p>Docker Compose å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker compose [OPTIONS] [COMMAND]<br></code></pre></td></tr></table></figure><table><thead><tr><th>ç±»å‹</th><th>å‚æ•° / æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Options</td><td><code>-f</code></td><td>æŒ‡å®š <code>docker-compose.yml</code> æ–‡ä»¶çš„è·¯å¾„å’Œåç§°ï¼ˆé»˜è®¤æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„è¯¥æ–‡ä»¶ï¼‰</td></tr><tr><td>Options</td><td><code>-p</code></td><td>æŒ‡å®š ** é¡¹ç›®ï¼ˆprojectï¼‰** åç§°ï¼Œé¡¹ç›®æ˜¯ <code>docker-compose.yml</code> ä¸­å¤šä¸ªæœåŠ¡ï¼ˆserviceï¼‰çš„é›†åˆ</td></tr><tr><td>Commands</td><td><code>up</code></td><td>åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰å®šä¹‰çš„æœåŠ¡å®¹å™¨ï¼ˆ<code>-d</code> è¡¨ç¤º<strong>åå°å¯åŠ¨</strong>ï¼‰</td></tr><tr><td>Commands</td><td><code>down</code></td><td>åœæ­¢å¹¶ç§»é™¤æ‰€æœ‰å®¹å™¨ã€ç½‘ç»œï¼ˆé»˜è®¤ä¿ç•™æŒ‚è½½çš„æ•°æ®å·ï¼‰</td></tr><tr><td>Commands</td><td><code>ps</code></td><td>åˆ—å‡ºæ‰€æœ‰å¯åŠ¨çš„å®¹å™¨</td></tr><tr><td>Commands</td><td><code>logs</code></td><td>æŸ¥çœ‹æŒ‡å®šå®¹å™¨çš„è¿è¡Œæ—¥å¿—ï¼ˆç¤ºä¾‹ï¼š<code>docker compose logs å®¹å™¨å</code>ï¼‰</td></tr><tr><td>Commands</td><td><code>stop</code></td><td>åœæ­¢å®¹å™¨</td></tr><tr><td>Commands</td><td><code>start</code></td><td>å¯åŠ¨å·²åœæ­¢çš„å®¹å™¨</td></tr><tr><td>Commands</td><td><code>restart</code></td><td>é‡å¯å®¹å™¨</td></tr><tr><td>Commands</td><td><code>top</code></td><td>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹</td></tr><tr><td>Commands</td><td><code>exec</code></td><td>åœ¨è¿è¡Œä¸­çš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ï¼ˆç¤ºä¾‹ï¼š<code>docker compose exec å®¹å™¨å bash</code>ï¼‰</td></tr></tbody></table><h5 id="æ•™å­¦æ¼”ç¤ºï¼šéƒ¨ç½²é»‘é©¬å•†åŸé¡¹ç›®">æ•™å­¦æ¼”ç¤ºï¼šéƒ¨ç½²é»‘é©¬å•†åŸé¡¹ç›®</h5><h5 id="æ­¥éª¤-1ï¼šè¿›å…¥é¡¹ç›®æ ¹ç›®å½•">æ­¥éª¤ 1ï¼šè¿›å…¥é¡¹ç›®æ ¹ç›®å½•</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-2ï¼šæ¸…ç†æ—§å®¹å™¨ä¸èµ„æº">æ­¥éª¤ 2ï¼šæ¸…ç†æ—§å®¹å™¨ä¸èµ„æº</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å¼ºåˆ¶åˆ é™¤æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„Dockerå®¹å™¨</span><br><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> -f $(<span class="hljs-built_in">sudo</span> docker ps -qa)<br><br><span class="hljs-comment"># åˆ é™¤æ—§çš„hmallé•œåƒï¼ˆè‹¥å­˜åœ¨éœ€æ›´æ–°çš„æƒ…å†µï¼‰</span><br><span class="hljs-built_in">sudo</span> docker rmi hmall<br><br><span class="hljs-comment"># æ¸…ç©ºMySQLæ•°æ®ç›®å½•ï¼ˆå¦‚éœ€é‡æ–°åˆå§‹åŒ–æ•°æ®åº“ï¼‰</span><br><span class="hljs-built_in">rm</span> -rf mysql/data<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-3ï¼šå¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰">æ­¥éª¤ 3ï¼šå¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose up -d<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹</strong>ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs tex">[+] Building 15.5s (8/8) FINISHED<br> =&gt; [internal] load build definition from Dockerfile                                    0.0s<br> =&gt; =&gt; transferring dockerfile: 358B                                                    0.0s<br> =&gt; [internal] load .dockerignore                                                       0.0s<br> =&gt; =&gt; transferring context: 2B                                                         0.0s<br> =&gt; [internal] load metadata for docker.io/library/openjdk:11.0-jre-buster             15.4s<br> =&gt; [1/3] FROM docker.io/library/openjdk:11.0-jre-buster@sha256:3546a17e6fb4ff4fa681c3  0.0s<br> =&gt; [internal] load build context                                                       0.0s<br> =&gt; =&gt; transferring context: 98B                                                        0.0s<br> =&gt; CACHED [2/3] RUN ln -snf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime <span class="hljs-built_in">&amp;</span><span class="hljs-built_in">&amp;</span> echo   0.0s<br> =&gt; CACHED [3/3] COPY hm-service.jar /app.jar                                           0.0s<br> =&gt; exporting to image                                                                  0.0s<br> =&gt; =&gt; exporting layers                                                                 0.0s<br> =&gt; =&gt; writing image sha256:32eebee16acde22550232f2eb80c69d2ce813ed099640e4cfed2193f71  0.0s<br> =&gt; =&gt; naming to docker.io/library/root-hmall                                           0.0s<br>[+] Running 4/4<br> âœ” Network hmall    Created                                                             0.2s<br> âœ” Container mysql  Started                                                             0.5s<br> âœ” Container hmall  Started                                                             0.9s<br> âœ” Container nginx  Started                                                             1.5s<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-4ï¼šæŸ¥çœ‹é•œåƒåˆ—è¡¨">æ­¥éª¤ 4ï¼šæŸ¥çœ‹é•œåƒåˆ—è¡¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose images<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹</strong>ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tex">CONTAINER           REPOSITORY          TAG                 IMAGE ID            SIZE<br>hmall               root-hmall          latest              32eebee16acd        362MB<br>mysql               mysql               latest              3218b38490ce        516MB<br>nginx               nginx               latest              605c77e624dd        141MB<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-5ï¼šæŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨">æ­¥éª¤ 5ï¼šæŸ¥çœ‹è¿è¡Œä¸­å®¹å™¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose ps<br></code></pre></td></tr></table></figure><p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹</strong>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">NAME                IMAGE               COMMAND                  SERVICE             CREATED             STATUS              PORTS<br>hmall               root-hmall          &quot;java -jar /app.jar&quot;     hmall               54 seconds ago      Up 52 seconds       0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp<br>mysql               mysql               &quot;docker-entrypoint.sâ€¦&quot;   mysql               54 seconds ago      Up 53 seconds       0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp<br>nginx               nginx               &quot;/docker-entrypoint.â€¦&quot;   nginx               54 seconds ago      Up 52 seconds       80/tcp, 0.0.0.0:18080-18081-&gt;18080-18081/tcp, :::18080-18081-&gt;18080-18081/tcp<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-6ï¼šéªŒè¯é¡¹ç›®è®¿é—®">æ­¥éª¤ 6ï¼šéªŒè¯é¡¹ç›®è®¿é—®</h5><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®åç«¯æ¥å£ï¼ˆå°† <code>yourIp</code> æ›¿æ¢ä¸º Ubuntu ä¸»æœºçš„å®é™… IP åœ°å€ï¼‰ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs tex">http://yourIp:8080<br></code></pre></td></tr></table></figure><p>è‹¥èƒ½æ­£å¸¸åŠ è½½é¡µé¢æˆ–è¿”å›æ¥å£æ•°æ®ï¼Œè¯´æ˜ Docker Compose éƒ¨ç½²æˆåŠŸã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;åœ¨å­¦ä¹  Linux æ“ä½œç³»ç»Ÿå’Œé¡¹ç›®éƒ¨ç½²æ—¶ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°å‘½ä»¤ç¹å¤šã€è½¯ä»¶å®‰è£…å¤æ‚ã€ç¯å¢ƒä¾èµ–å†²çªç­‰é—®é¢˜ã€‚å°¤å…¶åœ¨å¾®æœåŠ¡æ—¶ä»£ï¼Œæˆç™¾ä¸Šåƒå°æœåŠ¡å™¨çš„éƒ¨ç½²è¿ç»´æ›´æ˜¯æŒ‘æˆ˜ã€‚Docker æŠ€æœ¯çš„å‡ºç°ï¼Œé€šè¿‡å®¹å™¨åŒ–è§£å†³äº†ç¯å¢ƒéš”ç¦»ä¸å¿«é€Ÿéƒ¨ç½²çš„é—®é¢˜ï¼Œè®©é¡¹ç›®éƒ¨ç½²å˜å¾—ç®€</summary>
      
    
    
    
    <category term="Java" scheme="https://www.xwybq.top/categories/Java/"/>
    
    
    <category term="Docker" scheme="https://www.xwybq.top/tags/Docker/"/>
    
    <category term="Linux" scheme="https://www.xwybq.top/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis-Plus</title>
    <link href="https://www.xwybq.top/posts/67c8035e/"/>
    <id>https://www.xwybq.top/posts/67c8035e/</id>
    <published>2025-09-19T07:31:42.000Z</published>
    <updated>2025-09-20T07:20:25.965Z</updated>
    
    <content type="html"><![CDATA[<p><img src="https://a1.boltp.com/2025/09/19/68cd62dc54ff0.png" alt=""></p><h1>ä¸€ã€MyBatis-Plus ç®€ä»‹</h1><h2 id="1-1-ä»€ä¹ˆæ˜¯-MyBatis-Plus">1.1 ä»€ä¹ˆæ˜¯ MyBatis-Plus</h2><p>MyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ <strong>MyBatis çš„å¢å¼ºå·¥å…·</strong>ï¼Œç”± baomidou å›¢é˜Ÿå¼€å‘ç»´æŠ¤ï¼Œæ ¸å¿ƒè®¾è®¡ç†å¿µæ˜¯ <strong>â€œåªåšå¢å¼ºï¼Œä¸åšæ”¹å˜â€</strong>â€”â€” å®Œå…¨å…¼å®¹ MyBatis åŸç”ŸåŠŸèƒ½ï¼Œä¸ä¾µå…¥ç°æœ‰ä»£ç ï¼ŒåŒæ—¶å°è£…äº†å¤§é‡é‡å¤çš„å•è¡¨ CRUD æ“ä½œï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹å†™ç¹ççš„ SQL æˆ– XML æ˜ å°„æ–‡ä»¶ï¼Œå³å¯å¿«é€Ÿå®Œæˆä¸šåŠ¡å¼€å‘ã€‚</p><p>æ­£å¦‚å…¶ slogan â€œTO BE THE BEST PARTNER OF MYBATISâ€ æ‰€ä¼ é€’çš„ï¼ŒMP å¹¶éæ›¿ä»£ MyBatisï¼Œè€Œæ˜¯ä½œä¸ºå…¶ â€œæœ€ä½³æ­æ¡£â€ å­˜åœ¨ã€‚PPT ä¸­ç”¨ â€œæ¶¦ç‰©æ— å£°ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘â€ å½¢å®¹å…¶ç‰¹æ€§ï¼Œæ°æ˜¯å› ä¸ºå¼•å…¥åä¸ä¼šå¯¹ç°æœ‰ MyBatis å·¥ç¨‹äº§ç”Ÿä»»ä½•å¹²æ‰°ï¼ŒåŸæœ‰ä»£ç å¯æ— ç¼è¡”æ¥ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd45631d581.png" alt=""></p><h2 id="1-2-æ ¸å¿ƒç‰¹æ€§">1.2 æ ¸å¿ƒç‰¹æ€§</h2><p>MP çš„æ ¸å¿ƒä»·å€¼é›†ä¸­åœ¨ â€œç®€åŒ–å¼€å‘â€ ä¸ â€œæ•ˆç‡æå‡â€ï¼Œç»“åˆè¯¾ç¨‹å†…å®¹å¯å½’çº³ä¸ºä»¥ä¸‹ 6 ç‚¹ï¼š</p><ul><li><strong>æ— ä¾µå…¥æ€§</strong>ï¼šåŸºäº MyBatis åŸç”Ÿæ¶æ„æ‰©å±•ï¼Œä¸ä¿®æ”¹ MyBatis æ ¸å¿ƒé€»è¾‘ï¼Œç°æœ‰å·¥ç¨‹å¼•å…¥åæ— éœ€é‡æ„ä»£ç ã€‚</li><li><strong>æ•ˆç‡è‡³ä¸Š</strong>ï¼šå†…ç½® <code>BaseMapper</code>ï¼ˆDAO å±‚ï¼‰å’Œ <code>IService</code>ï¼ˆService å±‚ï¼‰æ¥å£ï¼Œå°è£…äº†å…¨é‡å•è¡¨ CRUD æ“ä½œï¼ˆæ–°å¢ã€åˆ é™¤ã€æŸ¥è¯¢ã€æ›´æ–°ç­‰ï¼‰ï¼Œå®ç° â€œé›¶ SQL å¼€å‘â€ã€‚</li><li><strong>æ™ºèƒ½æ˜ å°„</strong>ï¼šé»˜è®¤éµå¾ª â€œé©¼å³° - ä¸‹åˆ’çº¿â€ è½¬æ¢è§„åˆ™ï¼ˆç±»åâ†’è¡¨åã€å˜é‡åâ†’å­—æ®µåï¼‰ï¼Œé»˜è®¤å°†<code>id</code>å­—æ®µä½œä¸ºä¸»é”®ï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®æˆæœ¬ã€‚</li><li><strong>çµæ´»æ¡ä»¶æ„é€ </strong>ï¼šæä¾› <code>QueryWrapper</code>ã€<code>LambdaQueryWrapper</code> ç­‰æ¡ä»¶æ„é€ å™¨ï¼Œæ”¯æŒåŠ¨æ€æ‹¼æ¥å¤æ‚ WHERE æ¡ä»¶ï¼Œé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ SQL çš„è¯­æ³•é”™è¯¯é£é™©ã€‚</li><li><strong>ä¸°å¯Œæ‰©å±•åŠŸèƒ½</strong>ï¼šå†…ç½®ä»£ç ç”Ÿæˆã€é€»è¾‘åˆ é™¤ã€æšä¸¾å­—æ®µæ˜ å°„ã€JSON å­—æ®µå¤„ç†ç­‰é«˜é¢‘åœºæ™¯å·¥å…·ï¼Œè¦†ç›–æ—¥å¸¸å¼€å‘ç—›ç‚¹ã€‚</li><li><strong>å¯æ’æ‹”æ’ä»¶</strong>ï¼šæ”¯æŒåˆ†é¡µã€ä¹è§‚é”ã€å¤šç§Ÿæˆ·ã€åŠ¨æ€è¡¨åç­‰æ’ä»¶ï¼Œé€šè¿‡ç®€å•é…ç½®å³å¯å¯ç”¨ï¼Œæ‰©å±•æ€§æå¼ºã€‚</li></ul><h2 id="1-3-æ”¯æŒçš„æ•°æ®åº“">1.3 æ”¯æŒçš„æ•°æ®åº“</h2><p>å…¼å®¹æ‰€æœ‰ MyBatis æ”¯æŒçš„å…³ç³»å‹æ•°æ®åº“ï¼Œè¦†ç›–ä¸»æµåŠä¼ä¸šçº§åœºæ™¯ï¼š</p><table><thead><tr><th>æ•°æ®åº“ç±»å‹</th><th>é€‚é…è¯´æ˜</th><th>å…¸å‹ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>MySQL</td><td>é€‚é… 5.5+ / 8.0+ ç‰ˆæœ¬</td><td>äº’è”ç½‘åº”ç”¨ã€ä¸­å°é¡¹ç›®</td></tr><tr><td>Oracle</td><td>æ”¯æŒ 11g+ ç‰ˆæœ¬</td><td>ä¼ä¸šçº§ç³»ç»Ÿ</td></tr><tr><td>SQL Server</td><td>å…¼å®¹ 2008+ ç‰ˆæœ¬</td><td>å¾®è½¯æŠ€æœ¯æ ˆé¡¹ç›®</td></tr><tr><td>PostgreSQL</td><td>æ”¯æŒ 9.4+ ç‰ˆæœ¬ï¼Œé€‚é… JSON å­—æ®µ</td><td>å¼€æºä¼ä¸šçº§é¡¹ç›®</td></tr><tr><td>SQLite</td><td>é€‚é… 3.7+ ç‰ˆæœ¬</td><td>è½»é‡çº§åº”ç”¨ã€åµŒå…¥å¼ç³»ç»Ÿ</td></tr><tr><td>DB2</td><td>æ”¯æŒ 10.5+ ç‰ˆæœ¬</td><td>å¤§å‹é‡‘èã€æ”¿åŠ¡ç³»ç»Ÿ</td></tr></tbody></table><h2 id="1-4-æ¡†æ¶ç»“æ„">1.4 æ¡†æ¶ç»“æ„</h2><p>MP åŸºäº MyBatis åˆ†å±‚è®¾è®¡ï¼Œæ•´ä½“ç»“æ„æ¸…æ™°ï¼Œå¯æ‹†è§£ä¸º 4 ä¸ªæ ¸å¿ƒå±‚çº§ï¼š</p><ol><li><strong>åº•å±‚ä¾èµ–å±‚</strong>ï¼šä¾èµ– MyBatis æ ¸å¿ƒåŒ…ã€JDBC é©±åŠ¨åŠ Spring ç”Ÿæ€ç»„ä»¶ï¼ˆå¦‚ Spring Boot Starterï¼‰ï¼Œç¡®ä¿ä¸ Java ä¸»æµå¼€å‘ç¯å¢ƒæ— ç¼é›†æˆã€‚</li><li><strong>æ ¸å¿ƒåŠŸèƒ½å±‚</strong>ï¼šMP çš„ â€œå¿ƒè„â€ï¼ŒåŒ…å«ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š<ul><li>é€šç”¨ CRUD æ¥å£ï¼š<code>BaseMapper</code>ï¼ˆæä¾›å•è¡¨ DAO å±‚æ“ä½œï¼‰ã€<code>IService</code>ï¼ˆæä¾› Service å±‚æ‰¹é‡æ“ä½œã€é€»è¾‘å°è£…ï¼‰ï¼›</li><li>å®ä½“æ˜ å°„ï¼šåŸºäºæ³¨è§£ï¼ˆ<code>@TableName</code>ã€<code>@TableId</code> ç­‰ï¼‰å®ç°è¡¨ä¸å®ä½“ç±»çš„å…³è”ï¼›</li><li>æ¡ä»¶æ„é€ ï¼š<code>Wrapper</code> å®¶æ—æ¥å£ï¼ŒåŠ¨æ€ç”Ÿæˆ WHERE æ¡ä»¶ã€‚</li></ul></li><li><strong>æ‰©å±•åŠŸèƒ½å±‚</strong>ï¼šé’ˆå¯¹é«˜é¢‘éœ€æ±‚çš„å°è£…ï¼Œå¦‚ä»£ç ç”Ÿæˆå™¨ï¼ˆè‡ªåŠ¨ç”Ÿæˆ Entityã€Mapperã€Service ç­‰ä»£ç ï¼‰ã€é€»è¾‘åˆ é™¤ï¼ˆæ¨¡æ‹Ÿåˆ é™¤æ•ˆæœï¼Œä¸çœŸæ­£åˆ æ•°æ®ï¼‰ã€æšä¸¾ / JSON å¤„ç†å™¨ï¼ˆè§£å†³ç‰¹æ®Šå­—æ®µç±»å‹æ˜ å°„é—®é¢˜ï¼‰ã€‚</li><li><strong>æ’ä»¶å±‚</strong>ï¼šåŸºäº MyBatis æ‹¦æˆªå™¨å®ç°ï¼Œæä¾›åˆ†é¡µï¼ˆ<code>PaginationInnerInterceptor</code>ï¼‰ã€ä¹è§‚é”ï¼ˆ<code>OptimisticLockerInnerInterceptor</code>ï¼‰ã€é˜²æ­¢å…¨è¡¨åˆ é™¤ï¼ˆ<code>BlockAttackInnerInterceptor</code>ï¼‰ç­‰æ’ä»¶ï¼ŒæŒ‰éœ€é…ç½®å¯ç”¨ã€‚</li></ol><h2 id="1-5-å®˜æ–¹èµ„æº">1.5 å®˜æ–¹èµ„æº</h2><ul><li><strong>å®˜ç½‘</strong>ï¼š<a href="https://baomidou.com/">https://baomidou.com/</a> ï¼ˆæ ¸å¿ƒæ–‡æ¡£ã€æ›´æ–°æ—¥å¿—ã€ç”Ÿæ€å·¥å…·å…¥å£ï¼Œä¿¡æ¯æœ€æƒå¨ï¼‰</li><li><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š<a href="https://mybatis.plus/">https://mybatis.plus/</a> ï¼ˆå«è¯¦ç»†é…ç½®æŒ‡å—ã€API è¯´æ˜ã€æ¡ˆä¾‹æ•™ç¨‹ï¼‰</li><li><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://github.com/baomidou/mybatis-plus">https://github.com/baomidou/mybatis-plus</a> ï¼ˆæºç åœ°å€ã€issue åé¦ˆã€è´¡çŒ®æŒ‡å—ï¼‰</li></ul><h1>äºŒã€MyBatis-Plus å¿«é€Ÿå…¥é—¨</h1><h2 id="2-1-ç¯å¢ƒå‡†å¤‡">2.1 ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1-1-æ•°æ®åº“åˆå§‹åŒ–">2.1.1 æ•°æ®åº“åˆå§‹åŒ–</h3><p>å¯¼å…¥è¯¾å‰æä¾›çš„<code>mp.sql</code>è„šæœ¬ï¼Œåˆ›å»º<code>mp</code>æ•°æ®åº“åŠ 3 å¼ æ ¸å¿ƒè¡¨ï¼Œè¡¨ç»“æ„ä¸æ ¸å¿ƒæ•°æ®å¦‚ä¸‹ï¼š</p><table><thead><tr><th>è¡¨å</th><th>ä½œç”¨</th><th>æ ¸å¿ƒå­—æ®µè¯´æ˜</th></tr></thead><tbody><tr><td><code>user</code></td><td>æ ¸å¿ƒç”¨æˆ·è¡¨</td><td><code>id</code>(ä¸»é”®)ã€<code>username</code>(ç”¨æˆ·å)ã€<code>info</code>(JSON è¯¦æƒ…)ã€<code>status</code>(çŠ¶æ€)ã€<code>balance</code>(ä½™é¢)</td></tr><tr><td><code>address</code></td><td>ç”¨æˆ·åœ°å€è¡¨</td><td><code>id</code>ã€<code>user_id</code>(å¤–é”®å…³è” <a href="http://user.id">user.id</a>)ã€<code>province</code>(çœ)ã€<code>city</code>(å¸‚)ã€<code>is_default</code>(é»˜è®¤åœ°å€)</td></tr><tr><td><code>tb_user</code></td><td>æ³¨è§£æµ‹è¯•ä¸“ç”¨è¡¨</td><td><code>user_id</code>(ä¸»é”®)ã€<code>username</code>ã€<code>is_deleted</code>(é€»è¾‘åˆ é™¤æ ‡è®°)ã€<code>order</code>(æ’åºå­—æ®µ)</td></tr></tbody></table><p><strong>æ ¸å¿ƒè¡¨ç»“æ„ç¤ºä¾‹ï¼ˆuser è¡¨ï¼‰</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE TABLE</span> `<span class="hljs-keyword">user</span>` (<br>`id` <span class="hljs-type">BIGINT</span>(<span class="hljs-number">19</span>) <span class="hljs-keyword">NOT NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·id&#x27;</span>,<br>`username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;ç”¨æˆ·å&#x27;</span>,<br>`password` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;å¯†ç &#x27;</span>,<br>`phone` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;æ³¨å†Œæ‰‹æœºå·&#x27;</span>,<br>`info` JSON <span class="hljs-keyword">NOT NULL</span> COMMENT <span class="hljs-string">&#x27;è¯¦ç»†ä¿¡æ¯&#x27;</span>,<br>`status` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;1&#x27;</span> COMMENT <span class="hljs-string">&#x27;ä½¿ç”¨çŠ¶æ€ï¼ˆ1æ­£å¸¸ 2å†»ç»“ï¼‰&#x27;</span>,<br>`balance` <span class="hljs-type">INT</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;è´¦æˆ·ä½™é¢&#x27;</span>,<br>`create_time` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>`update_time` DATETIME <span class="hljs-keyword">NOT NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;æ›´æ–°æ—¶é—´&#x27;</span>,<br><span class="hljs-keyword">PRIMARY KEY</span> (`id`) <span class="hljs-keyword">USING</span> BTREE,<br><span class="hljs-keyword">UNIQUE</span> INDEX `username` (`username`) <span class="hljs-keyword">USING</span> BTREE<br>) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç”¨æˆ·è¡¨&#x27;</span>;<br></code></pre></td></tr></table></figure><h3 id="2-1-2-é¡¹ç›®å¯¼å…¥ä¸é…ç½®">2.1.2 é¡¹ç›®å¯¼å…¥ä¸é…ç½®</h3><ol><li><strong>å¯¼å…¥é¡¹ç›®</strong>ï¼šåŠ è½½<code>mp-demo</code>é¡¹ç›®ç»“æ„ï¼Œç¡®ä¿æ ¸å¿ƒåŒ…è·¯å¾„ä¸º<code>com.itheima.mp</code>ï¼ˆå«<code>domain.po</code>ã€<code>mapper</code>ç­‰å­åŒ…ï¼‰ã€‚</li><li><strong>é…ç½®æ•°æ®åº“è¿æ¥</strong>ï¼šä¿®æ”¹<code>application.yaml</code>ä¸­çš„ JDBC å‚æ•°ï¼Œé€‚é…æœ¬åœ°æ•°æ®åº“ç¯å¢ƒï¼š</li></ol><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3307/mp?useUnicode=true&amp;characterEncoding=UTF-8&amp;autoReconnect=true&amp;serverTimezone=Asia/Shanghai</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºæœ¬åœ°ç”¨æˆ·å</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>  <span class="hljs-comment"># æ›¿æ¢ä¸ºæœ¬åœ°å¯†ç </span><br><span class="hljs-attr">logging:</span><br>  <span class="hljs-attr">level:</span><br>    <span class="hljs-attr">com.itheima:</span> <span class="hljs-string">debug</span>  <span class="hljs-comment"># æ‰“å°SQLæ—¥å¿—ï¼Œä¾¿äºè°ƒè¯•</span><br>  <span class="hljs-attr">pattern:</span><br>    <span class="hljs-attr">dateformat:</span> <span class="hljs-string">HH:mm:ss</span><br></code></pre></td></tr></table></figure><h2 id="2-2-MyBatis-é¡¹ç›®æ”¹é€ ä¸º-MyBatis-Plus">2.2 MyBatis é¡¹ç›®æ”¹é€ ä¸º MyBatis-Plus</h2><p>åŸºäºç°æœ‰ MyBatis é¡¹ç›®ï¼Œé€šè¿‡ 3 æ­¥æ”¹é€ å³å¯å®ç°<code>user</code>è¡¨çš„ CRUD åŠŸèƒ½ï¼Œæ ¸å¿ƒæ˜¯åˆ©ç”¨ MP çš„<code>BaseMapper</code>çœå»æ‰‹åŠ¨ç¼–å†™ SQL çš„å·¥ä½œã€‚</p><h3 id="2-2-1-æ­¥éª¤-1ï¼šæ›¿æ¢ä¾èµ–">2.2.1 æ­¥éª¤ 1ï¼šæ›¿æ¢ä¾èµ–</h3><p>MP æä¾›äº† Spring Boot Starterï¼Œé›†æˆäº† MyBatis æ ¸å¿ƒåŠŸèƒ½å¹¶å®ç°è‡ªåŠ¨è£…é…ï¼Œç›´æ¥æ›¿æ¢åŸ MyBatis ä¾èµ–ï¼š</p><h4 id="Spring-Boot-2-x-ä¾èµ–">Spring Boot 2.x ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- MyBatis-Plus Starterï¼ˆæ›¿æ¢mybatis-spring-boot-starterï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å…¶ä»–å¿…è¦ä¾èµ– --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="Spring-Boot-3-x-ä¾èµ–">Spring Boot 3.x ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="2-2-2-æ­¥éª¤-2ï¼šé…ç½®-Mapper-æ‰«æ">2.2.2 æ­¥éª¤ 2ï¼šé…ç½® Mapper æ‰«æ</h3><p>åœ¨ Spring Boot å¯åŠ¨ç±»ä¸Šæ·»åŠ <code>@MapperScan</code>æ³¨è§£ï¼ŒæŒ‡å®š Mapper æ¥å£æ‰€åœ¨åŒ…ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.mybatis.spring.annotation.MapperScan;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@MapperScan(&quot;com.itheima.mp.mapper&quot;)</span>  <span class="hljs-comment">// æ‰«æMapperæ¥å£</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MpDemoApplication</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(MpDemoApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-3-æ­¥éª¤-3ï¼šå®šä¹‰-Mapper-æ¥å£ï¼ˆæ ¸å¿ƒæ”¹é€ ï¼‰">2.2.3 æ­¥éª¤ 3ï¼šå®šä¹‰ Mapper æ¥å£ï¼ˆæ ¸å¿ƒæ”¹é€ ï¼‰</h3><p>MP çš„<code>BaseMapper</code>æ¥å£å·²å°è£…æ‰€æœ‰å•è¡¨ CRUD æ–¹æ³•ï¼Œåªéœ€è®©è‡ªå®šä¹‰ Mapper ç»§æ‰¿å®ƒå³å¯ï¼Œæ— éœ€ç¼–å†™ XML æ˜ å°„æ–‡ä»¶ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd2f3da98a1.png" alt=""></p><h4 id="æ”¹é€ å‰ï¼ˆMyBatisï¼‰">æ”¹é€ å‰ï¼ˆMyBatisï¼‰</h4><p>éœ€æ‰‹åŠ¨å®šä¹‰ CRUD æ–¹æ³•åŠ XMLï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// Mapperæ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long id)</span>;<br>    User <span class="hljs-title function_">queryUserById</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> Long id)</span>;<br>    List&lt;User&gt; <span class="hljs-title function_">queryUserByIds</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;ids&quot;)</span> List&lt;Long&gt; ids)</span>;<br>&#125;<br><br><span class="hljs-comment">// å¯¹åº”çš„XMLæ˜ å°„æ–‡ä»¶ï¼ˆéœ€ç¼–å†™å¤§é‡SQLï¼‰</span><br>&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;<br>&lt;!DOCTYPE mapper PUBLIC <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;<br>&lt;mapper namespace=<span class="hljs-string">&quot;com.itheima.mp.mapper.UserMapper&quot;</span>&gt;<br>    &lt;insert id=<span class="hljs-string">&quot;saveUser&quot;</span> parameterType=<span class="hljs-string">&quot;com.itheima.mp.domain.po.User&quot;</span>&gt;<br>        INSERT INTO `user` (`id`, `username`, `password`) VALUES (#&#123;id&#125;, #&#123;username&#125;, #&#123;password&#125;);<br>    &lt;/insert&gt;<br>    &lt;!-- çœç•¥å…¶ä»–UPDATE/DELETE/SELECTæ ‡ç­¾ --&gt;<br>&lt;/mapper&gt;<br></code></pre></td></tr></table></figure><h4 id="æ”¹é€ åï¼ˆMyBatis-Plusï¼‰">æ”¹é€ åï¼ˆMyBatis-Plusï¼‰</h4><p>ä»…éœ€ç»§æ‰¿<code>BaseMapper</code>ï¼Œé›¶ SQL å®ç° CRUDï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.User;<br><br><span class="hljs-comment">// ç»§æ‰¿BaseMapperï¼Œæ³›å‹æŒ‡å®šPOå®ä½“ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; &#123;<br>    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨å†™ä»»ä½•æ–¹æ³•ï¼ŒBaseMapperå·²å…¨éƒ¨å°è£…</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-2-4-æ”¹é€ æ•ˆæœæµ‹è¯•">2.2.4 æ”¹é€ æ•ˆæœæµ‹è¯•</h3><p>é€šè¿‡å•å…ƒæµ‹è¯•éªŒè¯ MP çš„ CRUD èƒ½åŠ›ï¼Œå¯¹æ¯” MyBatis å®ç°ï¼Œä»£ç é‡å¤§å¹…å‡å°‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisPlusUserMapperTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<br><br>    <span class="hljs-comment">// æ–°å¢ç”¨æˆ·</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsert</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setId(<span class="hljs-number">5L</span>);<br>        user.setUsername(<span class="hljs-string">&quot;Lucy&quot;</span>);<br>        user.setPassword(<span class="hljs-string">&quot;123&quot;</span>);<br>        user.setInfo(<span class="hljs-string">&quot;&#123;\&quot;age\&quot;: 24, \&quot;intro\&quot;: \&quot;è‹±æ–‡è€å¸ˆ\&quot;, \&quot;gender\&quot;: \&quot;female\&quot;&#125;&quot;</span>);<br>        userMapper.insert(user);  <span class="hljs-comment">// MPè‡ªå¸¦æ–¹æ³•</span><br>    &#125;<br><br>    <span class="hljs-comment">// æ ¹æ®IDæŸ¥è¯¢</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectById</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userMapper.selectById(<span class="hljs-number">5L</span>);  <span class="hljs-comment">// MPè‡ªå¸¦æ–¹æ³•</span><br>        System.out.println(<span class="hljs-string">&quot;user = &quot;</span> + user);<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰¹é‡æŸ¥è¯¢</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectByIds</span><span class="hljs-params">()</span> &#123;<br>        List&lt;User&gt; users = userMapper.selectBatchIds(List.of(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">3L</span>));  <span class="hljs-comment">// MPè‡ªå¸¦æ–¹æ³•</span><br>        users.forEach(System.out::println);<br>    &#125;<br><br>    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdateById</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>        user.setId(<span class="hljs-number">5L</span>);<br>        user.setBalance(<span class="hljs-number">20000</span>);<br>        userMapper.updateById(user);  <span class="hljs-comment">// MPè‡ªå¸¦æ–¹æ³•</span><br>    &#125;<br><br>    <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDelete</span><span class="hljs-params">()</span> &#123;<br>        userMapper.deleteById(<span class="hljs-number">5L</span>);  <span class="hljs-comment">// MPè‡ªå¸¦æ–¹æ³•</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>SQL æ—¥å¿—ç¤ºä¾‹</strong>ï¼ˆMP è‡ªåŠ¨ç”Ÿæˆæ ‡å‡† SQLï¼Œé¿å…<code>SELECT *</code>ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">11:54:23 DEBUG c.i.mp.mapper.UserMapper.selectBatchIds  : ==&gt;  Preparing: SELECT id,username,password,phone,info,status,balance,create_time,update_time FROM user WHERE id IN ( ? , ? , ? )<br>11:54:23 DEBUG c.i.mp.mapper.UserMapper.selectBatchIds  : ==&gt; Parameters: 1(Long), 2(Long), 3(Long)<br>11:54:23 DEBUG c.i.mp.mapper.UserMapper.selectBatchIds  : &lt;==      Total: 3<br></code></pre></td></tr></table></figure><h2 id="2-3-å¸¸è§æ³¨è§£">2.3 å¸¸è§æ³¨è§£</h2><p>MP é€šè¿‡åå°„æ¨æ–­ PO ä¸æ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»ï¼Œä½†é»˜è®¤çº¦å®šï¼ˆç±»åé©¼å³°è½¬è¡¨åã€<code>id</code>ä¸ºä¸»é”®ç­‰ï¼‰å¯èƒ½ä¸å®é™…ä¸ç¬¦ï¼Œéœ€é€šè¿‡æ³¨è§£æ‰‹åŠ¨å£°æ˜æ˜ å°„è§„åˆ™ã€‚</p><h3 id="2-3-1-æ ¸å¿ƒæ³¨è§£è¯´æ˜">2.3.1 æ ¸å¿ƒæ³¨è§£è¯´æ˜</h3><h4 id="1-TableNameï¼šæŒ‡å®šè¡¨å">1. @TableNameï¼šæŒ‡å®šè¡¨å</h4><p>å½“ PO ç±»åä¸æ•°æ®åº“è¡¨åä¸ä¸€è‡´æ—¶ä½¿ç”¨ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨ã€‚</p><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>value</code></td><td>è¡¨å</td><td><code>@TableName(&quot;tb_user&quot;)</code></td></tr><tr><td><code>autoResultMap</code></td><td>è‡ªåŠ¨æ„å»º ResultMapï¼ˆé€‚é… JSON ç­‰ç‰¹æ®Šå­—æ®µï¼‰</td><td><code>@TableName(value=&quot;tb_user&quot;, autoResultMap=true)</code></td></tr></tbody></table><h4 id="2-TableIdï¼šæŒ‡å®šä¸»é”®">2. @TableIdï¼šæŒ‡å®šä¸»é”®</h4><p>æ ‡è¯†å®ä½“ç±»çš„ä¸»é”®å­—æ®µï¼Œæ”¯æŒè‡ªå®šä¹‰ä¸»é”®ç­–ç•¥ã€‚</p><table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>value</code></td><td>ä¸»é”®å­—æ®µåï¼ˆä¸ PO ä¸ä¸€è‡´æ—¶ï¼‰</td><td><code>@TableId(&quot;user_id&quot;)</code></td></tr><tr><td><code>type</code></td><td>ä¸»é”®ç”Ÿæˆç­–ç•¥</td><td><code>@TableId(type = IdType.AUTO)</code></td></tr></tbody></table><p><strong>ä¸»é”®ç­–ç•¥ï¼ˆIdType æšä¸¾æ ¸å¿ƒå€¼ï¼‰</strong>ï¼š</p><ul><li><code>AUTO</code>ï¼šæ•°æ®åº“è‡ªå¢ï¼ˆéœ€è¡¨ä¸»é”®è®¾ç½®è‡ªå¢ï¼‰</li><li><code>ASSIGN_ID</code>ï¼šé›ªèŠ±ç®—æ³•ç”Ÿæˆå…¨å±€å”¯ä¸€ Long å‹ IDï¼ˆé»˜è®¤ç­–ç•¥ï¼‰</li><li><code>INPUT</code>ï¼šæ‰‹åŠ¨è®¾ç½®ä¸»é”®å€¼</li></ul><h4 id="3-TableFieldï¼šæŒ‡å®šæ™®é€šå­—æ®µ">3. @TableFieldï¼šæŒ‡å®šæ™®é€šå­—æ®µ</h4><p>è§£å†³å­—æ®µåä¸ä¸€è‡´ã€å…³é”®å­—å†²çªã€éæ•°æ®åº“å­—æ®µç­‰é—®é¢˜ï¼Œå¸¸è§åœºæ™¯ï¼š</p><table><thead><tr><th>åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å­—æ®µåä¸ä¸€è‡´</td><td>æŒ‡å®š<code>value</code>å±æ€§å¯¹åº”æ•°æ®åº“å­—æ®µ</td><td><code>@TableField(&quot;username&quot;) private String name;</code></td></tr><tr><td>å­—æ®µåå«å…³é”®å­—ï¼ˆå¦‚<code>order</code>ï¼‰</td><td>ç”¨`è½¬ä¹‰</td><td><code>@TableField(&quot;</code>order<code>&quot;) private Integer order;</code></td></tr><tr><td>å­—æ®µéæ•°æ®åº“è¡¨å­—æ®µ</td><td>è®¾ç½®<code>exist=false</code></td><td><code>@TableField(exist = false) private String address;</code></td></tr><tr><td>å¸ƒå°”å­—æ®µä»¥<code>is</code>å¼€å¤´ï¼ˆå¦‚<code>isDeleted</code>ï¼‰</td><td>é¿å… JavaBean è§£æä¸¢å¤±<code>is</code></td><td><code>@TableField(&quot;is_deleted&quot;) private Boolean isDeleted;</code></td></tr></tbody></table><h3 id="2-3-2-æ³¨è§£ä½¿ç”¨æ¡ˆä¾‹">2.3.2 æ³¨è§£ä½¿ç”¨æ¡ˆä¾‹</h3><p>ä»¥<code>tb_user</code>è¡¨ï¼ˆæ³¨è§£æµ‹è¯•è¡¨ï¼‰ä¸ºä¾‹ï¼Œå®ç° PO ä¸è¡¨çš„å®Œæ•´æ˜ å°„ï¼š</p><h4 id="1-å®šä¹‰-PO-å®ä½“ç±»ï¼ˆMpUserï¼‰">1. å®šä¹‰ PO å®ä½“ç±»ï¼ˆMpUserï¼‰</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.*;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(&quot;tb_user&quot;)</span>  <span class="hljs-comment">// æŒ‡å®šè¡¨åä¸ºtb_userï¼ˆä¸ç±»åMpUserä¸ä¸€è‡´ï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MpUser</span> &#123;<br>    <span class="hljs-comment">// ä¸»é”®ï¼šè¡¨å­—æ®µä¸ºuser_idï¼Œç­–ç•¥ä¸ºæ•°æ®åº“è‡ªå¢</span><br>    <span class="hljs-meta">@TableId(value = &quot;user_id&quot;, type = IdType.AUTO)</span><br>    <span class="hljs-keyword">private</span> Long id;<br><br>    <span class="hljs-comment">// æ™®é€šå­—æ®µï¼šPOå±æ€§nameå¯¹åº”è¡¨å­—æ®µusername</span><br>    <span class="hljs-meta">@TableField(&quot;username&quot;)</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-comment">// æ™®é€šå­—æ®µï¼šä¸è¡¨å­—æ®µä¸€è‡´ï¼Œæ— éœ€æ³¨è§£</span><br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-comment">// å¸ƒå°”å­—æ®µï¼šisDeletedå¯¹åº”è¡¨å­—æ®µis_deleted</span><br>    <span class="hljs-meta">@TableField(&quot;is_deleted&quot;)</span><br>    <span class="hljs-keyword">private</span> Boolean isDeleted;<br><br>    <span class="hljs-comment">// å…³é”®å­—å­—æ®µï¼šorderå¯¹åº”è¡¨å­—æ®µ`order`ï¼ˆè½¬ä¹‰ï¼‰</span><br>    <span class="hljs-meta">@TableField(&quot;`order`&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer order;<br><br>    <span class="hljs-comment">// éæ•°æ®åº“å­—æ®µï¼šä¸å‚ä¸æ˜ å°„</span><br>    <span class="hljs-meta">@TableField(exist = false)</span><br>    <span class="hljs-keyword">private</span> String address;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-æµ‹è¯•æ³¨è§£æ•ˆæœ">2. æµ‹è¯•æ³¨è§£æ•ˆæœ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MpUserMapperTests</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> MpUserMapper mpUserMapper;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testInsert</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">MpUser</span> <span class="hljs-variable">mpUser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MpUser</span>();<br>        mpUser.setName(<span class="hljs-string">&quot;MPç”¨æˆ·1&quot;</span>);  <span class="hljs-comment">// å¯¹åº”usernameå­—æ®µ</span><br>        mpUser.setOrder(<span class="hljs-number">1</span>);  <span class="hljs-comment">// è‡ªåŠ¨è½¬ä¹‰ä¸º`order`</span><br>        mpUser.setAddress(<span class="hljs-string">&quot;æµ‹è¯•åœ°å€&quot;</span>);  <span class="hljs-comment">// éæ•°æ®åº“å­—æ®µï¼Œä¸æ’å…¥</span><br>        mpUserMapper.insert(mpUser);<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testSelectById</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">MpUser</span> <span class="hljs-variable">mpUser</span> <span class="hljs-operator">=</span> mpUserMapper.selectById(<span class="hljs-number">1L</span>);<br>        System.out.println(mpUser);  <span class="hljs-comment">// addresså­—æ®µä¸ºnullï¼Œä¸å‚ä¸æŸ¥è¯¢</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-4-å¸¸è§é…ç½®">2.4 å¸¸è§é…ç½®</h2><p>MP æ”¯æŒé€šè¿‡<code>application.yaml</code>è‡ªå®šä¹‰å…¨å±€é…ç½®ï¼Œè¦†ç›–é»˜è®¤è¡Œä¸ºï¼Œæ ¸å¿ƒé…ç½®é¡¹å¦‚ä¸‹ï¼š</p><h3 id="2-4-1-æ ¸å¿ƒé…ç½®ç¤ºä¾‹">2.4.1 æ ¸å¿ƒé…ç½®ç¤ºä¾‹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-comment"># 1. åˆ«åæ‰«æï¼šç»™POåŒ…æ³¨å†Œåˆ«åï¼ŒXMLä¸­å¯ç›´æ¥ç”¨ç±»å</span><br>  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.itheima.mp.domain.po</span><br>  <span class="hljs-comment"># 2. Mapper XMLè·¯å¾„ï¼šè‡ªå®šä¹‰SQLéœ€é…ç½®ï¼ˆé»˜è®¤classpath*:/mapper/**/*.xmlï¼‰</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">&quot;classpath*:/mapper/**/*.xml&quot;</span><br>  <span class="hljs-comment"># 3. MyBatisåŸç”Ÿé…ç½®</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># é©¼å³°-ä¸‹åˆ’çº¿æ˜ å°„ï¼ˆé»˜è®¤å¼€å¯ï¼‰</span><br>    <span class="hljs-attr">cache-enabled:</span> <span class="hljs-literal">false</span>  <span class="hljs-comment"># å…³é—­äºŒçº§ç¼“å­˜ï¼ˆæŒ‰éœ€å¼€å¯ï¼‰</span><br>  <span class="hljs-comment"># 4. MPå…¨å±€é…ç½®</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">assign_id</span>  <span class="hljs-comment"># å…¨å±€ä¸»é”®ç­–ç•¥ï¼šé›ªèŠ±ç®—æ³•ï¼ˆé»˜è®¤ï¼‰</span><br>      <span class="hljs-attr">update-strategy:</span> <span class="hljs-string">not_null</span>  <span class="hljs-comment"># æ›´æ–°ç­–ç•¥ï¼šåªæ›´æ–°énullå­—æ®µï¼ˆé»˜è®¤ï¼‰</span><br>      <span class="hljs-attr">table-prefix:</span> <span class="hljs-string">tb_</span>  <span class="hljs-comment"># è¡¨åå‰ç¼€ï¼ˆå¦‚POç±»Userå¯¹åº”tb_userè¡¨ï¼Œå¯çœç•¥@TableNameï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="2-4-2-å…³é”®é…ç½®è¯´æ˜">2.4.2 å…³é”®é…ç½®è¯´æ˜</h3><table><thead><tr><th>é…ç½®é¡¹</th><th>ä½œç”¨</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td><code>type-aliases-package</code></td><td>PO ç±»åˆ«åæ‰«æåŒ…ï¼ŒXML ä¸­å¯ç®€åŒ–ç±»åå¼•ç”¨</td><td>æ— ï¼ˆéœ€æ‰‹åŠ¨æŒ‡å®šï¼‰</td></tr><tr><td><code>mapper-locations</code></td><td>Mapper XML æ–‡ä»¶è·¯å¾„ï¼Œå¤šæ¨¡å—ç”¨ classpath*:</td><td>classpath*:/mapper/**/*.xml</td></tr><tr><td><code>map-underscore-to-camel-case</code></td><td>å­—æ®µé©¼å³°ï¼ˆPOï¼‰ä¸ä¸‹åˆ’çº¿ï¼ˆè¡¨ï¼‰è‡ªåŠ¨æ˜ å°„</td><td>trueï¼ˆå»ºè®®ä¿æŒå¼€å¯ï¼‰</td></tr><tr><td><code>id-type</code></td><td>å…¨å±€ä¸»é”®ç­–ç•¥</td><td>assign_idï¼ˆé›ªèŠ±ç®—æ³•ï¼‰</td></tr><tr><td><code>update-strategy</code></td><td>æ›´æ–°å­—æ®µç­–ç•¥</td><td>not_nullï¼ˆåªæ›´é null å­—æ®µï¼‰</td></tr><tr><td><code>table-prefix</code></td><td>è¡¨åå‰ç¼€ï¼Œç»Ÿä¸€æ·»åŠ é¿å…é‡å¤æ³¨è§£</td><td>æ— </td></tr></tbody></table><h3 id="2-4-3-é…ç½®ä¼˜å…ˆçº§">2.4.3 é…ç½®ä¼˜å…ˆçº§</h3><p>å±€éƒ¨æ³¨è§£ &gt; å…¨å±€é…ç½®ï¼Œä¾‹å¦‚ï¼šå…¨å±€é…ç½®<code>id-type: auto</code>ï¼Œä½†æŸ PO çš„ä¸»é”®æ³¨è§£ä¸º<code>@TableId(type = IdType.ASSIGN_ID)</code>ï¼Œåˆ™è¯¥ PO ä¼˜å…ˆä½¿ç”¨é›ªèŠ±ç®—æ³•ã€‚</p><h1>ä¸‰ã€MyBatis-Plus æ ¸å¿ƒåŠŸèƒ½</h1><p>åœ¨åŸºç¡€ CRUD æ“ä½œä¹‹ä¸Šï¼ŒMyBatis-Plus æä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›æ¥é€‚é…å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼š<strong>æ¡ä»¶æ„é€ å™¨</strong>è§£å†³åŠ¨æ€ç­›é€‰é—®é¢˜ï¼Œ<strong>è‡ªå®šä¹‰ SQL</strong> é€‚é…ç‰¹æ®Šé€»è¾‘ä¸å¤šè¡¨åœºæ™¯ï¼Œ<strong>IService æ¥å£</strong>å°è£… Service å±‚æ¨¡æ¿æ–¹æ³•ã€‚ä¸‰è€…ç»“åˆå¯å¤§å¹…æå‡å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¿ç•™çµæ´»æ€§ã€‚</p><h2 id="3-1-æ¡ä»¶æ„é€ å™¨ï¼šåŠ¨æ€-SQL-ä¼˜é›…å®ç°">3.1 æ¡ä»¶æ„é€ å™¨ï¼šåŠ¨æ€ SQL ä¼˜é›…å®ç°</h2><p>åŸºç¡€ CRUD ä¾èµ– ID ä½œä¸ºæ¡ä»¶ï¼Œä½†å®é™…ä¸šåŠ¡ä¸­å¾€å¾€éœ€è¦æ›´å¤æ‚çš„ç­›é€‰é€»è¾‘ï¼ˆå¦‚å¤šå­—æ®µç»„åˆæŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢ç­‰ï¼‰ã€‚MyBatis-Plus æä¾›çš„ <strong>æ¡ä»¶æ„é€ å™¨ï¼ˆWrapperï¼‰</strong> æ­£æ˜¯ä¸ºè§£å†³è¿™ç±»é—®é¢˜è€Œç”Ÿï¼Œå®ƒèƒ½åŠ¨æ€æ‹¼æ¥ WHERE æ¡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™ SQL è¯­å¥ã€‚</p><h3 id="3-1-1-Wrapper-ä½“ç³»ç»“æ„">3.1.1 Wrapper ä½“ç³»ç»“æ„</h3><p>Wrapper æ˜¯æ¡ä»¶æ„é€ çš„æ ¸å¿ƒæŠ½è±¡ç±»ï¼Œå…¶è®¾è®¡é‡‡ç”¨äº†åˆ†å±‚ç»§æ‰¿æ¨¡å¼ï¼Œä¸åŒå­ç±»å¯¹åº”ä¸åŒåœºæ™¯çš„æ¡ä»¶æ„é€ éœ€æ±‚ã€‚</p><h4 id="ç»§æ‰¿å…³ç³»">ç»§æ‰¿å…³ç³»</h4><p><img src="https://a1.boltp.com/2025/09/19/68cd4933822a2.png" alt="image.png"></p><h4 id="æ ¸å¿ƒç±»ä½œç”¨">æ ¸å¿ƒç±»ä½œç”¨</h4><ul><li><p><strong>AbstractWrapper</strong>ï¼šæä¾›æ‰€æœ‰ WHERE æ¡ä»¶çš„åŸºç¡€æ–¹æ³•ï¼ˆå¦‚ <code>eq</code> ç­‰äºã€<code>like</code> æ¨¡ç³ŠæŸ¥è¯¢ã€<code>ge</code> å¤§äºç­‰äºç­‰ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd47764cb68.png" alt=""></p></li><li><p><strong>QueryWrapper</strong>ï¼šåœ¨ AbstractWrapper åŸºç¡€ä¸Šå¢åŠ  <code>select()</code> æ–¹æ³•ï¼Œå¯æŒ‡å®šæŸ¥è¯¢å­—æ®µï¼ˆé¿å… <code>SELECT *</code>ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd49937687b.png" alt=""></p></li><li><p><strong>UpdateWrapper</strong>ï¼šåœ¨ AbstractWrapper åŸºç¡€ä¸Šå¢åŠ  <code>set()</code> å’Œ <code>setSql()</code> æ–¹æ³•ï¼Œæ”¯æŒå¤æ‚æ›´æ–°ï¼ˆå¦‚åŸºäºå­—æ®µç°æœ‰å€¼çš„è®¡ç®—ï¼‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd47c8470c1.png" alt=""></p></li><li><p><strong>LambdaXXXWrapper</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼å¼•ç”¨å®ä½“ç±»æ–¹æ³•ï¼ˆå¦‚ <code>User::getUsername</code>ï¼‰ï¼Œé¿å…ç›´æ¥å†™å­—ç¬¦ä¸²å­—æ®µåï¼Œå‡å°‘æ‹¼å†™é”™è¯¯ã€‚</p></li></ul><h3 id="3-1-2-QueryWrapperï¼šæŸ¥è¯¢ä¸ç®€å•æ›´æ–°-åˆ é™¤">3.1.2 QueryWrapperï¼šæŸ¥è¯¢ä¸ç®€å•æ›´æ–° / åˆ é™¤</h3><p>QueryWrapper æ˜¯æœ€å¸¸ç”¨çš„æ¡ä»¶æ„é€ å™¨ï¼Œé€‚ç”¨äº <strong>æŸ¥è¯¢ã€åˆ é™¤ã€ç®€å•æ›´æ–°</strong> åœºæ™¯ï¼Œå¯é€šè¿‡é“¾å¼è°ƒç”¨æ‹¼æ¥å¤æ‚ WHERE æ¡ä»¶ã€‚</p><h4 id="1-å¤æ‚æŸ¥è¯¢ç¤ºä¾‹">1. å¤æ‚æŸ¥è¯¢ç¤ºä¾‹</h4><p><strong>éœ€æ±‚</strong>ï¼šæŸ¥è¯¢ç”¨æˆ·åä¸­åŒ…å« â€œoâ€ã€ä½™é¢å¤§äºç­‰äº 1000 å…ƒçš„ç”¨æˆ·ï¼Œåªè¿”å› idã€usernameã€infoã€balance å­—æ®µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testQueryWrapperSelect</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼šWHERE username LIKE &quot;%o%&quot; AND balance &gt;= 1000</span><br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;();<br>    <span class="hljs-comment">// æŒ‡å®šæŸ¥è¯¢å­—æ®µï¼ˆé¿å…SELECT *ï¼‰</span><br>    queryWrapper.select(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;info&quot;</span>, <span class="hljs-string">&quot;balance&quot;</span>)<br>                <span class="hljs-comment">// æ¨¡ç³ŠæŸ¥è¯¢ï¼šusername LIKE &quot;%o%&quot;</span><br>                .like(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;o&quot;</span>)<br>                <span class="hljs-comment">// å¤§äºç­‰äºï¼šbalance &gt;= 1000</span><br>                .ge(<span class="hljs-string">&quot;balance&quot;</span>, <span class="hljs-number">1000</span>);<br>  <br>    <span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢</span><br>    List&lt;User&gt; userList = userMapper.selectList(queryWrapper);<br>    userList.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> id,username,info,balance <br><span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">WHERE</span> username <span class="hljs-keyword">LIKE</span> ? <span class="hljs-keyword">AND</span> balance <span class="hljs-operator">&gt;=</span> ? <br><span class="hljs-comment">-- å‚æ•°ï¼š%o%ï¼ˆStringï¼‰ã€1000ï¼ˆIntegerï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="2-åŸºäºæ¡ä»¶çš„æ›´æ–°">2. åŸºäºæ¡ä»¶çš„æ›´æ–°</h4><p><strong>éœ€æ±‚</strong>ï¼šå°†ç”¨æˆ·åä¸º â€œJackâ€ çš„ç”¨æˆ·ä½™é¢æ›´æ–°ä¸º 2000 å…ƒã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testQueryWrapperUpdate</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. å‡†å¤‡æ›´æ–°æ•°æ®ï¼ˆénullå­—æ®µä¼šè¢«è®¾ç½®åˆ°SETä¸­ï¼‰</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setBalance(<span class="hljs-number">2000</span>);<br>  <br>    <span class="hljs-comment">// 2. æ„å»ºæ¡ä»¶ï¼šWHERE username = &quot;Jack&quot;</span><br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;User&gt;()<br>        .eq(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span>); <span class="hljs-comment">// ç­‰äºæ¡ä»¶</span><br>  <br>    <span class="hljs-comment">// 3. æ‰§è¡Œæ›´æ–°ï¼ˆWHEREæ¡ä»¶ç”±queryWrapperå†³å®šï¼ŒSETå­—æ®µç”±userénullå€¼å†³å®šï¼‰</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userMapper.update(user, queryWrapper);<br>    System.out.println(<span class="hljs-string">&quot;æ›´æ–°æˆåŠŸï¼š&quot;</span> + (rows &gt; <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">SET</span> balance<span class="hljs-operator">=</span>? <br><span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> ? <br><span class="hljs-comment">-- å‚æ•°ï¼š2000ï¼ˆIntegerï¼‰ã€Jackï¼ˆStringï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="3-åŸºäºæ¡ä»¶çš„åˆ é™¤">3. åŸºäºæ¡ä»¶çš„åˆ é™¤</h4><p><strong>éœ€æ±‚</strong>ï¼šåˆ é™¤çŠ¶æ€ä¸º â€œå†»ç»“â€ï¼ˆstatus=2ï¼‰ä¸”ä½™é¢ä¸º 0 çš„ç”¨æˆ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testQueryWrapperDelete</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. æ„å»ºæ¡ä»¶ï¼šWHERE status = 2 AND balance = 0</span><br>    QueryWrapper&lt;User&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;&gt;()<br>        .eq(<span class="hljs-string">&quot;status&quot;</span>, <span class="hljs-number">2</span>)<br>        .eq(<span class="hljs-string">&quot;balance&quot;</span>, <span class="hljs-number">0</span>);<br>  <br>    <span class="hljs-comment">// 2. æ‰§è¡Œåˆ é™¤</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userMapper.delete(queryWrapper);<br>    System.out.println(<span class="hljs-string">&quot;åˆ é™¤æˆåŠŸï¼š&quot;</span> + (rows &gt; <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> ? <span class="hljs-keyword">AND</span> balance <span class="hljs-operator">=</span> ? <br><span class="hljs-comment">-- å‚æ•°ï¼š2ï¼ˆIntegerï¼‰ã€0ï¼ˆIntegerï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="3-1-3-UpdateWrapperï¼šå¤æ‚æ›´æ–°åœºæ™¯">3.1.3 UpdateWrapperï¼šå¤æ‚æ›´æ–°åœºæ™¯</h3><p>å½“æ›´æ–°æ“ä½œéœ€è¦ <strong>åŸºäºå­—æ®µç°æœ‰å€¼è®¡ç®—</strong>ï¼ˆå¦‚ <code>balance = balance - 200</code>ï¼‰æ—¶ï¼ŒQueryWrapper æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œéœ€ä½¿ç”¨ UpdateWrapper çš„ <code>setSql()</code> æ–¹æ³•ç›´æ¥ç¼–å†™ SET è¯­å¥ç‰‡æ®µã€‚</p><h4 id="1-åŸºäºå­—æ®µç°æœ‰å€¼çš„æ›´æ–°">1. åŸºäºå­—æ®µç°æœ‰å€¼çš„æ›´æ–°</h4><p><strong>éœ€æ±‚</strong>ï¼šç»™ id ä¸º 1ã€2ã€4 çš„ç”¨æˆ·ä½™é¢æ‰£é™¤ 200 å…ƒï¼ˆ<code>balance = balance - 200</code>ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdateWrapper</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. å‡†å¤‡æ¡ä»¶ï¼šWHERE id IN (1, 2, 4)</span><br>    List&lt;Long&gt; ids = List.of(<span class="hljs-number">1L</span>, <span class="hljs-number">2L</span>, <span class="hljs-number">4L</span>);<br>  <br>    <span class="hljs-comment">// 2. æ„å»ºæ›´æ–°æ¡ä»¶ä¸SETè¯­å¥</span><br>    UpdateWrapper&lt;User&gt; updateWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;User&gt;()<br>        <span class="hljs-comment">// ç›´æ¥ç¼–å†™SETç‰‡æ®µï¼šbalance = balance - 200</span><br>        .setSql(<span class="hljs-string">&quot;balance = balance - 200&quot;</span>)<br>        <span class="hljs-comment">// WHEREæ¡ä»¶ï¼šid IN (1,2,4)</span><br>        .in(<span class="hljs-string">&quot;id&quot;</span>, ids);<br>  <br>    <span class="hljs-comment">// 3. æ‰§è¡Œæ›´æ–°ï¼ˆæ— éœ€ä¼ é€’Userå¯¹è±¡ï¼ŒSETè¯­å¥ç”±updateWrapperå®šä¹‰ï¼‰</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, updateWrapper);<br>    System.out.println(<span class="hljs-string">&quot;æ›´æ–°æˆåŠŸï¼š&quot;</span> + (rows &gt; <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">200</span> <br><span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (?, ?, ?) <br><span class="hljs-comment">-- å‚æ•°ï¼š1ï¼ˆLongï¼‰ã€2ï¼ˆLongï¼‰ã€4ï¼ˆLongï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="2-ç»„åˆæ›´æ–°ï¼ˆSET-å¤šå­—æ®µï¼‰">2. ç»„åˆæ›´æ–°ï¼ˆSET å¤šå­—æ®µï¼‰</h4><p><strong>éœ€æ±‚</strong>ï¼šç»™ â€œJackâ€ çš„ä½™é¢å¢åŠ  500 å…ƒï¼ŒåŒæ—¶å°†çŠ¶æ€æ”¹ä¸º â€œæ­£å¸¸â€ï¼ˆstatus=1ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testUpdateWrapperComplex</span><span class="hljs-params">()</span> &#123;<br>    UpdateWrapper&lt;User&gt; updateWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpdateWrapper</span>&lt;User&gt;()<br>        <span class="hljs-comment">// SET balance = balance + 500, status = 1</span><br>        .setSql(<span class="hljs-string">&quot;balance = balance + 500&quot;</span>)<br>        .set(<span class="hljs-string">&quot;status&quot;</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// ç®€å•èµ‹å€¼ä¹Ÿå¯ä½¿ç”¨set()</span><br>        <span class="hljs-comment">// WHERE username = &quot;Jack&quot;</span><br>        .eq(<span class="hljs-string">&quot;username&quot;</span>, <span class="hljs-string">&quot;Jack&quot;</span>);<br>  <br>    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, updateWrapper);<br>    System.out.println(<span class="hljs-string">&quot;æ›´æ–°æˆåŠŸï¼š&quot;</span> + (rows &gt; <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">+</span> <span class="hljs-number">500</span>, status <span class="hljs-operator">=</span> ? <br><span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> ? <br><span class="hljs-comment">-- å‚æ•°ï¼š1ï¼ˆIntegerï¼‰ã€Jackï¼ˆStringï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="3-1-4-Lambda-æ¡ä»¶æ„é€ å™¨ï¼šé¿å…ç¡¬ç¼–ç ">3.1.4 Lambda æ¡ä»¶æ„é€ å™¨ï¼šé¿å…ç¡¬ç¼–ç </h3><p>æ™®é€š Wrapper åœ¨æ„é€ æ¡ä»¶æ—¶éœ€è¦æ‰‹åŠ¨è¾“å…¥å­—æ®µåï¼ˆå¦‚ <code>&quot;username&quot;</code>ï¼‰ï¼Œå­˜åœ¨ <strong>å­—ç¬¦ä¸²ç¡¬ç¼–ç </strong> é—®é¢˜ï¼ˆæ‹¼å†™é”™è¯¯ä¸ä¼šåœ¨ç¼–è¯‘æœŸæŠ¥é”™ï¼‰ã€‚Lambda æ¡ä»¶æ„é€ å™¨é€šè¿‡ <strong>æ–¹æ³•å¼•ç”¨</strong> è§£å†³è¿™ä¸€é—®é¢˜ï¼Œè®©å­—æ®µåä¸å®ä½“ç±»å±æ€§å¼ºå…³è”ã€‚</p><h4 id="1-LambdaQueryWrapper-ç¤ºä¾‹">1. LambdaQueryWrapper ç¤ºä¾‹</h4><p><strong>éœ€æ±‚</strong>ï¼šæŸ¥è¯¢å¹´é¾„å¤§äº 20 å²ï¼ˆä» info å­—æ®µçš„ JSON ä¸­è§£æï¼‰ã€çŠ¶æ€ä¸ºæ­£å¸¸ï¼ˆstatus=1ï¼‰çš„ç”¨æˆ·ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testLambdaQueryWrapper</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. æ„å»ºLambdaæŸ¥è¯¢æ¡ä»¶ï¼ˆä½¿ç”¨User::getXxxæ–¹æ³•å¼•ç”¨ï¼‰</span><br>    LambdaQueryWrapper&lt;User&gt; lambdaQueryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;&gt;();<br>    <span class="hljs-comment">// WHERE status = 1 AND username LIKE &quot;%o%&quot;</span><br>    lambdaQueryWrapper.eq(User::getStatus, <span class="hljs-number">1</span>)<br>                      .like(User::getUsername, <span class="hljs-string">&quot;o&quot;</span>);<br>  <br>    <span class="hljs-comment">// 2. æ‰§è¡ŒæŸ¥è¯¢</span><br>    List&lt;User&gt; userList = userMapper.selectList(lambdaQueryWrapper);<br>    userList.forEach(System.out::println);<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ä¼˜åŠ¿</strong>ï¼šè‹¥è¯¯å†™ä¸º <code>User::getUsernam</code>ï¼ˆå°‘ä¸ª eï¼‰ï¼Œç¼–è¯‘æœŸä¼šç›´æ¥æŠ¥é”™ï¼Œé¿å…è¿è¡Œæ—¶å› å­—æ®µåé”™è¯¯å¯¼è‡´çš„ SQL å¼‚å¸¸ã€‚</p><h4 id="2-LambdaUpdateWrapper-ç¤ºä¾‹">2. LambdaUpdateWrapper ç¤ºä¾‹</h4><p><strong>éœ€æ±‚</strong>ï¼šå°† id ä¸º 3 çš„ç”¨æˆ·ä½™é¢ç¿»å€ï¼ˆ<code>balance = balance * 2</code>ï¼‰ï¼Œå¹¶æ›´æ–°ä¿®æ”¹æ—¶é—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testLambdaUpdateWrapper</span><span class="hljs-params">()</span> &#123;<br>    LambdaUpdateWrapper&lt;User&gt; lambdaUpdateWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaUpdateWrapper</span>&lt;&gt;();<br>    <span class="hljs-comment">// SET balance = balance * 2, update_time = NOW()</span><br>    lambdaUpdateWrapper.setSql(<span class="hljs-string">&quot;balance = balance * 2&quot;</span>)<br>                       .set(User::getUpdateTime, LocalDateTime.now())<br>                       <span class="hljs-comment">// WHERE id = 3</span><br>                       .eq(User::getId, <span class="hljs-number">3L</span>);<br>  <br>    <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> userMapper.update(<span class="hljs-literal">null</span>, lambdaUpdateWrapper);<br>    System.out.println(<span class="hljs-string">&quot;æ›´æ–°æˆåŠŸï¼š&quot;</span> + (rows &gt; <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <br><span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">*</span> <span class="hljs-number">2</span>, update_time <span class="hljs-operator">=</span> ? <br><span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> ? <br><span class="hljs-comment">-- å‚æ•°ï¼š2024-11-13T15:30:00ï¼ˆLocalDateTimeï¼‰ã€3ï¼ˆLongï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="3-1-5-å¸¸ç”¨æ¡ä»¶æ–¹æ³•é€ŸæŸ¥è¡¨">3.1.5 å¸¸ç”¨æ¡ä»¶æ–¹æ³•é€ŸæŸ¥è¡¨</h3><p>AbstractWrapper æä¾›äº†ä¸°å¯Œçš„æ¡ä»¶æ–¹æ³•ï¼Œè¦†ç›– SQL ä¸­æ‰€æœ‰å¸¸è§çš„ WHERE å­å¥è¯­æ³•ï¼Œä»¥ä¸‹æ˜¯é«˜é¢‘ä½¿ç”¨çš„æ–¹æ³•ï¼š</p><table><thead><tr><th>æ–¹æ³•å</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th><th>å¯¹åº”çš„ SQL ç‰‡æ®µ</th></tr></thead><tbody><tr><td><code>eq</code></td><td>ç­‰äºï¼ˆ=ï¼‰</td><td><code>eq(&quot;name&quot;, &quot;Jack&quot;)</code></td><td><code>name = 'Jack'</code></td></tr><tr><td><code>ne</code></td><td>ä¸ç­‰äºï¼ˆâ‰ ï¼‰</td><td><code>ne(&quot;status&quot;, 0)</code></td><td><code>status != 0</code></td></tr><tr><td><code>like</code></td><td>æ¨¡ç³ŠæŸ¥è¯¢ï¼ˆ% å€¼ %ï¼‰</td><td><code>like(&quot;username&quot;, &quot;o&quot;)</code></td><td><code>username LIKE '%o%'</code></td></tr><tr><td><code>likeLeft</code></td><td>å·¦æ¨¡ç³Šï¼ˆ% å€¼ï¼‰</td><td><code>likeLeft(&quot;phone&quot;, &quot;139&quot;)</code></td><td><code>phone LIKE '%139'</code></td></tr><tr><td><code>likeRight</code></td><td>å³æ¨¡ç³Šï¼ˆå€¼ %ï¼‰</td><td><code>likeRight(&quot;email&quot;, &quot;test&quot;)</code></td><td><code>email LIKE 'test%'</code></td></tr><tr><td><code>gt</code></td><td>å¤§äºï¼ˆ&gt;ï¼‰</td><td><code>gt(&quot;balance&quot;, 1000)</code></td><td><code>balance &gt; 1000</code></td></tr><tr><td><code>ge</code></td><td>å¤§äºç­‰äºï¼ˆâ‰¥ï¼‰</td><td><code>ge(&quot;age&quot;, 18)</code></td><td><code>age &gt;= 18</code></td></tr><tr><td><code>lt</code></td><td>å°äºï¼ˆ&lt;ï¼‰</td><td><code>lt(&quot;score&quot;, 60)</code></td><td><code>score &lt; 60</code></td></tr><tr><td><code>le</code></td><td>å°äºç­‰äºï¼ˆâ‰¤ï¼‰</td><td><code>le(&quot;level&quot;, 3)</code></td><td><code>level &lt;= 3</code></td></tr><tr><td><code>in</code></td><td>åŒ…å«åœ¨é›†åˆä¸­</td><td><code>in(&quot;id&quot;, 1, 2, 3)</code></td><td><code>id IN (1,2,3)</code></td></tr><tr><td><code>notIn</code></td><td>ä¸åŒ…å«åœ¨é›†åˆä¸­</td><td><code>notIn(&quot;status&quot;, 0, 2)</code></td><td><code>status NOT IN (0,2)</code></td></tr><tr><td><code>between</code></td><td>åœ¨èŒƒå›´å†…ï¼ˆé—­åŒºé—´ï¼‰</td><td><code>between(&quot;create_time&quot;, &quot;2023-01-01&quot;, &quot;2023-12-31&quot;)</code></td><td><code>create_time BETWEEN '2023-01-01' AND '2023-12-31'</code></td></tr><tr><td><code>isNull</code></td><td>å­—æ®µä¸º NULL</td><td><code>isNull(&quot;email&quot;)</code></td><td><code>email IS NULL</code></td></tr><tr><td><code>isNotNull</code></td><td>å­—æ®µä¸ä¸º NULL</td><td><code>isNotNull(&quot;phone&quot;)</code></td><td><code>phone IS NOT NULL</code></td></tr><tr><td><code>and</code></td><td>æ‹¼æ¥ AND æ¡ä»¶ï¼ˆåµŒå¥—ï¼‰</td><td><code>and(w -&gt; w.gt(&quot;balance&quot;, 1000).lt(&quot;balance&quot;, 5000))</code></td><td><code>AND (balance &gt; 1000 AND balance &lt; 5000)</code></td></tr><tr><td><code>or</code></td><td>æ‹¼æ¥ OR æ¡ä»¶ï¼ˆåµŒå¥—ï¼‰</td><td><code>or(w -&gt; w.eq(&quot;status&quot;, 1).or().eq(&quot;status&quot;, 3))</code></td><td><code>OR (status = 1 OR status = 3)</code></td></tr></tbody></table><h3 id="3-1-6-æ¡ä»¶æ„é€ å™¨ä½¿ç”¨æ€»ç»“">3.1.6 æ¡ä»¶æ„é€ å™¨ä½¿ç”¨æ€»ç»“</h3><ol><li><strong>åœºæ™¯é€‰æ‹©</strong>ï¼š<ul><li>ç®€å•æŸ¥è¯¢ / æ›´æ–° / åˆ é™¤ï¼šä¼˜å…ˆä½¿ç”¨ <code>LambdaQueryWrapper</code>ï¼ˆé¿å…ç¡¬ç¼–ç ï¼‰ã€‚</li><li>å¤æ‚æ›´æ–°ï¼ˆå¦‚åŸºäºå­—æ®µè®¡ç®—ï¼‰ï¼šä½¿ç”¨ <code>LambdaUpdateWrapper</code>ã€‚</li><li>ç‰¹æ®Šåœºæ™¯ï¼ˆå¦‚å¤šè¡¨è”æŸ¥éœ€æ‰‹åŠ¨å†™ SQLï¼‰ï¼šå¯æ··åˆä½¿ç”¨ Wrapper å’Œ XML æ˜ å°„ã€‚</li></ul></li><li><strong>æœ€ä½³å®è·µ</strong>ï¼š<ul><li>å§‹ç»ˆä¼˜å…ˆä½¿ç”¨ Lambda ç‰ˆæœ¬ï¼ˆ<code>LambdaQueryWrapper</code>/<code>LambdaUpdateWrapper</code>ï¼‰ï¼Œå‡å°‘å­—æ®µåæ‹¼å†™é”™è¯¯ã€‚</li><li>å¤æ‚æ¡ä»¶ä½¿ç”¨ <code>and()</code>/<code>or()</code> åµŒå¥—ï¼Œé¿å…é•¿é“¾å¼è°ƒç”¨å¯¼è‡´çš„å¯è¯»æ€§é—®é¢˜ã€‚</li><li>å¤šè¡¨æŸ¥è¯¢æ—¶ï¼ŒWrapper ä»…è´Ÿè´£å•è¡¨æ¡ä»¶ï¼Œå…³è”æ¡ä»¶ä»éœ€åœ¨ XML ä¸­ç¼–å†™ã€‚</li></ul></li></ol><p>é€šè¿‡æ¡ä»¶æ„é€ å™¨ï¼ŒMyBatis-Plus å®ç°äº†åŠ¨æ€ SQL çš„ä¼˜é›…å¤„ç†ï¼Œæ—¢ä¿ç•™äº† MyBatis çš„çµæ´»æ€§ï¼Œåˆç®€åŒ–äº†é‡å¤ä»£ç ï¼Œå¤§å¹…æå‡äº†å¤æ‚æŸ¥è¯¢åœºæ™¯çš„å¼€å‘æ•ˆç‡ã€‚</p><h2 id="3-2-è‡ªå®šä¹‰-SQL-ä¸-IService-æ¥å£ï¼šåˆ†å±‚å¼€å‘æ•ˆç‡æå‡">3.2 è‡ªå®šä¹‰ SQL ä¸ IService æ¥å£ï¼šåˆ†å±‚å¼€å‘æ•ˆç‡æå‡</h2><p>åœ¨åŸºç¡€ CRUD å’Œæ¡ä»¶æ„é€ çš„åŸºç¡€ä¸Šï¼ŒMyBatis-Plus è¿›ä¸€æ­¥é€šè¿‡ <strong>è‡ªå®šä¹‰ SQL</strong> è§£å†³å¤æ‚åœºæ™¯ï¼ˆå¦‚å¤šè¡¨è”æŸ¥ã€ç‰¹æ®Šæ›´æ–°ï¼‰ï¼Œé€šè¿‡ <strong>IService æ¥å£</strong> å°è£… Service å±‚æ¨¡æ¿æ–¹æ³•ï¼Œå®ç° â€œåˆ†å±‚å¼€å‘â€ ä¸ â€œæ•ˆç‡æå‡â€ çš„ç»“åˆã€‚</p><h3 id="3-2-1-è‡ªå®šä¹‰-SQLï¼šé€‚é…ç‰¹æ®Šé€»è¾‘ä¸å¤šè¡¨åœºæ™¯">3.2.1 è‡ªå®šä¹‰ SQLï¼šé€‚é…ç‰¹æ®Šé€»è¾‘ä¸å¤šè¡¨åœºæ™¯</h3><p>MyBatis-Plus è™½èƒ½è¦†ç›–å¤§éƒ¨åˆ†å•è¡¨åœºæ™¯ï¼Œä½†é¢å¯¹ <strong>ç‰¹æ®Š SQL é€»è¾‘</strong>ï¼ˆå¦‚å­—æ®µè‡ªå¢ / è‡ªå‡ï¼‰æˆ– <strong>å¤šè¡¨è”æŸ¥</strong> æ—¶ï¼Œéœ€ç»“åˆ â€œWrapper ç”Ÿæˆæ¡ä»¶ + è‡ªå®šä¹‰ SQL ç‰‡æ®µâ€ çš„æ–¹å¼ï¼Œæ—¢ä¿ç•™åŠ¨æ€æ¡ä»¶çš„çµæ´»æ€§ï¼Œåˆå°† SQL ç»´æŠ¤åœ¨æŒä¹…å±‚ã€‚</p><h4 id="1-æ ¸å¿ƒåœºæ™¯ï¼šé¿å…-SQL-ç¡¬ç¼–ç åˆ°ä¸šåŠ¡å±‚">1. æ ¸å¿ƒåœºæ™¯ï¼šé¿å… SQL ç¡¬ç¼–ç åˆ°ä¸šåŠ¡å±‚</h4><h5 id="é—®é¢˜å¼•å‡º">é—®é¢˜å¼•å‡º</h5><p>ä½¿ç”¨ <code>UpdateWrapper</code> æ—¶ï¼Œè‹¥ç›´æ¥åœ¨ Service å±‚ç¼–å†™ <code>setSql(&quot;balance = balance - 200&quot;)</code>ï¼Œä¼šå¯¼è‡´ <strong>SQL ç‰‡æ®µæ•£è½åœ¨ä¸šåŠ¡å±‚</strong>ï¼Œè¿èƒŒ â€œæŒä¹…å±‚ç»´æŠ¤ SQLâ€ çš„å¼€å‘è§„èŒƒã€‚æ­¤å¤–ï¼Œå¤æ‚æ¡ä»¶ï¼ˆå¦‚åŠ¨æ€ <code>IN</code> è¯­å¥ï¼‰è‹¥çº¯æ‰‹å†™ XMLï¼Œéœ€ç¼–å†™ç¹ççš„ <code>&lt;foreach&gt;</code> æ ‡ç­¾ï¼Œæ˜“å‡ºé”™ã€‚</p><h5 id="è§£å†³æ–¹æ¡ˆï¼šWrapper-è‡ªå®šä¹‰-SQL-ç‰‡æ®µ">è§£å†³æ–¹æ¡ˆï¼šWrapper + è‡ªå®šä¹‰ SQL ç‰‡æ®µ</h5><p>MyBatis-Plus æä¾› <code>ew.customSqlSegment</code> å˜é‡ï¼Œå¯ç›´æ¥å¼•ç”¨ Wrapper ç”Ÿæˆçš„ WHERE æ¡ä»¶ç‰‡æ®µï¼Œå®ç° â€œæ¡ä»¶ç”± MP æ„å»ºï¼ŒSQL æ ¸å¿ƒé€»è¾‘ç”±è‡ªå®šä¹‰å®ç°â€ã€‚</p><h5 id="å®ç°æ­¥éª¤">å®ç°æ­¥éª¤</h5><ol><li><strong>Service å±‚æ„å»ºæ¡ä»¶</strong>ï¼šç”¨ Wrapper å®šä¹‰æŸ¥è¯¢æ¡ä»¶ï¼ˆé¿å…ä¸šåŠ¡å±‚å†™ SQLï¼‰ï¼›</li><li><strong>Mapper å±‚å£°æ˜æ–¹æ³•</strong>ï¼šç”¨ <code>@Param(&quot;ew&quot;)</code> æ¥æ”¶ Wrapperï¼ˆå‚æ•°åå›ºå®šä¸º<code>ew</code>ï¼Œå¯ç”¨<code>Constants.WRAPPER</code>å¸¸é‡æ›¿ä»£ï¼‰ï¼›</li><li><strong>ç¼–å†™è‡ªå®šä¹‰ SQL</strong>ï¼šé€šè¿‡ <code>$&#123;ew.customSqlSegment&#125;</code> åµŒå…¥ MP ç”Ÿæˆçš„æ¡ä»¶ã€‚</li></ol><h4 id="ä»£ç ç¤ºä¾‹ï¼šå­—æ®µè‡ªå‡æ›´æ–°">ä»£ç ç¤ºä¾‹ï¼šå­—æ®µè‡ªå‡æ›´æ–°</h4><p><strong>éœ€æ±‚</strong>ï¼šæ‰¹é‡æ‰£å‡æŒ‡å®š ID ç”¨æˆ·çš„ä½™é¢ï¼ˆ<code>balance = balance - #&#123;amount&#125;</code>ï¼‰ï¼Œæ¡ä»¶ç”± MP æ„å»ºã€‚</p><h5 id="1-Service-å±‚ï¼šæ„å»ºæ¡ä»¶">1. Service å±‚ï¼šæ„å»ºæ¡ä»¶</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductBalanceBatch</span><span class="hljs-params">(List&lt;Long&gt; ids, <span class="hljs-type">int</span> amount)</span> &#123;<br>        <span class="hljs-comment">// 1. ç”¨Lambdaæ„å»ºæ¡ä»¶ï¼šWHERE id IN (ids)</span><br>        LambdaQueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;User&gt;()<br>                .in(User::getId, ids);<br>        <span class="hljs-comment">// 2. è°ƒç”¨è‡ªå®šä¹‰SQLæ–¹æ³•ï¼ˆæ¡ä»¶+å‚æ•°ä¼ å…¥Mapperï¼‰</span><br>        baseMapper.updateBalanceByIds(wrapper, amount);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-Mapper-å±‚ï¼šè‡ªå®šä¹‰-SQL-ç‰‡æ®µ">2. Mapper å±‚ï¼šè‡ªå®šä¹‰ SQL ç‰‡æ®µ</h5><p>æ”¯æŒ <strong>æ³¨è§£å¼ SQL</strong> æˆ– <strong>XML å¼ SQL</strong>ï¼Œæ ¸å¿ƒæ˜¯å¼•ç”¨ <code>ew.customSqlSegment</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Constants;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Update;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; &#123;<br>    <span class="hljs-comment">// æ³¨è§£å¼SQLï¼š$&#123;ew.customSqlSegment&#125; åµŒå…¥WHEREæ¡ä»¶</span><br>    <span class="hljs-meta">@Update(&quot;UPDATE user SET balance = balance - #&#123;amount&#125; $&#123;ew.customSqlSegment&#125;&quot;)</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateBalanceByIds</span><span class="hljs-params">(</span><br><span class="hljs-params">            <span class="hljs-meta">@Param(Constants.WRAPPER)</span> LambdaQueryWrapper&lt;User&gt; wrapper,  // å›ºå®šå‚æ•°åew</span><br><span class="hljs-params">            <span class="hljs-meta">@Param(&quot;amount&quot;)</span> <span class="hljs-type">int</span> amount</span><br><span class="hljs-params">    )</span>;<br><br>    <span class="hljs-comment">// è‹¥ç”¨XMLå¼SQLï¼Œåœ¨userMapper.xmlä¸­ç¼–å†™ï¼š</span><br>    <span class="hljs-comment">// &lt;update id=&quot;updateBalanceByIds&quot;&gt;</span><br>    <span class="hljs-comment">//     UPDATE user SET balance = balance - #&#123;amount&#125; $&#123;ew.customSqlSegment&#125;</span><br>    <span class="hljs-comment">// &lt;/update&gt;</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-ç”Ÿæˆçš„-SQL">3. ç”Ÿæˆçš„ SQL</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> balance <span class="hljs-operator">=</span> balance <span class="hljs-operator">-</span> <span class="hljs-number">200</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (?, ?, ?)<br><span class="hljs-comment">-- å‚æ•°ï¼š200ï¼ˆamountï¼‰ã€1ï¼ˆidï¼‰ã€2ï¼ˆidï¼‰ã€4ï¼ˆidï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="2-è¿›é˜¶åœºæ™¯ï¼šå¤šè¡¨è”æŸ¥">2. è¿›é˜¶åœºæ™¯ï¼šå¤šè¡¨è”æŸ¥</h4><p>MyBatis-Plus æœ¬èº«ä¸æ”¯æŒå¤šè¡¨è”æŸ¥ï¼Œä½†å¯é€šè¿‡ â€œè‡ªå®šä¹‰å…³è”é€»è¾‘ + Wrapper æ¡ä»¶â€ å®ç° â€”â€”<strong>å…³è”éƒ¨åˆ†æ‰‹å†™ SQLï¼Œç­›é€‰æ¡ä»¶ç”± MP æ„å»º</strong>ï¼Œå¤§å¹…ç®€åŒ–åŠ¨æ€æ¡ä»¶çš„ç¼–å†™ã€‚</p><p><strong>éœ€æ±‚</strong>ï¼šæŸ¥è¯¢ â€œæ”¶è´§åœ°å€åœ¨åŒ—äº¬â€ ä¸” â€œç”¨æˆ· ID åœ¨ 1ã€2ã€4 ä¸­â€ çš„ç”¨æˆ·ä¿¡æ¯ã€‚</p><h5 id="1-Service-å±‚ï¼šæ„å»ºå¤šè¡¨æ¡ä»¶">1. Service å±‚ï¼šæ„å»ºå¤šè¡¨æ¡ä»¶</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">queryUserWithAddr</span><span class="hljs-params">(String city, List&lt;Long&gt; userIds)</span> &#123;<br>    <span class="hljs-comment">// æ„å»ºæ¡ä»¶ï¼šWHERE u.id IN (1,2,4) AND a.city = &#x27;åŒ—äº¬&#x27;</span><br>    QueryWrapper&lt;User&gt; wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">QueryWrapper</span>&lt;User&gt;()<br>            .in(<span class="hljs-string">&quot;u.id&quot;</span>, userIds)  <span class="hljs-comment">// è¡¨åˆ«åéœ€ä¸SQLä¸€è‡´</span><br>            .eq(<span class="hljs-string">&quot;a.city&quot;</span>, city);<br>    <span class="hljs-keyword">return</span> baseMapper.queryUserByAddr(wrapper);<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-Mapper-å±‚ï¼šè‡ªå®šä¹‰å¤šè¡¨-SQL">2. Mapper å±‚ï¼šè‡ªå®šä¹‰å¤šè¡¨ SQL</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Select;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; &#123;<br>    <span class="hljs-comment">// å…³è”æŸ¥è¯¢ï¼šSELECT + JOIN æ‰‹å†™ï¼ŒWHEREæ¡ä»¶ç”¨MPç”Ÿæˆ</span><br>    <span class="hljs-meta">@Select(&quot;SELECT u.* FROM user u &quot; +</span><br><span class="hljs-meta">            &quot;INNER JOIN address a ON u.id = a.user_id &quot; +</span><br><span class="hljs-meta">            &quot;$&#123;ew.customSqlSegment&#125;&quot;)</span><br>    List&lt;User&gt; <span class="hljs-title function_">queryUserByAddr</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;ew&quot;)</span> QueryWrapper&lt;User&gt; wrapper)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="3-ç”Ÿæˆçš„-SQL-2">3. ç”Ÿæˆçš„ SQL</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> u.<span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> u <br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> address a <span class="hljs-keyword">ON</span> u.id <span class="hljs-operator">=</span> a.user_id <br><span class="hljs-keyword">WHERE</span> u.id <span class="hljs-keyword">IN</span> (?, ?, ?) <span class="hljs-keyword">AND</span> a.city <span class="hljs-operator">=</span> ?<br><span class="hljs-comment">-- å‚æ•°ï¼š1ï¼ˆuserIdsï¼‰ã€2ï¼ˆuserIdsï¼‰ã€4ï¼ˆuserIdsï¼‰ã€åŒ—äº¬ï¼ˆcityï¼‰</span><br></code></pre></td></tr></table></figure><h4 id="3-è‡ªå®šä¹‰-SQL-é€‚ç”¨åœºæ™¯æ€»ç»“">3. è‡ªå®šä¹‰ SQL é€‚ç”¨åœºæ™¯æ€»ç»“</h4><table><thead><tr><th>åœºæ™¯</th><th>è§£å†³æ–¹æ¡ˆ</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>ç‰¹æ®Šæ›´æ–°ï¼ˆå­—æ®µè‡ªå¢ / è‡ªå‡ï¼‰</td><td>Wrapper æ„å»º WHERE + è‡ªå®šä¹‰ SQL å†™ SET</td><td>é¿å… SQL æ•£è½åœ¨ Service å±‚</td></tr><tr><td>å¤æ‚åŠ¨æ€æ¡ä»¶ï¼ˆå¤šå­—æ®µç­›é€‰ï¼‰</td><td>Wrapper ç”Ÿæˆæ¡ä»¶ + è‡ªå®šä¹‰ SQL å†™æ ¸å¿ƒé€»è¾‘</td><td>æ›¿ä»£ç¹ççš„<code>&lt;if&gt;</code>/<code>&lt;foreach&gt;</code>æ ‡ç­¾</td></tr><tr><td>å¤šè¡¨è”æŸ¥</td><td>è‡ªå®šä¹‰ JOIN + Wrapper ç”Ÿæˆç­›é€‰æ¡ä»¶</td><td>ä¿ç•™ MP åŠ¨æ€æ¡ä»¶ä¼˜åŠ¿ï¼Œé€‚é…å¤šè¡¨åœºæ™¯</td></tr></tbody></table><h3 id="3-2-2-IService-æ¥å£ï¼šService-å±‚æ¨¡æ¿æ–¹æ³•å°è£…">3.2.2 IService æ¥å£ï¼šService å±‚æ¨¡æ¿æ–¹æ³•å°è£…</h3><p>MyBatis-Plus ä¸ä»…åœ¨ DAO å±‚æä¾› <code>BaseMapper</code>ï¼Œè¿˜åœ¨ Service å±‚å°è£…äº† <strong>IService æ¥å£åŠé»˜è®¤å®ç°</strong>ï¼Œæ¶µç›–æ‰¹é‡æ“ä½œã€æ¡ä»¶æŸ¥è¯¢ã€åˆ†é¡µç­‰é«˜é¢‘æ¨¡æ¿æ–¹æ³•ï¼Œé¿å…é‡å¤ç¼–å†™ Service å±‚ä»£ç ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd43aaaa674.png" alt=""></p><h4 id="1-IService-æ ¸å¿ƒè®¾è®¡">1. IService æ ¸å¿ƒè®¾è®¡</h4><p><img src="https://a1.boltp.com/2025/09/19/68cd4437963c2.png" alt=""></p><ul><li><strong>é¡¶å±‚æ¥å£</strong>ï¼š<code>IService&lt;T&gt;</code>ï¼Œå®šä¹‰ Service å±‚é€šç”¨æ–¹æ³•ï¼›</li><li><strong>é»˜è®¤å®ç°</strong>ï¼š<code>ServiceImpl&lt;M extends BaseMapper&lt;T&gt;, T&gt;</code>ï¼Œå·²å®ç° <code>IService</code> æ‰€æœ‰æ–¹æ³•ï¼Œå†…éƒ¨ä¾èµ– <code>BaseMapper</code>ï¼›</li><li><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šè‡ªå®šä¹‰ Service æ¥å£ç»§æ‰¿ <code>IService</code>ï¼Œå®ç°ç±»ç»§æ‰¿ <code>ServiceImpl</code>ï¼Œå³å¯å¤ç”¨æ‰€æœ‰æ¨¡æ¿æ–¹æ³•ã€‚</li></ul><h4 id="2-æ ¸å¿ƒæ–¹æ³•åˆ†ç±»ï¼ˆé«˜é¢‘ï¼‰">2. æ ¸å¿ƒæ–¹æ³•åˆ†ç±»ï¼ˆé«˜é¢‘ï¼‰</h4><p><code>IService</code> æ–¹æ³•æŒ‰åŠŸèƒ½å¯åˆ†ä¸º 7 å¤§ç±»ï¼Œè¦†ç›–ç»å¤§å¤šæ•° Service å±‚åœºæ™¯ï¼š</p><table><thead><tr><th>ç±»åˆ«</th><th>æ ¸å¿ƒæ–¹æ³•</th><th>ä½œç”¨æè¿°</th></tr></thead><tbody><tr><td><strong>æ–°å¢</strong></td><td><code>save(T entity)</code></td><td>æ–°å¢å•ä¸ªå®ä½“</td></tr><tr><td></td><td><code>saveBatch(Collection&lt;T&gt; list)</code></td><td>æ‰¹é‡æ–°å¢ï¼ˆé»˜è®¤æ‰¹æ¬¡ 1000 æ¡ï¼‰</td></tr><tr><td></td><td><code>saveOrUpdate(T entity)</code></td><td>æ–°å¢æˆ–æ›´æ–°ï¼ˆæ ¹æ® ID åˆ¤æ–­ï¼‰</td></tr><tr><td><strong>åˆ é™¤</strong></td><td><code>removeById(Serializable id)</code></td><td>æ ¹æ® ID åˆ é™¤</td></tr><tr><td></td><td><code>removeByIds(Collection&lt;?&gt; ids)</code></td><td>æ‰¹é‡åˆ é™¤</td></tr><tr><td></td><td><code>remove(Wrapper&lt;T&gt; wrapper)</code></td><td>æ ¹æ®æ¡ä»¶åˆ é™¤</td></tr><tr><td><strong>æ›´æ–°</strong></td><td><code>updateById(T entity)</code></td><td>æ ¹æ® ID æ›´æ–°ï¼ˆåªæ›´é null å­—æ®µï¼‰</td></tr><tr><td></td><td><code>update(T entity, Wrapper&lt;T&gt; wrapper)</code></td><td>æ ¹æ®æ¡ä»¶æ›´æ–°æŒ‡å®šå­—æ®µ</td></tr><tr><td></td><td><code>updateBatchById(Collection&lt;T&gt; list)</code></td><td>æ‰¹é‡æ›´æ–°</td></tr><tr><td><strong>å•æ¡æŸ¥è¯¢</strong></td><td><code>getById(Serializable id)</code></td><td>æ ¹æ® ID æŸ¥è¯¢</td></tr><tr><td></td><td><code>getOne(Wrapper&lt;T&gt; wrapper)</code></td><td>æ ¹æ®æ¡ä»¶æŸ¥è¯¢å•æ¡ï¼ˆé»˜è®¤æŠ›å¼‚å¸¸ if å¤šæ¡ï¼‰</td></tr><tr><td><strong>åˆ—è¡¨æŸ¥è¯¢</strong></td><td><code>list()</code></td><td>æŸ¥è¯¢æ‰€æœ‰</td></tr><tr><td></td><td><code>listByIds(Collection&lt;?&gt; ids)</code></td><td>æ‰¹é‡æŸ¥è¯¢</td></tr><tr><td></td><td><code>list(Wrapper&lt;T&gt; wrapper)</code></td><td>æ ¹æ®æ¡ä»¶æŸ¥è¯¢åˆ—è¡¨</td></tr><tr><td><strong>è®¡æ•°</strong></td><td><code>count()</code></td><td>ç»Ÿè®¡æ€»æ¡æ•°</td></tr><tr><td></td><td><code>count(Wrapper&lt;T&gt; wrapper)</code></td><td>æ ¹æ®æ¡ä»¶ç»Ÿè®¡</td></tr><tr><td><strong>åˆ†é¡µ</strong></td><td><code>page(IPage&lt;T&gt; page, Wrapper&lt;T&gt; wrapper)</code></td><td>æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</td></tr></tbody></table><h4 id="3-åŸºæœ¬ä½¿ç”¨æµç¨‹">3. åŸºæœ¬ä½¿ç”¨æµç¨‹</h4><h5 id="æ­¥éª¤-1ï¼šå®šä¹‰è‡ªå®šä¹‰-Service-æ¥å£">æ­¥éª¤ 1ï¼šå®šä¹‰è‡ªå®šä¹‰ Service æ¥å£</h5><p>ç»§æ‰¿ <code>IService&lt;T&gt;</code>ï¼Œæ³›å‹ä¸º PO å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.User;<br><br><span class="hljs-comment">// è‡ªå®šä¹‰æ¥å£ï¼šç»§æ‰¿IServiceï¼Œå¯æ·»åŠ ä¸šåŠ¡æ–¹æ³•</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IUserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;User&gt; &#123;<br>    <span class="hljs-comment">// ç¤ºä¾‹ï¼šè‡ªå®šä¹‰ä¸šåŠ¡æ–¹æ³•ï¼ˆæ‰£å‡ä½™é¢ï¼‰</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductBalanceById</span><span class="hljs-params">(Long id, Integer money)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-2ï¼šå®ç°-Service-ç±»">æ­¥éª¤ 2ï¼šå®ç° Service ç±»</h5><p>ç»§æ‰¿ <code>ServiceImpl&lt;M, T&gt;</code>ï¼ˆM ä¸º Mapper æ¥å£ï¼ŒT ä¸º POï¼‰ï¼Œå®ç°è‡ªå®šä¹‰æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.User;<br><span class="hljs-keyword">import</span> com.itheima.mp.mapper.UserMapper;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span> &#123;<br>    <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨å®ç°IServiceçš„æ–¹æ³•ï¼ŒServiceImplå·²å…¨éƒ¨å°è£…</span><br>    <span class="hljs-comment">// å¯ç›´æ¥ä½¿ç”¨baseMapperè°ƒç”¨è‡ªå®šä¹‰SQLï¼Œæˆ–ä½¿ç”¨IServiceçš„æ¨¡æ¿æ–¹æ³•</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductBalanceById</span><span class="hljs-params">(Long id, Integer money)</span> &#123;<br>        <span class="hljs-comment">// 1. å¤ç”¨IServiceçš„æŸ¥è¯¢æ–¹æ³•</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getById(id);<br>        <span class="hljs-comment">// 2. ä¸šåŠ¡æ ¡éªŒ</span><br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getStatus() == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;ç”¨æˆ·çŠ¶æ€å¼‚å¸¸&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (user.getBalance() &lt; money) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;ä½™é¢ä¸è¶³&quot;</span>);<br>        &#125;<br>        <span class="hljs-comment">// 3. è°ƒç”¨è‡ªå®šä¹‰SQLï¼ˆé€šè¿‡baseMapperï¼‰</span><br>        baseMapper.deductBalance(id, money);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h5 id="æ­¥éª¤-3ï¼šController-å±‚è°ƒç”¨">æ­¥éª¤ 3ï¼šController å±‚è°ƒç”¨</h5><p>ç›´æ¥æ³¨å…¥è‡ªå®šä¹‰ Serviceï¼Œå¤ç”¨æ¨¡æ¿æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/users&quot;)</span><br><span class="hljs-meta">@RequiredArgsConstructor</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IUserService userService;<br><br>    <span class="hljs-comment">// æ–°å¢ç”¨æˆ·ï¼šå¤ç”¨IServiceçš„saveæ–¹æ³•</span><br>    <span class="hljs-meta">@PostMapping</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserFormDTO dto)</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> BeanUtil.copyProperties(dto, User.class);<br>        userService.save(user);<br>    &#125;<br><br>    <span class="hljs-comment">// æ‰¹é‡æŸ¥è¯¢ï¼šå¤ç”¨IServiceçš„listByIdsæ–¹æ³•</span><br>    <span class="hljs-meta">@GetMapping</span><br>    <span class="hljs-keyword">public</span> List&lt;UserVO&gt; <span class="hljs-title function_">listByIds</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> List&lt;Long&gt; ids)</span> &#123;<br>        List&lt;User&gt; users = userService.listByIds(ids);<br>        <span class="hljs-keyword">return</span> BeanUtil.copyToList(users, UserVO.class);<br>    &#125;<br><br>    <span class="hljs-comment">// è‡ªå®šä¹‰ä¸šåŠ¡ï¼šæ‰£å‡ä½™é¢</span><br>    <span class="hljs-meta">@PutMapping(&quot;/&#123;id&#125;/deduction/&#123;money&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id, <span class="hljs-meta">@PathVariable</span> Integer money)</span> &#123;<br>        userService.deductBalanceById(id, money);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-è¿›é˜¶ï¼šLambdaQuery-ä¸-LambdaUpdateï¼ˆé«˜æ•ˆï¼ï¼‰">4. è¿›é˜¶ï¼šLambdaQuery ä¸ LambdaUpdateï¼ˆé«˜æ•ˆï¼ï¼‰</h4><p><code>IService</code> æä¾› <code>lambdaQuery()</code> å’Œ <code>lambdaUpdate()</code> æ–¹æ³•ï¼ˆç©¶æå¥½ç”¨ï¼ï¼ï¼ï¼‰ï¼Œå¯ç›´æ¥é“¾å¼æ„å»º Lambda æ¡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨åˆ›å»º <code>LambdaQueryWrapper</code>ï¼Œè¿›ä¸€æ­¥ç®€åŒ–ä»£ç ã€‚</p><h5 id="åœºæ™¯-1ï¼šåŠ¨æ€æ¡ä»¶æŸ¥è¯¢">åœºæ™¯ 1ï¼šåŠ¨æ€æ¡ä»¶æŸ¥è¯¢</h5><p><strong>éœ€æ±‚</strong>ï¼šæ ¹æ® â€œç”¨æˆ·åå…³é”®å­—ã€çŠ¶æ€ã€ä½™é¢èŒƒå›´â€ åŠ¨æ€æŸ¥è¯¢ç”¨æˆ·ï¼ˆæ¡ä»¶å¯ä¸ºç©ºï¼‰ã€‚</p><h5 id="1-å®šä¹‰æŸ¥è¯¢-DTO">1. å®šä¹‰æŸ¥è¯¢ DTO</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserQueryDTO</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;      <span class="hljs-comment">// ç”¨æˆ·åå…³é”®å­—ï¼ˆå¯ä¸ºç©ºï¼‰</span><br>    <span class="hljs-keyword">private</span> Integer status;   <span class="hljs-comment">// çŠ¶æ€ï¼ˆå¯ä¸ºç©ºï¼‰</span><br>    <span class="hljs-keyword">private</span> Integer minBalance; <span class="hljs-comment">// æœ€å°ä½™é¢ï¼ˆå¯ä¸ºç©ºï¼‰</span><br>    <span class="hljs-keyword">private</span> Integer maxBalance; <span class="hljs-comment">// æœ€å¤§ä½™é¢ï¼ˆå¯ä¸ºç©ºï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="2-Service-å±‚å®ç°">2. Service å±‚å®ç°</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">queryByCondition</span><span class="hljs-params">(UserQueryDTO dto)</span> &#123;<br>    <span class="hljs-comment">// lambdaQuery()ï¼šç›´æ¥è·å–LambdaæŸ¥è¯¢å™¨ï¼Œæ”¯æŒæ¡ä»¶åˆ¤æ–­</span><br>    <span class="hljs-keyword">return</span> lambdaQuery()<br>            .like(dto.getName() != <span class="hljs-literal">null</span>, User::getUsername, dto.getName())  <span class="hljs-comment">// éç©ºæ‰åŠ æ¡ä»¶</span><br>            .eq(dto.getStatus() != <span class="hljs-literal">null</span>, User::getStatus, dto.getStatus())<br>            .ge(dto.getMinBalance() != <span class="hljs-literal">null</span>, User::getBalance, dto.getMinBalance())<br>            .le(dto.getMaxBalance() != <span class="hljs-literal">null</span>, User::getBalance, dto.getMaxBalance())<br>            .list(); <span class="hljs-comment">// ç»“å°¾æŒ‡å®šè¿”å›ç±»å‹ï¼ˆlist/one/countï¼‰</span><br>&#125;<br></code></pre></td></tr></table></figure><h5 id="åœºæ™¯-2ï¼šåŠ¨æ€æ›´æ–°">åœºæ™¯ 2ï¼šåŠ¨æ€æ›´æ–°</h5><p><strong>éœ€æ±‚</strong>ï¼šæ‰£å‡ä½™é¢ï¼Œè‹¥æ‰£å‡åä½™é¢ä¸º 0ï¼Œåˆ™å†»ç»“ç”¨æˆ·ï¼ˆstatus=2ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Transactional</span> <span class="hljs-comment">// äº‹åŠ¡ä¿è¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductBalanceWithFreeze</span><span class="hljs-params">(Long id, Integer money)</span> &#123;<br>    <span class="hljs-comment">// 1. æŸ¥è¯¢ç”¨æˆ·</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getById(id);<br>    <span class="hljs-comment">// 2. æ ¡éªŒ</span><br>    <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getStatus() == <span class="hljs-number">2</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;ç”¨æˆ·å¼‚å¸¸&quot;</span>);<br>    &#125;<br>    <span class="hljs-type">int</span> <span class="hljs-variable">remain</span> <span class="hljs-operator">=</span> user.getBalance() - money;<br>    <span class="hljs-keyword">if</span> (remain &lt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;ä½™é¢ä¸è¶³&quot;</span>);<br>    &#125;<br>    <span class="hljs-comment">// 3. åŠ¨æ€æ›´æ–°ï¼šä½™é¢å¿…æ›´ï¼ŒçŠ¶æ€æŒ‰éœ€æ›´æ–°</span><br>    lambdaUpdate()<br>            .set(User::getBalance, remain)<br>            .set(remain == <span class="hljs-number">0</span>, User::getStatus, <span class="hljs-number">2</span>)  <span class="hljs-comment">// ä½™é¢ä¸º0åˆ™å†»ç»“</span><br>            .eq(User::getId, id)<br>            .update(); <span class="hljs-comment">// æ‰§è¡Œæ›´æ–°</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="5-æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡æ–°å¢ä¸æ‰¹å¤„ç†">5. æ€§èƒ½ä¼˜åŒ–ï¼šæ‰¹é‡æ–°å¢ä¸æ‰¹å¤„ç†</h4><p><code>IService</code> çš„ <code>saveBatch()</code> æ–¹æ³•é»˜è®¤é‡‡ç”¨ â€œé¢„ç¼–è¯‘æ‰¹å¤„ç†â€ï¼Œä½†éœ€é…åˆ MySQL é©±åŠ¨å‚æ•°æ‰èƒ½è¾¾åˆ°æœ€ä¼˜æ€§èƒ½ã€‚</p><h5 id="ä¸‰ç§æ‰¹é‡æ’å…¥æ–¹æ¡ˆå¯¹æ¯”">ä¸‰ç§æ‰¹é‡æ’å…¥æ–¹æ¡ˆå¯¹æ¯”</h5><table><thead><tr><th>æ–¹æ¡ˆ</th><th>å®ç°æ–¹å¼</th><th>è€—æ—¶ï¼ˆ10 ä¸‡æ¡æ•°æ®ï¼‰</th><th>åŸç†</th></tr></thead><tbody><tr><td>æ™®é€š for å¾ªç¯é€æ¡æ’å…¥</td><td><code>for (User u : list) &#123; save(u); &#125;</code></td><td>~550 ç§’</td><td>æ¯æ¡æ•°æ® 1 æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œæ•ˆç‡æä½</td></tr><tr><td>MP æ‰¹é‡æ’å…¥ï¼ˆé»˜è®¤ï¼‰</td><td><code>saveBatch(list, 1000)</code></td><td>~28 ç§’</td><td>æ¯ 1000 æ¡ 1 æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œä»é€æ¡æ‰§è¡Œ SQL</td></tr><tr><td>MP+MySQL æ‰¹å¤„ç†å‚æ•°</td><td><code>saveBatch(list, 1000) + rewriteBatchedStatements=true</code></td><td>~6 ç§’</td><td>é©±åŠ¨é‡å†™ SQL ä¸ºæ‰¹é‡æ’å…¥ï¼Œ1 æ¬¡è¯·æ±‚ 1 æ¡ SQL</td></tr></tbody></table><h5 id="å…³é”®é…ç½®ï¼šå¼€å¯-MySQL-æ‰¹å¤„ç†">å…³é”®é…ç½®ï¼šå¼€å¯ MySQL æ‰¹å¤„ç†</h5><p>åœ¨ JDBC URL ä¸­æ·»åŠ  <code>rewriteBatchedStatements=true</code>ï¼ˆMySQL é©±åŠ¨ 3.1.13 + æ”¯æŒï¼‰ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br></code></pre></td></tr></table></figure><h5 id="æ³¨æ„äº‹é¡¹">æ³¨æ„äº‹é¡¹</h5><ul><li>æ‰¹æ¬¡å¤§å°å»ºè®® 1000-5000 æ¡ï¼šé¿å…å•æ¬¡è¯·æ±‚æ•°æ®é‡è¿‡å¤§å¯¼è‡´è¶…æ—¶ï¼›</li><li>å†…å­˜ä¼˜åŒ–ï¼šåˆ†æ‰¹æ¬¡æ„å»ºæ•°æ®åˆ—è¡¨ï¼Œé¿å…ä¸€æ¬¡æ€§åˆ›å»º 10 ä¸‡æ¡å¯¹è±¡å ç”¨è¿‡å¤šå†…å­˜ã€‚</li></ul><h4 id="6-IService-ä½¿ç”¨æ€»ç»“">6. IService ä½¿ç”¨æ€»ç»“</h4><ol><li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šå°è£… Service å±‚æ¨¡æ¿æ–¹æ³•ï¼Œå‡å°‘é‡å¤ä»£ç ï¼ˆå¦‚æ‰¹é‡æ“ä½œã€æ¡ä»¶æŸ¥è¯¢ï¼‰ï¼›</li><li><strong>æœ€ä½³å®è·µ</strong>ï¼š<ul><li>è‡ªå®šä¹‰ Service æ¥å£ç»§æ‰¿ <code>IService</code>ï¼Œå®ç°ç±»ç»§æ‰¿ <code>ServiceImpl</code>ï¼›</li><li>ç®€å• CRUD ç›´æ¥å¤ç”¨ <code>IService</code> æ–¹æ³•ï¼Œå¤æ‚ä¸šåŠ¡åœ¨å®ç°ç±»ä¸­æ‰©å±•ï¼›</li><li>åŠ¨æ€æ¡ä»¶ä¼˜å…ˆä½¿ç”¨ <code>lambdaQuery()</code>/<code>lambdaUpdate()</code>ï¼Œé¿å…ç¡¬ç¼–ç ï¼›</li><li>æ‰¹é‡æ“ä½œåŠ¡å¿…å¼€å¯ <code>rewriteBatchedStatements</code> å‚æ•°ä¼˜åŒ–æ€§èƒ½ã€‚</li></ul></li></ol><h1>å››ã€MyBatis-Plus æ‰©å±•åŠŸèƒ½</h1><p>MyBatis-Plus é™¤æ ¸å¿ƒ CRUD èƒ½åŠ›å¤–ï¼Œè¿˜æä¾›äº†ä¸€ç³»åˆ— <strong>é«˜é¢‘åœºæ™¯æ‰©å±•åŠŸèƒ½</strong>ï¼Œè¦†ç›–ä»£ç ç”Ÿæˆã€ç±»å‹è½¬æ¢ã€æ•æ„Ÿé…ç½®åŠ å¯†ç­‰å¼€å‘ç—›ç‚¹ï¼Œæ—¨åœ¨è¿›ä¸€æ­¥ç®€åŒ–å¼€å‘æµç¨‹ã€æå‡ç³»ç»Ÿå¥å£®æ€§ã€‚</p><h2 id="4-1-ä»£ç ç”Ÿæˆï¼šä¸€é”®ç”Ÿæˆé‡å¤ä»£ç ">4.1 ä»£ç ç”Ÿæˆï¼šä¸€é”®ç”Ÿæˆé‡å¤ä»£ç </h2><p>åŸºç¡€çš„ POã€Mapperã€Service ç­‰ä»£ç å­˜åœ¨å¤§é‡é‡å¤ç¼–å†™å·¥ä½œï¼ŒMyBatis-Plus æä¾›ä¸¤ç§ä»£ç ç”Ÿæˆæ–¹æ¡ˆï¼š<strong>Idea å›¾å½¢åŒ–æ’ä»¶</strong>ï¼ˆä¾¿æ·ï¼‰å’Œ <strong>å®˜æ–¹ä»£ç ç”Ÿæˆå™¨</strong>ï¼ˆçµæ´»ï¼‰ï¼Œå¯æ ¹æ®æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨ç”Ÿæˆå…¨å¥—åŸºç¡€ä»£ç ã€‚</p><h3 id="4-1-1-æ–¹æ¡ˆä¸€ï¼šIdea-æ’ä»¶ç”Ÿæˆï¼ˆæ¨èæ–°æ‰‹ï¼‰">4.1.1 æ–¹æ¡ˆä¸€ï¼šIdea æ’ä»¶ç”Ÿæˆï¼ˆæ¨èæ–°æ‰‹ï¼‰</h3><p>é€šè¿‡ Idea æ’ä»¶å®ç°å›¾å½¢åŒ–é…ç½®ï¼Œæ— éœ€ç¼–å†™ç”Ÿæˆé€»è¾‘ï¼Œç›´æ¥ç”Ÿæˆä»£ç ã€‚</p><h4 id="1-å®‰è£…æ’ä»¶">1. å®‰è£…æ’ä»¶</h4><p>åœ¨ Idea çš„ <code>Plugins</code> å¸‚åœºæœç´¢ <strong>MyBatisPlus</strong>ï¼Œé€‰æ‹©ä¸‹è½½é‡é«˜çš„æ’ä»¶ï¼ˆå¦‚ â€œmybatis-plusâ€ æˆ– â€œCustom MybatisPlus Generatorâ€ï¼‰ï¼Œå®‰è£…åé‡å¯ Ideaã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd4ee78ba99.png" alt=""></p><h4 id="2-ä½¿ç”¨æ­¥éª¤">2. ä½¿ç”¨æ­¥éª¤</h4><p>ä»¥ç”Ÿæˆ <code>address</code> è¡¨çš„åŸºç¡€ä»£ç ä¸ºä¾‹ï¼š</p><ol><li><p><strong>é…ç½®æ•°æ®åº“è¿æ¥</strong>ï¼šé¡¶éƒ¨èœå•é€‰æ‹© <code>Other</code> â†’ <code>Config Database</code>ï¼Œå¡«å†™æ•°æ®åº“ URLã€ç”¨æˆ·åã€å¯†ç ï¼Œæµ‹è¯•è¿æ¥é€šè¿‡åä¿å­˜ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd4f83d0f25.png" alt=""></p></li><li><p><strong>é…ç½®ç”Ÿæˆå‚æ•°</strong>ï¼šå†æ¬¡é€‰æ‹© <code>Other</code> â†’ <code>Code Generator</code>ï¼Œå¡«å†™æ ¸å¿ƒå‚æ•°ï¼š</p><ul><li><code>package</code>ï¼šçˆ¶åŒ…è·¯å¾„ï¼ˆå¦‚ <code>com.itheima.mp</code>ï¼‰ï¼›</li><li><code>Entity</code>ï¼šå®ä½“ç±»åŒ…è·¯å¾„ï¼ˆå¦‚ <code>domain.po</code>ï¼‰ï¼›</li><li><code>TablePrefix</code>ï¼šè¡¨å‰ç¼€ï¼ˆå¦‚æ— åˆ™ç•™ç©ºï¼‰ï¼›</li><li><code>Idç­–ç•¥</code>ï¼šä¸æ•°æ®åº“ä¸»é”®ç­–ç•¥ä¸€è‡´ï¼ˆå¦‚ <code>AUTO</code> è‡ªå¢ï¼‰ï¼›</li><li>å‹¾é€‰éœ€ç”Ÿæˆçš„ç»„ä»¶ï¼ˆEntityã€Mapperã€Serviceã€Controller ç­‰ï¼‰ã€‚</li></ul><p><img src="https://a1.boltp.com/2025/09/19/68cd4fb0f34cb.png" alt=""></p><p><img src="https://a1.boltp.com/2025/09/19/68cd500ca566e.png" alt="img"></p></li><li><p><strong>ç”Ÿæˆä»£ç </strong>ï¼šç‚¹å‡» â€œæäº¤â€ï¼Œæ’ä»¶è‡ªåŠ¨åœ¨æŒ‡å®šåŒ…è·¯å¾„ä¸‹ç”Ÿæˆä»£ç ï¼ŒåŒ…å« PO å®ä½“ã€Mapper æ¥å£ã€Service åŠå®ç°ç±»ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd50213e948.png" alt=""></p></li></ol><h3 id="4-1-2-æ–¹æ¡ˆäºŒï¼šå®˜æ–¹ä»£ç ç”Ÿæˆå™¨ï¼ˆçµæ´»å®šåˆ¶ï¼Œå¯è·³è¿‡ï¼‰">4.1.2 æ–¹æ¡ˆäºŒï¼šå®˜æ–¹ä»£ç ç”Ÿæˆå™¨ï¼ˆçµæ´»å®šåˆ¶ï¼Œå¯è·³è¿‡ï¼‰</h3><p>é€šè¿‡ç¼–å†™ Java ä»£ç é…ç½®ç”Ÿæˆé€»è¾‘ï¼Œæ”¯æŒä¸ªæ€§åŒ–å®šåˆ¶ï¼ˆå¦‚ Lombok æ³¨è§£ã€REST é£æ ¼ Controller ç­‰ï¼‰ï¼Œé€‚åˆå¤æ‚åœºæ™¯ã€‚</p><p>å› ä¸ºMPä»£ç ç”Ÿæˆæ›´æ–°è¿­ä»£é€Ÿåº¦å¾ˆå¿«ï¼Œè‹¥æœ¬æ–‡çš„APIè¢«å¼ƒç”¨ï¼Œè¯·ä»¥å®˜ç½‘æœ€æ–°ç‰ˆæœ¬APIä¸ºå‡†ï¼š</p><p>MyBatis-Plusæ–°ä»£ç ç”Ÿæˆå™¨ï¼š<a href="https://baomidou.com/guides/new-code-generator/">https://baomidou.com/guides/new-code-generator/</a></p><p>ä»£ç ç”Ÿæˆå™¨é…ç½®ï¼š<a href="https://baomidou.com/reference/new-code-generator-configuration/">https://baomidou.com/reference/new-code-generator-configuration/</a></p><h4 id="1-å¼•å…¥ä¾èµ–">1. å¼•å…¥ä¾èµ–</h4><p>åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ ä»£ç ç”Ÿæˆå™¨ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- MPä»£ç ç”Ÿæˆå™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="2-ç¼–å†™ç”Ÿæˆé…ç½®">2. ç¼–å†™ç”Ÿæˆé…ç½®</h4><p>åˆ›å»º <code>CodeGenerator</code> ç±»ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ã€åŒ…è·¯å¾„ã€ç”Ÿæˆç­–ç•¥ç­‰å‚æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.FastAutoGenerator;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.generator.config.OutputFile;<br><br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CodeGenerator</span> &#123;<br>    <span class="hljs-comment">// æ•°æ®åº“è¿æ¥å‚æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">JDBC_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">JDBC_USER</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">JDBC_PWD</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// ç”Ÿæˆè¡¨åï¼ˆå¯æ‰¹é‡ï¼‰</span><br>        List&lt;String&gt; tables = List.of(<span class="hljs-string">&quot;address&quot;</span>);<br>        <span class="hljs-comment">// è¾“å‡ºè·¯å¾„ï¼ˆé¡¹ç›®javaç›®å½•ï¼‰</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">outputDir</span> <span class="hljs-operator">=</span> System.getProperty(<span class="hljs-string">&quot;user.dir&quot;</span>) + <span class="hljs-string">&quot;/src/main/java&quot;</span>;<br><br>        FastAutoGenerator.create(JDBC_URL, JDBC_USER, JDBC_PWD)<br>                <span class="hljs-comment">// 1. å…¨å±€é…ç½®</span><br>                .globalConfig(builder -&gt; &#123;<br>                    builder.author(<span class="hljs-string">&quot;Aizen&quot;</span>)          <span class="hljs-comment">// ä½œè€…</span><br>                            .outputDir(outputDir)   <span class="hljs-comment">// è¾“å‡ºè·¯å¾„</span><br>                            .enableSwagger()        <span class="hljs-comment">// å¼€å¯Swaggeræ³¨è§£</span><br>                            .commentDate(<span class="hljs-string">&quot;yyyy-MM-dd&quot;</span>); <span class="hljs-comment">// æ³¨é‡Šæ—¥æœŸæ ¼å¼</span><br>                &#125;)<br>                <span class="hljs-comment">// 2. åŒ…é…ç½®</span><br>                .packageConfig(builder -&gt; &#123;<br>                    builder.parent(<span class="hljs-string">&quot;com.itheima.mp&quot;</span>) <span class="hljs-comment">// çˆ¶åŒ…å</span><br>                            .entity(<span class="hljs-string">&quot;domain.po&quot;</span>)    <span class="hljs-comment">// å®ä½“ç±»åŒ…</span><br>                            .mapper(<span class="hljs-string">&quot;mapper&quot;</span>)       <span class="hljs-comment">// Mapperæ¥å£åŒ…</span><br>                            .service(<span class="hljs-string">&quot;service&quot;</span>)     <span class="hljs-comment">// Serviceæ¥å£åŒ…</span><br>                            .serviceImpl(<span class="hljs-string">&quot;service.impl&quot;</span>) <span class="hljs-comment">// Serviceå®ç°åŒ…</span><br>                            .controller(<span class="hljs-string">&quot;controller&quot;</span>) <span class="hljs-comment">// ControlleråŒ…</span><br>                            .xml(<span class="hljs-string">&quot;src/main/resources/mapper&quot;</span>); <span class="hljs-comment">// Mapper XMLè·¯å¾„</span><br>                &#125;)<br>                <span class="hljs-comment">// 3. ç­–ç•¥é…ç½®</span><br>                .strategyConfig(builder -&gt; &#123;<br>                    builder.addInclude(tables)       <span class="hljs-comment">// è¦ç”Ÿæˆçš„è¡¨</span><br>                            .addTablePrefix()       <span class="hljs-comment">// è¡¨å‰ç¼€ï¼ˆå¦‚æ— åˆ™ä¸å¡«ï¼‰</span><br>                            <span class="hljs-comment">// å®ä½“ç±»ç­–ç•¥</span><br>                            .entityBuilder()<br>                            .enableLombok()         <span class="hljs-comment">// å¯ç”¨Lombok</span><br>                            .enableTableFieldAnnotation() <span class="hljs-comment">// ç”Ÿæˆå­—æ®µæ³¨è§£</span><br>                            <span class="hljs-comment">// Serviceç­–ç•¥</span><br>                            .serviceBuilder()<br>                            .formatServiceFileName(<span class="hljs-string">&quot;%sService&quot;</span>)<br>                            .formatServiceImplFileName(<span class="hljs-string">&quot;%sServiceImpl&quot;</span>)<br>                            <span class="hljs-comment">// Controllerç­–ç•¥</span><br>                            .controllerBuilder()<br>                            .enableRestStyle()      <span class="hljs-comment">// å¯ç”¨RESTé£æ ¼</span><br>                            <span class="hljs-comment">// Mapperç­–ç•¥</span><br>                            .mapperBuilder()<br>                            .superClass(BaseMapper.class) <span class="hljs-comment">// ç»§æ‰¿BaseMapper</span><br>                            .enableBaseResultMap(); <span class="hljs-comment">// ç”Ÿæˆé€šç”¨ResultMap</span><br>                &#125;)<br>                .execute(); <span class="hljs-comment">// æ‰§è¡Œç”Ÿæˆ</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-æ‰§è¡Œç”Ÿæˆ">3. æ‰§è¡Œç”Ÿæˆ</h4><p>è¿è¡Œ <code>CodeGenerator.main()</code> æ–¹æ³•ï¼Œä»£ç ä¼šè‡ªåŠ¨ç”Ÿæˆåˆ°æŒ‡å®šåŒ…è·¯å¾„ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™é‡å¤ä»£ç ã€‚</p><h2 id="4-2-é™æ€å·¥å…·-Dbï¼šè§£å†³-Service-å¾ªç¯ä¾èµ–">4.2 é™æ€å·¥å…· Dbï¼šè§£å†³ Service å¾ªç¯ä¾èµ–</h2><p>å½“ Service ä¹‹é—´ç›¸äº’è°ƒç”¨æ—¶ï¼Œæ˜“å‡ºç° <strong>å¾ªç¯ä¾èµ–</strong> é—®é¢˜ã€‚MyBatis-Plus æä¾›é™æ€å·¥å…·ç±» <code>Db</code>ï¼Œå°è£…äº†ä¸ <code>IService</code> ä¸€è‡´çš„ CRUD æ–¹æ³•ï¼Œæ— éœ€æ³¨å…¥ Service å³å¯å®ç°æ•°æ®æ“ä½œï¼Œä»æ ¹æºé¿å…å¾ªç¯ä¾èµ–ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd518714fbe.png" alt=""></p><h3 id="4-2-1-æ ¸å¿ƒç‰¹æ€§">4.2.1 æ ¸å¿ƒç‰¹æ€§</h3><ul><li>æ— éœ€æ³¨å…¥ Serviceï¼Œé€šè¿‡é™æ€æ–¹æ³•ç›´æ¥è°ƒç”¨ï¼›</li><li>éœ€ä¼ å…¥ PO ç±»çš„ <code>Class</code> å­—èŠ‚ç ï¼ˆé™æ€æ–¹æ³•æ— æ³•è¯»å–æ³›å‹ï¼Œé€šè¿‡åå°„è·å–è¡¨ä¿¡æ¯ï¼‰ï¼›</li><li>æ–¹æ³•ç­¾åä¸ <code>IService</code> åŸºæœ¬ä¸€è‡´ï¼Œå­¦ä¹ æˆæœ¬ä½ã€‚</li></ul><h3 id="4-2-2-åŸºç¡€ä½¿ç”¨ç¤ºä¾‹">4.2.2 åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.Db;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DbToolTest</span> &#123;<br><br>    <span class="hljs-comment">// 1. æ ¹æ®IDæŸ¥è¯¢</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDbGetById</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> Db.getById(<span class="hljs-number">1L</span>, User.class); <span class="hljs-comment">// éœ€ä¼ å…¥POçš„Class</span><br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·ï¼š&quot;</span> + user);<br>    &#125;<br><br>    <span class="hljs-comment">// 2. æ¡ä»¶æŸ¥è¯¢</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDbLambdaQuery</span><span class="hljs-params">()</span> &#123;<br>        List&lt;User&gt; userList = Db.lambdaQuery(User.class)<br>                .like(User::getUsername, <span class="hljs-string">&quot;o&quot;</span>)<br>                .ge(User::getBalance, <span class="hljs-number">1000</span>)<br>                .list();<br>        userList.forEach(System.out::println);<br>    &#125;<br><br>    <span class="hljs-comment">// 3. æ›´æ–°æ“ä½œ</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDbLambdaUpdate</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> Db.lambdaUpdate(User.class)<br>                .set(User::getBalance, <span class="hljs-number">2000</span>)<br>                .eq(User::getUsername, <span class="hljs-string">&quot;Rose&quot;</span>)<br>                .update();<br>        System.out.println(<span class="hljs-string">&quot;æ›´æ–°æˆåŠŸï¼š&quot;</span> + success);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-2-3-å®æˆ˜æ¡ˆä¾‹ï¼šæŸ¥è¯¢ç”¨æˆ·åŠå…³è”åœ°å€">4.2.3 å®æˆ˜æ¡ˆä¾‹ï¼šæŸ¥è¯¢ç”¨æˆ·åŠå…³è”åœ°å€</h3><h4 id="æ¡ˆä¾‹-1ï¼šæŸ¥è¯¢å•ä¸ªç”¨æˆ·åŠåœ°å€">æ¡ˆä¾‹ 1ï¼šæŸ¥è¯¢å•ä¸ªç”¨æˆ·åŠåœ°å€</h4><p><strong>éœ€æ±‚</strong>ï¼šæŸ¥è¯¢ç”¨æˆ·æ—¶è¿”å›å…¶æ‰€æœ‰æ”¶è´§åœ°å€ï¼Œé¿å…æ³¨å…¥ <code>IAddressService</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> UserVO <span class="hljs-title function_">queryUserAndAddressById</span><span class="hljs-params">(Long id)</span> &#123;<br>        <span class="hljs-comment">// 1. æŸ¥è¯¢ç”¨æˆ·ï¼ˆè‡ªèº«Serviceæ–¹æ³•ï¼‰</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> getById(id);<br>        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span> || user.getStatus() == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;ç”¨æˆ·ä¸å­˜åœ¨æˆ–å†»ç»“&quot;</span>);<br>        &#125;<br><br>        <span class="hljs-comment">// 2. æŸ¥è¯¢åœ°å€ï¼ˆç”¨Dbå·¥å…·ï¼Œæ— éœ€æ³¨å…¥AddressServiceï¼‰</span><br>        List&lt;Address&gt; addresses = Db.lambdaQuery(Address.class)<br>                .eq(Address::getUserId, id)<br>                .list();<br><br>        <span class="hljs-comment">// 3. å°è£…VO</span><br>        <span class="hljs-type">UserVO</span> <span class="hljs-variable">userVO</span> <span class="hljs-operator">=</span> BeanUtil.copyProperties(user, UserVO.class);<br>        userVO.setAddresses(BeanUtil.copyToList(addresses, AddressVO.class));<br>        <span class="hljs-keyword">return</span> userVO;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="æ¡ˆä¾‹-2ï¼šæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·åŠåœ°å€">æ¡ˆä¾‹ 2ï¼šæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·åŠåœ°å€</h4><p><strong>éœ€æ±‚</strong>ï¼šæ‰¹é‡æŸ¥è¯¢ç”¨æˆ·æ—¶ï¼Œæ‰¹é‡å…³è”åœ°å€å¹¶åˆ†ç»„åŒ¹é…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;UserVO&gt; <span class="hljs-title function_">queryUserAndAddressByIds</span><span class="hljs-params">(List&lt;Long&gt; ids)</span> &#123;<br>    <span class="hljs-comment">// 1. æ‰¹é‡æŸ¥è¯¢ç”¨æˆ·</span><br>    List&lt;User&gt; users = listByIds(ids);<br>    <span class="hljs-keyword">if</span> (users.isEmpty()) <span class="hljs-keyword">return</span> Collections.emptyList();<br><br>    <span class="hljs-comment">// 2. æ‰¹é‡æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„åœ°å€ï¼ˆä¸€æ¬¡æŸ¥è¯¢ï¼Œå‡å°‘æ•°æ®åº“äº¤äº’ï¼‰</span><br>    List&lt;Long&gt; userIds = users.stream().map(User::getId).toList();<br>    List&lt;Address&gt; addresses = Db.lambdaQuery(Address.class)<br>            .in(Address::getUserId, userIds)<br>            .list();<br><br>    <span class="hljs-comment">// 3. åœ°å€æŒ‰ç”¨æˆ·IDåˆ†ç»„ï¼ˆMap&lt;ç”¨æˆ·ID, åœ°å€åˆ—è¡¨&gt;ï¼‰</span><br>    Map&lt;Long, List&lt;AddressVO&gt;&gt; addressMap = addresses.stream()<br>            .map(addr -&gt; BeanUtil.copyProperties(addr, AddressVO.class))<br>            .collect(Collectors.groupingBy(AddressVO::getUserId));<br><br>    <span class="hljs-comment">// 4. å°è£…VO</span><br>    <span class="hljs-keyword">return</span> users.stream()<br>            .map(user -&gt; &#123;<br>                <span class="hljs-type">UserVO</span> <span class="hljs-variable">vo</span> <span class="hljs-operator">=</span> BeanUtil.copyProperties(user, UserVO.class);<br>                vo.setAddresses(addressMap.getOrDefault(user.getId(), Collections.emptyList()));<br>                <span class="hljs-keyword">return</span> vo;<br>            &#125;)<br>            .toList();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-3-é€»è¾‘åˆ é™¤ï¼šé¿å…æ•°æ®ç‰©ç†åˆ é™¤">4.3 é€»è¾‘åˆ é™¤ï¼šé¿å…æ•°æ®ç‰©ç†åˆ é™¤</h2><p>å¯¹äºæ ¸å¿ƒæ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€è®¢å•ï¼‰ï¼Œç‰©ç†åˆ é™¤ï¼ˆDELETEï¼‰ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œé€šå¸¸é‡‡ç”¨ <strong>é€»è¾‘åˆ é™¤</strong> æ–¹æ¡ˆï¼šé€šè¿‡å­—æ®µæ ‡è®°æ•°æ®çŠ¶æ€ï¼Œåˆ é™¤æ—¶ä»…ä¿®æ”¹æ ‡è®°ï¼ŒæŸ¥è¯¢æ—¶è¿‡æ»¤å·²æ ‡è®°çš„æ•°æ®ã€‚MyBatis-Plus å¯è‡ªåŠ¨å¤„ç†é€»è¾‘åˆ é™¤çš„ SQL æ‹¼æ¥ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ CRUD æ–¹æ³•ã€‚</p><h3 id="4-3-1-å®ç°æ­¥éª¤">4.3.1 å®ç°æ­¥éª¤</h3><h4 id="1-æ•°æ®åº“æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µ">1. æ•°æ®åº“æ·»åŠ é€»è¾‘åˆ é™¤å­—æ®µ</h4><p>ä»¥ <code>address</code> è¡¨ä¸ºä¾‹ï¼Œæ·»åŠ  <code>deleted</code> å­—æ®µï¼ˆå¸ƒå°”å‹ï¼Œé»˜è®¤ <code>0</code> æœªåˆ é™¤ï¼‰ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER TABLE</span> address <span class="hljs-keyword">ADD</span> deleted BIT <span class="hljs-keyword">DEFAULT</span> b<span class="hljs-string">&#x27;0&#x27;</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;é€»è¾‘åˆ é™¤ï¼ˆ0æœªåˆ ï¼Œ1å·²åˆ ï¼‰&#x27;</span>;<br></code></pre></td></tr></table></figure><h4 id="2-é…ç½®é€»è¾‘åˆ é™¤">2. é…ç½®é€»è¾‘åˆ é™¤</h4><p>ä¸¤ç§é…ç½®æ–¹å¼ï¼š<strong>å…¨å±€é…ç½®</strong>ï¼ˆé€‚ç”¨äºå…¨è¡¨ç»Ÿä¸€è§„åˆ™ï¼‰æˆ– <strong>æ³¨è§£é…ç½®</strong>ï¼ˆé€‚ç”¨äºå•è¡¨è‡ªå®šä¹‰è§„åˆ™ï¼‰ã€‚</p><h5 id="æ–¹å¼-1ï¼šå…¨å±€é…ç½®ï¼ˆæ¨èï¼‰">æ–¹å¼ 1ï¼šå…¨å±€é…ç½®ï¼ˆæ¨èï¼‰</h5><p>åœ¨ <code>application.yaml</code> ä¸­é…ç½®å…¨å±€é€»è¾‘åˆ é™¤è§„åˆ™ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">logic-delete-field:</span> <span class="hljs-string">deleted</span>  <span class="hljs-comment"># å…¨å±€é€»è¾‘åˆ é™¤å­—æ®µå</span><br>      <span class="hljs-attr">logic-not-delete-value:</span> <span class="hljs-number">0</span>     <span class="hljs-comment"># æœªåˆ é™¤å€¼ï¼ˆé»˜è®¤0ï¼‰</span><br>      <span class="hljs-attr">logic-delete-value:</span> <span class="hljs-number">1</span>         <span class="hljs-comment"># å·²åˆ é™¤å€¼ï¼ˆé»˜è®¤1ï¼‰</span><br></code></pre></td></tr></table></figure><h5 id="æ–¹å¼-2ï¼šæ³¨è§£é…ç½®ï¼ˆå•è¡¨è‡ªå®šä¹‰ï¼‰">æ–¹å¼ 2ï¼šæ³¨è§£é…ç½®ï¼ˆå•è¡¨è‡ªå®šä¹‰ï¼‰</h5><p>åœ¨ PO ç±»çš„é€»è¾‘åˆ é™¤å­—æ®µä¸Šæ·»åŠ  <code>@TableLogic</code> æ³¨è§£ï¼Œè¦†ç›–å…¨å±€é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(&quot;address&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> &#123;<br>    <span class="hljs-comment">// å…¶ä»–å­—æ®µçœç•¥...</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é€»è¾‘åˆ é™¤</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@TableLogic(value = &quot;0&quot;, delval = &quot;1&quot;)</span> <span class="hljs-comment">// value=æœªåˆ å€¼ï¼Œdelval=å·²åˆ å€¼</span><br>    <span class="hljs-keyword">private</span> Boolean deleted;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-æµ‹è¯•é€»è¾‘åˆ é™¤">3. æµ‹è¯•é€»è¾‘åˆ é™¤</h4><p>è°ƒç”¨æ™®é€š CRUD æ–¹æ³•ï¼ŒMP ä¼šè‡ªåŠ¨å¤„ç†é€»è¾‘åˆ é™¤ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogicDeleteTest</span> &#123;<br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IAddressService addressService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRemove</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 1. æ‰§è¡Œåˆ é™¤ï¼ˆå®é™…æ‰§è¡ŒUPDATEï¼Œè€ŒéDELETEï¼‰</span><br>        addressService.removeById(<span class="hljs-number">59L</span>);<br><br>        <span class="hljs-comment">// 2. æŸ¥è¯¢å·²åˆ é™¤æ•°æ®ï¼ˆè‡ªåŠ¨è¿‡æ»¤ï¼Œè¿”å›nullï¼‰</span><br>        <span class="hljs-type">Address</span> <span class="hljs-variable">address</span> <span class="hljs-operator">=</span> addressService.getById(<span class="hljs-number">59L</span>);<br>        System.out.println(<span class="hljs-string">&quot;æŸ¥è¯¢ç»“æœï¼š&quot;</span> + address); <span class="hljs-comment">// null</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><ul><li>åˆ é™¤ï¼š<code>UPDATE address SET deleted=1 WHERE id=? AND deleted=0</code></li><li>æŸ¥è¯¢ï¼š<code>SELECT * FROM address WHERE id=? AND deleted=0</code></li></ul><h3 id="4-3-2-æ³¨æ„äº‹é¡¹">4.3.2 æ³¨æ„äº‹é¡¹</h3><ul><li>ä»… MP è‡ªåŠ¨ç”Ÿæˆçš„ SQL æ”¯æŒé€»è¾‘åˆ é™¤ï¼Œ<strong>è‡ªå®šä¹‰ SQL éœ€æ‰‹åŠ¨æ·»åŠ  <code>deleted</code> æ¡ä»¶</strong>ï¼›</li><li>é€»è¾‘åˆ é™¤ä¼šå¯¼è‡´è¡¨ä¸­ â€œåƒåœ¾æ•°æ®â€ ç´¯ç§¯ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ï¼Œå»ºè®®å®šæœŸå°†å·²åˆ é™¤æ•°æ®è¿ç§»è‡³å†å²è¡¨ï¼›</li><li>ä¸é€‚ç”¨äºéœ€å½»åº•æ¸…ç†æ•°æ®çš„åœºæ™¯ï¼ˆå¦‚æµ‹è¯•æ•°æ®ï¼‰ã€‚</li></ul><h2 id="4-4-æšä¸¾å¤„ç†å™¨ï¼šæšä¸¾ä¸æ•°æ®åº“å­—æ®µè‡ªåŠ¨è½¬æ¢">4.4 æšä¸¾å¤„ç†å™¨ï¼šæšä¸¾ä¸æ•°æ®åº“å­—æ®µè‡ªåŠ¨è½¬æ¢</h2><p>å½“ PO ç±»å±æ€§ä¸ºæšä¸¾ç±»å‹æ—¶ï¼ŒMyBatis é»˜è®¤ä½¿ç”¨ <code>EnumOrdinalTypeHandler</code>ï¼ˆå­˜å‚¨æšä¸¾ç´¢å¼•ï¼‰ï¼Œçµæ´»æ€§å·®ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd530fa4fa4.png" alt=""></p><p>MyBatis-Plus æä¾› <code>MybatisEnumTypeHandler</code>ï¼Œæ”¯æŒå°†æšä¸¾çš„æŒ‡å®šå±æ€§ï¼ˆå¦‚ <code>value</code>ï¼‰ä¸æ•°æ®åº“å­—æ®µæ˜ å°„ï¼Œä¸”æ”¯æŒ JSON åºåˆ—åŒ–è‡ªå®šä¹‰ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd533735419.png" alt=""></p><h3 id="4-4-1-å®ç°æ­¥éª¤">4.4.1 å®ç°æ­¥éª¤</h3><h4 id="1-å®šä¹‰æšä¸¾å¹¶æ ‡è®°-EnumValue">1. å®šä¹‰æšä¸¾å¹¶æ ‡è®° <code>@EnumValue</code></h4><p>ç”¨ <code>@EnumValue</code> æ³¨è§£æ ‡è®°æšä¸¾ä¸­ä¸æ•°æ®åº“å­—æ®µå¯¹åº”çš„å±æ€§ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.EnumValue;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.annotation.JsonValue;<br><span class="hljs-keyword">import</span> lombok.Getter;<br><br><span class="hljs-meta">@Getter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">UserStatus</span> &#123;<br>    NORMAL(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;æ­£å¸¸&quot;</span>),  <span class="hljs-comment">// æ•°æ®åº“å­˜1ï¼Œå‰ç«¯æ˜¾ç¤º&quot;æ­£å¸¸&quot;</span><br>    FREEZE(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;å†»ç»“&quot;</span>); <span class="hljs-comment">// æ•°æ®åº“å­˜2ï¼Œå‰ç«¯æ˜¾ç¤º&quot;å†»ç»“&quot;</span><br><br>    <span class="hljs-meta">@EnumValue</span>  <span class="hljs-comment">// æ ‡è®°æ•°æ®åº“å­˜å‚¨çš„å±æ€§</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> value;<br><br>    <span class="hljs-meta">@JsonValue</span>  <span class="hljs-comment">// æ ‡è®°JSONåºåˆ—åŒ–è¿”å›çš„å±æ€§ï¼ˆå‰ç«¯å±•ç¤ºç”¨ï¼‰</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;<br><br>    UserStatus(<span class="hljs-type">int</span> value, String desc) &#123;<br>        <span class="hljs-built_in">this</span>.value = value;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-é…ç½®å…¨å±€æšä¸¾å¤„ç†å™¨">2. é…ç½®å…¨å±€æšä¸¾å¤„ç†å™¨</h4><p>åœ¨ <code>application.yaml</code> ä¸­æŒ‡å®šé»˜è®¤æšä¸¾å¤„ç†å™¨ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">default-enum-type-handler:</span> <span class="hljs-string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span><br></code></pre></td></tr></table></figure><h4 id="3-æ”¹é€ -PO-ç±»">3. æ”¹é€  PO ç±»</h4><p>å°† PO ç±»ä¸­çš„çŠ¶æ€å­—æ®µæ”¹ä¸ºæšä¸¾ç±»å‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(&quot;user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-comment">// å…¶ä»–å­—æ®µçœç•¥...</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”¨æˆ·çŠ¶æ€ï¼ˆ1æ­£å¸¸ï¼Œ2å†»ç»“ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> UserStatus status;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-4-2-æµ‹è¯•æ•ˆæœ">4.4.2 æµ‹è¯•æ•ˆæœ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testEnumQuery</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// æŸ¥è¯¢çŠ¶æ€ä¸ºæ­£å¸¸çš„ç”¨æˆ·</span><br>    List&lt;User&gt; users = userService.lambdaQuery()<br>            .eq(User::getStatus, UserStatus.NORMAL)<br>            .list();<br>  <br>    <span class="hljs-comment">// è¾“å‡ºç»“æœï¼šstatuså­—æ®µä¸ºæšä¸¾å¯¹è±¡ï¼ŒJSONè¿”å›descå±æ€§</span><br>    users.forEach(user -&gt; System.out.println(user.getStatus().getDesc())); <span class="hljs-comment">// æ­£å¸¸ã€æ­£å¸¸...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> ?  <span class="hljs-comment">-- å‚æ•°ï¼š1ï¼ˆUserStatus.NORMALçš„valueï¼‰</span><br></code></pre></td></tr></table></figure><h2 id="4-5-JSON-ç±»å‹å¤„ç†å™¨ï¼šJSON-å­—æ®µä¸å¯¹è±¡è‡ªåŠ¨è½¬æ¢">4.5 JSON ç±»å‹å¤„ç†å™¨ï¼šJSON å­—æ®µä¸å¯¹è±¡è‡ªåŠ¨è½¬æ¢</h2><p>æ•°æ®åº“ä¸­ JSON ç±»å‹å­—æ®µï¼ˆå¦‚ <code>user.info</code>ï¼‰é»˜è®¤ä»¥å­—ç¬¦ä¸²å½¢å¼æ˜ å°„åˆ° PO ç±»ï¼Œè¯»å–å…¶ä¸­å±æ€§éœ€æ‰‹åŠ¨è§£æ JSONã€‚MyBatis-Plus æä¾› <code>JacksonTypeHandler</code>ï¼Œå¯å°† JSON å­—æ®µç›´æ¥æ˜ å°„ä¸º Java å¯¹è±¡ï¼ˆå¦‚ <code>UserInfo</code>ï¼‰ï¼Œå®ç°è‡ªåŠ¨åºåˆ—åŒ– / ååºåˆ—åŒ–ã€‚</p><h3 id="4-5-1-å®ç°æ­¥éª¤">4.5.1 å®ç°æ­¥éª¤</h3><h4 id="1-å®šä¹‰-JSON-å¯¹åº”çš„å®ä½“ç±»">1. å®šä¹‰ JSON å¯¹åº”çš„å®ä½“ç±»</h4><p>åˆ›å»ºä¸ JSON å­—æ®µç»“æ„åŒ¹é…çš„å®ä½“ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@AllArgsConstructor(staticName = &quot;of&quot;)</span> <span class="hljs-comment">// ä¾¿æ·æ„å»ºå¯¹è±¡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInfo</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer age;    <span class="hljs-comment">// å¯¹åº”JSONçš„ageå­—æ®µ</span><br>    <span class="hljs-keyword">private</span> String intro;   <span class="hljs-comment">// å¯¹åº”JSONçš„introå­—æ®µ</span><br>    <span class="hljs-keyword">private</span> String gender;  <span class="hljs-comment">// å¯¹åº”JSONçš„genderå­—æ®µ</span><br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-æ”¹é€ -PO-ç±»">2. æ”¹é€  PO ç±»</h4><p>æŒ‡å®š JSON å­—æ®µçš„ç±»å‹å¤„ç†å™¨ï¼Œå¹¶å¼€å¯è‡ªåŠ¨ ResultMap æ˜ å°„ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(value = &quot;user&quot;, autoResultMap = true)</span> <span class="hljs-comment">// å¼€å¯è‡ªåŠ¨ResultMapï¼ˆè§£å†³åµŒå¥—æ˜ å°„é—®é¢˜ï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-comment">// å…¶ä»–å­—æ®µçœç•¥...</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯¦ç»†ä¿¡æ¯ï¼ˆJSONç±»å‹ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@TableField(typeHandler = JacksonTypeHandler.class)</span> <span class="hljs-comment">// æŒ‡å®šJSONå¤„ç†å™¨</span><br>    <span class="hljs-keyword">private</span> UserInfo info;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-æµ‹è¯•è‡ªåŠ¨è½¬æ¢">3. æµ‹è¯•è‡ªåŠ¨è½¬æ¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testJsonField</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 1. æ–°å¢ç”¨æˆ·ï¼ˆè‡ªåŠ¨å°†UserInfoè½¬ä¸ºJSONå­—ç¬¦ä¸²ï¼‰</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;JsonTest&quot;</span>);<br>    user.setInfo(UserInfo.of(<span class="hljs-number">25</span>, <span class="hljs-string">&quot;æŠ€æœ¯å®…&quot;</span>, <span class="hljs-string">&quot;male&quot;</span>)); <span class="hljs-comment">// ç›´æ¥è®¾ç½®å¯¹è±¡</span><br>    userService.save(user);<br><br>    <span class="hljs-comment">// 2. æŸ¥è¯¢ç”¨æˆ·ï¼ˆè‡ªåŠ¨å°†JSONå­—ç¬¦ä¸²è½¬ä¸ºUserInfoï¼‰</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">queryUser</span> <span class="hljs-operator">=</span> userService.getById(user.getId());<br>    System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·å¹´é¾„ï¼š&quot;</span> + queryUser.getInfo().getAge()); <span class="hljs-comment">// 25</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>ç”Ÿæˆçš„ SQL</strong>ï¼š</p><ul><li>æ–°å¢ï¼š<code>INSERT INTO user (username, info) VALUES (?, ?)</code> â†’ å‚æ•°ï¼š<code>JsonTest</code>ã€<code>&#123;&quot;age&quot;:25,&quot;intro&quot;:&quot;æŠ€æœ¯å®…&quot;,&quot;gender&quot;:&quot;male&quot;&#125;</code></li><li>æŸ¥è¯¢ï¼šè‡ªåŠ¨å°† JSON å­—ç¬¦ä¸²è§£æä¸º <code>UserInfo</code> å¯¹è±¡ã€‚</li></ul><h2 id="4-6-YAML-é…ç½®åŠ å¯†ï¼šä¿æŠ¤æ•æ„Ÿä¿¡æ¯">4.6 YAML é…ç½®åŠ å¯†ï¼šä¿æŠ¤æ•æ„Ÿä¿¡æ¯</h2><p>é…ç½®æ–‡ä»¶ä¸­æ•°æ®åº“ç”¨æˆ·åã€å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯ä»¥æ˜æ–‡å­˜å‚¨ï¼Œå­˜åœ¨æ³„éœ²é£é™©ã€‚MyBatis-Plus åŸºäº AES ç®—æ³•æä¾›é…ç½®åŠ å¯†åŠŸèƒ½ï¼Œå¯å¯¹æ•æ„Ÿä¿¡æ¯åŠ å¯†å­˜å‚¨ï¼Œå¯åŠ¨æ—¶è§£å¯†ã€‚</p><h3 id="4-6-1-å®ç°æ­¥éª¤">4.6.1 å®ç°æ­¥éª¤</h3><h4 id="1-ç”Ÿæˆå¯†é’¥ä¸å¯†æ–‡">1. ç”Ÿæˆå¯†é’¥ä¸å¯†æ–‡</h4><p>ä½¿ç”¨ MP æä¾›çš„ <code>AES</code> å·¥å…·ç”Ÿæˆ 16 ä½å¯†é’¥ï¼Œå¹¶åŠ å¯†ç”¨æˆ·å / å¯†ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.AES;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigEncryptTest</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">USERNAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;root&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PASSWORD</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;123456&quot;</span>;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">generateEncryptInfo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 1. ç”Ÿæˆ16ä½éšæœºAESå¯†é’¥</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> AES.generateRandomKey();<br>        System.out.println(<span class="hljs-string">&quot;å¯†é’¥ï¼š&quot;</span> + key); <span class="hljs-comment">// ä¾‹ï¼š7pSEa6F9TnYacTNJ</span><br><br>        <span class="hljs-comment">// 2. åŠ å¯†ç”¨æˆ·åå’Œå¯†ç </span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">encryptUsername</span> <span class="hljs-operator">=</span> AES.encrypt(USERNAME, key);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">encryptPassword</span> <span class="hljs-operator">=</span> AES.encrypt(PASSWORD, key);<br>        System.out.println(<span class="hljs-string">&quot;åŠ å¯†åç”¨æˆ·åï¼š&quot;</span> + encryptUsername); <span class="hljs-comment">// ä¾‹ï¼šO4Yq+WKYGlPW5t8QvgrhUQ==</span><br>        System.out.println(<span class="hljs-string">&quot;åŠ å¯†åå¯†ç ï¼š&quot;</span> + encryptPassword);   <span class="hljs-comment">// ä¾‹ï¼šcDYHnWysq07zUIAy1tcbRQ==</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹é…ç½®æ–‡ä»¶">2. ä¿®æ”¹é…ç½®æ–‡ä»¶</h4><p>å°†å¯†æ–‡å†™å…¥ <code>application.yaml</code>ï¼Œå¯†æ–‡éœ€ä»¥ <code>mpw:</code> ä¸ºå‰ç¼€ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://127.0.0.1:3306/mp?useUnicode=true&amp;characterEncoding=UTF-8</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">mpw:O4Yq+WKYGlPW5t8QvgrhUQ==</span>  <span class="hljs-comment"># åŠ å¯†ç”¨æˆ·å</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">mpw:cDYHnWysq07zUIAy1tcbRQ==</span>  <span class="hljs-comment"># åŠ å¯†å¯†ç </span><br></code></pre></td></tr></table></figure><h4 id="3-é…ç½®å¯åŠ¨å¯†é’¥">3. é…ç½®å¯åŠ¨å¯†é’¥</h4><p>å¯åŠ¨é¡¹ç›®æ—¶ä¼ å…¥å¯†é’¥ï¼Œæ”¯æŒä¸¤ç§æ–¹å¼ï¼š</p><ul><li><strong>Idea å¯åŠ¨</strong>ï¼šåœ¨ <code>Run/Debug Configurations</code> çš„ <code>Program arguments</code> ä¸­æ·»åŠ  <code>--mpw.key=7pSEa6F9TnYacTNJ</code>ï¼›</li></ul><p><img src="https://a1.boltp.com/2025/09/19/68cd54c2838fb.png" alt=""></p><ul><li><p><strong>å•å…ƒæµ‹è¯•</strong>ï¼šåœ¨æµ‹è¯•ç±»æ³¨è§£ä¸­æ·»åŠ å¯†é’¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest(args = &quot;--mpw.key=7pSEa6F9TnYacTNJ&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceTest</span> &#123;<br>    <span class="hljs-comment">// æµ‹è¯•ä»£ç ...</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><p>éšæ„è¿è¡Œä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥å‘ç°æ•°æ®åº“æŸ¥è¯¢æ­£å¸¸ã€‚</p><h3 id="4-6-2-å®ç°åŸç†">4.6.2 å®ç°åŸç†</h3><p>MP é€šè¿‡é‡å†™ Spring çš„ <code>EnvironmentPostProcessor</code> æ¥å£ï¼Œåœ¨é¡¹ç›®å¯åŠ¨å‰æ‰§è¡Œä»¥ä¸‹é€»è¾‘ï¼š</p><ol><li>ä»å¯åŠ¨å‚æ•°ä¸­è¯»å–å¯†é’¥ <code>mpw.key</code>ï¼›</li><li>éå†é…ç½®æ–‡ä»¶ä¸­ä»¥ <code>mpw:</code> ä¸ºå‰ç¼€çš„å±æ€§ï¼Œç”¨å¯†é’¥è§£å¯†ï¼›</li><li>å°†è§£å¯†åçš„æ˜æ–‡æ”¾å…¥ç¯å¢ƒå˜é‡ï¼Œè¦†ç›–å¯†æ–‡é…ç½®ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.baomidou.mybatisplus.autoconfigure;<br><br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.AES;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.CollectionUtils;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.toolkit.StringUtils;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.env.EnvironmentPostProcessor;<br><span class="hljs-keyword">import</span> org.springframework.boot.env.OriginTrackedMapPropertySource;<br><span class="hljs-keyword">import</span> org.springframework.core.env.ConfigurableEnvironment;<br><span class="hljs-keyword">import</span> org.springframework.core.env.MapPropertySource;<br><span class="hljs-keyword">import</span> org.springframework.core.env.PropertySource;<br><span class="hljs-keyword">import</span> org.springframework.core.env.SimpleCommandLinePropertySource;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å®‰å…¨åŠ å¯†å¤„ç†å™¨</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> hubin</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 2020-05-23</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafetyEncryptProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">EnvironmentPostProcessor</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postProcessEnvironment</span><span class="hljs-params">(ConfigurableEnvironment environment, SpringApplication application)</span> &#123;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å‘½ä»¤è¡Œä¸­è·å–å¯†é’¥</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">mpwKey</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">for</span> (PropertySource&lt;?&gt; ps : environment.getPropertySources()) &#123;<br>            <span class="hljs-keyword">if</span> (ps <span class="hljs-keyword">instanceof</span> SimpleCommandLinePropertySource) &#123;<br>                <span class="hljs-type">SimpleCommandLinePropertySource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (SimpleCommandLinePropertySource) ps;<br>                mpwKey = source.getProperty(<span class="hljs-string">&quot;mpw.key&quot;</span>);<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * å¤„ç†åŠ å¯†å†…å®¹</span><br><span class="hljs-comment">         */</span><br>        <span class="hljs-keyword">if</span> (StringUtils.isNotBlank(mpwKey)) &#123;<br>            HashMap&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>            <span class="hljs-keyword">for</span> (PropertySource&lt;?&gt; ps : environment.getPropertySources()) &#123;<br>                <span class="hljs-keyword">if</span> (ps <span class="hljs-keyword">instanceof</span> OriginTrackedMapPropertySource) &#123;<br>                    <span class="hljs-type">OriginTrackedMapPropertySource</span> <span class="hljs-variable">source</span> <span class="hljs-operator">=</span> (OriginTrackedMapPropertySource) ps;<br>                    <span class="hljs-keyword">for</span> (String name : source.getPropertyNames()) &#123;<br>                        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> source.getProperty(name);<br>                        <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> String) &#123;<br>                            <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> (String) value;<br>                            <span class="hljs-keyword">if</span> (str.startsWith(<span class="hljs-string">&quot;mpw:&quot;</span>)) &#123;<br>                                map.put(name, AES.decrypt(str.substring(<span class="hljs-number">4</span>), mpwKey));<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">// å°†è§£å¯†çš„æ•°æ®æ”¾å…¥ç¯å¢ƒå˜é‡ï¼Œå¹¶å¤„äºç¬¬ä¸€ä¼˜å…ˆçº§ä¸Š</span><br>            <span class="hljs-keyword">if</span> (CollectionUtils.isNotEmpty(map)) &#123;<br>                environment.getPropertySources().addFirst(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MapPropertySource</span>(<span class="hljs-string">&quot;custom-encrypt&quot;</span>, map));<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-7-è‡ªåŠ¨å¡«å……ï¼šå­—æ®µå€¼è‡ªåŠ¨èµ‹å€¼">4.7 è‡ªåŠ¨å¡«å……ï¼šå­—æ®µå€¼è‡ªåŠ¨èµ‹å€¼</h2><p>å¯¹äºåˆ›å»ºæ—¶é—´ï¼ˆ<code>create_time</code>ï¼‰ã€æ›´æ–°æ—¶é—´ï¼ˆ<code>update_time</code>ï¼‰ç­‰é€šç”¨å­—æ®µï¼Œæ¯æ¬¡æ–°å¢ / æ›´æ–°éƒ½éœ€æ‰‹åŠ¨èµ‹å€¼ã€‚MyBatis-Plus æä¾›è‡ªåŠ¨å¡«å……åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®å¤„ç†å™¨å®ç°å­—æ®µå€¼çš„è‡ªåŠ¨å¡«å……ã€‚</p><h3 id="4-7-1-å®ç°æ­¥éª¤">4.7.1 å®ç°æ­¥éª¤</h3><h4 id="1-å®ç°å¡«å……å¤„ç†å™¨">1. å®ç°å¡«å……å¤„ç†å™¨</h4><p>åˆ›å»ºç±»å®ç° <code>MetaObjectHandler</code> æ¥å£ï¼Œå®šä¹‰å¡«å……é€»è¾‘ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;<br><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;<br><span class="hljs-keyword">import</span> org.apache.ibatis.reflection.MetaObject;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-keyword">import</span> java.time.LocalDateTime;<br><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Component</span> <span class="hljs-comment">// äº¤ç»™Springç®¡ç†</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> &#123;<br><br>    <span class="hljs-comment">// æ–°å¢æ—¶å¡«å……</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;æ‰§è¡Œæ–°å¢å¡«å……...&quot;</span>);<br>        <span class="hljs-comment">// å¡«å……åˆ›å»ºæ—¶é—´ï¼ˆä»…å½“å­—æ®µä¸ºnullæ—¶å¡«å……ï¼‰</span><br>        <span class="hljs-built_in">this</span>.strictInsertFill(<br>                metaObject, <br>                <span class="hljs-string">&quot;createTime&quot;</span>,  <span class="hljs-comment">// POç±»ä¸­çš„å­—æ®µå</span><br>                LocalDateTime.class, <br>                LocalDateTime.now()  <span class="hljs-comment">// å¡«å……å€¼</span><br>        );<br>        <span class="hljs-comment">// å¡«å……æ›´æ–°æ—¶é—´ï¼ˆæ–°å¢æ—¶ä¹Ÿéœ€èµ‹å€¼ï¼‰</span><br>        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());<br>    &#125;<br><br>    <span class="hljs-comment">// æ›´æ–°æ—¶å¡«å……</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;æ‰§è¡Œæ›´æ–°å¡«å……...&quot;</span>);<br>        <span class="hljs-comment">// å¡«å……æ›´æ–°æ—¶é—´</span><br>        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-æ ‡è®°-PO-ç±»å­—æ®µ">2. æ ‡è®° PO ç±»å­—æ®µ</h4><p>ç”¨ <code>@TableField(fill)</code> æ³¨è§£æ ‡è®°éœ€è¦è‡ªåŠ¨å¡«å……çš„å­—æ®µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@TableName(&quot;user&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-comment">// å…¶ä»–å­—æ®µçœç•¥...</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åˆ›å»ºæ—¶é—´ï¼ˆä»…æ–°å¢æ—¶å¡«å……ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime createTime;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°æ—¶é—´ï¼ˆæ–°å¢å’Œæ›´æ–°æ—¶å¡«å……ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span><br>    <span class="hljs-keyword">private</span> LocalDateTime updateTime;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-æµ‹è¯•è‡ªåŠ¨å¡«å……">3. æµ‹è¯•è‡ªåŠ¨å¡«å……</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">testAutoFill</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();<br>    user.setUsername(<span class="hljs-string">&quot;AutoFillTest&quot;</span>);<br>    userService.save(user); <span class="hljs-comment">// æ— éœ€æ‰‹åŠ¨è®¾ç½®createTimeå’ŒupdateTime</span><br><br>    <span class="hljs-comment">// éªŒè¯å¡«å……ç»“æœ</span><br>    <span class="hljs-type">User</span> <span class="hljs-variable">queryUser</span> <span class="hljs-operator">=</span> userService.getById(user.getId());<br>    System.out.println(<span class="hljs-string">&quot;åˆ›å»ºæ—¶é—´ï¼š&quot;</span> + queryUser.getCreateTime()); <span class="hljs-comment">// è‡ªåŠ¨èµ‹å€¼å½“å‰æ—¶é—´</span><br>    System.out.println(<span class="hljs-string">&quot;æ›´æ–°æ—¶é—´ï¼š&quot;</span> + queryUser.getUpdateTime()); <span class="hljs-comment">// ä¸åˆ›å»ºæ—¶é—´ä¸€è‡´</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="4-7-2-æ³¨æ„äº‹é¡¹">4.7.2 æ³¨æ„äº‹é¡¹</h3><ul><li>å¡«å……é€»è¾‘ä»…å¯¹ <code>insert(T)</code>ã€<code>updateById(T)</code> ç­‰ä¼ å…¥å®ä½“å¯¹è±¡çš„æ–¹æ³•ç”Ÿæ•ˆï¼Œ<code>update(Wrapper&lt;T&gt;)</code> éœ€æ‰‹åŠ¨èµ‹å€¼ï¼›</li><li><code>strictInsertFill</code>/<code>strictUpdateFill</code> ä¼šä¸¥æ ¼åŒ¹é…å­—æ®µåå’Œç±»å‹ï¼Œé¿å…è¯¯å¡«å……ï¼›</li><li>è‹¥å®ä½“ç±»å­—æ®µå·²æ‰‹åŠ¨èµ‹å€¼ï¼Œå¡«å……é€»è¾‘ä¸ä¼šè¦†ç›–ï¼ˆé»˜è®¤ç­–ç•¥ï¼‰ã€‚</li></ul><h1>äº”ã€MyBatis-Plus æ’ä»¶åŠŸèƒ½</h1><p>MyBatis-Plus åŸºäº MyBatis çš„æ‹¦æˆªå™¨æœºåˆ¶ï¼Œæä¾›äº†ä¸€ç³»åˆ— <strong>å¯æ’æ‹”æ’ä»¶</strong>ï¼Œç”¨äºæ‹“å±•æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚åˆ†é¡µã€å¤šç§Ÿæˆ·ã€ä¹è§‚é”ç­‰ï¼‰ã€‚æ’ä»¶åªéœ€ç®€å•é…ç½®å³å¯å¯ç”¨ï¼Œä¸”æ”¯æŒå¤šæ’ä»¶ç»„åˆä½¿ç”¨ï¼ˆéœ€æ³¨æ„é…ç½®é¡ºåºï¼‰ã€‚æœ¬ç« ä»¥æœ€å¸¸ç”¨çš„ <strong>åˆ†é¡µæ’ä»¶</strong> ä¸ºæ ¸å¿ƒï¼Œè¯¦è§£æ’ä»¶çš„ä½¿ç”¨æµç¨‹ä¸å®æˆ˜æŠ€å·§ã€‚</p><h2 id="5-1-æ’ä»¶ä½“ç³»æ¦‚è¿°">5.1 æ’ä»¶ä½“ç³»æ¦‚è¿°</h2><p>MyBatis-Plus å†…ç½®å¤šæ¬¾å®ç”¨æ’ä»¶ï¼Œè¦†ç›–åˆ†é¡µã€æ•°æ®å®‰å…¨ã€SQL è§„èŒƒç­‰é«˜é¢‘åœºæ™¯ï¼Œæ ¸å¿ƒæ’ä»¶åŠåŠŸèƒ½å¦‚ä¸‹ï¼š</p><table><thead><tr><th>æ’ä»¶ç±»å</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>PaginationInnerInterceptor</code></td><td>è‡ªåŠ¨åˆ†é¡µï¼ˆæ‹¦æˆªæŸ¥è¯¢ SQLï¼Œæ‹¼æ¥åˆ†é¡µè¯­å¥ï¼‰</td><td>åˆ—è¡¨æŸ¥è¯¢åˆ†é¡µéœ€æ±‚</td></tr><tr><td><code>TenantLineInnerInterceptor</code></td><td>å¤šç§Ÿæˆ·ï¼ˆè‡ªåŠ¨æ‹¼æ¥ç§Ÿæˆ· ID æ¡ä»¶ï¼‰</td><td>å¤šç§Ÿæˆ·ç³»ç»Ÿæ•°æ®éš”ç¦»</td></tr><tr><td><code>DynamicTableNameInnerInterceptor</code></td><td>åŠ¨æ€è¡¨åï¼ˆè¿è¡Œæ—¶åˆ‡æ¢è¡¨åï¼‰</td><td>åˆ†è¡¨åœºæ™¯ï¼ˆå¦‚æŒ‰æ—¶é—´åˆ†è¡¨ï¼‰</td></tr><tr><td><code>OptimisticLockerInnerInterceptor</code></td><td>ä¹è§‚é”ï¼ˆåŸºäºç‰ˆæœ¬å·é˜²æ­¢å¹¶å‘æ›´æ–°å†²çªï¼‰</td><td>é«˜å¹¶å‘æ›´æ–°åœºæ™¯ï¼ˆå¦‚ä½™é¢ä¿®æ”¹ï¼‰</td></tr><tr><td><code>IllegalSQLInnerInterceptor</code></td><td>SQL æ€§èƒ½è§„èŒƒï¼ˆæ£€æµ‹åƒåœ¾ SQLï¼Œå¦‚ SELECT *ï¼‰</td><td>è§„èŒƒ SQL ç¼–å†™ï¼Œæå‡æ€§èƒ½</td></tr><tr><td><code>BlockAttackInnerInterceptor</code></td><td>é˜²æ­¢å…¨è¡¨æ›´æ–° / åˆ é™¤ï¼ˆæ‹¦æˆªæ—  WHERE æ¡ä»¶çš„ DMLï¼‰</td><td>é¿å…è¯¯æ“ä½œå¯¼è‡´å…¨è¡¨æ•°æ®å˜æ›´</td></tr></tbody></table><h3 id="5-1-1-æ’ä»¶é…ç½®é¡ºåº">5.1.1 æ’ä»¶é…ç½®é¡ºåº</h3><p>å¤šæ’ä»¶ç»„åˆä½¿ç”¨æ—¶ï¼Œéœ€æŒ‰ä»¥ä¸‹é¡ºåºæ·»åŠ åˆ°æ‹¦æˆªå™¨ï¼Œé¿å…åŠŸèƒ½å†²çªï¼š</p><ol><li>å¤šç§Ÿæˆ·æ’ä»¶ï¼ˆ<code>TenantLineInnerInterceptor</code>ï¼‰â†’ åŠ¨æ€è¡¨åæ’ä»¶ï¼ˆ<code>DynamicTableNameInnerInterceptor</code>ï¼‰</li><li>åˆ†é¡µæ’ä»¶ï¼ˆ<code>PaginationInnerInterceptor</code>ï¼‰â†’ ä¹è§‚é”æ’ä»¶ï¼ˆ<code>OptimisticLockerInnerInterceptor</code>ï¼‰</li><li>SQL æ€§èƒ½è§„èŒƒæ’ä»¶ï¼ˆ<code>IllegalSQLInnerInterceptor</code>ï¼‰â†’ é˜²æ­¢å…¨è¡¨æ“ä½œæ’ä»¶ï¼ˆ<code>BlockAttackInnerInterceptor</code>ï¼‰</li></ol><h2 id="5-2-æ ¸å¿ƒæ’ä»¶ï¼šåˆ†é¡µæ’ä»¶ï¼ˆPaginationInnerInterceptorï¼‰">5.2 æ ¸å¿ƒæ’ä»¶ï¼šåˆ†é¡µæ’ä»¶ï¼ˆPaginationInnerInterceptorï¼‰</h2><p>MyBatis-Plus æœ¬èº«ä¸æ”¯æŒåˆ†é¡µï¼Œéœ€é€šè¿‡åˆ†é¡µæ’ä»¶å®ç° â€”â€” æ’ä»¶ä¼šè‡ªåŠ¨æ‹¦æˆªæŸ¥è¯¢è¯·æ±‚ï¼Œåœ¨ SQL åæ‹¼æ¥åˆ†é¡µè¯­å¥ï¼ˆå¦‚ <code>LIMIT</code>ï¼‰ï¼Œå¹¶å°è£…æ€»æ¡æ•°ã€æ€»é¡µæ•°ç­‰åˆ†é¡µä¿¡æ¯ã€‚</p><h3 id="5-2-1-æ­¥éª¤-1ï¼šå¼•å…¥ä¾èµ–">5.2.1 æ­¥éª¤ 1ï¼šå¼•å…¥ä¾èµ–</h3><p>âš  æ³¨æ„ï¼ŒMyBatis-Plus äº3.5.9 ç‰ˆæœ¬èµ·ï¼Œåˆ†é¡µæ’ä»¶ä»æ ¸å¿ƒåŒ…åˆ†ç¦»ï¼Œéœ€å•ç‹¬å¼•å…¥ä¾èµ–ï¼ŒåŒºåˆ† JDK ç‰ˆæœ¬ï¼š</p><h4 id="JDK-11-ä¾èµ–">JDK 11+ ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- MPåˆ†é¡µæ’ä»¶ï¼ˆJDK 11+ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-jsqlparser<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="JDK-8-ä¾èµ–">JDK 8+ ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- MPåˆ†é¡µæ’ä»¶ï¼ˆJDK 8+ï¼‰ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-jsqlparser-4.9<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="5-2-2-æ­¥éª¤-2ï¼šé…ç½®åˆ†é¡µæ‹¦æˆªå™¨">5.2.2 æ­¥éª¤ 2ï¼šé…ç½®åˆ†é¡µæ‹¦æˆªå™¨</h3><p>åˆ›å»º MyBatis é…ç½®ç±»ï¼Œåˆå§‹åŒ–æ ¸å¿ƒæ‹¦æˆªå™¨å¹¶æ·»åŠ åˆ†é¡µæ’ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.annotation.DbType;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 1. åˆå§‹åŒ–æ ¸å¿ƒæ‹¦æˆªå™¨ï¼ˆç®¡ç†æ‰€æœ‰å†…ç½®æ’ä»¶ï¼‰</span><br>        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();<br>      <br>        <span class="hljs-comment">// 2. é…ç½®åˆ†é¡µæ’ä»¶</span><br>        <span class="hljs-type">PaginationInnerInterceptor</span> <span class="hljs-variable">pageInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>(DbType.MYSQL);<br>        pageInterceptor.setMaxLimit(<span class="hljs-number">1000L</span>); <span class="hljs-comment">// å•é¡µæœ€å¤§æ¡æ•°é™åˆ¶ï¼ˆé¿å…ä¸€æ¬¡æŸ¥è¯¢è¿‡å¤šæ•°æ®ï¼‰</span><br>        interceptor.addInnerInterceptor(pageInterceptor);<br>      <br>        <span class="hljs-comment">// å¦‚éœ€æ·»åŠ å…¶ä»–æ’ä»¶ï¼ŒæŒ‰é¡ºåºè¿½åŠ ï¼šinterceptor.addInnerInterceptor(å…¶ä»–æ’ä»¶);</span><br>        <span class="hljs-keyword">return</span> interceptor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-2-3-æ­¥éª¤-3ï¼šä½¿ç”¨åˆ†é¡µ-API">5.2.3 æ­¥éª¤ 3ï¼šä½¿ç”¨åˆ†é¡µ API</h3><p>åˆ†é¡µæ’ä»¶ä¾èµ– MP æä¾›çš„ <code>Page</code> ç±»å°è£…åˆ†é¡µå‚æ•°ï¼Œç»“åˆ <code>BaseMapper</code> æˆ– <code>IService</code> çš„åˆ†é¡µæ–¹æ³•å®ç°æŸ¥è¯¢ã€‚</p><h4 id="åŸºç¡€åˆ†é¡µç¤ºä¾‹">åŸºç¡€åˆ†é¡µç¤ºä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.OrderItem;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaginationTest</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IUserService userService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBasicPage</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 1. åˆ†é¡µå‚æ•°ï¼šç¬¬1é¡µï¼Œæ¯é¡µ2æ¡æ•°æ®</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">pageNo</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">pageSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br>        Page&lt;User&gt; page = Page.of(pageNo, pageSize);<br><br>        <span class="hljs-comment">// 2. æ’åºå‚æ•°ï¼šæŒ‰ä½™é¢é™åºï¼ˆnew OrderItem() ä¸ºæ—§å†™æ³•ï¼Œæ¨èé™æ€æ–¹æ³•ï¼‰</span><br>        page.addOrder(OrderItem.desc(<span class="hljs-string">&quot;balance&quot;</span>)); <span class="hljs-comment">// é™åº</span><br>        page.addOrder(OrderItem.asc(<span class="hljs-string">&quot;id&quot;</span>));      <span class="hljs-comment">// å†æŒ‰IDå‡åº</span><br><br>        <span class="hljs-comment">// 3. æ‰§è¡Œåˆ†é¡µæŸ¥è¯¢ï¼ˆIService.page() æ–¹æ³•ï¼‰</span><br>        Page&lt;User&gt; resultPage = userService.page(page);<br><br>        <span class="hljs-comment">// 4. è§£æåˆ†é¡µç»“æœ</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> resultPage.getTotal();       <span class="hljs-comment">// æ€»æ¡æ•°</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">pages</span> <span class="hljs-operator">=</span> resultPage.getPages();       <span class="hljs-comment">// æ€»é¡µæ•°</span><br>        List&lt;User&gt; records = resultPage.getRecords(); <span class="hljs-comment">// å½“å‰é¡µæ•°æ®</span><br><br>        System.out.println(<span class="hljs-string">&quot;total = &quot;</span> + total);<br>        System.out.println(<span class="hljs-string">&quot;pages = &quot;</span> + pages);<br>        records.forEach(System.out::println);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="åˆ†é¡µæŸ¥è¯¢ç»“æœ">åˆ†é¡µæŸ¥è¯¢ç»“æœ</h4><p><img src="https://a1.boltp.com/2025/09/19/68cd5839e384e.png" alt=""></p><h4 id="ç”Ÿæˆçš„-SQL">ç”Ÿæˆçš„ SQL</h4><p>æ’ä»¶ä¼šè‡ªåŠ¨æ‹¼æ¥åˆ†é¡µè¯­å¥ï¼ŒåŒæ—¶æŸ¥è¯¢æ€»æ¡æ•°ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- æŸ¥è¯¢å½“å‰é¡µæ•°æ®</span><br><span class="hljs-keyword">SELECT</span> id,username,balance,... <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> balance <span class="hljs-keyword">DESC</span>, id <span class="hljs-keyword">ASC</span> LIMIT ?, ?<br><span class="hljs-comment">-- æŸ¥è¯¢æ€»æ¡æ•°</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span><br></code></pre></td></tr></table></figure><h2 id="5-3-å®æˆ˜ï¼šé€šç”¨åˆ†é¡µå®ä½“è®¾è®¡ä¸ä¼˜åŒ–">5.3 å®æˆ˜ï¼šé€šç”¨åˆ†é¡µå®ä½“è®¾è®¡ä¸ä¼˜åŒ–</h2><p>å®é™…å¼€å‘ä¸­ï¼Œåˆ†é¡µæŸ¥è¯¢éœ€é€‚é…å¤šä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚åŠ¨æ€æ¡ä»¶ã€æ’åºã€VO è½¬æ¢ï¼‰ï¼Œç›´æ¥ä½¿ç”¨ <code>Page</code> ç±»ä¼šå¯¼è‡´ä»£ç é‡å¤ã€‚é€šè¿‡è®¾è®¡ <strong>é€šç”¨åˆ†é¡µå®ä½“</strong>ï¼Œå¯å°è£…åˆ†é¡µå‚æ•°è½¬æ¢ã€ç»“æœå°è£…ç­‰é€»è¾‘ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p><h3 id="5-3-1-æ ¸å¿ƒå®ä½“ç±»è®¾è®¡">5.3.1 æ ¸å¿ƒå®ä½“ç±»è®¾è®¡</h3><p>éœ€å®šä¹‰ 4 ä¸ªå®ä½“ç±»ï¼Œåˆ†åˆ«å¯¹åº” â€œåˆ†é¡µå‚æ•°æ¥æ”¶â€â€œä¸šåŠ¡æ¡ä»¶æ¥æ”¶â€â€œåˆ†é¡µç»“æœè¿”å›â€â€œè§†å›¾å¯¹è±¡â€ï¼š</p><h4 id="1-é€šç”¨åˆ†é¡µå‚æ•°ï¼ˆPageDTOï¼‰">1. é€šç”¨åˆ†é¡µå‚æ•°ï¼ˆPageDTOï¼‰</h4><p>æ¥æ”¶å‰ç«¯ä¼ å…¥çš„åˆ†é¡µä¸æ’åºå‚æ•°ï¼Œé€‚ç”¨äºæ‰€æœ‰åˆ†é¡µåœºæ™¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.metadata.OrderItem;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ApiModel(description = &quot;é€šç”¨åˆ†é¡µå‚æ•°&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageDTO</span> &#123;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;é¡µç ï¼ˆé»˜è®¤1ï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">pageNo</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æ¯é¡µæ¡æ•°ï¼ˆé»˜è®¤10ï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">pageSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æ’åºå­—æ®µï¼ˆå¦‚balanceã€update_timeï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> String sortBy;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æ˜¯å¦å‡åºï¼ˆtrue=å‡åºï¼Œfalse=é™åºï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Boolean</span> <span class="hljs-variable">isAsc</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è½¬æ¢ä¸ºMPçš„Pageå¯¹è±¡ï¼ˆå¸¦æ’åºï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;T&gt; æ³›å‹ï¼ˆPOç±»å‹ï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> Pageå¯¹è±¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="hljs-title function_">toMpPage</span><span class="hljs-params">()</span> &#123;<br>        Page&lt;T&gt; page = Page.of(pageNo, pageSize);<br>        <span class="hljs-comment">// æœ‰æ’åºå­—æ®µåˆ™æŒ‰ä¼ å…¥è§„åˆ™æ’åºï¼Œå¦åˆ™é»˜è®¤æŒ‰update_timeé™åº</span><br>        <span class="hljs-keyword">if</span> (sortBy != <span class="hljs-literal">null</span> &amp;&amp; !sortBy.trim().isEmpty()) &#123;<br>            page.addOrder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderItem</span>().setColumn(sortBy).setAsc(isAsc));<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            page.addOrder(OrderItem.desc(<span class="hljs-string">&quot;update_time&quot;</span>));<br>        &#125;<br>        <span class="hljs-keyword">return</span> page;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è‡ªå®šä¹‰é»˜è®¤æ’åºï¼ˆè¦†ç›–é»˜è®¤çš„update_timeé™åºï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> &lt;T&gt; Page&lt;T&gt; <span class="hljs-title function_">toMpPage</span><span class="hljs-params">(String defaultSortBy, Boolean defaultAsc)</span> &#123;<br>        Page&lt;T&gt; page = Page.of(pageNo, pageSize);<br>        <span class="hljs-keyword">if</span> (sortBy != <span class="hljs-literal">null</span> &amp;&amp; !sortBy.trim().isEmpty()) &#123;<br>            page.addOrder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderItem</span>().setColumn(sortBy).setAsc(isAsc));<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            page.addOrder(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderItem</span>().setColumn(defaultSortBy).setAsc(defaultAsc));<br>        &#125;<br>        <span class="hljs-keyword">return</span> page;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-ä¸šåŠ¡æŸ¥è¯¢æ¡ä»¶ï¼ˆUserQueryDTOï¼‰">2. ä¸šåŠ¡æŸ¥è¯¢æ¡ä»¶ï¼ˆUserQueryDTOï¼‰</h4><p>ç»§æ‰¿ <code>PageDTO</code>ï¼Œæ·»åŠ ç”¨æˆ·æŸ¥è¯¢çš„ä¸šåŠ¡æ¡ä»¶ï¼ˆå¦‚ç”¨æˆ·åã€çŠ¶æ€ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.User;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;<br><span class="hljs-keyword">import</span> lombok.Data;<br><span class="hljs-keyword">import</span> lombok.EqualsAndHashCode;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@EqualsAndHashCode(callSuper = true)</span><br><span class="hljs-meta">@ApiModel(description = &quot;ç”¨æˆ·åˆ†é¡µæŸ¥è¯¢æ¡ä»¶&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserQueryDTO</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PageDTO</span> &#123;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·åå…³é”®å­—ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€ï¼ˆ1=æ­£å¸¸ï¼Œ2=å†»ç»“ï¼‰&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer status;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æœ€å°ä½™é¢&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer minBalance;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æœ€å¤§ä½™é¢&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer maxBalance;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è½¬æ¢ä¸ºLambdaæŸ¥è¯¢æ¡ä»¶ï¼ˆå°è£…ä¸šåŠ¡ç­›é€‰é€»è¾‘ï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> LambdaQueryWrapper&lt;User&gt; <span class="hljs-title function_">toQueryWrapper</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>&lt;User&gt;()<br>                .like(name != <span class="hljs-literal">null</span>, User::getUsername, name)<br>                .eq(status != <span class="hljs-literal">null</span>, User::getStatus, status)<br>                .ge(minBalance != <span class="hljs-literal">null</span>, User::getBalance, minBalance)<br>                .le(maxBalance != <span class="hljs-literal">null</span>, User::getBalance, maxBalance);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="3-åˆ†é¡µç»“æœå°è£…ï¼ˆPageResultï¼‰">3. åˆ†é¡µç»“æœå°è£…ï¼ˆPageResultï¼‰</h4><p>ç»Ÿä¸€åˆ†é¡µç»“æœæ ¼å¼ï¼ŒåŒ…å«æ€»æ¡æ•°ã€æ€»é¡µæ•°ã€å½“å‰é¡µæ•°æ®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> cn.hutool.core.bean.BeanUtil;<br><span class="hljs-keyword">import</span> cn.hutool.core.collection.CollUtil;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-keyword">import</span> java.util.Collections;<br><span class="hljs-keyword">import</span> java.util.List;<br><span class="hljs-keyword">import</span> java.util.function.Function;<br><span class="hljs-keyword">import</span> java.util.stream.Collectors;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ApiModel(description = &quot;åˆ†é¡µç»“æœ&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageResult</span>&lt;T&gt; &#123;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;æ€»æ¡æ•°&quot;)</span><br>    <span class="hljs-keyword">private</span> Long total;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;æ€»é¡µæ•°&quot;)</span><br>    <span class="hljs-keyword">private</span> Long pages;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;å½“å‰é¡µæ•°æ®&quot;)</span><br>    <span class="hljs-keyword">private</span> List&lt;T&gt; list;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * POåˆ†é¡µç»“æœè½¬æ¢ä¸ºVOåˆ†é¡µç»“æœï¼ˆé»˜è®¤å±æ€§æ‹·è´ï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page MPåˆ†é¡µç»“æœï¼ˆPOï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> voClazz VOç±»å­—èŠ‚ç </span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;PO&gt; POç±»å‹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;VO&gt; VOç±»å‹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> åˆ†é¡µç»“æœï¼ˆVOï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;PO, VO&gt; PageResult&lt;VO&gt; <span class="hljs-title function_">of</span><span class="hljs-params">(Page&lt;PO&gt; page, Class&lt;VO&gt; voClazz)</span> &#123;<br>        PageResult&lt;VO&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageResult</span>&lt;&gt;();<br>        result.setTotal(page.getTotal());<br>        result.setPages(page.getPages());<br><br>        List&lt;PO&gt; records = page.getRecords();<br>        <span class="hljs-keyword">if</span> (CollUtil.isEmpty(records)) &#123;<br>            result.setList(Collections.emptyList());<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br><br>        <span class="hljs-comment">// PO â†’ VO å±æ€§æ‹·è´</span><br>        result.setList(BeanUtil.copyToList(records, voClazz));<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è‡ªå®šä¹‰POâ†’VOè½¬æ¢ï¼ˆæ”¯æŒç‰¹æ®Šé€»è¾‘ï¼Œå¦‚è„±æ•ã€å­—æ®µå¤„ç†ï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> page MPåˆ†é¡µç»“æœï¼ˆPOï¼‰</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> converter è½¬æ¢å‡½æ•°</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;PO&gt; POç±»å‹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> &lt;VO&gt; VOç±»å‹</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> åˆ†é¡µç»“æœï¼ˆVOï¼‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;PO, VO&gt; PageResult&lt;VO&gt; <span class="hljs-title function_">of</span><span class="hljs-params">(Page&lt;PO&gt; page, Function&lt;PO, VO&gt; converter)</span> &#123;<br>        PageResult&lt;VO&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageResult</span>&lt;&gt;();<br>        result.setTotal(page.getTotal());<br>        result.setPages(page.getPages());<br><br>        List&lt;PO&gt; records = page.getRecords();<br>        <span class="hljs-keyword">if</span> (CollUtil.isEmpty(records)) &#123;<br>            result.setList(Collections.emptyList());<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br><br>        <span class="hljs-comment">// è‡ªå®šä¹‰è½¬æ¢é€»è¾‘</span><br>        result.setList(records.stream().map(converter).collect(Collectors.toList()));<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="4-è§†å›¾å¯¹è±¡ï¼ˆUserVOï¼‰">4. è§†å›¾å¯¹è±¡ï¼ˆUserVOï¼‰</h4><p>è¿”å›ç»™å‰ç«¯çš„ç”¨æˆ·æ•°æ®ï¼ˆéšè—æ•æ„Ÿå­—æ®µï¼Œå¦‚å¯†ç ï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.UserInfo;<br><span class="hljs-keyword">import</span> com.itheima.mp.enums.UserStatus;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModel;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiModelProperty;<br><span class="hljs-keyword">import</span> lombok.Data;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ApiModel(description = &quot;ç”¨æˆ·è§†å›¾å¯¹è±¡&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserVO</span> &#123;<br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·ID&quot;)</span><br>    <span class="hljs-keyword">private</span> Long id;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span><br>    <span class="hljs-keyword">private</span> String username;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;è¯¦ç»†ä¿¡æ¯&quot;)</span><br>    <span class="hljs-keyword">private</span> UserInfo info;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;ç”¨æˆ·çŠ¶æ€&quot;)</span><br>    <span class="hljs-keyword">private</span> UserStatus status;<br><br>    <span class="hljs-meta">@ApiModelProperty(&quot;è´¦æˆ·ä½™é¢&quot;)</span><br>    <span class="hljs-keyword">private</span> Integer balance;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-2-åˆ†é¡µæ¥å£å¼€å‘">5.3.2 åˆ†é¡µæ¥å£å¼€å‘</h3><p>åŸºäºé€šç”¨å®ä½“å®ç° â€œç”¨æˆ·æ¡ä»¶åˆ†é¡µæŸ¥è¯¢â€ æ¥å£ï¼Œä»£ç ç®€æ´ä¸”å¯å¤ç”¨ã€‚</p><h4 id="1-Controller-å±‚">1. Controller å±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.itheima.mp.domain.dto.UserQueryDTO;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.vo.PageResult;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.vo.UserVO;<br><span class="hljs-keyword">import</span> com.itheima.mp.service.IUserService;<br><span class="hljs-keyword">import</span> io.swagger.annotations.Api;<br><span class="hljs-keyword">import</span> io.swagger.annotations.ApiOperation;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.GetMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-meta">@RequestMapping(&quot;/users&quot;)</span><br><span class="hljs-meta">@Api(tags = &quot;ç”¨æˆ·ç®¡ç†æ¥å£&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> IUserService userService;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/page&quot;)</span><br>    <span class="hljs-meta">@ApiOperation(&quot;ç”¨æˆ·æ¡ä»¶åˆ†é¡µæŸ¥è¯¢&quot;)</span><br>    <span class="hljs-keyword">public</span> PageResult&lt;UserVO&gt; <span class="hljs-title function_">queryUserByPage</span><span class="hljs-params">(UserQueryDTO queryDTO)</span> &#123;<br>        <span class="hljs-keyword">return</span> userService.queryUserByPage(queryDTO);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="2-Service-å±‚">2. Service å±‚</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.dto.UserQueryDTO;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.po.User;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.vo.PageResult;<br><span class="hljs-keyword">import</span> com.itheima.mp.domain.vo.UserVO;<br><span class="hljs-keyword">import</span> com.itheima.mp.mapper.UserMapper;<br><span class="hljs-keyword">import</span> com.itheima.mp.service.IUserService;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IUserService</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> PageResult&lt;UserVO&gt; <span class="hljs-title function_">queryUserByPage</span><span class="hljs-params">(UserQueryDTO queryDTO)</span> &#123;<br>        <span class="hljs-comment">// 1. è½¬æ¢åˆ†é¡µå‚æ•°ï¼ˆPageDTO â†’ MP Pageï¼‰</span><br>        Page&lt;User&gt; page = queryDTO.toMpPage();<br><br>        <span class="hljs-comment">// 2. è½¬æ¢æŸ¥è¯¢æ¡ä»¶ï¼ˆUserQueryDTO â†’ LambdaQueryWrapperï¼‰</span><br>        Page&lt;User&gt; resultPage = lambdaQuery()<br>                .like(queryDTO.getName() != <span class="hljs-literal">null</span>, User::getUsername, queryDTO.getName())<br>                .eq(queryDTO.getStatus() != <span class="hljs-literal">null</span>, User::getStatus, queryDTO.getStatus())<br>                .ge(queryDTO.getMinBalance() != <span class="hljs-literal">null</span>, User::getBalance, queryDTO.getMinBalance())<br>                .le(queryDTO.getMaxBalance() != <span class="hljs-literal">null</span>, User::getBalance, queryDTO.getMaxBalance())<br>                .page(page);<br><br>        <span class="hljs-comment">// 3. è½¬æ¢åˆ†é¡µç»“æœï¼ˆPO Page â†’ VO PageResultï¼‰</span><br>        <span class="hljs-comment">// æ™®é€šè½¬æ¢ï¼ˆå±æ€§æ‹·è´ï¼‰</span><br>        <span class="hljs-comment">// return PageResult.of(resultPage, UserVO.class);</span><br><br>        <span class="hljs-comment">// è‡ªå®šä¹‰è½¬æ¢ï¼ˆç¤ºä¾‹ï¼šç”¨æˆ·åè„±æ•ï¼‰</span><br>        <span class="hljs-keyword">return</span> PageResult.of(resultPage, user -&gt; &#123;<br>            <span class="hljs-type">UserVO</span> <span class="hljs-variable">vo</span> <span class="hljs-operator">=</span> BeanUtil.copyProperties(user, UserVO.class);<br>            <span class="hljs-comment">// è„±æ•é€»è¾‘ï¼šç”¨æˆ·åä¿ç•™å‰2ä½ï¼Œå…¶ä½™ç”¨*ä»£æ›¿</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> vo.getUsername();<br>            <span class="hljs-keyword">if</span> (username.length() &gt; <span class="hljs-number">2</span>) &#123;<br>                vo.setUsername(username.substring(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) + <span class="hljs-string">&quot;*&quot;</span>.repeat(username.length() - <span class="hljs-number">2</span>));<br>            &#125;<br>            <span class="hljs-keyword">return</span> vo;<br>        &#125;);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="5-3-3-æ¥å£æµ‹è¯•ä¸ç»“æœ">5.3.3 æ¥å£æµ‹è¯•ä¸ç»“æœ</h3><h4 id="è¯·æ±‚å‚æ•°ï¼ˆGETï¼‰">è¯·æ±‚å‚æ•°ï¼ˆGETï¼‰</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">/users/page?pageNo=1&amp;pageSize=2&amp;sortBy=balance&amp;isAsc=false&amp;name=o&amp;status=1<br></code></pre></td></tr></table></figure><h4 id="å“åº”ç»“æœ">å“åº”ç»“æœ</h4><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;total&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;pages&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;list&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Ja**&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">20</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;intro&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;ä½›ç³»é’å¹´&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;gender&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;male&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NORMAL&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;balance&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1600</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Ro**&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;info&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><span class="hljs-attr">&quot;age&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-number">19</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;intro&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;é’æ¶©å°‘å¥³&quot;</span><span class="hljs-punctuation">,</span><span class="hljs-attr">&quot;gender&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;female&quot;</span><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NORMAL&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;balance&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">600</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><h2 id="5-4-æ’ä»¶åŠŸèƒ½æ€»ç»“">5.4 æ’ä»¶åŠŸèƒ½æ€»ç»“</h2><ol><li><strong>åˆ†é¡µæ’ä»¶æ ¸å¿ƒä»·å€¼</strong>ï¼šè‡ªåŠ¨æ‹¼æ¥åˆ†é¡µ SQLï¼Œå°è£…åˆ†é¡µå…ƒæ•°æ®ï¼Œé¿å…æ‰‹åŠ¨ç¼–å†™ <code>LIMIT</code> å’Œ count æŸ¥è¯¢ï¼Œé€‚é…æ‰€æœ‰å•è¡¨æŸ¥è¯¢åœºæ™¯ã€‚</li><li><strong>é€šç”¨åˆ†é¡µå®ä½“è®¾è®¡</strong>ï¼šé€šè¿‡ <code>PageDTO</code> å°è£…åˆ†é¡µå‚æ•°è½¬æ¢ã€<code>PageResult</code> å°è£…ç»“æœï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæ”¯æŒè‡ªå®šä¹‰è½¬æ¢é€»è¾‘ï¼ˆå¦‚è„±æ•ã€å­—æ®µå¤„ç†ï¼‰ã€‚</li><li><strong>å¤šæ’ä»¶ç»„åˆè¦ç‚¹</strong>ï¼šä¸¥æ ¼æŒ‰ â€œç§Ÿæˆ· / åŠ¨æ€è¡¨åâ†’åˆ†é¡µ / ä¹è§‚é”â†’SQL è§„èŒƒ / é˜²å…¨è¡¨æ“ä½œâ€ çš„é¡ºåºé…ç½®ï¼Œé¿å…æ‹¦æˆªé€»è¾‘å†²çªã€‚</li></ol><p>MyBatis-Plus æ’ä»¶ä½“ç³»ä»¥ â€œè½»é‡çº§ã€å¯æ’æ‹”â€ ä¸ºè®¾è®¡ç†å¿µï¼Œæ—¢èƒ½æ»¡è¶³å¤æ‚ä¸šåŠ¡éœ€æ±‚ï¼Œåˆä¸ä¾µå…¥åŸæœ‰ä»£ç ï¼Œæ˜¯æå‡å¼€å‘æ•ˆç‡ä¸ç³»ç»Ÿå¥å£®æ€§çš„é‡è¦å·¥å…·ã€‚</p><p><img src="https://a1.boltp.com/2025/09/19/68cd6497c1133.png" alt=""></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;img src=&quot;https://a1.boltp.com/2025/09/19/68cd62dc54ff0.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1&gt;ä¸€ã€MyBatis-Plus ç®€ä»‹&lt;/h1&gt;
&lt;h2 id=&quot;1-1-ä»€ä¹ˆæ˜¯-MyBatis-Plus&quot;&gt;1.1 ä»€ä¹ˆæ˜¯</summary>
      
    
    
    
    <category term="Java" scheme="https://www.xwybq.top/categories/Java/"/>
    
    
    <category term="MyBatis-Plus" scheme="https://www.xwybq.top/tags/MyBatis-Plus/"/>
    
  </entry>
  
  <entry>
    <title>Spring Bootï¼šè‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒåŸç†</title>
    <link href="https://www.xwybq.top/posts/54f9cb4a/"/>
    <id>https://www.xwybq.top/posts/54f9cb4a/</id>
    <published>2025-08-24T06:53:08.000Z</published>
    <updated>2025-09-20T05:59:53.181Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©åˆšå­¦å®Œé»‘é©¬çš„ JavaWeb è¯¾ç¨‹ï¼Œå›æƒ³æ•´ä¸ªè¿‡ç¨‹è¿˜æŒºæœ‰æ„Ÿè§¦çš„ã€‚å‰ç«¯éƒ¨åˆ†å­¦èµ·æ¥æ„Ÿè§‰æŒºé¡ºçš„ï¼Œåˆ°äº†åç«¯ï¼Œä» Maven åˆ° SpringBoot çš„å„ç§æ¡ˆä¾‹ï¼Œåšä¸‹æ¥ä¹Ÿéƒ½è¿˜å¥½ â€”â€” æ— éæ˜¯æ­å¥½æ¶æ„ã€å¼•å…¥ä¾èµ–ã€æ ‡ä¸Šæ³¨è§£ï¼Œå†å†™ç‚¹ CRUD ä»£ç ï¼Œä¸ç®—ç‰¹åˆ«å¤æ‚ã€‚</p><p>ä½†å­¦åˆ° Spring Boot åŸç†è¿™å—æ—¶ï¼Œè¯´å®è¯ç¬¬ä¸€éæ˜¯çœŸæœ‰ç‚¹æ‡µã€‚è¿™å¤§æ¦‚æ˜¯æ•´ä¸ª JavaWeb é‡Œï¼Œæˆ‘å”¯ä¸€è§‰å¾—æŠ½è±¡çš„éƒ¨åˆ†äº†ã€‚åæ¥åˆåå¤å¬äº†ä¸¤ä¸‰éï¼Œè‡ªå·±ä¹Ÿç¿»äº†ç¿»æºç ï¼Œæ‰ç®—æœ‰äº†ç‚¹åˆæ­¥çš„ç†è§£ã€‚</p><p>å…¶å®æˆ‘ä»¬éƒ½æ„Ÿå—è¿‡ Spring Boot â€œå¼€ç®±å³ç”¨â€ çš„ç¥å¥‡ â€”â€” åªè¦å¼•å…¥ä¾èµ–ã€å†™å‡ è¡Œä»£ç ï¼Œä¸€ä¸ªèƒ½è·‘çš„åº”ç”¨å¾ˆå¿«å°±èƒ½å¯åŠ¨èµ·æ¥ã€‚è¿™èƒŒåï¼Œæ­£æ˜¯ Spring Boot ç²¾å¿ƒè®¾è®¡çš„è‡ªåŠ¨é…ç½®æœºåˆ¶åœ¨æ‚„æ‚„å‘åŠ›ã€‚ä»Šå¤©å°±ç»“åˆæœ€æ–°ç‰ˆæœ¬çš„ç‰¹ç‚¹ï¼Œè·Ÿå¤§å®¶èŠèŠæˆ‘å¯¹ Spring Boot æ ¸å¿ƒåŸç†çš„ç†è§£ã€‚</p><h2 id="ä¸€ã€ä»-â€œé…ç½®åœ°ç‹±â€-åˆ°-â€œé›¶é…ç½®â€-çš„è·¨è¶Š">ä¸€ã€ä» â€œé…ç½®åœ°ç‹±â€ åˆ° â€œé›¶é…ç½®â€ çš„è·¨è¶Š</h2><p>åœ¨ Spring Boot å‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬ç”¨ Spring æ¡†æ¶å¼€å‘æ—¶ï¼Œæ€»å¾—å†™ä¸€å¤§å † XML é…ç½®æˆ–è€… Java é…ç½®ç±»ï¼šå£°æ˜ Beanã€é…ç½®æ‰«æè·¯å¾„ã€è®¾ç½®ä¾èµ–æ³¨å…¥å…³ç³»â€¦â€¦ è¿™äº›é‡å¤çš„å·¥ä½œè¢«å¼€å‘è€…ä»¬è°ƒä¾ƒæˆ â€œé…ç½®åœ°ç‹±â€ã€‚Spring Boot çš„å‡ºç°å½»åº•æ”¹å˜äº†è¿™ç§æƒ…å†µï¼Œå®ƒçš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ **â€œçº¦å®šå¤§äºé…ç½®â€**â€”â€” é€šè¿‡ä¸€å¥—é»˜è®¤è§„åˆ™è‡ªåŠ¨å®Œæˆå¤§éƒ¨åˆ†é…ç½®ï¼Œå¼€å‘è€…åªç”¨ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å°±è¡Œã€‚</p><p>è¿™ç§è‡ªåŠ¨é…ç½®èƒ½åŠ›ä¸æ˜¯å‡­ç©ºæ¥çš„ï¼Œå®ƒåŸºäº Spring æ¡†æ¶çš„æ³¨è§£é©±åŠ¨å’Œæ¡ä»¶æ³¨è§£ç‰¹æ€§ï¼Œç»è¿‡å°è£…ä¼˜åŒ–åå½¢æˆäº†ä¸€å¥—å®Œæ•´çš„æœºåˆ¶ã€‚æœ€æ–°çš„ Spring Boot 3.5.x ç‰ˆæœ¬åœ¨æ ¸å¿ƒåŸç†ä¸å˜çš„åŸºç¡€ä¸Šï¼Œå¯¹ç»†èŠ‚åšäº†ä¸å°‘ä¼˜åŒ–ï¼Œè®©è‡ªåŠ¨é…ç½®å˜å¾—æ›´çµæ´»é«˜æ•ˆã€‚</p><h2 id="äºŒã€è‡ªåŠ¨é…ç½®çš„-â€œæ€»å¼€å…³â€ï¼š-SpringBootApplication">äºŒã€è‡ªåŠ¨é…ç½®çš„ â€œæ€»å¼€å…³â€ï¼š@SpringBootApplication</h2><p>Spring Boot åº”ç”¨çš„å¯åŠ¨ç±»ä¸Šé€šå¸¸ä¼šæ ‡ä¸ª<code>@SpringBootApplication</code>æ³¨è§£ï¼Œè¿™ä¸ªçœ‹ä¼¼ç®€å•çš„æ³¨è§£å…¶å®æ˜¯æ•´ä¸ªè‡ªåŠ¨é…ç½®æœºåˆ¶çš„èµ·ç‚¹ã€‚å®ƒæ˜¯ä¸ªç»„åˆæ³¨è§£ï¼ŒåŒ…å«ä¸‰ä¸ªå…³é”®éƒ¨åˆ†ï¼š</p><ul><li><code>@SpringBootConfiguration</code>ï¼šè¯´ç™½äº†å°±æ˜¯<code>@Configuration</code>çš„ç‰¹æ®Šå½¢å¼ï¼Œæ ‡è®°å½“å‰ç±»æ˜¯ä¸ªé…ç½®ç±»</li><li><code>@ComponentScan</code>ï¼šè´Ÿè´£æ‰«æå½“å‰åŒ…åŠå…¶å­åŒ…ä¸‹çš„ç»„ä»¶ï¼ˆåƒ<code>@Service</code>ã€<code>@Controller</code>è¿™äº›ï¼‰</li><li><code>@EnableAutoConfiguration</code>ï¼šå¼€å¯è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæ³¨è§£ï¼Œè¿™ä¸ªæˆ‘è®¤ä¸ºæ˜¯æœ€å…³é”®çš„éƒ¨åˆ†</li></ul><p>å…¶ä¸­<code>@EnableAutoConfiguration</code>æ³¨è§£é€šè¿‡<code>@Import(AutoConfigurationImportSelector.class)</code>å¯¼å…¥äº†ä¸€ä¸ªç‰¹æ®Šçš„é€‰æ‹©å™¨ï¼Œè¿™ä¸ªé€‰æ‹©å™¨ä¼šå¸®æˆ‘ä»¬å®Œæˆè‡ªåŠ¨é…ç½®ç±»çš„åŠ è½½å·¥ä½œã€‚</p><h2 id="ä¸‰ã€è‡ªåŠ¨é…ç½®ç±»çš„-â€œèŠ±åå†Œâ€ï¼šAutoConfiguration-imports">ä¸‰ã€è‡ªåŠ¨é…ç½®ç±»çš„ â€œèŠ±åå†Œâ€ï¼šAutoConfiguration.imports</h2><p>åœ¨ Spring Boot 2.7 ä¹‹å‰çš„ç‰ˆæœ¬é‡Œï¼Œè‡ªåŠ¨é…ç½®ç±»æ˜¯é€šè¿‡<code>META-INF/spring.factories</code>æ–‡ä»¶å£°æ˜çš„ã€‚ä» 2.7 ç‰ˆæœ¬å¼€å§‹ï¼Œå®˜æ–¹å¼•å…¥äº†<code>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</code>æ–‡ä»¶ä½œä¸ºæ–°çš„ â€œèŠ±åå†Œâ€ï¼Œè¿™ç§æ ¼å¼æ›´ç®€å•ï¼Œè§£æèµ·æ¥ä¹Ÿæ›´æ–¹ä¾¿ã€‚</p><p>åº”ç”¨å¯åŠ¨çš„æ—¶å€™ï¼Œ<code>AutoConfigurationImportSelector</code>ä¼šæ‰«ææ‰€æœ‰ jar åŒ…é‡Œçš„è¿™ä¸ªæ–‡ä»¶ï¼Œæ”¶é›†é‡Œé¢å£°æ˜çš„è‡ªåŠ¨é…ç½®ç±»å…¨è·¯å¾„ã€‚æ¯”å¦‚åœ¨ Spring Boot è‡ªå¸¦çš„<code>spring-boot-autoconfigure</code>åŒ…ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°è¿™æ ·çš„é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java">org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration<br><br>org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration<br><br>org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration<br><br>...<br></code></pre></td></tr></table></figure><p>è¿™äº›ç±»å°±æ˜¯ Spring Boot ä¸ºæˆ‘ä»¬å‡†å¤‡çš„ â€œé…ç½®æ¨¡æ¿â€ï¼Œæ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»éƒ½å¯¹åº”ç€æŸä¸€ç±»åŠŸèƒ½çš„è‡ªåŠ¨é…ç½®é€»è¾‘ã€‚</p><h2 id="å››ã€æ¡ä»¶æ³¨è§£ï¼šè‡ªåŠ¨é…ç½®çš„-â€œæ™ºèƒ½å¼€å…³â€">å››ã€æ¡ä»¶æ³¨è§£ï¼šè‡ªåŠ¨é…ç½®çš„ â€œæ™ºèƒ½å¼€å…³â€</h2><p>æ”¶é›†åˆ°æ‰€æœ‰è‡ªåŠ¨é…ç½®ç±»åï¼ŒSpring Boot ä¸ä¼šä¸€è‚¡è„‘éƒ½åŠ è½½ï¼Œè€Œæ˜¯é€šè¿‡<strong>æ¡ä»¶æ³¨è§£</strong>æ¥ç­›é€‰ã€‚è¿™äº›æ³¨è§£å°±åƒä¸€ä¸ªä¸ªæ™ºèƒ½å¼€å…³ï¼Œåªæœ‰æ»¡è¶³ç‰¹å®šæ¡ä»¶ï¼Œå¯¹åº”çš„è‡ªåŠ¨é…ç½®ç±»æ‰ä¼šç”Ÿæ•ˆã€‚</p><p>å¸¸ç”¨çš„æ¡ä»¶æ³¨è§£æœ‰è¿™äº›ï¼š</p><ul><li><code>@ConditionalOnClass</code>ï¼šç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šçš„ç±»æ—¶æ‰ç”Ÿæ•ˆï¼ˆæ¯”å¦‚ WebMvcAutoConfiguration éœ€è¦æœ‰ Servlet ç±»ï¼‰</li><li><code>@ConditionalOnMissingBean</code>ï¼šå®¹å™¨é‡Œæ²¡æœ‰æŒ‡å®šçš„ Bean æ—¶ç”Ÿæ•ˆï¼ˆç”¨æˆ·è‡ªå·±å®šä¹‰çš„ä¼˜å…ˆï¼‰</li><li><code>@ConditionalOnProperty</code>ï¼šé…ç½®æ–‡ä»¶é‡Œæœ‰æŒ‡å®šçš„å±æ€§æ—¶ç”Ÿæ•ˆï¼ˆæ¯”å¦‚<code>spring.datasource.enabled=true</code>ï¼‰</li><li><code>@ConditionalOnWebApplication</code>ï¼šåº”ç”¨æ˜¯ Web åº”ç”¨æ—¶æ‰ç”Ÿæ•ˆ</li></ul><p>æ‹¿æˆ‘ä»¬åš Spring Boot é¡¹ç›®æ—¶æœ€å¸¸è§çš„æ•°æ®æºè‡ªåŠ¨é…ç½®ä¸¾ä¸ªä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><br><span class="hljs-meta">@ConditionalOnClass(DataSource.class)</span>  <span class="hljs-comment">// æœ‰DataSourceç±»æ‰ç”Ÿæ•ˆ</span><br><br><span class="hljs-meta">@ConditionalOnMissingBean(DataSource.class)</span>  <span class="hljs-comment">// æ²¡æœ‰ç”¨æˆ·å®šä¹‰çš„DataSourceæ‰ç”Ÿæ•ˆ</span><br><br><span class="hljs-meta">@EnableConfigurationProperties(DataSourceProperties.class)</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAutoConfiguration</span> &#123;<br><br>    <span class="hljs-comment">// æ•°æ®æºé…ç½®é€»è¾‘...</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™ç§æœºåˆ¶ä¿è¯äº†è‡ªåŠ¨é…ç½®èƒ½ â€œæŒ‰éœ€åŠ è½½â€ï¼Œæ—¢ä¸æµªè´¹èµ„æºï¼Œåˆç»™ç”¨æˆ·è‡ªå®šä¹‰é…ç½®ç•™äº†è¶³å¤Ÿçš„ç©ºé—´ã€‚</p><h2 id="äº”ã€é…ç½®å±æ€§ç»‘å®šï¼šè®©ç”¨æˆ·é…ç½®ç”Ÿæ•ˆ">äº”ã€é…ç½®å±æ€§ç»‘å®šï¼šè®©ç”¨æˆ·é…ç½®ç”Ÿæ•ˆ</h2><p>è‡ªåŠ¨é…ç½®ä¹Ÿä¸æ˜¯ä¸€æˆä¸å˜çš„ï¼ŒSpring Boot é€šè¿‡<strong>é…ç½®å±æ€§ç»‘å®š</strong>æœºåˆ¶ï¼Œå…è®¸æˆ‘ä»¬é€šè¿‡é…ç½®æ–‡ä»¶ä¿®æ”¹é»˜è®¤è¡Œä¸ºã€‚è¿™ä¸ªè¿‡ç¨‹ä¸»è¦é ä¸¤ä¸ªæ³¨è§£å®ç°ï¼š</p><ol><li><code>@ConfigurationProperties</code>ï¼šç”¨æ¥å£°æ˜å±æ€§ç±»ï¼ŒæŒ‡å®šé…ç½®çš„å‰ç¼€</li><li><code>@EnableConfigurationProperties</code>ï¼šåœ¨è‡ªåŠ¨é…ç½®ç±»ä¸­å¯ç”¨å±æ€§ç»‘å®š</li></ol><p>æ¯”å¦‚æ•°æ®æºé…ç½®å±æ€§ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String url;<br><br>    <span class="hljs-keyword">private</span> String username;<br><br>    <span class="hljs-keyword">private</span> String password;<br><br>    <span class="hljs-comment">// getters and setters</span><br><br>&#125;<br></code></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬åœ¨<code>application.properties</code>é‡Œé…ç½®ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.datasource.url</span>=<span class="hljs-string">jdbc:mysql://localhost:3306/tlias</span><br><br><span class="hljs-attr">spring.datasource.username</span>=<span class="hljs-string">root</span><br></code></pre></td></tr></table></figure><p>è¿™äº›é…ç½®ä¼šè‡ªåŠ¨ç»‘å®šåˆ°<code>DataSourceProperties</code>å¯¹è±¡ä¸Šï¼Œè¿›è€Œå½±å“<code>DataSourceAutoConfiguration</code>çš„é…ç½®ç»“æœã€‚</p><h2 id="å…­ã€ç”¨æˆ·é…ç½®ä¼˜å…ˆï¼šè‡ªåŠ¨é…ç½®çš„-â€œé€€è®©åŸåˆ™â€">å…­ã€ç”¨æˆ·é…ç½®ä¼˜å…ˆï¼šè‡ªåŠ¨é…ç½®çš„ â€œé€€è®©åŸåˆ™â€</h2><p>Spring Boot çš„è‡ªåŠ¨é…ç½®éµå¾ª â€œç”¨æˆ·é…ç½®ä¼˜å…ˆâ€ çš„åŸåˆ™ï¼Œå½“æˆ‘ä»¬æ‰‹åŠ¨å®šä¹‰äº†æŸä¸ª Bean æ—¶ï¼Œè‡ªåŠ¨é…ç½®å°±ä¼š â€œé€€è®©â€ã€‚è¿™å¤šäºäº†<code>@ConditionalOnMissingBean</code>æ³¨è§£ â€”â€” å½“å®¹å™¨é‡Œå·²ç»æœ‰äº†ç”¨æˆ·å®šä¹‰çš„ Bean æ—¶ï¼Œè‡ªåŠ¨é…ç½®ç±»ä¸­å¯¹åº”çš„ Bean å®šä¹‰å°±ä¸ä¼šç”Ÿæ•ˆäº†ã€‚</p><p>æ¯”å¦‚æˆ‘ä»¬è‡ªå·±å®šä¹‰ä¸€ä¸ªæ•°æ®æº Beanï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br><br>    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">myDataSource</span><span class="hljs-params">()</span> &#123;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™<code>DataSourceAutoConfiguration</code>é‡Œçš„<code>@ConditionalOnMissingBean</code>æ¡ä»¶å°±ä¸æ»¡è¶³äº†ï¼Œè‡ªåŠ¨é…ç½®çš„æ•°æ®æºä¸ä¼šè¢«æ³¨å†Œï¼Œå®¹å™¨é‡Œåªä¼šç”¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„<code>myDataSource</code>ã€‚è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†è‡ªåŠ¨é…ç½®çš„ä¾¿æ·ï¼Œåˆä¿ç•™äº†æ‰‹åŠ¨é…ç½®çš„çµæ´»ã€‚</p><h2 id="ä¸ƒã€æ€»ç»“ï¼šè‡ªåŠ¨é…ç½®çš„å®Œæ•´æµç¨‹">ä¸ƒã€æ€»ç»“ï¼šè‡ªåŠ¨é…ç½®çš„å®Œæ•´æµç¨‹</h2><p>æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹ Spring Boot è‡ªåŠ¨é…ç½®çš„å®Œæ•´æµç¨‹ï¼š</p><ol><li>å¯åŠ¨ç±»é€šè¿‡<code>@SpringBootApplication</code>è§¦å‘<code>@EnableAutoConfiguration</code></li><li><code>AutoConfigurationImportSelector</code>æ‰«ææ‰€æœ‰ jar åŒ…é‡Œçš„<code>AutoConfiguration.imports</code>æ–‡ä»¶</li><li>æ”¶é›†å¹¶è¿‡æ»¤å‡ºç¬¦åˆæ¡ä»¶çš„è‡ªåŠ¨é…ç½®ç±»ï¼ˆå»é‡ã€æ’é™¤ã€æ¡ä»¶åŒ¹é…ï¼‰</li><li>æ»¡è¶³æ¡ä»¶çš„è‡ªåŠ¨é…ç½®ç±»è¢«è§£æï¼Œé€šè¿‡<code>@Bean</code>æ³¨å†Œéœ€è¦çš„ç»„ä»¶</li><li>ç”¨æˆ·é€šè¿‡é…ç½®æ–‡ä»¶æˆ–è‡ªå®šä¹‰ Bean è¦†ç›–é»˜è®¤é…ç½®</li></ol><p>æ­£æ˜¯è¿™å¥—ç²¾å¯†çš„æœºåˆ¶ï¼Œè®© Spring Boot å®ç°äº† â€œå¼€ç®±å³ç”¨â€ çš„ç‰¹æ€§ã€‚ç†è§£äº†è¿™äº›åŸç†ï¼Œæˆ‘ä»¬ä¸ä»…èƒ½æ›´å¥½åœ°ä½¿ç”¨ Spring Bootï¼Œè¿˜èƒ½åœ¨éœ€è¦çš„æ—¶å€™è‡ªå®šä¹‰è‡ªåŠ¨é…ç½®ï¼Œç”šè‡³å¼€å‘è‡ªå·±çš„ Starter ç»„ä»¶ã€‚</p><p>Spring Boot çš„é­…åŠ›å°±åœ¨äºå®ƒéšè—äº†å¤æ‚çš„é…ç½®ç»†èŠ‚ï¼Œå´åœ¨æˆ‘ä»¬éœ€è¦çš„æ—¶å€™ä¿ç•™äº†è¶³å¤Ÿçš„æ‰©å±•æ€§ã€‚è¿™ç§ â€œå¤§é“è‡³ç®€â€ çš„è®¾è®¡å“²å­¦ï¼Œå€¼å¾—æ¯ä¸ªå¼€å‘è€…å¥½å¥½ä½“ä¼šã€‚</p><blockquote><p>ï¼ˆæ³¨ï¼šæ–‡æ¡£éƒ¨åˆ†å†…å®¹ç”± AI ç”Ÿæˆï¼Œå› ä¸ºéƒ½è®©æˆ‘è‡ªå·±å†™å®åœ¨æ˜¯å¤ªè¦è€å‘½äº†QAQï¼‰</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä»Šå¤©åˆšå­¦å®Œé»‘é©¬çš„ JavaWeb è¯¾ç¨‹ï¼Œå›æƒ³æ•´ä¸ªè¿‡ç¨‹è¿˜æŒºæœ‰æ„Ÿè§¦çš„ã€‚å‰ç«¯éƒ¨åˆ†å­¦èµ·æ¥æ„Ÿè§‰æŒºé¡ºçš„ï¼Œåˆ°äº†åç«¯ï¼Œä» Maven åˆ° SpringBoot çš„å„ç§æ¡ˆä¾‹ï¼Œåšä¸‹æ¥ä¹Ÿéƒ½è¿˜å¥½ â€”â€” æ— éæ˜¯æ­å¥½æ¶æ„ã€å¼•å…¥ä¾èµ–ã€æ ‡ä¸Šæ³¨è§£ï¼Œå†å†™ç‚¹ CRUD ä»£ç ï¼Œä¸ç®—ç‰¹åˆ«å¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å­¦åˆ°</summary>
      
    
    
    
    <category term="Java" scheme="https://www.xwybq.top/categories/Java/"/>
    
    
    <category term="Spring Boot" scheme="https://www.xwybq.top/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>è§£å†³Hexoç›¸å†Œæ»šåŠ¨æ—¶å›¾ç‰‡æ¶ˆå¤±çš„é—®é¢˜</title>
    <link href="https://www.xwybq.top/posts/48bcc160/"/>
    <id>https://www.xwybq.top/posts/48bcc160/</id>
    <published>2025-08-22T07:06:05.000Z</published>
    <updated>2025-09-20T06:03:33.620Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Hexo æ­å»ºå•æœºæ¸¸æˆç›¸å†Œé¡µé¢æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šæµè§ˆ â€œé»‘ç¥è¯æ‚Ÿç©ºâ€ åˆ†ç±»ä¸‹çš„å›¾ç‰‡æ—¶ï¼Œå‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œä¸Šæ–¹çš„å›¾ç‰‡ä¼šçªç„¶æ¶ˆå¤±ï¼›å‘ä¸Šæ»šåŠ¨æ—¶ï¼Œæ¶ˆå¤±çš„å›¾ç‰‡åˆä¼šé‡æ–°å‡ºç°ã€‚ç»è¿‡ä¸€ç•ªæ’æŸ¥ï¼Œç»ˆäºæ‰¾åˆ°åŸå› å¹¶è§£å†³ï¼Œç‰¹æ­¤è®°å½•æ•´ä¸ªè¿‡ç¨‹ã€‚</p><h2 id="ä¸€ã€é—®é¢˜ç°è±¡">ä¸€ã€é—®é¢˜ç°è±¡</h2><h3 id="å…·ä½“è¡¨ç°">å…·ä½“è¡¨ç°</h3><ul><li>é¡µé¢ç»“æ„ï¼šä½¿ç”¨ Hexo çš„<code>&#123;% gallery %&#125;</code>æ ‡ç­¾å±•ç¤ºå›¾ç‰‡ï¼ŒæŒ‰æ¸¸æˆåˆ†ç±»ï¼ˆå¥¥æ—¥ä¸è¤ç«æ„å¿—ã€é»‘ç¥è¯æ‚Ÿç©ºã€æˆ˜ç¥ï¼‰åˆ†ç»„ã€‚å¦‚ä¸‹å›¾ï¼š<img src="https://a1.boltp.com/2025/08/22/68a818eb2fe02.png" alt=""></li><li>å¼‚å¸¸åœºæ™¯ï¼šåœ¨ â€œé»‘ç¥è¯æ‚Ÿç©ºâ€ åˆ†ç±»ä¸‹ï¼Œå½“å›¾ç‰‡æ•°é‡è¶…è¿‡10å¼ æ—¶ï¼Œæ»šåŠ¨é¡µé¢åˆ°ç¬¬ 10 å¼ ä¹‹åï¼Œä¸Šæ–¹çš„å›¾ç‰‡ä¼šçªç„¶æ¶ˆå¤±ï¼›å†å‘ä¸Šæ»šåŠ¨ä¸€ä¸‹ï¼Œæ¶ˆå¤±çš„å›¾ç‰‡åˆä¼šé‡æ–°åŠ è½½å‡ºç°ã€‚<br><img src="https://a1.boltp.com/2025/08/22/68a81c15670c8.png" alt=""></li><li>å…¶ä»–åˆ†ç±»ï¼šâ€œå¥¥æ—¥ä¸è¤ç«æ„å¿—â€ï¼ˆ15 å¼ ï¼‰å’Œ â€œæˆ˜ç¥â€ï¼ˆ10 å¼ ï¼‰ä¸­ï¼Œâ€œæˆ˜ç¥â€ åˆ†ç±»å› å›¾ç‰‡æ•°é‡åˆšå¥½ä¸º 10 å¼ ï¼Œæœªå‡ºç°å¼‚å¸¸ï¼›â€œå¥¥æ—¥ä¸è¤ç«æ„å¿—â€ å¶å°”ä¹Ÿä¼šå‡ºç°ï¼Œä½†å› æ»šåŠ¨é€Ÿåº¦è¾ƒæ…¢ï¼Œç°è±¡ä¸æ˜æ˜¾ã€‚</li></ul><h2 id="äºŒã€é—®é¢˜åˆ†æ">äºŒã€é—®é¢˜åˆ†æ</h2><p>é’ˆå¯¹ â€œæ»šåŠ¨æ—¶å›¾ç‰‡æ¶ˆå¤±â€ çš„ç°è±¡ï¼Œåˆæ­¥æ¨æµ‹ä¸<strong>å›¾ç‰‡åŠ è½½æœºåˆ¶</strong>æˆ–<strong>ç»„ä»¶é€»è¾‘</strong>æœ‰å…³ï¼Œé€ä¸€æ’æŸ¥å¦‚ä¸‹ï¼š</p><h3 id="1-å›¾ç‰‡æ‡’åŠ è½½ï¼ˆLazy-Loadingï¼‰çš„å½±å“">1. å›¾ç‰‡æ‡’åŠ è½½ï¼ˆLazy Loadingï¼‰çš„å½±å“</h3><p>ç°ä»£åšå®¢é€šå¸¸ä¼šå¯ç”¨å›¾ç‰‡æ‡’åŠ è½½ï¼ˆä»…åŠ è½½å¯è§†åŒºåŸŸçš„å›¾ç‰‡ï¼‰ï¼Œä½†æ­£å¸¸çš„æ‡’åŠ è½½åªä¼š â€œå»¶è¿ŸåŠ è½½â€ï¼Œä¸ä¼š â€œå¸è½½å·²åŠ è½½çš„å›¾ç‰‡â€ã€‚</p><ul><li>æ’æŸ¥ï¼šé€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹å›¾ç‰‡å…ƒç´ ï¼Œå‘ç°å›¾ç‰‡ä½¿ç”¨<code>data-lazy-src</code>å±æ€§å®ç°æ‡’åŠ è½½ï¼Œä½†æœªæ‰¾åˆ° â€œå¸è½½ä¸å¯è§å›¾ç‰‡â€ çš„é…ç½®ã€‚</li><li>ç»“è®ºï¼šæ‡’åŠ è½½æ˜¯ä¼˜åŒ–æ‰‹æ®µï¼Œå¹¶éç›´æ¥åŸå› ã€‚</li></ul><h3 id="2-CSS-æ ·å¼å¯¼è‡´çš„-â€œè§†è§‰éšè—â€">2. CSS æ ·å¼å¯¼è‡´çš„ â€œè§†è§‰éšè—â€</h3><p>è‹¥çˆ¶å®¹å™¨æˆ–å›¾ç‰‡æœ¬èº«çš„ CSS æ ·å¼å­˜åœ¨ç‰¹æ®Šè®¾ç½®ï¼Œå¯èƒ½å¯¼è‡´æ»šåŠ¨æ—¶å›¾ç‰‡è¢«æˆªæ–­æˆ–éšè—ï¼š</p><ul><li>æ’æŸ¥ï¼šæ£€æŸ¥ç›¸å†Œå®¹å™¨çš„æ ·å¼ï¼Œå‘ç°<code>gallery-container</code>ä½¿ç”¨é»˜è®¤å¸ƒå±€ï¼Œæ— <code>overflow: hidden</code>æˆ–<code>position: fixed</code>ç­‰å¼‚å¸¸å±æ€§ï¼›å›¾ç‰‡å…ƒç´ ä¹Ÿæ— <code>display: none</code>æˆ–<code>opacity: 0</code>çš„åŠ¨æ€æ ·å¼ã€‚</li><li>ç»“è®ºï¼šCSS æ ·å¼æ— å¼‚å¸¸ã€‚</li></ul><h3 id="3-ç›¸å†Œç»„ä»¶çš„-â€œæŒ‰éœ€åŠ è½½â€-é€»è¾‘">3. ç›¸å†Œç»„ä»¶çš„ â€œæŒ‰éœ€åŠ è½½â€ é€»è¾‘</h3><p>æ ¸å¿ƒæ€€ç–‘ç‚¹ï¼šç›¸å†Œç»„ä»¶å¯èƒ½å­˜åœ¨ â€œåŠ è½½æ•°é‡é™åˆ¶â€ï¼Œè¶…è¿‡é™åˆ¶åè‡ªåŠ¨å¸è½½ä¸Šæ–¹å›¾ç‰‡ï¼ˆä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼‰ã€‚</p><ul><li><p>æ’æŸ¥ï¼šæŸ¥çœ‹ Hexo ç”Ÿæˆçš„ HTML ä»£ç ï¼Œè¿™é‡Œæˆ‘çš„è·¯å¾„æ˜¯â€œæ ¹ç›®å½•/public/gallery/game/index.htmlâ€ï¼Œå‘ç°ç›¸å†Œå®¹å™¨<code>gallery-container</code>æœ‰ä¸¤ä¸ªå…³é”®å±æ€§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gallery-container&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">data-type</span>=<span class="hljs-string">&quot;data&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">data-limit</span>=<span class="hljs-string">&quot;10&quot;</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">é™åˆ¶æœ€å¤šåŠ è½½10å¼ å›¾ç‰‡</span> <span class="hljs-attr">--</span>&gt;</span><br>     data-first=&quot;10&quot;&gt; <span class="hljs-comment">&lt;!-- åˆå§‹åŠ è½½10å¼ å›¾ç‰‡ --&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>å¯¹åº”ç°è±¡ï¼šâ€œé»‘ç¥è¯æ‚Ÿç©ºâ€ æœ‰ 14 å¼ å›¾ç‰‡ï¼Œè¶…è¿‡<code>data-limit=&quot;10&quot;</code>ï¼Œå› æ­¤æ»šåŠ¨æ—¶ä¼šå¸è½½è¶…å‡ºèŒƒå›´çš„å›¾ç‰‡ï¼›â€œæˆ˜ç¥â€ åˆšå¥½ 10 å¼ ï¼Œæœªè§¦å‘å¸è½½é€»è¾‘ã€‚</p></li><li><p>ç»“è®ºï¼šè¿™æ˜¯å¯¼è‡´å›¾ç‰‡æ¶ˆå¤±çš„<strong>æ ¸å¿ƒåŸå› </strong>ã€‚</p></li></ul><h2 id="ä¸‰ã€è§£å†³è¿‡ç¨‹">ä¸‰ã€è§£å†³è¿‡ç¨‹</h2><h3 id="1-å°è¯•ä¿®æ”¹ç»„ä»¶å‚æ•°">1. å°è¯•ä¿®æ”¹ç»„ä»¶å‚æ•°</h3><p>ç›¸å†Œç»„ä»¶çš„<code>data-limit</code>å’Œ<code>data-first</code>å±æ€§æ§åˆ¶åŠ è½½æ•°é‡ï¼Œå› æ­¤æˆ‘å°è¯•åœ¨ Markdown ä¸­ä¿®æ”¹è¿™ä¸¤ä¸ªå‚æ•°ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&lt;!-- åŸæ ‡ç­¾ï¼šé»˜è®¤å‚æ•° --&gt;<br>&#123;% gallery %&#125;<br>&lt;!-- å›¾ç‰‡åˆ—è¡¨ --&gt;<br>&#123;% endgallery %&#125;<br><br>&lt;!-- ä¿®æ”¹åï¼šå¢åŠ åŠ è½½é™åˆ¶ --&gt;<br>&#123;% gallery data-limit=20 data-first=14 %&#125;  &lt;!-- é»‘ç¥è¯æ‚Ÿç©ºæœ‰14å¼ å›¾ --&gt;<br>&lt;!-- å›¾ç‰‡åˆ—è¡¨ --&gt;<br>&#123;% endgallery %&#125;<br></code></pre></td></tr></table></figure><h3 id="2-å‘ç°å‚æ•°æœªç”Ÿæ•ˆçš„æ–°é—®é¢˜">2. å‘ç°å‚æ•°æœªç”Ÿæ•ˆçš„æ–°é—®é¢˜</h3><p>é‡æ–°ç”Ÿæˆé¡µé¢åï¼Œå‘ç° HTML ä¸­å‚æ•°æœªç”Ÿæ•ˆï¼Œåè€Œè¢«é”™è¯¯åœ°è§£æåˆ°<code>data-button</code>å±æ€§ä¸­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- é”™è¯¯çš„ç”Ÿæˆç»“æœ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gallery-container&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">data-type</span>=<span class="hljs-string">&quot;data&quot;</span> </span><br><span class="hljs-tag">     <span class="hljs-attr">data-button</span>=<span class="hljs-string">&quot;data-limit=20 data-first=14&quot;</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å‚æ•°è¢«é”™è¯¯èµ‹å€¼</span> <span class="hljs-attr">--</span>&gt;</span><br>     data-limit=&quot;10&quot;  <span class="hljs-comment">&lt;!-- ä»ä¸ºé»˜è®¤å€¼10 --&gt;</span><br>     data-first=&quot;10&quot;&gt;<br></code></pre></td></tr></table></figure><h3 id="3-æ­£ç¡®çš„å‚æ•°è®¾ç½®æ–¹å¼">3. æ­£ç¡®çš„å‚æ•°è®¾ç½®æ–¹å¼</h3><p>æˆ‘ä»”ç»†æŸ¥é˜…äº†ä¸€ä¸‹æ–‡æ¡£ï¼Œå‘ç°<code>&#123;% gallery %&#125;</code> æ ‡ç­¾å…¶å®æ”¯æŒä¸‰ä¸ªå‚æ•°ï¼Œä¸“é—¨ç”¨æ¥æ§åˆ¶å›¾ç‰‡åŠ è½½å’Œæ˜¾ç¤ºçš„ï¼Œå…·ä½“è¯´æ˜å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å‚æ•°</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>lazyload</td><td>ã€å¯é€‰ã€‘ç‚¹å‡»æŒ‰é’®åŠ è½½æ›´å¤šå›¾ç‰‡ï¼Œå¡«å†™ true/falseã€‚é»˜è®¤ä¸º<code>false</code>ã€‚</td></tr><tr><td>rowHeight</td><td>ã€å¯é€‰ã€‘å›¾ç‰‡æ˜¾ç¤ºçš„é«˜åº¦ï¼Œå¦‚æœéœ€è¦ä¸€è¡Œæ˜¾ç¤ºæ›´å¤šçš„å›¾ç‰‡ï¼Œå¯è®¾ç½®æ›´å°çš„æ•°å­—ã€‚é»˜è®¤ä¸º<code>220</code>ã€‚</td></tr><tr><td>limit</td><td>ã€å¯é€‰ã€‘æ¯æ¬¡åŠ è½½å¤šå°‘å¼ ç…§ç‰‡ã€‚é»˜è®¤ä¸º<code>10</code>ã€‚</td></tr></tbody></table><p>è¿™é‡Œæœ‰ä¸ªå¯¹åº”å…³ç³»å¾—è®°ä¸€ä¸‹ï¼š<code>rowHeight</code> å¯¹åº”ç”Ÿæˆ HTML é‡Œçš„ <code>data-limit</code>ï¼Œ<code>limit</code> å¯¹åº” <code>data-first</code>ã€‚å‚æ•°çš„æ ¼å¼å¾—æŒ‰é¡ºåºå†™ï¼Œç”¨é€—å·éš”å¼€ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&#123;% gallery [lazyload],[rowHeight],[limit] %&#125;<br>&lt;!-- è¿™é‡Œæ”¾ markdown å›¾ç‰‡æ ¼å¼ --&gt;<br>&#123;% endgallery %&#125;<br></code></pre></td></tr></table></figure><p>çŸ¥é“äº†è¿™ä¸ªï¼Œæˆ‘å°±ç›´æ¥å» â€œæ ¹ç›®å½• /source/gallery/game/index.mdâ€ é‡Œæ”¹äº†ï¼Œç»™æ¯ä¸ªç›¸å†Œçš„ <code>&#123;% gallery %&#125;</code> éƒ½åŠ ä¸Š <code>false,220,20</code>ï¼š</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown">&#123;% gallery false,220,20 %&#125;  &lt;!-- æ„æ€æ˜¯ï¼šä¸å¯ç”¨ç‚¹å‡»åŠ è½½ï¼Œå›¾ç‰‡é«˜åº¦220ï¼Œæ¯æ¬¡åŠ è½½20å¼ ï¼ˆæ¯”å®é™…çš„14å¼ å¤šï¼‰ --&gt;<br>![<span class="hljs-string">é»‘ç¥è¯æ‚Ÿç©º1</span>](<span class="hljs-link">https://a1.boltp.com/2025/08/22/68a80e202d1b2.jpg</span>)<br>![<span class="hljs-string">é»‘ç¥è¯æ‚Ÿç©º2</span>](<span class="hljs-link">https://a1.boltp.com/2025/08/22/68a80e2040a50.jpeg</span>)<br>&lt;!-- å…¶ä½™12å¼ å›¾ç‰‡ --&gt;<br>&#123;% endgallery %&#125;<br></code></pre></td></tr></table></figure><p>æ”¹å®Œæ‰§è¡Œç”Ÿæˆå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean &amp;&amp; hexo generate<br></code></pre></td></tr></table></figure><p>å†çœ‹ç”Ÿæˆçš„ HTMLï¼Œå‚æ•°ç»ˆäºå¯¹äº†ï¼Œ<code>data-limit</code> å’Œ <code>data-first</code> éƒ½æ˜¯æˆ‘è®¾ç½®çš„æ•°å€¼ï¼š</p><p><img src="https://a1.boltp.com/2025/08/22/68a8287075b49.png" alt=""></p><h3 id="4-éªŒè¯ç»“æœ">4. éªŒè¯ç»“æœ</h3><p>å¯åŠ¨æœ¬åœ°æœåŠ¡çœ‹çœ‹æ•ˆæœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo server<br></code></pre></td></tr></table></figure><p><img src="" alt=""></p><p>è®¿é—® <code>http://localhost:4000</code> ç¿»äº†ç¿»é¡µé¢ï¼Œæ‰€æœ‰å›¾ç‰‡éƒ½ç¨³ç¨³å½“å½“çš„ï¼Œæ€ä¹ˆæ»šåŠ¨éƒ½ä¸ä¼šæ¶ˆå¤±äº†ï½</p><p><img src="https://a1.boltp.com/2025/08/22/68a81fe2bb794.png" alt=""></p><h2 id="å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹">å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h2><ol><li><strong>å‚æ•°è®¾ç½®åŸåˆ™</strong>ï¼š<br>å¯¹äº<code>data-limit</code>å’Œ<code>data-first</code>ï¼Œå»ºè®®è®¾ç½®ä¸º â€œå¤§äºå®é™…å›¾ç‰‡æ•°é‡çš„å€¼â€ï¼Œé¿å…ç»„ä»¶å›  â€œè¶…å‡ºé™åˆ¶â€ è§¦å‘å¸è½½é€»è¾‘ã€‚</li><li><strong>æ’æŸ¥é—®é¢˜çš„æ€è·¯</strong>ï¼š<br>é‡åˆ°é¡µé¢å…ƒç´ å¼‚å¸¸æ—¶ï¼Œä¼˜å…ˆé€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŸ¥çœ‹ç”Ÿæˆçš„ HTML ä»£ç ï¼Œå¯¹æ¯” â€œæ­£å¸¸â€ ä¸ â€œå¼‚å¸¸â€ åœºæ™¯çš„å·®å¼‚ï¼ˆå¦‚æœ¬æ–‡ä¸­<code>data-limit</code>çš„é»˜è®¤å€¼ 10 ä¸å›¾ç‰‡æ•°é‡çš„å…³ç³»ï¼‰ã€‚</li><li><strong>æ’ä»¶æ–‡æ¡£çš„é‡è¦æ€§</strong>ï¼š<br>æœ¬æ¬¡é—®é¢˜çš„æ ¸å¿ƒæ˜¯å¯¹<code>&#123;% gallery %&#125;</code>æ ‡ç­¾å‚æ•°ä¸ç†Ÿæ‚‰ï¼Œåç»­ä½¿ç”¨æ–°æ’ä»¶æ—¶ï¼Œåº”å…ˆæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆå¦‚<code>hexo-butterfly-tag-plugins-plus</code>çš„å‚æ•°è¯´æ˜ï¼‰ã€‚</li><li><strong>å›¾ç‰‡é“¾æ¥ç¨³å®šæ€§</strong>ï¼š<br>è‹¥ä½¿ç”¨ç¬¬ä¸‰æ–¹å›¾åºŠï¼ˆå¦‚æœ¬æ¬¡çš„<code>a1.boltp.com</code>ï¼‰ï¼Œéœ€ç¡®ä¿é“¾æ¥é•¿æœŸæœ‰æ•ˆï¼Œé¿å…å› é“¾æ¥å¤±æ•ˆå¯¼è‡´ â€œå›¾ç‰‡åŠ è½½å¤±è´¥â€ çš„æ¬¡ç”Ÿé—®é¢˜ã€‚</li></ol><p>é€šè¿‡è¿™æ¬¡æ’æŸ¥ï¼Œä¸ä»…è§£å†³äº†å›¾ç‰‡æ¶ˆå¤±çš„é—®é¢˜ï¼Œä¹ŸåŠ æ·±äº†å¯¹ Hexo ç»„ä»¶æ¸²æŸ“é€»è¾‘çš„ç†è§£ã€‚å¸Œæœ›è¿™ä»½è®°å½•èƒ½å¸®åŠ©é‡åˆ°ç±»ä¼¼é—®é¢˜çš„æœ‹å‹å°‘èµ°å¼¯è·¯å“ˆï½</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ä½¿ç”¨ Hexo æ­å»ºå•æœºæ¸¸æˆç›¸å†Œé¡µé¢æ—¶ï¼Œé‡åˆ°äº†ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼šæµè§ˆ â€œé»‘ç¥è¯æ‚Ÿç©ºâ€ åˆ†ç±»ä¸‹çš„å›¾ç‰‡æ—¶ï¼Œå‘ä¸‹æ»šåŠ¨é¡µé¢ï¼Œä¸Šæ–¹çš„å›¾ç‰‡ä¼šçªç„¶æ¶ˆå¤±ï¼›å‘ä¸Šæ»šåŠ¨æ—¶ï¼Œæ¶ˆå¤±çš„å›¾ç‰‡åˆä¼šé‡æ–°å‡ºç°ã€‚ç»è¿‡ä¸€ç•ªæ’æŸ¥ï¼Œç»ˆäºæ‰¾åˆ°åŸå› å¹¶è§£å†³ï¼Œç‰¹æ­¤è®°å½•æ•´ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸€ã€é—®é¢˜ç°è±¡&quot;&gt;ä¸€ã€é—®</summary>
      
    
    
    
    <category term="Hexo" scheme="https://www.xwybq.top/categories/Hexo/"/>
    
    
    <category term="bug" scheme="https://www.xwybq.top/tags/bug/"/>
    
    <category term="html" scheme="https://www.xwybq.top/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>è°·æ­Œè´¦å·æ³¨å†Œæ•™ç¨‹</title>
    <link href="https://www.xwybq.top/posts/a3c9f8a9/"/>
    <id>https://www.xwybq.top/posts/a3c9f8a9/</id>
    <published>2025-08-19T16:00:00.000Z</published>
    <updated>2025-09-20T06:05:19.587Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‡†å¤‡å·¥ä½œ">å‡†å¤‡å·¥ä½œ</h2><ul><li>ç¨³å®šçš„ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ</li><li>å¯æ¥æ”¶éªŒè¯ç çš„æ‰‹æœºå·ï¼ˆå›½å†… +86 äº¦å¯ï¼‰</li></ul><h2 id="æ³¨å†Œæ­¥éª¤">æ³¨å†Œæ­¥éª¤</h2><ol><li>æ‰“å¼€ <a href="https://accounts.google.com/signup">Google è´¦å·æ³¨å†Œé¡µé¢</a>ã€‚</li><li>ä¾æ¬¡å¡«å†™å§“åã€ç”¨æˆ·åã€å¯†ç å¹¶ç‚¹å‡»ã€Œä¸‹ä¸€æ­¥ã€ã€‚</li><li>è¾“å…¥æ‰‹æœºå· â†’ æ¥æ”¶å¹¶å¡«å†™éªŒè¯ç  â†’ ç»§ç»­ã€‚</li><li>å¡«å†™å‡ºç”Ÿæ—¥æœŸä¸æ€§åˆ« â†’ ä¸‹ä¸€æ­¥ã€‚</li><li>é˜…è¯»éšç§æ¡æ¬¾ â†’ ç‚¹å‡»ã€Œæˆ‘åŒæ„ã€ã€‚</li><li>å®Œæˆåè‡ªåŠ¨è·³è½¬è‡³ Google é¦–é¡µï¼Œå³æ³¨å†ŒæˆåŠŸã€‚</li></ol><h2 id="å¸¸è§é—®é¢˜">å¸¸è§é—®é¢˜</h2><ul><li><strong>æ”¶ä¸åˆ°éªŒè¯ç ï¼Ÿ</strong><br>æ›´æ¢æµè§ˆå™¨/è®¾å¤‡ï¼Œæˆ–å°è¯•è¯­éŸ³ç”µè¯éªŒè¯ã€‚</li><li><strong>æç¤ºâ€œæ­¤å·ç å·²ç”¨è¿‡å¤ªå¤šæ¬¡â€ï¼Ÿ</strong><br>æ›´æ¢å·ç ï¼Œæˆ–ç­‰å¾… 24 h åå†è¯•ã€‚</li></ul><p>è‡³æ­¤ï¼Œè°·æ­Œè´¦å·æ³¨å†Œå®Œæ¯•ï¼Œå¯ç”¨äº Gmailã€YouTubeã€Google Drive ç­‰æœåŠ¡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;å‡†å¤‡å·¥ä½œ&quot;&gt;å‡†å¤‡å·¥ä½œ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç¨³å®šçš„ç§‘å­¦ä¸Šç½‘ç¯å¢ƒ&lt;/li&gt;
&lt;li&gt;å¯æ¥æ”¶éªŒè¯ç çš„æ‰‹æœºå·ï¼ˆå›½å†… +86 äº¦å¯ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æ³¨å†Œæ­¥éª¤&quot;&gt;æ³¨å†Œæ­¥éª¤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ‰“å¼€ &lt;a href=&quot;https://ac</summary>
      
    
    
    
    <category term="é…ç½®" scheme="https://www.xwybq.top/categories/%E9%85%8D%E7%BD%AE/"/>
    
    
    <category term="é…ç½®" scheme="https://www.xwybq.top/tags/%E9%85%8D%E7%BD%AE/"/>
    
    <category term="Google" scheme="https://www.xwybq.top/tags/Google/"/>
    
  </entry>
  
  <entry>
    <title>2022å¹´ä¸Šæµ·å¸‚å¤§å­¦ç”Ÿç¨‹åºè®¾è®¡ç«èµ›</title>
    <link href="https://www.xwybq.top/posts/99f768c5/"/>
    <id>https://www.xwybq.top/posts/99f768c5/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:07:29.176Z</updated>
    
    <content type="html"><![CDATA[<h2 id="N-Nine-Is-Greater-Than-Ten-ç­¾åˆ°ï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/N">N.Nine Is Greater Than Ten</a>(ç­¾åˆ°ï¼‰</strong></h2><p><strong>ç›´æ¥æ¯”è¾ƒå­—å…¸åºã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    string a, b;<br>    cin &gt;&gt; a &gt;&gt; b;<br>    <span class="hljs-keyword">if</span> (a &gt; b)<br>    &#123;<br>        cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;&gt;&quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a &lt; b)<br>    &#123;<br>        cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;&lt;&quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot;=&quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="G-Gua-ç­¾åˆ°"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/G">G.Gua!</a>(ç­¾åˆ°)</strong></h2><p><strong>ç»†èŠ‚æ¯”è¾ƒå¤šçš„ç­¾åˆ°ï¼Œä¸»è¦æ˜¯0çš„é—®é¢˜ã€‚è‹¥R = 0ï¼Œé‚£ä¹ˆä¸€æªéƒ½å¼€ä¸å‡ºï¼Œå¦åˆ™èƒ½å¼€å‡º âŒŠRxS/60âŒ‹ + 1æªã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-type">int</span> b, r, d, s;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>, &amp;b, &amp;r, &amp;d, &amp;s);<br>        <span class="hljs-keyword">if</span> (r == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (d &gt; <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;gua!\n&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok\n&quot;</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (d &gt; b)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;gua!\n&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok\n&quot;</span>);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-type">int</span> ans = s * r;<br>            <span class="hljs-type">int</span> cnt;<br>            cnt = (ans / <span class="hljs-number">60</span> + <span class="hljs-number">1</span>) * b;<br>            <span class="hljs-keyword">if</span> (d &gt; cnt)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;gua!\n&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;ok\n&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="E-Expenditure-Reductionï¼ˆdpï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/E">E.Expenditure Reduction</a>ï¼ˆdpï¼‰</strong></h2><p><strong>é¢˜æ„ï¼šç»™ä¸€ä¸ªå­—ç¬¦ä¸²Sï¼Œå’ŒSä¸€ä¸ªå­åºåˆ—Fã€‚æ±‚æœ€çŸ­çš„Sçš„å­ä¸²Tï¼Œä½¿Fä¹Ÿæ˜¯Tçš„å­åºåˆ—ã€‚</strong></p><p><strong>æ€è·¯ï¼šæ­£è§£æ˜¯dpï¼ˆè¿˜å¯ä»¥æšä¸¾äºŒåˆ†å¡è¿‡å»ï¼‰</strong></p><p><strong>dp[i][j]è¡¨ç¤ºSåˆ°iï¼ŒFåŒ¹é…åˆ°ç¬¬jä½çš„æœ€çŸ­é•¿åº¦ã€‚</strong></p><p><strong>è‹¥s[i] != f[j]ï¼Œ åˆ™dp[i][j] = min(dp[i][j], dp[i - 1][j] + 1);</strong></p><p><strong>è‹¥s[i] == f[j]ï¼Œåˆ™dp[i][j] = min(dp[i][j], dp[i - 1][j - 1] + 1);</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> dp[N][<span class="hljs-number">108</span>];<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> tt;<br>    cin &gt;&gt; tt;<br>    <span class="hljs-keyword">while</span> (tt--)<br>    &#123;<br>        string s, f;<br>        cin &gt;&gt; s &gt;&gt; f;<br>        <span class="hljs-type">int</span> n = s.<span class="hljs-built_in">size</span>();<br>        <span class="hljs-type">int</span> m = f.<span class="hljs-built_in">size</span>();<br>        s = <span class="hljs-string">&#x27;#&#x27;</span> + s;<br>        f = <span class="hljs-string">&#x27;#&#x27;</span> + f;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            &#123;<br>                dp[i][j] = INF;<br>            &#125;<br>        &#125;<br>        dp[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> pos = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (s[i] == f[j])<br>                &#123;<br>                    dp[i][j] = <span class="hljs-built_in">min</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>);<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    dp[i][j] = <span class="hljs-built_in">min</span>(dp[i][j], dp[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (dp[pos][m] &gt; dp[i][m])<br>            &#123;<br>                pos = i;<br>            &#125;<br>        &#125;<br>        <span class="hljs-comment">// cout &lt;&lt; pos &lt;&lt; &quot; &quot; &lt;&lt; dp[pos][m] &lt;&lt; &quot;\n&quot;;</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = pos - dp[pos][m] + <span class="hljs-number">1</span>; i &lt;= pos; i++)<br>        &#123;<br>            cout &lt;&lt; s[i];<br>        &#125;<br>        <span class="hljs-comment">// cout &lt;&lt; s + pos - dp[pos][m] + 1;</span><br>        cout &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="H-Heirloom-Paintingï¼ˆæ¨¡æ‹Ÿï¼Œè´ªå¿ƒï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/H">H.Heirloom Painting</a>ï¼ˆæ¨¡æ‹Ÿï¼Œè´ªå¿ƒï¼‰</strong></h2><p><strong>é¢˜æ„ï¼šç”¨åˆ·å­åˆ·é•¿åº¦ä¸ºnçš„å¢™ï¼Œæ¯æ¬¡ç”¨ä¸€ç§é¢œè‰²åˆ·è¿ç»­çš„é•¿åº¦ä¸ºkçš„ä¸€æ®µï¼Œååˆ·çš„é¢œè‰²ä¼šè¦†ç›–å‰åˆ·çš„é¢œè‰²ã€‚é—®ç»™å®šç»“æœï¼Œæœ€å°çš„åˆ·å¢™æ¬¡æ•°ã€‚</strong></p><p><strong>æ€è·¯ï¼šå®¹æ˜“æƒ³åˆ°ï¼Œå¦‚æœç»“æœä¸­æ ¹æœ¬æ²¡æœ‰é•¿åº¦ä¸å°äºkçš„ä¸€æ®µé¢œè‰²ç›¸åŒï¼Œé‚£ä¹ˆä¸å¯èƒ½åˆ·å‡ºæ¥ï¼Œå¦åˆ™éƒ½å¯ä»¥åˆ·å‡ºè¿™ä¸ªç»“æœã€‚</strong></p><p><strong>æˆ‘ä»¬å‘ç°åªè¦æœ‰ä¸€æ®µé•¿åº¦å¤§äºç­‰äºkï¼Œå°±ä¸€å®šèƒ½åˆ·å‡ºæ¥ï¼Œæ‰€ä»¥ç›´æ¥ä»ç¬¬ä¸€ä¸ªè¿ç»­æ®µå¼€å§‹ï¼Œä»å‰å¾€ååˆ·å°±è¡Œäº†</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> b[N];<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-type">int</span> n, m, k;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;n, &amp;m, &amp;k);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            b[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;a[i]);<br>        &#125;<br>        <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>        a[<span class="hljs-number">0</span>] = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (a[i] != a[i - <span class="hljs-number">1</span>])<br>            &#123;<br>                b[++cnt] += <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                b[cnt] += <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[<span class="hljs-number">1</span>] == a[n] &amp;&amp; cnt != <span class="hljs-number">1</span>) <span class="hljs-comment">//çœ‹1å’Œæœ€åé¢çš„æœ‰æ— è”ç³»ï¼Œå¦‚æœç›¸åŒå°±åˆå¹¶</span><br>        &#123;<br>            b[<span class="hljs-number">1</span>] += b[cnt];<br>            cnt -= <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (b[i] &gt;= k)<br>            &#123;<br>                flag = <span class="hljs-number">1</span>;<br>            &#125;<br>            sum += <span class="hljs-built_in">ceil</span>(b[i] * <span class="hljs-number">1.0</span> / k);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, sum);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="A-Another-A-B-Problemï¼ˆæœç´¢ï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/A">A.Another A+B Problem</a>ï¼ˆæœç´¢ï¼‰</strong></h2><p><strong>æ€è·¯ï¼šè¿™é¢˜é¢˜æ„è¯»ç€å¾ˆéš¾å—ï¼Œåšä¸å‡ºæ¥å¤§æ¦‚ç‡æ˜¯å› ä¸ºæ²¡è¯»æ‡‚é¢˜QAQ</strong></p><p><strong>æœ¬é¢˜ä¸»è¦éš¾ç‚¹å°±æ˜¯æœç´¢å‡ºæ»¡è¶³çº¦æŸçš„ç­”æ¡ˆã€‚å®¹æ˜“å‘ç°ï¼Œå¦‚æœæŸä¸ªåœ°æ–¹å¯¹åº”çš„æ˜¯Gï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å®Œå…¨ä¸ç®¡è¿™ä¸ªåœ°æ–¹ã€‚ç„¶åæˆ‘ä»¬æŸ¥çœ‹æ¯ä¸ªæ•°å­—å¯¹åº”çš„â€™Pâ€™,â€˜Bâ€™ä¸ªæ•°ã€‚å¦‚æœä¸€ä¸ªæ•°å­—æ²¡æœ‰å¯¹åº”çš„â€™Pâ€™,â€˜Bâ€™ï¼Œæ„å‘³ç€ä»–åœ¨æœç´¢æ—¶å¯ä»¥éšä¾¿æ‹¿ï¼Œæ²¡æœ‰æ•°é‡é™åˆ¶ã€‚å¦‚æœä¸€ä¸ªæ•°å­—å¯¹åº”çš„å…¨éƒ½æ˜¯â€™Pâ€™ï¼ˆå‡è®¾kä¸ªï¼‰,é‚£ä¹ˆæ„å‘³ç€å®ƒè‡³å°‘å‡ºç°kæ¬¡ã€‚å¦‚æœä¸€ä¸ªæ•°å­—æ—¢æœ‰â€™Pâ€™ï¼ˆkä¸ªï¼‰ä¹Ÿæœ‰â€™Bâ€™ï¼Œè¯´æ˜è¿™ä¸ªæ•°å­—è¦åˆšå¥½å‡ºç°kæ¬¡ã€‚åŒæ—¶ï¼Œæœ€åæœç´¢ç»“æœè¦æ»¡è¶³ç­‰å¼ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">11</span>;<br><span class="hljs-type">char</span> a[<span class="hljs-number">11</span>], b[<span class="hljs-number">11</span>];<br>vector&lt;<span class="hljs-type">int</span>&gt; v[<span class="hljs-number">11</span>];<br><span class="hljs-type">int</span> num[N];<br><span class="hljs-type">int</span> vis[N];<br><span class="hljs-type">char</span> c[N];<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br><span class="hljs-type">char</span> ans[<span class="hljs-number">1000000</span> + <span class="hljs-number">10</span>][N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (x == <span class="hljs-number">9</span>)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (num[i] &gt; <span class="hljs-number">0</span> &amp;&amp; num[i] &lt; <span class="hljs-number">1e4</span>)<br>            &#123;<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> z = (c[<span class="hljs-number">1</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + c[<span class="hljs-number">2</span>] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-type">int</span> x = (c[<span class="hljs-number">4</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + c[<span class="hljs-number">5</span>] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-type">int</span> m = (c[<span class="hljs-number">7</span>] - <span class="hljs-string">&#x27;0&#x27;</span>) * <span class="hljs-number">10</span> + c[<span class="hljs-number">8</span>] - <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-keyword">if</span> (z + x != m)<br>        &#123;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        cnt += <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">8</span>; i++)<br>        &#123;<br>            ans[cnt][i] = c[i];<br>        &#125;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (b[x] == <span class="hljs-string">&#x27;G&#x27;</span>)<br>    &#123;<br>        <span class="hljs-built_in">dfs</span>(x + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (vis[i] == <span class="hljs-number">0</span> &amp;&amp; num[i] == <span class="hljs-number">0</span> || i == a[x] - <span class="hljs-string">&#x27;0&#x27;</span>)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        num[i] -= <span class="hljs-number">1</span>;<br>        c[x] = i + <span class="hljs-string">&#x27;0&#x27;</span>;<br>        <span class="hljs-built_in">dfs</span>(x + <span class="hljs-number">1</span>);<br>        num[i] += <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; a + <span class="hljs-number">1</span> &gt;&gt; b + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        num[i] = <span class="hljs-number">1e5</span>;<br>        vis[i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">8</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b[i] == <span class="hljs-string">&#x27;G&#x27;</span>)<br>        &#123;<br>            c[i] = a[i];<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        v[a[i] - <span class="hljs-string">&#x27;0&#x27;</span>].<span class="hljs-built_in">push_back</span>(i);<br>        <span class="hljs-comment">// printf(&quot;%d %d\n&quot;, a[i] - &#x27;0&#x27;, i);</span><br>    &#125;<br>    <span class="hljs-comment">// for (int i = 0; i &lt; 10; i++)</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     printf(&quot;%d\n&quot;, v[i]);</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (v[i].<span class="hljs-built_in">size</span>() == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> t : v[i])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (b[t] == <span class="hljs-string">&#x27;P&#x27;</span>)<br>            &#123;<br>                sum++;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                vis[i] = <span class="hljs-number">0</span>;<br>            &#125;<br>        &#125;<br>        num[i] = sum;<br>    &#125;<br>    <span class="hljs-comment">// for (int i = 0; i &lt; 10; i++)</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     printf(&quot;%d\n&quot;, num[i]);</span><br>    <span class="hljs-comment">// &#125;</span><br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>);<br>    cout &lt;&lt; cnt &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)<br>    &#123;<br>        cout &lt;&lt; ans[i] + <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-string">&quot;\n&quot;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="M-My-University-Is-Better-Than-Yoursï¼ˆtarjanç¼©ç‚¹ï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/M">M.My University Is Better Than Yours</a>ï¼ˆtarjanç¼©ç‚¹ï¼‰</strong></h2><p><strong>é¢˜æ„ï¼šmä¸ªæ’è¡Œæ¦œï¼Œåªè¦æœ‰ä¸€ä¸ªæ’è¡Œæ¦œä¸­aæ¯”bå‰ï¼Œé‚£ä¹ˆaå°±æ¯”bå¥½ã€‚ï¼ˆaæ¯”bå¥½å’Œbæ¯”aå¥½å¯ä»¥åŒæ—¶æˆç«‹ï¼‰ä¸”å¦‚æœaæ¯”bå¥½ï¼Œbæ¯”cå¥½ï¼Œé‚£ä¹ˆaæ¯”cå¥½ã€‚æ±‚æ¯æ‰€å­¦æ ¡å¥½äºå¤šå°‘æ‰€å­¦æ ¡ã€‚</strong></p><p><strong>æ€è·¯ï¼šæ¯ä¸€ä¸ªæ’è¡Œæ¦œç›¸é‚»ä¸¤ç‚¹å»ºå›¾çš„è¯æ˜¯ä¸€æ¡é“¾çŠ¶DAGï¼Œå¦‚æœå¤šä¸ªæ’è¡Œæ¦œä¸€èµ·å»ºå›¾çš„è¯å°±ä¼šå½¢æˆå¾ˆå¤šç¯ï¼Œå®¹æ˜“å‘ç°ç¯ä¸Šçš„ç‚¹æ˜¯å…±äº«ç­”æ¡ˆçš„ã€‚å› æ­¤å¯ä»¥ç¼©æˆä¸€ä¸ªç‚¹ã€‚å¯ä»¥è¯æ˜ï¼Œç¼©å®Œç‚¹ä¹‹åçš„DAGä¹Ÿæ˜¯é“¾çŠ¶çš„ï¼Œå› æ­¤å¯ä»¥ç›´æ¥æ±‚å¾—ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, m, b;<br>vector&lt;<span class="hljs-type">int</span>&gt; e[N];<br><span class="hljs-type">int</span> dfn[N], low[N], tot;<br>stack&lt;<span class="hljs-type">int</span>&gt; s;<br><span class="hljs-type">int</span> scc[N], siz[N], cnt;<br><span class="hljs-type">int</span> din[N], dout[N];<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> num[N];<br>vector&lt;<span class="hljs-type">int</span>&gt; v[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">tarjan</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    dfn[x] = low[x] = ++tot;<br>    s.<span class="hljs-built_in">push</span>(x);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> y : e[x])<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!dfn[y])<br>        &#123;<br>            <span class="hljs-built_in">tarjan</span>(y);<br>            low[x] = <span class="hljs-built_in">min</span>(low[x], low[y]);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!scc[y])<br>        &#123;<br>            low[x] = <span class="hljs-built_in">min</span>(low[x], dfn[y]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (dfn[x] == low[x])<br>    &#123;<br>        ++cnt;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-type">int</span> y = s.<span class="hljs-built_in">top</span>();<br>            s.<span class="hljs-built_in">pop</span>();<br>            scc[y] = cnt;<br>            ++siz[cnt];<br>            <span class="hljs-keyword">if</span> (x == y)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> fa)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> t : v[x])<br>    &#123;<br>        <span class="hljs-keyword">if</span> (t == fa)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(t, x);<br>        siz[x] += siz[t];<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">1</span>)<br>            &#123;<br>                e[a[i - <span class="hljs-number">1</span>]].<span class="hljs-built_in">push_back</span>(a[i]);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!dfn[i])<br>        &#123;<br>            <span class="hljs-built_in">tarjan</span>(i);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> t : e[i])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (scc[t] != scc[i])<br>            &#123;<br>                e[scc[i]].<span class="hljs-built_in">push_back</span>(scc[t]);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)<br>    &#123;<br>        siz[i] += siz[i - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, siz[scc[i]] - <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="L-Last-Warning-of-the-Competition-Finance-Officerï¼ˆACè‡ªåŠ¨æœº-dpï¼‰"><strong><a href="https://ac.nowcoder.com/acm/contest/41614/L">L.Last Warning of the Competition Finance Officer</a>ï¼ˆACè‡ªåŠ¨æœº+dpï¼‰</strong></h2><p><strong>æ€è·¯ï¼š</strong></p><p><strong>è®¾dp[i]ä¸º1-içš„å¾—åˆ†, åˆ’åˆ†ä¸­æ²¡æœ‰åŒ…å«çš„å­ä¸²ï¼‰dp[i]=dp[iâˆ’1](åˆ’åˆ†ä¸­æ²¡æœ‰åŒ…å«içš„å­ä¸²ï¼‰+âˆ‘j dp[iâˆ’len(tj)]âˆ—val[tj] æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸åŒé•¿åº¦çš„tæœ€å¤šåªæœ‰ âˆ‘t ä¸ªï¼Œæ‰€ä»¥ACè‡ªåŠ¨æœºå‹ç¼©å®Œè·¯å¾„åè·³failæŒ‡é’ˆæœ€å¤šä¸è¶…è¿‡ âˆ‘t ä¸ªï¼Œç›´æ¥ACè‡ªåŠ¨æœº+è½¬ç§»å³å¯ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e5</span> + <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> ch[N][<span class="hljs-number">26</span>];<br><span class="hljs-type">int</span> idx;<br><span class="hljs-type">int</span> ne[N];<br><span class="hljs-type">char</span> str[N], s[N];<br><span class="hljs-type">int</span> e[N], g[N];<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">998244353</span>;<br><span class="hljs-type">int</span> fuck[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> len = <span class="hljs-built_in">strlen</span>(s + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= len; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> j = s[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>        <span class="hljs-keyword">if</span> (!ch[p][j])<br>        &#123;<br>            ch[p][j] = ++idx;<br>        &#125;<br>        p = ch[p][j];<br>    &#125;<br>    e[p] = x;<br>    g[p] = len;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (ch[<span class="hljs-number">0</span>][i])<br>        &#123;<br>            q.<span class="hljs-built_in">push</span>(ch[<span class="hljs-number">0</span>][i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        <span class="hljs-type">int</span> u = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">if</span> (e[u])<br>        &#123;<br>            fuck[u] = u;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            fuck[u] = fuck[ne[u]];<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> v = ch[u][i];<br>            <span class="hljs-keyword">if</span> (v)<br>            &#123;<br>                ne[v] = ch[ne[u]][i];<br>                q.<span class="hljs-built_in">push</span>(v);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                ch[u][i] = ch[ne[u]][i];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, str + <span class="hljs-number">1</span>);<br>    <span class="hljs-type">int</span> m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;m);<br>    <span class="hljs-type">int</span> ans;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s%d&quot;</span>, s + <span class="hljs-number">1</span>, &amp;ans);<br>        <span class="hljs-built_in">insert</span>(ans);<br>    &#125;<br>    <span class="hljs-built_in">build</span>();<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> n = <span class="hljs-built_in">strlen</span>(str + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>, u = <span class="hljs-number">0</span>; i &lt;= n; i++)<br>    &#123;<br>        dp[i] = dp[i - <span class="hljs-number">1</span>];<br>        u = ch[u][str[i] - <span class="hljs-string">&#x27;a&#x27;</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = fuck[u]; j; j = fuck[ne[j]])<br>        &#123;<br>            <span class="hljs-keyword">if</span> (g[j] &lt;= i)<br>            &#123;<br>                dp[i] += <span class="hljs-number">1ll</span> * dp[i - g[j]] * e[j] % mod;<br>                dp[i] %= mod;<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, dp[i]);<br>    &#125;<br>    <span class="hljs-comment">// printf(&quot;\n&quot;);</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;N-Nine-Is-Greater-Than-Ten-ç­¾åˆ°ï¼‰&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://ac.nowcoder.com/acm/contest/41614/N&quot;&gt;N.Nine Is Greater Than Ten&lt;/a&gt;(ç­¾åˆ°ï¼‰&lt;/st</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>2023ç‰›å®¢å¯’å‡ç®—æ³•åŸºç¡€é›†è®­è¥3</title>
    <link href="https://www.xwybq.top/posts/a82b503b/"/>
    <id>https://www.xwybq.top/posts/a82b503b/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:07:35.150Z</updated>
    
    <content type="html"><![CDATA[<p>Gï¼š<a href="https://ac.nowcoder.com/acm/contest/46811/G">ä¸¥è‚ƒå¤æ¿çš„ç§©åº</a></p><p>æ€è·¯ï¼šæš´åŠ›æœç´¢ï¼Œæš´åŠ›æœç´¢ä¸‰ç§ç¬¦å·çš„æƒ…å†µï¼Œçœ‹æ˜¯å¦æœ‰ä¸€ç§èƒ½ç¬¦åˆé¢˜æ„ï¼Œå¦‚æœæœ‰ï¼Œå°±return 1ï¼Œå¦åˆ™å°±æ˜¯return 0ï¼›è¿™ä¸ªé¢˜å†™çš„æ—¶å€™æœ‰å‡ ä¸ªå‘ç‚¹è¦æ³¨æ„ä¸€ä¸‹ï¼š</p><p><strong>1.å®šä¹‰a#bå½“ä¸”ä»…å½“aå’Œbéƒ½æ˜¯æ­£æ•´æ•°æ—¶æ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨è®¨è®º#çš„æ—¶å€™ï¼Œè¦å…ˆåˆ¤æ–­ä¸€ä¸‹å½“å‰æ•°å’Œä¸‹ä¸€ä¸ªæ•°æ˜¯å¦éƒ½å¤§äº0ï¼Œæ‰èƒ½é€’å½’ä¸‹å»</strong></p><p><strong>2.a^a%b,ç”¨å¿«é€Ÿå¹‚å†™æ—¶ï¼Œä¸è¦å¿˜äº†å…ˆæŠŠaåˆå§‹åŒ–ä¸ºa%b,ä¸ç„¶å°±ä¼šWA</strong></p><p><strong>ä»£ç ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">int</span> a[<span class="hljs-number">100</span>];<br><span class="hljs-type">int</span> ans;<br><span class="hljs-type">char</span> ch;<br><span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br><span class="hljs-type">char</span> b[<span class="hljs-number">100</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ksm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    a = a % p;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % p;<br>        &#125;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>        a = a * a % p;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans % p;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (pos == cnt)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (x == ans)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (i == cnt)<br>                &#123;<br>                    cout &lt;&lt; a[cnt] &lt;&lt; <span class="hljs-string">&quot;=&quot;</span> &lt;&lt; ans;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    cout &lt;&lt; a[i] &lt;&lt; b[i];<br>                &#125;<br>            &#125;<br>            cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    b[pos] = <span class="hljs-string">&#x27;+&#x27;</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dfs</span>(x + a[pos + <span class="hljs-number">1</span>], pos + <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    b[pos] = <span class="hljs-string">&#x27;-&#x27;</span>;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dfs</span>(x - a[pos + <span class="hljs-number">1</span>], pos + <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    b[pos] = <span class="hljs-string">&#x27;#&#x27;</span>;<br>    <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">0</span> &amp;&amp; a[pos + <span class="hljs-number">1</span>] &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dfs</span>(<span class="hljs-built_in">ksm</span>(x, x, a[pos + <span class="hljs-number">1</span>]), pos + <span class="hljs-number">1</span>) == <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        ++cnt;<br>        cin &gt;&gt; a[cnt];<br>        cin &gt;&gt; ch;<br>        <span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;=&#x27;</span>)<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    cin &gt;&gt; ans;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">dfs</span>(a[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>) == <span class="hljs-number">0</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-number">-1</span> &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Gï¼š&lt;a href=&quot;https://ac.nowcoder.com/acm/contest/46811/G&quot;&gt;ä¸¥è‚ƒå¤æ¿çš„ç§©åº&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ€è·¯ï¼šæš´åŠ›æœç´¢ï¼Œæš´åŠ›æœç´¢ä¸‰ç§ç¬¦å·çš„æƒ…å†µï¼Œçœ‹æ˜¯å¦æœ‰ä¸€ç§èƒ½ç¬¦åˆé¢˜æ„ï¼Œå¦‚æœæœ‰ï¼Œå°±return 1ï¼Œå¦åˆ™å°±æ˜¯return 0ï¼›è¿™ä¸ªé¢˜</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>å¸¸ç”¨æ¨¡æ¿</title>
    <link href="https://www.xwybq.top/posts/1590894c/"/>
    <id>https://www.xwybq.top/posts/1590894c/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:08:15.721Z</updated>
    
    <content type="html"><![CDATA[<p>[TOC]</p><h1><strong>æ ‘çŠ¶æ•°ç»„æ±‚é€†åºå¯¹</strong></h1><p>[<a href="https://vjudge.net/contest/515986#problem/C">https://vjudge.net/contest/515986#problem/C</a>]:</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> t[N];<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> x &amp; -x;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (x &lt;= n)<br>    &#123;<br>        t[x]++;<br>        x += <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ask</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x &gt;= <span class="hljs-number">1</span>)<br>    &#123;<br>        sum += t[x];<br>        x -= <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    ll sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        <span class="hljs-built_in">add</span>(a[i]);<br>        sum += (i - <span class="hljs-built_in">ask</span>(a[i]));<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ ‘çŠ¶æ•°ç»„æ±‚ä¸€ä¸ªåŒºé—´å†…æœ‰å‡ ç§æ•°</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> tr[N];<br><span class="hljs-type">int</span> num[N];<br><span class="hljs-type">int</span> last[N];<br><span class="hljs-type">int</span> ans[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> l, r, pos;<br>&#125; ask[N];<br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">cmp</span><span class="hljs-params">(node a, node b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> a.r &lt; b.r;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lowbit</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> x &amp; (-x);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> ans)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">while</span> (x &lt;= n)<br>    &#123;<br>        tr[x] += ans;<br>        x += <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">sum</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (x != <span class="hljs-number">0</span>)<br>    &#123;<br>        ans += tr[x];<br>        x -= <span class="hljs-built_in">lowbit</span>(x);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;num[i]);<br>    &#125;<br>    <span class="hljs-type">int</span> m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;ask[i].l, &amp;ask[i].r);<br>        ask[i].pos = i;<br>    &#125;<br>    <span class="hljs-built_in">sort</span>(ask + <span class="hljs-number">1</span>, ask + <span class="hljs-number">1</span> + m, cmp);<br>    <span class="hljs-type">int</span> fuck = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = fuck; j &lt;= ask[i].r; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (last[num[j]])<br>            &#123;<br>                <span class="hljs-built_in">add</span>(last[num[j]], <span class="hljs-number">-1</span>);<br>            &#125;<br>            <span class="hljs-built_in">add</span>(j, <span class="hljs-number">1</span>);<br>            last[num[j]] = j;<br>        &#125;<br>        fuck = ask[i].r + <span class="hljs-number">1</span>;<br>        ans[ask[i].pos] = <span class="hljs-built_in">sum</span>(ask[i].r) - <span class="hljs-built_in">sum</span>(ask[i].l - <span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1><strong>äºŒç»´å‰ç¼€å’Œ</strong></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> sum[<span class="hljs-number">1001</span>][<span class="hljs-number">1001</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> m, n, x1, y1, x2, y2, value;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d %d&quot;</span>, &amp;n, &amp;m); <span class="hljs-comment">//ä»ä¸€å¼€å§‹é¿å…äº†åˆ†ç±»è®¨è®º</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;value);<br>            sum[i][j] = sum[i][j - <span class="hljs-number">1</span>] + sum[i - <span class="hljs-number">1</span>][j] - sum[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + value;<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">int</span> q;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;q);<br>    <span class="hljs-keyword">while</span> (q--)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>, &amp;x1, &amp;y1, &amp;x2, &amp;y2);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, sum[x2][y2] - sum[x1 - <span class="hljs-number">1</span>][y2] - sum[x2][y1 - <span class="hljs-number">1</span>] + sum[x1 - <span class="hljs-number">1</span>][y1 - <span class="hljs-number">1</span>]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1><strong>ä¸»å¸­æ ‘æŸ¥è¯¢ä¸€ä¸ªåŒºé—´æœ‰å‡ ä¸ªæ•°</strong></h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * ç»™å‡ºä¸€ä¸ªåºåˆ—ï¼ŒæŸ¥è¯¢åŒºé—´å†…æœ‰å¤šå°‘ä¸ªä¸ç›¸åŒçš„æ•°</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MAXN = <span class="hljs-number">30010</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = MAXN * <span class="hljs-number">100</span>;<br><span class="hljs-type">int</span> n, q, tot;<br><span class="hljs-type">int</span> a[MAXN];<br><span class="hljs-type">int</span> T[M], lson[M], rson[M], c[M];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> root = tot++;<br>    c[root] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (l != r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>        lson[root] = <span class="hljs-built_in">build</span>(l, mid);<br>        rson[root] = <span class="hljs-built_in">build</span>(mid + <span class="hljs-number">1</span>, r);<br>    &#125;<br>    <span class="hljs-keyword">return</span> root;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> root, <span class="hljs-type">int</span> pos, <span class="hljs-type">int</span> val)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> newroot = tot++, tmp = newroot;<br>    c[newroot] = c[root] + val;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r = n;<br>    <span class="hljs-keyword">while</span> (l &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (pos &lt;= mid)<br>        &#123;<br>            lson[newroot] = tot++;<br>            rson[newroot] = rson[root];<br>            newroot = lson[newroot];<br>            root = lson[root];<br>            r = mid;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            rson[newroot] = tot++;<br>            lson[newroot] = lson[root];<br>            newroot = rson[newroot];<br>            root = rson[root];<br>            l = mid + <span class="hljs-number">1</span>;<br>        &#125;<br>        c[newroot] = c[root] + val;<br>    &#125;<br>    <span class="hljs-keyword">return</span> tmp;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> root, <span class="hljs-type">int</span> pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ret = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r = n;<br>    <span class="hljs-keyword">while</span> (pos &lt; r)<br>    &#123;<br>        <span class="hljs-type">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (pos &lt;= mid)<br>        &#123;<br>            r = mid;<br>            root = lson[root];<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            ret += c[lson[root]];<br>            root = rson[root];<br>            l = mid + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ret + c[root];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;in.txt&quot;,&quot;r&quot;,stdin);</span><br>    <span class="hljs-comment">// freopen(&quot;out.txt&quot;,&quot;w&quot;,stdout);</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n) == <span class="hljs-number">1</span>)<br>    &#123;<br>        tot = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        T[n + <span class="hljs-number">1</span>] = <span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>, n); <span class="hljs-comment">//å»ºç«‹ä¸€é¢—ç©ºæ ‘</span><br>        map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; mp;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= <span class="hljs-number">1</span>; i--)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (mp.<span class="hljs-built_in">find</span>(a[i]) == mp.<span class="hljs-built_in">end</span>())<br>            &#123;<br>                T[i] = <span class="hljs-built_in">update</span>(T[i + <span class="hljs-number">1</span>], i, <span class="hljs-number">1</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-type">int</span> tmp = <span class="hljs-built_in">update</span>(T[i + <span class="hljs-number">1</span>], mp[a[i]], <span class="hljs-number">-1</span>);<br>                T[i] = <span class="hljs-built_in">update</span>(tmp, i, <span class="hljs-number">1</span>);<br>            &#125;<br>            mp[a[i]] = i;<br>        &#125;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;q);<br>        <span class="hljs-keyword">while</span> (q--)<br>        &#123;<br>            <span class="hljs-type">int</span> l, r;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;l, &amp;r);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">query</span>(T[l], r));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>çº¿æ®µæ ‘æ±‚åŒºé—´æœ€å¤§å€¼å‡æœ€å°å€¼</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> w[N];<br><span class="hljs-type">int</span> n, q;<br><span class="hljs-type">int</span> _max, _min;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> INF = <span class="hljs-number">0x3f3f3f3f</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> l, r, minn, maxn;<br>&#125; tr[N * <span class="hljs-number">4</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u].minn = <span class="hljs-built_in">min</span>(tr[u &lt;&lt; <span class="hljs-number">1</span>].minn, tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].minn);<br>    tr[u].maxn = <span class="hljs-built_in">max</span>(tr[u &lt;&lt; <span class="hljs-number">1</span>].maxn, tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].maxn);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u].l = l;<br>    tr[u].r = r;<br>    <span class="hljs-keyword">if</span> (l == r)<br>    &#123;<br>        tr[u].maxn = tr[u].minn = w[l];<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-built_in">pushup</span>(u);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r)<br>    &#123;<br>        _max = <span class="hljs-built_in">max</span>(_max, tr[u].maxn);<br>        _min = <span class="hljs-built_in">min</span>(_min, tr[u].minn);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = tr[u].l + tr[u].r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= mid)<br>    &#123;<br>        <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt; mid)<br>    &#123;<br>        <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;q);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;w[i]);<br>    &#125;<br>    <span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n);<br>    <span class="hljs-type">int</span> l, r;<br>    <span class="hljs-keyword">while</span> (q--)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;l, &amp;r);<br>        _max = -INF;<br>        _min = INF;<br>        <span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>, l, r);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, _max - _min);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>çº¿æ®µæ ‘åŒºé—´ä¿®æ”¹å’Œæ±‚å’Œ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> w[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> l, r, sum, lazy;<br>&#125; tr[N * <span class="hljs-number">4</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u].sum = tr[u &lt;&lt; <span class="hljs-number">1</span>].sum + tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushdown</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].lazy != <span class="hljs-number">0</span>)<br>    &#123;<br>        tr[u &lt;&lt; <span class="hljs-number">1</span>].sum += (tr[u &lt;&lt; <span class="hljs-number">1</span>].r - tr[u &lt;&lt; <span class="hljs-number">1</span>].l + <span class="hljs-number">1</span>) * tr[u].lazy;<br>        tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum += (tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].r - tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].l + <span class="hljs-number">1</span>) * tr[u].lazy;<br>        tr[u &lt;&lt; <span class="hljs-number">1</span>].lazy += tr[u].lazy;<br>        tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].lazy += tr[u].lazy;<br>        tr[u].lazy = <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u] = &#123;l, r, w[l], <span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">if</span> (l == r)<br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (l + r) / <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-built_in">pushup</span>(u);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r, <span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r)<br>    &#123;<br>        tr[u].sum += (tr[u].r - tr[u].l + <span class="hljs-number">1</span>) * k;<br>        tr[u].lazy += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = (tr[u].l + tr[u].r) / <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">pushdown</span>(u);<br>    <span class="hljs-keyword">if</span> (l &lt;= mid)<br>    &#123;<br>        <span class="hljs-built_in">update</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, r, k);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt; mid)<br>    &#123;<br>        <span class="hljs-built_in">update</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r, k);<br>    &#125;<br>    <span class="hljs-built_in">pushup</span>(u);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r)<br>    &#123;<br>        <span class="hljs-keyword">return</span> tr[u].sum;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = tr[u].l + tr[u].r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">pushdown</span>(u);<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= mid)<br>    &#123;<br>        sum += <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt; mid)<br>    &#123;<br>        sum += <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;w[i]);<br>    &#125;<br>    <span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n);<br>    <span class="hljs-type">int</span> op;<br>    <span class="hljs-type">int</span> x, y, k;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;op);<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;x, &amp;y, &amp;k);<br>            <span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>, x, y, k);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;x, &amp;y);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, <span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>, x, y));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>çº¿æ®µæ ‘å•ç‚¹ä¿®æ”¹å’ŒåŒºé—´æ±‚å’Œ</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> w[N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> l, r, sum;<br>&#125; tr[N * <span class="hljs-number">4</span>];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pushup</span><span class="hljs-params">(<span class="hljs-type">int</span> u)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u].sum = tr[u &lt;&lt; <span class="hljs-number">1</span>].sum + tr[u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>].sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    tr[u] = &#123;l, r, w[l]&#125;;<br>    <span class="hljs-keyword">if</span> (l == r)<br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = l + r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, mid);<br>    <span class="hljs-built_in">build</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, mid + <span class="hljs-number">1</span>, r);<br>    <span class="hljs-built_in">pushup</span>(u);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">update</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> x, <span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].l == x &amp;&amp; tr[u].r == x)<br>    &#123;<br>        tr[u].sum += k;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = tr[u].l + tr[u].r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">if</span> (x &lt;= mid)<br>    &#123;<br>        <span class="hljs-built_in">update</span>(u &lt;&lt; <span class="hljs-number">1</span>, x, k);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (x &gt; mid)<br>    &#123;<br>        <span class="hljs-built_in">update</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, x, k);<br>    &#125;<br>    <span class="hljs-built_in">pushup</span>(u);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r)<br>    &#123;<br>        <span class="hljs-keyword">return</span> tr[u].sum;<br>    &#125;<br>    <span class="hljs-type">int</span> mid = tr[u].l + tr[u].r &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">if</span> (l &lt;= mid)<br>    &#123;<br>        sum += <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt; mid)<br>    &#123;<br>        sum += <span class="hljs-built_in">query</span>(u &lt;&lt; <span class="hljs-number">1</span> | <span class="hljs-number">1</span>, l, r);<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;w[i]);<br>    &#125;<br>    <span class="hljs-built_in">build</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, n);<br>    <span class="hljs-type">int</span> op;<br>    <span class="hljs-type">int</span> x, y, k;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;op);<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;x, &amp;k);<br>            <span class="hljs-built_in">update</span>(<span class="hljs-number">1</span>, x, k);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;x, &amp;y);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, <span class="hljs-built_in">query</span>(<span class="hljs-number">1</span>, x, y));<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ACè‡ªåŠ¨æœºæ±‚æœ‰å¤šå°‘ä¸ªä¸åŒçš„æ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²é‡Œå‡ºç°è¿‡</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> ne[N];<br><span class="hljs-type">int</span> ch[N][<span class="hljs-number">26</span>], cnt[N], idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(string s)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; s[i]; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> j = s[i] - <span class="hljs-string">&#x27;a&#x27;</span>;<br>        <span class="hljs-keyword">if</span> (!ch[p][j])<br>        &#123;<br>            ch[p][j] = ++idx;<br>        &#125;<br>        p = ch[p][j];<br>    &#125;<br>    cnt[p]++;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">build</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (ch[<span class="hljs-number">0</span>][i])<br>        &#123;<br>            q.<span class="hljs-built_in">push</span>(ch[<span class="hljs-number">0</span>][i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        <span class="hljs-type">int</span> u = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">26</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> v = ch[u][i];<br>            <span class="hljs-keyword">if</span> (v)<br>            &#123;<br>                ne[v] = ch[ne[u]][i];<br>                q.<span class="hljs-built_in">push</span>(v);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                ch[u][i] = ch[ne[u]][i];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(string s)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>, i = <span class="hljs-number">0</span>; s[k]; k++)<br>    &#123;<br>        i = ch[i][s[k] - <span class="hljs-string">&#x27;a&#x27;</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i; j &amp;&amp; ~cnt[j]; j = ne[j])<br>        &#123;<br>            ans += cnt[j];<br>            cnt[j] = <span class="hljs-number">-1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    string a;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        cin &gt;&gt; a;<br>        <span class="hljs-built_in">insert</span>(a);<br>    &#125;<br>    <span class="hljs-built_in">build</span>();<br>    cin &gt;&gt; a;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-built_in">query</span>(a);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ¬§æ‹‰å‡½æ•°æ±‚å°äºnçš„äº’è´¨æ•°</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//è¯•é™¤æ³•æ±‚å•ä¸ªæ¬§æ‹‰å‡½æ•°</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long </span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">phi</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i * i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (n % i == <span class="hljs-number">0</span>)<br>        &#123;<br>            ans = ans * (i - <span class="hljs-number">1</span>) / i; <span class="hljs-comment">//è¿™é‡Œå®é™…ä¸Šæ˜¯ans*(iåˆ†ä¹‹iå‡ä¸€)</span><br>            <span class="hljs-keyword">while</span> (n % i == <span class="hljs-number">0</span>)<br>            &#123;<br>                n /= i;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span>)<br>    &#123;<br>        ans = ans * (n - <span class="hljs-number">1</span>) / n;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld&quot;</span>, &amp;n) != EOF)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, <span class="hljs-built_in">phi</span>(n));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//-------------------------------</span><br><span class="hljs-comment">//ç­›æ³•æ±‚1~nçš„æ¬§æ‹‰å‡½æ•°</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> p[N], vis[N], cnt;<br><span class="hljs-type">int</span> phi[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_phi</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    phi[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[cnt++] = i;<br>            phi[i] = i - <span class="hljs-number">1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; i * p[j] &lt;= n; j++)<br>        &#123;<br>            <span class="hljs-type">int</span> m = i * p[j];<br>            vis[m] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                phi[m] = p[j] * phi[i];<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                phi[m] = (p[j] - <span class="hljs-number">1</span>) * phi[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-built_in">get_phi</span>(n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, phi[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>javaä¸­çš„BigIntegerç±»</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.lang.*;<br><span class="hljs-keyword">import</span> java.math.BigInteger;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> sc.nextBigInteger();<br>        <span class="hljs-type">BigInteger</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> sc.nextBigInteger();<br>        System.out.println(a.add(b));<span class="hljs-comment">//ç›¸åŠ </span><br>        System.out.println(a.subtract(b));<span class="hljs-comment">//ç›¸å‡</span><br>        System.out.println(a.multiply(b));<span class="hljs-comment">//ç›¸ä¹˜</span><br>        System.out.println(a.divide(b));<span class="hljs-comment">//ç›¸é™¤å–æ•´</span><br>        System.out.println(a.gcd(b));<span class="hljs-comment">//æœ€å¤§å…¬çº¦æ•°</span><br>        System.out.println(a.abs());<span class="hljs-comment">//ç»å¯¹å€¼</span><br>        System.out.println(a.negate());<span class="hljs-comment">//æ•°å­—å–å</span><br>        <span class="hljs-type">int</span> ans=<span class="hljs-number">10</span>;<br>        System.out.println(a.pow(ans));<span class="hljs-comment">//å¹‚æ¬¡æ–¹</span><br>        BigInteger mod=<span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;1000000007&quot;</span>);<br>        System.out.println(a.remainder(mod));<span class="hljs-comment">//å–æ¨¡</span><br>        System.out.println(a.compareTo(b));<span class="hljs-comment">//æ¯”è¾ƒå¤§å°ï¼Œå¤§äºè¿”å›1ï¼Œå°äºè¿”å›-1ï¼Œç­‰äºè¿”å›0</span><br>        <span class="hljs-type">int</span> x=<span class="hljs-number">2</span>;<br>        System.out.println(a.toString(x));<span class="hljs-comment">//è¿”å›å¤§æ•´æ•°xè¿›åˆ¶çš„å­—ç¬¦ä¸²è¡¨ç¤º</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>LCAå€å¢å†™æ³•</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//vectorå­˜å‚¨è¾¹</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> dep[N];    <span class="hljs-comment">// dep[u]å­˜uç‚¹åœ¨æ ‘ä¸Šçš„æ·±åº¦</span><br><span class="hljs-type">int</span> fa[N][<span class="hljs-number">20</span>]; <span class="hljs-comment">// fa[u][i]å­˜ä»uç‚¹å‘ä¸Šè·³2çš„iæ¬¡æ–¹å±‚çš„ç¥–å…ˆç»“ç‚¹</span><br>vector&lt;<span class="hljs-type">int</span>&gt; v[N];<br><span class="hljs-type">int</span> n, m, s;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> father)</span></span><br><span class="hljs-function"></span>&#123;<br>    dep[u] = dep[father] + <span class="hljs-number">1</span>;<br>    fa[u][<span class="hljs-number">0</span>] = father;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">19</span>; i++) <span class="hljs-comment">//è·³2çš„0æ¬¡æ–¹æƒ…å†µå·²ç»å¼„è¿‡äº†ï¼Œæ‰€ä»¥ä»1å¼€å§‹</span><br>    &#123;<br>        fa[u][i] = fa[fa[u][i - <span class="hljs-number">1</span>]][i - <span class="hljs-number">1</span>]; <span class="hljs-comment">//å…ˆå‘ä¸Šè·³2çš„i-1å±‚ï¼Œå†å‘ä¸Šè·³2^i-1å±‚</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> t : v[u]) <span class="hljs-comment">// dfsæ·±æœå°±è¡Œ</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (t == father)<br>            <span class="hljs-keyword">continue</span>;<br>        <span class="hljs-built_in">dfs</span>(t, u);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lca</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (dep[u] &lt; dep[v]) <span class="hljs-comment">//ä»æ·±åº¦å¤§çš„å¼€å§‹è·³</span><br>    &#123;<br>        <span class="hljs-built_in">swap</span>(u, v);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">19</span>; i &gt;= <span class="hljs-number">0</span>; i--) <span class="hljs-comment">//å…ˆè·³åˆ°åŒä¸€å±‚</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (dep[fa[u][i]] &gt;= dep[v])<br>        &#123;<br>            u = fa[u][i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (u == v) <span class="hljs-comment">//çœ‹çœ‹ä»–ä¿©åœ¨ä¸åœ¨ä¸€æ¡è·¯å¾„ä¸Š</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> v;<br>    &#125;<br>    <span class="hljs-comment">//å¦åˆ™å°±ä¸¤ä¸ªç»“ç‚¹ä¸€èµ·å¾€ä¸Šè·³ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç›¸åŒçš„ç»“ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">19</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (fa[u][i] != fa[v][i])<br>        &#123;<br>            u = fa[u][i], v = fa[v][i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//è·³åˆ°æœ€åä¸€å®šæ˜¯å†è·³1å±‚å°±è¡Œï¼Œä½†åˆ¤æ–­ä¹‹åä¸ç¬¦åˆæ¡ä»¶å°±ç›´æ¥é€€å‡ºäº†ï¼Œæ‰€ä»¥æœ€åuå’Œvå¹¶æ²¡æœ‰èµ‹å€¼ï¼Œå¾—åˆ°çš„å®é™…ä¸Šæ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å­èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">return</span> fa[u][<span class="hljs-number">0</span>]; <span class="hljs-comment">//è¿”å›å†è·³ä¸€å±‚çš„å€¼å³å¯</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;s);<br>    <span class="hljs-type">int</span> x, y;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);<br>        v[x].<span class="hljs-built_in">push_back</span>(y);<br>        v[y].<span class="hljs-built_in">push_back</span>(x);<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(s, <span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> u, v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">lca</span>(u, v));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//-----------------------------------------</span><br><span class="hljs-comment">//é“¾å¼å‰å‘æ˜Ÿå­˜å‚¨è¾¹</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> to, nex;<br>&#125; a[N * <span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> dep[N];    <span class="hljs-comment">// dep[u]å­˜uç‚¹åœ¨æ ‘ä¸Šçš„æ·±åº¦</span><br><span class="hljs-type">int</span> fa[N][<span class="hljs-number">20</span>]; <span class="hljs-comment">// fa[u][i]å­˜ä»uç‚¹å‘ä¸Šè·³2çš„iæ¬¡æ–¹å±‚çš„ç¥–å…ˆç»“ç‚¹</span><br><span class="hljs-comment">// vector&lt;int&gt; v[N];</span><br><span class="hljs-type">int</span> n, m, s;<br><span class="hljs-type">int</span> head[N];<br><span class="hljs-type">int</span> idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    a[++idx].to = v;<br>    a[idx].nex = head[u];<br>    head[u] = idx;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> father)</span></span><br><span class="hljs-function"></span>&#123;<br>    dep[u] = dep[father] + <span class="hljs-number">1</span>;<br>    fa[u][<span class="hljs-number">0</span>] = father;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">19</span>; i++) <span class="hljs-comment">//è·³2çš„0æ¬¡æ–¹æƒ…å†µå·²ç»å¼„è¿‡äº†ï¼Œæ‰€ä»¥ä»1å¼€å§‹</span><br>    &#123;<br>        fa[u][i] = fa[fa[u][i - <span class="hljs-number">1</span>]][i - <span class="hljs-number">1</span>]; <span class="hljs-comment">//å…ˆå‘ä¸Šè·³2çš„i-1å±‚ï¼Œå†å‘ä¸Šè·³2^i-1å±‚</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = head[u]; i != <span class="hljs-number">-1</span>; i = a[i].nex)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (a[i].to == father)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(a[i].to, u);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">lca</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (dep[u] &lt; dep[v]) <span class="hljs-comment">//ä»æ·±åº¦å¤§çš„å¼€å§‹è·³</span><br>    &#123;<br>        <span class="hljs-built_in">swap</span>(u, v);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">19</span>; i &gt;= <span class="hljs-number">0</span>; i--) <span class="hljs-comment">//å…ˆè·³åˆ°åŒä¸€å±‚</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (dep[fa[u][i]] &gt;= dep[v])<br>        &#123;<br>            u = fa[u][i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (u == v) <span class="hljs-comment">//çœ‹çœ‹ä»–ä¿©åœ¨ä¸åœ¨ä¸€æ¡è·¯å¾„ä¸Š</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> v;<br>    &#125;<br>    <span class="hljs-comment">//å¦åˆ™å°±ä¸¤ä¸ªç»“ç‚¹ä¸€èµ·å¾€ä¸Šè·³ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªç›¸åŒçš„ç»“ç‚¹</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">19</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (fa[u][i] != fa[v][i])<br>        &#123;<br>            u = fa[u][i], v = fa[v][i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//è·³åˆ°æœ€åä¸€å®šæ˜¯å†è·³1å±‚å°±è¡Œï¼Œä½†åˆ¤æ–­ä¹‹åä¸ç¬¦åˆæ¡ä»¶å°±ç›´æ¥é€€å‡ºäº†ï¼Œæ‰€ä»¥æœ€åuå’Œvå¹¶æ²¡æœ‰èµ‹å€¼ï¼Œå¾—åˆ°çš„å®é™…ä¸Šæ˜¯æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å­èŠ‚ç‚¹</span><br>    <span class="hljs-keyword">return</span> fa[u][<span class="hljs-number">0</span>]; <span class="hljs-comment">//è¿”å›å†è·³ä¸€å±‚çš„å€¼å³å¯</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;s);<br>    <span class="hljs-built_in">memset</span>(head, <span class="hljs-number">-1</span>, <span class="hljs-built_in">sizeof</span>(head));<br>    <span class="hljs-type">int</span> x, y;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;x, &amp;y);<br>        <span class="hljs-built_in">add</span>(x, y);<br>        <span class="hljs-built_in">add</span>(y, x);<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(s, <span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> u, v;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">lca</span>(u, v));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>LCATraJanå†™æ³•</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, m, s, a, b;<br>vector&lt;<span class="hljs-type">int</span>&gt; e[N];<br>vector&lt;pair&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt;&gt; query[N];<br><span class="hljs-type">int</span> fa[N], vis[N], ans[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (x == fa[x])<br>    &#123;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> fa[x] = <span class="hljs-built_in">find</span>(fa[x]);<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">tarjan</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    vis[x] = <span class="hljs-number">1</span>; <span class="hljs-comment">//æ ‡è®°xå·²è®¿é—®</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> t : e[x])<br>    &#123;<br>        <span class="hljs-keyword">if</span> (vis[t] == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">tarjan</span>(t);<br>            fa[t] = x; <span class="hljs-comment">//å›åˆ°xæ—¶æŒ‡å‘x</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//ç¦»å¼€xæ—¶æ‰¾LCA</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> q : query[x])<br>    &#123;<br>        <span class="hljs-type">int</span> y = q.first, i = q.second;<br>        <span class="hljs-keyword">if</span> (vis[y] == <span class="hljs-number">1</span>)<br>        &#123;<br>            ans[i] = <span class="hljs-built_in">find</span>(y);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;s);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);<br>        e[a].<span class="hljs-built_in">push_back</span>(b);<br>        e[b].<span class="hljs-built_in">push_back</span>(a);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;a, &amp;b);<br>        query[a].<span class="hljs-built_in">push_back</span>(&#123;b, i&#125;);<br>        query[b].<span class="hljs-built_in">push_back</span>(&#123;a, i&#125;);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        fa[i] = i;<br>    &#125;<br>    <span class="hljs-built_in">tarjan</span>(s);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans[i]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ‹“æ‰‘æ’åºï¼ˆKahnç®—æ³•)</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//https://vjudge.net/problem/UVA-10305</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e2</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-type">int</span> din[N];<br>vector&lt;<span class="hljs-type">int</span>&gt; e[N], ans;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">toposort</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;<span class="hljs-type">int</span>&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (din[i] == <span class="hljs-number">0</span>)<br>        &#123;<br>            q.<span class="hljs-built_in">push</span>(i);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        <span class="hljs-type">int</span> x = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        ans.<span class="hljs-built_in">push_back</span>(x);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> y : e[x])<br>        &#123;<br>            --din[y];<br>            <span class="hljs-keyword">if</span> (din[y] == <span class="hljs-number">0</span>)<br>            &#123;<br>                q.<span class="hljs-built_in">push</span>(y);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        cin &gt;&gt; n &gt;&gt; m;<br>        <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span> &amp;&amp; m == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= N; i++)<br>        &#123;<br>            e[i].<span class="hljs-built_in">clear</span>();<br>        &#125;<br>        <span class="hljs-built_in">memset</span>(din, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(din));<br>        ans.<span class="hljs-built_in">clear</span>();<br>        <span class="hljs-type">int</span> a, b;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        &#123;<br>            cin &gt;&gt; a &gt;&gt; b;<br>            e[a].<span class="hljs-built_in">push_back</span>(b);<br>            din[b]++;<br>        &#125;<br>        <span class="hljs-built_in">toposort</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> x : ans)<br>        &#123;<br>            cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å­—å…¸æ ‘æ±‚æœ€å¤§å¼‚æˆ–å¯¹</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, a[N];<br><span class="hljs-type">int</span> ch[N * <span class="hljs-number">31</span>][<span class="hljs-number">2</span>];<span class="hljs-comment">//ch[p][j]è¡¨ç¤ºpå·ç»“ç‚¹æ²¿ç€jè¿™æ¡è¾¹åˆ°è¾¾çš„å­èŠ‚ç‚¹</span><br><span class="hljs-type">int</span> idx;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">30</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-type">int</span> j = x &gt;&gt; i &amp; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (!ch[p][j])<br>        &#123;<br>            ch[p][j] = ++idx;<br>        &#125;<br>        p = ch[p][j];<br>        <span class="hljs-comment">// printf(&quot;%d\n&quot;, idx);</span><br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> p = <span class="hljs-number">0</span>, sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">30</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        <span class="hljs-type">int</span> j = x &gt;&gt; i &amp; <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (ch[p][!j])<br>        &#123;<br>            sum += <span class="hljs-number">1</span> &lt;&lt; i;<br>            p = ch[p][!j];<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            p = ch[p][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> sum;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        <span class="hljs-built_in">insert</span>(a[i]);<br>    &#125;<br>    <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        maxn = <span class="hljs-built_in">max</span>(maxn, <span class="hljs-built_in">query</span>(a[i]));<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, maxn);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1><strong>ä¼˜å…ˆé˜Ÿåˆ— priority_queue</strong></h1><p><strong>empty() å¦‚æœé˜Ÿåˆ—ä¸ºç©ºè¿”å›çœŸ</strong></p><p><strong>pop() åˆ é™¤å¯¹é¡¶å…ƒç´ </strong></p><p><strong>push() åŠ å…¥ä¸€ä¸ªå…ƒç´ </strong></p><p><strong>size() è¿”å›ä¼˜å…ˆé˜Ÿåˆ—ä¸­æ‹¥æœ‰çš„å…ƒç´ ä¸ªæ•°</strong></p><p><strong>top() è¿”å›ä¼˜å…ˆé˜Ÿåˆ—é˜Ÿé¡¶å…ƒç´ </strong></p><p><strong>åœ¨é»˜è®¤çš„ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œä¼˜å…ˆçº§é«˜çš„å…ˆå‡ºé˜Ÿã€‚åœ¨é»˜è®¤çš„ int å‹ä¸­å…ˆå‡ºé˜Ÿçš„ä¸ºè¾ƒå¤§çš„æ•°</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-number">1</span> priority_queue&lt;<span class="hljs-type">int</span>&gt;q1;<span class="hljs-comment">//å¤§çš„å…ˆå‡ºå¯¹</span><br><span class="hljs-number">2</span> priority_queue&lt;<span class="hljs-type">int</span>,vector&lt;<span class="hljs-type">int</span>&gt;,greater&lt;<span class="hljs-type">int</span>&gt; &gt;q2; <span class="hljs-comment">//å°çš„å…ˆå‡ºé˜Ÿ</span><br></code></pre></td></tr></table></figure><p><strong>è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼š</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-number">1</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">cmp</span><br><span class="hljs-number">2</span> &#123;<br><span class="hljs-number">3</span> <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">operator</span> <span class="hljs-params">()</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function">4 </span>&#123;<br><span class="hljs-number">5</span> <span class="hljs-keyword">return</span> x &gt; y; <span class="hljs-comment">// x å°çš„ä¼˜å…ˆçº§é«˜</span><br><span class="hljs-number">6</span> <span class="hljs-comment">//ä¹Ÿå¯ä»¥å†™æˆå…¶ä»–æ–¹å¼ï¼Œå¦‚ï¼šreturn p[x] &gt; p[y]; è¡¨ç¤º p[i] å°çš„ä¼˜å…ˆçº§é«˜</span><br><span class="hljs-number">7</span> &#125;<br><span class="hljs-number">8</span> &#125;;<br><span class="hljs-number">9</span> priority_queue&lt;<span class="hljs-type">int</span>, vector&lt;<span class="hljs-type">int</span>&gt;, cmp&gt;q;<span class="hljs-comment">//å®šä¹‰æ–¹æ³•</span><br><span class="hljs-number">10</span> <span class="hljs-comment">//å…¶ä¸­ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå®¹å™¨ç±»å‹ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ¯”è¾ƒå‡½æ•°ã€‚</span><br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br><span class="hljs-number">2</span> &#123;<br><span class="hljs-number">3</span> <span class="hljs-type">int</span> x, y;<br><span class="hljs-number">4</span> <span class="hljs-keyword">friend</span> <span class="hljs-type">bool</span> <span class="hljs-keyword">operator</span> &lt; (node a, node b)<br><span class="hljs-number">5</span> &#123;<br><span class="hljs-number">6</span> <span class="hljs-keyword">return</span> a.x &gt; b.x; <span class="hljs-comment">//ç»“æ„ä½“ä¸­ï¼Œx å°çš„ä¼˜å…ˆçº§é«˜</span><br><span class="hljs-number">7</span> &#125;<br><span class="hljs-number">8</span> &#125;;<br><span class="hljs-number">9</span> priority_queue&lt;node&gt;q;<span class="hljs-comment">//å®šä¹‰æ–¹æ³•</span><br><span class="hljs-number">10</span> <span class="hljs-comment">//åœ¨è¯¥ç»“æ„ä¸­ï¼Œy ä¸ºå€¼, x ä¸ºä¼˜å…ˆçº§ã€‚</span><br><span class="hljs-number">11</span> <span class="hljs-comment">//é€šè¿‡è‡ªå®šä¹‰ operator&lt; æ“ä½œç¬¦æ¥æ¯”è¾ƒå…ƒç´ ä¸­çš„ä¼˜å…ˆçº§ã€‚</span><br><span class="hljs-number">12</span> <span class="hljs-comment">//åœ¨é‡è½½â€&lt;â€æ—¶ï¼Œæœ€å¥½ä¸è¦é‡è½½â€&gt;â€ï¼Œå¯èƒ½ä¼šå‘ç”Ÿç¼–è¯‘é”™è¯¯</span><br></code></pre></td></tr></table></figure><h1>æ±‚é€†å…ƒçš„å››ç§æ–¹æ³•</h1><ul><li><h3 id="æ‰©å±•æ¬§å‡ é‡Œå¾—æ±‚é€†å…ƒ">æ‰©å±•æ¬§å‡ é‡Œå¾—æ±‚é€†å…ƒ</h3></li></ul><p><strong>è¿™ç§æ–¹æ³•å¸¸æ•°æœ€å°</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span>  <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">extgcd</span><span class="hljs-params">(ll a,ll b,ll&amp; d,ll&amp; x,ll&amp; y)</span></span>&#123;<br>    <span class="hljs-keyword">if</span>(!b)&#123; d=a; x=<span class="hljs-number">1</span>; y=<span class="hljs-number">0</span>;&#125;<br>    <span class="hljs-keyword">else</span>&#123; <span class="hljs-built_in">extgcd</span>(b,a%b,d,y,x); y-=x*(a/b); &#125;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">inverse</span><span class="hljs-params">(ll a,ll n)</span></span>&#123;<br>    ll d,x,y;<br>    <span class="hljs-built_in">extgcd</span>(a,n,d,x,y);<br>    <span class="hljs-keyword">return</span> d==<span class="hljs-number">1</span>?(x+n)%n:<span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><h3 id="è´¹é©¬å°å®šç†æ±‚é€†å…ƒï¼ˆ-mä¸ºç´ æ•°ï¼‰">è´¹é©¬å°å®šç†æ±‚é€†å…ƒï¼ˆ%mä¸ºç´ æ•°ï¼‰</h3></li></ul><p><strong>å¦‚æœä¸€ä¸ªæ•°mä¸ºç´ æ•°ï¼Œé‚£ä¹ˆa^(m-1)â‰¡1 (mod m)ï¼Œé‚£ä¹ˆaçš„é€†å…ƒå°±æ˜¯a^(m-2)ï¼Œè¿™æ˜¯æ ¹æ®è´¹é©¬å°å®šç†æ¨å‡ºæ¥çš„ã€‚</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span>  <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-function">ll <span class="hljs-title">pow_mod</span><span class="hljs-params">(ll x, ll n, ll mod)</span></span>&#123;<br>    ll res=<span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span>(n&gt;<span class="hljs-number">0</span>)&#123;<br>        <span class="hljs-keyword">if</span>(n&amp;<span class="hljs-number">1</span>)res=res*x%mod;<br>        x=x*x%mod;<br>        n&gt;&gt;=<span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br>ll ans = <span class="hljs-built_in">pow_mod</span>(a,m<span class="hljs-number">-2</span>,m);<br></code></pre></td></tr></table></figure><ul><li><h3 id="æ¬§æ‹‰å‡½æ•°æ±‚é€†å…ƒï¼ˆ-pä¸ä¸ºç´ æ•°ï¼‰ï¼š">æ¬§æ‹‰å‡½æ•°æ±‚é€†å…ƒï¼ˆ%pä¸ä¸ºç´ æ•°ï¼‰ï¼š</h3></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">long</span> <span class="hljs-type">long</span> <span class="hljs-title">eular</span><span class="hljs-params">(<span class="hljs-type">long</span> <span class="hljs-type">long</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> ans = n;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i*i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(n % i == <span class="hljs-number">0</span>)<br>        &#123;<br>            ans -= ans/i; <span class="hljs-comment">//ç­‰ä»·äºé€šé¡¹ï¼ŒæŠŠnä¹˜è¿›å»</span><br>            <span class="hljs-keyword">while</span>(n % i == <span class="hljs-number">0</span>) <span class="hljs-comment">//ç¡®ä¿ä¸‹ä¸€ä¸ªiæ˜¯nçš„ç´ å› æ•°</span><br>                n /= i;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(n &gt; <span class="hljs-number">1</span>)ans -= ans/n; <span class="hljs-comment">//æœ€åå¯èƒ½è¿˜å‰©ä¸‹ä¸€ä¸ªç´ å› æ•°æ²¡æœ‰é™¤</span><br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼Œæ±‚å‡ºÏ†(n)ä»¥åä¾æ—§æ˜¯mod nã€‚</strong></p><p><strong>ç„¶åæ ¹æ®a^(Ï†(n))â‰¡1 (mod n)ï¼Œå†æ‹‰ä¸ªå¿«é€Ÿå¹‚å°±è¡Œäº†ã€‚</strong></p><ul><li><h3 id="é€†å…ƒæ‰“è¡¨">é€†å…ƒæ‰“è¡¨</h3><p>â€‹      <strong>æœ€å–œæ¬¢çš„å°±æ˜¯è¿™ä¸ªäº†</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">typedef</span>  <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">5</span>;<br><span class="hljs-type">int</span> inv[N];<br> <br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">inverse</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> p)</span> </span>&#123;<br>    inv[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=<span class="hljs-number">2</span>; i&lt;=n; ++i) &#123;<br>        inv[i] = (ll) (p - p / i) * inv[p%i] % p;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><h3 id="n-çš„é€†å…ƒ">n!çš„é€†å…ƒ</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// å…ˆåˆ©ç”¨è´¹é©¬å°å®šç†æ±‚å‡º n! çš„é€†å…ƒï¼Œå†å€’æ¨æ±‚(n-1)!... çš„é€†å…ƒ</span><br>inv[N] = <span class="hljs-built_in">power</span>(fac[N], MOD - <span class="hljs-number">2</span>); <span class="hljs-comment">// fac[n]ä¸º N çš„é˜¶ä¹˜</span><br><br><span class="hljs-keyword">for</span> (i = N - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    inv[i] = <span class="hljs-number">1ll</span> * inv[i + <span class="hljs-number">1</span>] * (i + <span class="hljs-number">1</span>) % MOD;<br></code></pre></td></tr></table></figure></li></ul><h1>å®¹æ–¥åŸç†ï¼ˆå¹¶é›†ï¼‰</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">20</span>;<br><span class="hljs-type">int</span> n, m, prim[N];<br><span class="hljs-comment">/*ç»™å®šä¸€ä¸ªæ•´æ•°nå’Œmä¸ªä¸åŒçš„è´¨æ•°p1,p2,...,pm ,</span><br><span class="hljs-comment">æ±‚1ï½nä¸­èƒ½è¢«p1,p2,â€¦,pmä¸­çš„è‡³å°‘ä¸€ä¸ªæ•°æ•´é™¤çš„æ•°æœ‰å¤šå°‘ä¸ª?</span><br><span class="hljs-comment">å…¶ä¸­mâ‰¤16, n, pi â‰¤ 10*/</span><br><span class="hljs-comment">// 2 3</span><br><span class="hljs-comment">// 2 3 5</span><br><span class="hljs-comment">// 10</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calc</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">1</span> &lt;&lt; m; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> t = <span class="hljs-number">1</span>, sign = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; m; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (i &amp; <span class="hljs-number">1</span> &lt;&lt; j)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (t * prim[j] &gt; n)<br>                &#123;<br>                    t = <span class="hljs-number">0</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                t *= prim[j];<br>                sign = -sign;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (t)<br>        &#123;<br>            res += n / t * sign;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    &#123;<br>        cin &gt;&gt; prim[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-built_in">calc</span>() &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å®¹æ–¥åŸç†ï¼ˆäº¤é›†ï¼‰</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// æ´›è°·P1450ï¼Œå®ƒçš„æœ¬è´¨æ˜¯å…¨é›†å‡è¡¥é›†çš„å¹¶é›†</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> c[<span class="hljs-number">10</span>], d[<span class="hljs-number">10</span>];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-type">int</span> n;<br><span class="hljs-type">int</span> s;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    dp[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">4</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = c[i]; j &lt;= N; j++)<br>        &#123;<br>            dp[j] += dp[j - c[i]];<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calc</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">4</span>; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>, sign = <span class="hljs-number">-1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">4</span>; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (i &amp; <span class="hljs-number">1</span> &lt;&lt; (j - <span class="hljs-number">1</span>))<br>            &#123;<br>                t += c[j] * (d[j] + <span class="hljs-number">1</span>);<br>                sign = -sign;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (s &gt;= t)<br>        &#123;<br>            ans += dp[s - t] * sign;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> dp[s] - ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">4</span>; i++)<br>    &#123;<br>        cin &gt;&gt; c[i];<br>    &#125;<br>    <span class="hljs-built_in">init</span>();<br>    cin &gt;&gt; n;<br>    <span class="hljs-keyword">while</span> (n--)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">4</span>; i++)<br>        &#123;<br>            cin &gt;&gt; d[i];<br>        &#125;<br>        cin &gt;&gt; s;<br>        cout &lt;&lt; <span class="hljs-built_in">calc</span>() &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç­›æ³•æ±‚è«æ¯”ä¹Œæ–¯å‡½æ•°</h1><p><img src="https://i.328888.xyz/2023/03/17/Lei1C.png" alt="image-20230317212228262"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> p[N], vis[N], cnt;<br><span class="hljs-type">int</span> mu[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_mu</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * p[j] &lt;= n; j++)<br>        &#123;<br>            <span class="hljs-type">int</span> m = i * p[j];<br>            vis[m] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                mu[m] = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                mu[m] = -mu[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-built_in">get_mu</span>(n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cout &lt;&lt; mu[i] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>BSGSç®—æ³•</h1><p><img src="https://i.328888.xyz/2023/03/21/Tzc6A.png" alt="image-20230321153331033"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bsgs</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    a %= p, b %= p;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> m = <span class="hljs-built_in">ceil</span>(<span class="hljs-built_in">sqrt</span>(p));<br>    <span class="hljs-type">int</span> t = b;<br>    unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; hash;<br>    hash[b] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; m; j++)<br>    &#123;<br>        t = t * a % p;<br>        hash[t] = j;<br>    &#125;<br>    <span class="hljs-type">int</span> mi = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        mi = mi * a % p;<br>    &#125;<br>    t = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        t = t * mi % p;<br>        <span class="hljs-keyword">if</span> (hash.<span class="hljs-built_in">count</span>(t))<br>        &#123;<br>            <span class="hljs-keyword">return</span> i * m - hash[t];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> p, b, n;<br>    cin &gt;&gt; p &gt;&gt; b &gt;&gt; n;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-built_in">bsgs</span>(b, n, p);<br>    <span class="hljs-keyword">if</span> (ans == <span class="hljs-number">-1</span>)<br>    &#123;<br>        cout &lt;&lt; <span class="hljs-string">&quot;no solution&quot;</span> &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ‰©å±•BSGSç®—æ³•</h1><p><img src="https://i.328888.xyz/2023/03/21/ay8et.png" alt="image-20230321165933077"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// æ´›è°· 4195</span><br><span class="hljs-comment">// ç”¨äºaå’Œpä¸äº’è´¨çš„æƒ…å†µ</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> LL;<br><span class="hljs-function">LL <span class="hljs-title">gcd</span><span class="hljs-params">(LL a, LL b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> b == <span class="hljs-number">0</span> ? a : <span class="hljs-built_in">gcd</span>(b, a % b);<br>&#125;<br><span class="hljs-function">LL <span class="hljs-title">exbsgs</span><span class="hljs-params">(LL a, LL b, LL p)</span></span><br><span class="hljs-function"></span>&#123;<br>    a %= p;<br>    b %= p;<br>    <span class="hljs-keyword">if</span> (b == <span class="hljs-number">1</span> || p == <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>; <span class="hljs-comment">// x=0</span><br><br>    LL d, k = <span class="hljs-number">0</span>, A = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>    &#123;<br>        d = <span class="hljs-built_in">gcd</span>(a, p);<br>        <span class="hljs-keyword">if</span> (d == <span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">if</span> (b % d)<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ— è§£</span><br>        k++;<br>        b /= d;<br>        p /= d;<br>        A = A * (a / d) % p; <span class="hljs-comment">// æ±‚a^k/D</span><br>        <span class="hljs-keyword">if</span> (A == b)<br>            <span class="hljs-keyword">return</span> k;<br>    &#125;<br><br>    LL m = <span class="hljs-built_in">ceil</span>(<span class="hljs-built_in">sqrt</span>(p));<br>    LL t = b;<br>    unordered_map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; hash;<br>    hash[b] = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt; m; j++)<br>    &#123;<br>        t = t * a % p; <span class="hljs-comment">// æ±‚b*a^j</span><br>        hash[t] = j;<br>    &#125;<br>    LL mi = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>        mi = mi * a % p; <span class="hljs-comment">// æ±‚a^m</span><br>    t = A;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        t = t * mi % p; <span class="hljs-comment">// æ±‚(a^m)^i</span><br>        <span class="hljs-keyword">if</span> (hash.<span class="hljs-built_in">count</span>(t))<br>            <span class="hljs-keyword">return</span> i * m - hash[t] + k;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æ— è§£</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    LL a, p, b;<br>    <span class="hljs-keyword">while</span> ((<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;a, &amp;p, &amp;b) != EOF) &amp;&amp; a)<br>    &#123;<br>        LL res = <span class="hljs-built_in">exbsgs</span>(a, b, p);<br>        <span class="hljs-keyword">if</span> (res == <span class="hljs-number">-1</span>)<br>            <span class="hljs-built_in">puts</span>(<span class="hljs-string">&quot;No Solution&quot;</span>);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, res);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å¨å°”é€Šå®šç†</h1><p><img src="https://i.328888.xyz/2023/03/21/TJXxy.png" alt="image-20230321161853459"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//HDU 2973</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1000001</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mx = <span class="hljs-number">3000008</span>;<br><span class="hljs-type">int</span> s[N], p[N], vis[mx], t, n;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_prim</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> i = <span class="hljs-number">2</span>; i &lt; mx; ++i)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            <span class="hljs-keyword">if</span> ((i - <span class="hljs-number">7</span>) % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)<br>            &#123;<br>                p[(i - <span class="hljs-number">7</span>) / <span class="hljs-number">3</span>] = <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> j = i * i; j &lt; mx; j += i)<br>            &#123;<br>                vis[j] = <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">get_prim</span>();<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; ++i)<br>    &#123;<br>        s[i] = s[i - <span class="hljs-number">1</span>] + p[i];<br>    &#125;<br>    cin &gt;&gt; t;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        cin &gt;&gt; n;<br>        cout &lt;&lt; s[n] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è£´èœ€å®šç†</h1><p><img src="https://i.328888.xyz/2023/03/21/TaBlQ.png" alt="image-20230321163914077"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// luogu 4549</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">a</span><span class="hljs-params">(n + <span class="hljs-number">1</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; a[i];<br>    &#125;<br>    <span class="hljs-type">int</span> s = a[<span class="hljs-number">1</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        s = __gcd(<span class="hljs-built_in">abs</span>(a[i]), s);<br>    &#125;<br>    cout &lt;&lt; s &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>å¡ç‰¹å…°æ•°(Catalanæ•°)</h1><p><img src="https://i.328888.xyz/2023/03/21/apbTP.png" alt="image-20230321211646630"></p><p><img src="https://i.328888.xyz/2023/03/21/ap3Ac.png" alt="image-20230321211959934"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//luogu P1044</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">int</span> f[<span class="hljs-number">200</span>];<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// å…³é—­åŒæ­¥æµï¼Œæå‡cinã€coutè¯»å…¥è¾“å‡ºæ•ˆç‡</span><br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);                  <span class="hljs-comment">// è§£é™¤ cin ä¸ cout çš„ç»‘å®šï¼Œæå‡è¾“å…¥é€Ÿåº¦</span><br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    f[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        f[i] = f[i - <span class="hljs-number">1</span>] * (i * <span class="hljs-number">4</span> - <span class="hljs-number">2</span>) / (i + <span class="hljs-number">1</span>);<br>    &#125;<br>    cout &lt;&lt; f[n] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ™®é€šç”Ÿæˆå‡½æ•°</h1><p><img src="https://i.328888.xyz/2023/03/22/YKk4t.png" alt="image-20230322214258600"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">//HDU 2152</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e2</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N], b[N], c[N], d[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">clac</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= m; i++)<br>    &#123;<br>        c[i] = d[i] = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = a[<span class="hljs-number">1</span>]; i &lt;= b[<span class="hljs-number">1</span>]; i++)<br>    &#123;<br>        c[i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = a[i]; k &lt;= b[i]; k++)<br>            &#123;<br>                d[j + k] += c[j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            c[j] = d[j];<br>            d[j] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> c[m];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; n &gt;&gt; m)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            cin &gt;&gt; a[i] &gt;&gt; b[i];<br>        &#125;<br>        cout &lt;&lt; <span class="hljs-built_in">clac</span>() &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// HDU 1085</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N], b[N], c[N], d[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clac</span><span class="hljs-params">(<span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= m; i++)<br>    &#123;<br>        c[i] = d[i] = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= a[<span class="hljs-number">1</span>]; i++)<br>    &#123;<br>        c[i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">3</span>; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= b[i] * a[i] &amp;&amp; (j + k) &lt;= m; k += b[i])<br>            &#123;<br>                d[j + k] += c[j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            c[j] = d[j];<br>            d[j] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        cin &gt;&gt; a[<span class="hljs-number">1</span>] &gt;&gt; a[<span class="hljs-number">2</span>] &gt;&gt; a[<span class="hljs-number">3</span>];<br>        <span class="hljs-keyword">if</span> (a[<span class="hljs-number">1</span>] == <span class="hljs-number">0</span> &amp;&amp; a[<span class="hljs-number">2</span>] == <span class="hljs-number">0</span> &amp;&amp; a[<span class="hljs-number">3</span>] == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        b[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>, b[<span class="hljs-number">2</span>] = <span class="hljs-number">2</span>, b[<span class="hljs-number">3</span>] = <span class="hljs-number">5</span>;<br>        <span class="hljs-type">int</span> m = a[<span class="hljs-number">1</span>] * <span class="hljs-number">1</span> + a[<span class="hljs-number">2</span>] * <span class="hljs-number">2</span> + a[<span class="hljs-number">3</span>] * <span class="hljs-number">5</span>;<br>        <span class="hljs-built_in">clac</span>(m);<br>        <span class="hljs-type">int</span> x = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (x &lt;= m &amp;&amp; c[x])<br>        &#123;<br>            x++;<br>        &#125;<br>        cout &lt;&lt; x &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æŒ‡æ•°ç”Ÿæˆå‡½æ•°</h1><p><img src="https://i.328888.xyz/2023/03/28/itEjLL.png" alt="image-20230328155848886"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// HDU 1521</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e2</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">double</span> c[N], d[N];<br><span class="hljs-type">double</span> fac[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    fac[<span class="hljs-number">0</span>] = fac[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= <span class="hljs-number">10</span>; i++)<br>    &#123;<br>        fac[i] = fac[i - <span class="hljs-number">1</span>] * i;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">calc</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= m; i++)<br>    &#123;<br>        c[i] = d[i] = <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= a[<span class="hljs-number">1</span>]; i++)<br>    &#123;<br>        c[i] = <span class="hljs-number">1.0</span> / fac[i];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= a[i]; k++)<br>            &#123;<br>                d[j + k] += c[j] / fac[k];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= m; j++)<br>        &#123;<br>            c[j] = d[j];<br>            d[j] = <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> c[m] * fac[m];<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// ios::sync_with_stdio(false);</span><br>    <span class="hljs-comment">// cin.tie(0);</span><br>    <span class="hljs-comment">// cout.tie(0);</span><br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; n &gt;&gt; m)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            cin &gt;&gt; a[i];<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%.0lf\n&quot;</span>, <span class="hljs-built_in">calc</span>());<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç”Ÿæˆå‡½æ•°çš„åº”ç”¨</h1><p><img src="https://i.328888.xyz/2023/03/28/itEXwZ.png" alt="image-20230328160008438"></p><p><img src="https://i.328888.xyz/2023/03/28/itESwc.png" alt="image-20230328160023580"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// https://darkbzoj.cc/problem/3028</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">10007</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">qpow</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % mod;<br>        &#125;<br>        a = a * a % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    string a;<br>    cin &gt;&gt; a;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; a.<span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        n = (n * <span class="hljs-number">10</span> % mod + a[i] - <span class="hljs-string">&#x27;0&#x27;</span>) % mod;<br>    &#125;<br>    cout &lt;&lt; n * (n + <span class="hljs-number">1</span>) % mod * (n + <span class="hljs-number">2</span>) % <span class="hljs-function">mod * <span class="hljs-title">qpow</span><span class="hljs-params">(<span class="hljs-number">6</span>, mod - <span class="hljs-number">2</span>)</span> % mod &lt;&lt; &#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// POJ 3734</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">10007</span>;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ksm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % mod;<br>        &#125;<br>        a = a * a % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    cin &gt;&gt; t;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-type">int</span> n;<br>        cin &gt;&gt; n;<br>        cout &lt;&lt; (<span class="hljs-built_in">ksm</span>(<span class="hljs-number">4</span>, n - <span class="hljs-number">1</span>) + <span class="hljs-built_in">ksm</span>(<span class="hljs-number">2</span>, n - <span class="hljs-number">1</span>)) % mod &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1>ç‹„åˆ©å…‹é›·å·ç§¯</h1><p><img src="https://i.328888.xyz/2023/03/29/iknri8.png" alt="image-20230329161526083"></p><h1>å’Œå¼çš„å˜æ¢</h1><p><img src="https://i.328888.xyz/2023/03/29/iknRzF.png" alt="image-20230329161644649"></p><p><img src="https://i.328888.xyz/2023/03/29/ikt0oX.png" alt="image-20230329162008037"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// luogu 3455</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> mu[N];<br><span class="hljs-type">int</span> p[N], vis[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_mu</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * p[j] &lt;= n; j++)<br>        &#123;<br>            <span class="hljs-type">int</span> m = i * p[j];<br>            vis[m] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                mu[m] = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                mu[m] = -mu[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">get_mu</span>(N);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= N; i++)<br>    &#123;<br>        mu[i] += mu[i - <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &gt; m)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    n /= k, m /= k;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        ans += (mu[r] - mu[l - <span class="hljs-number">1</span>]) * (n / l) * (m / l);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-number">0</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> n;<br>    cin &gt;&gt; n;<br>    <span class="hljs-type">int</span> a, b, d;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        cin &gt;&gt; a &gt;&gt; b &gt;&gt; d;<br>        cout &lt;&lt; <span class="hljs-built_in">cal</span>(a, b, d) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://i.328888.xyz/2023/03/29/ikts7H.png" alt="image-20230329162214379"></p><p><img src="https://i.328888.xyz/2023/03/29/iktPyX.png" alt="image-20230329162315906"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// luogu 2257</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e7</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> mu[N];<br><span class="hljs-type">int</span> p[N], vis[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-type">int</span> F[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * p[j] &lt; N; j++)<br>        &#123;<br>            <span class="hljs-type">int</span> m = i * p[j];<br>            vis[m] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                mu[m] = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                mu[m] = -mu[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= cnt; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = p[i]; j &lt; N; j += p[i])<br>        &#123;<br>            F[j] += mu[j / p[i]];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        F[i] += F[i - <span class="hljs-number">1</span>];<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &gt; m)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        ans += (F[r] - F[l - <span class="hljs-number">1</span>]) * (n / l) * (m / l);<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-number">0</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> t;<br>    cin &gt;&gt; t;<br>    <span class="hljs-type">int</span> a, b;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        cin &gt;&gt; a &gt;&gt; b;<br>        cout &lt;&lt; <span class="hljs-built_in">cal</span>(a, b) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://i.328888.xyz/2023/03/29/ikWVmd.png" alt="image-20230329162407082"></p><p><img src="https://i.328888.xyz/2023/03/29/ikWAIz.png" alt="image-20230329162455494"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// luogu 3327</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> mu[N];<br><span class="hljs-type">int</span> p[N], vis[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-type">int</span> F[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * p[j] &lt; N; j++)<br>        &#123;<br>            <span class="hljs-type">int</span> m = i * p[j];<br>            vis[m] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                mu[m] = <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                mu[m] = -mu[i];<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        mu[i] += mu[i - <span class="hljs-number">1</span>];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= i; l = r + <span class="hljs-number">1</span>)<br>        &#123;<br>            r = i / (i / l);<br>            F[i] += (r - l + <span class="hljs-number">1</span>) * (i / l);<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &gt; m)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        ans += (mu[r] - mu[l - <span class="hljs-number">1</span>]) * F[n / l] * F[m / l];<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-number">0</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> t;<br>    cin &gt;&gt; t;<br>    <span class="hljs-type">int</span> a, b;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        cin &gt;&gt; a &gt;&gt; b;<br>        cout &lt;&lt; <span class="hljs-built_in">cal</span>(a, b) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>è«æ¯”ä¹Œæ–¯åæ¼”</h1><p><img src="https://i.328888.xyz/2023/04/20/iGFAOp.png" alt="image-20230420181457681"></p><p><img src="https://i.328888.xyz/2023/04/20/iGFt03.png" alt="image-20230420181725324"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// luogu 1829</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e7</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">20101009</span>;<br><span class="hljs-type">int</span> vis[N], p[N], mu[N], S[N], cnt;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            p[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * p[j] &lt; N; j++)<br>        &#123;<br>            vis[i * p[j]] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % p[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            mu[i * p[j]] = -mu[i];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        S[i] = (S[i - <span class="hljs-number">1</span>] + mu[i] * i * i % mod + mod) % mod;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">G</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> (n * (n + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> % mod) * (m * (m + <span class="hljs-number">1</span>) / <span class="hljs-number">2</span> % mod) % mod;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">F</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        ans = (ans + (S[r] - S[l - <span class="hljs-number">1</span>]) * <span class="hljs-built_in">G</span>(n / l, m / l) % mod + mod) % mod;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">cal</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &gt; m)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        ans = (ans + (r - l + <span class="hljs-number">1</span>) * (l + r) / <span class="hljs-number">2</span> % mod * <span class="hljs-built_in">F</span>(n / l, m / l) % mod) % mod;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    cout &lt;&lt; <span class="hljs-built_in">cal</span>(n, m) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://i.328888.xyz/2023/04/20/iGFl3Z.png" alt="image-20230420181753495"></p><p><img src="https://i.328888.xyz/2023/04/20/iGFmSA.png" alt="image-20230420181907970"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// https://www.luogu.com.cn/problem/P3704</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">int</span> n, m;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> prime[N], vis[N], mu[N];<br><span class="hljs-type">int</span> f[N], F[N];<br><span class="hljs-type">int</span> g[N];<br><span class="hljs-type">int</span> cnt;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">ksm</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % mod;<br>        &#125;<br>        a = a * a % mod;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    mu[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            prime[++cnt] = i;<br>            mu[i] = <span class="hljs-number">-1</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; i * prime[j] &lt; N; j++)<br>        &#123;<br>            vis[i * prime[j]] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % prime[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>            mu[i * prime[j]] = -mu[i];<br>        &#125;<br>    &#125;<br>    f[<span class="hljs-number">1</span>] = g[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    F[<span class="hljs-number">0</span>] = F[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        f[i] = (f[i - <span class="hljs-number">1</span>] + f[i - <span class="hljs-number">2</span>]) % mod;<br>        g[i] = <span class="hljs-built_in">ksm</span>(f[i], mod - <span class="hljs-number">2</span>);<br>        F[i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i; j &lt; N; j += i)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (mu[j / i])<br>            &#123;<br>                F[j] = F[j] * (mu[j / i] == <span class="hljs-number">1</span> ? f[i] : g[i]) % mod;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++)<br>    &#123;<br>        F[i] = F[i - <span class="hljs-number">1</span>] * F[i] % mod;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">calc</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n &gt; m)<br>    &#123;<br>        <span class="hljs-built_in">swap</span>(n, m);<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>, r; l &lt;= n; l = r + <span class="hljs-number">1</span>)<br>    &#123;<br>        r = <span class="hljs-built_in">min</span>(n / (n / l), m / (m / l));<br>        <span class="hljs-type">int</span> s = F[r] * <span class="hljs-built_in">ksm</span>(F[l - <span class="hljs-number">1</span>], mod - <span class="hljs-number">2</span>) % mod;<br>        ans = ans * <span class="hljs-built_in">ksm</span>(s, (n / l) * (m / l)) % mod;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> t;<br>    cin &gt;&gt; t;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        cin &gt;&gt; n &gt;&gt; m;<br>        cout &lt;&lt; <span class="hljs-built_in">calc</span>(n, m) &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>æ¬§æ‹‰å®šç†å¹‚çº§æ•°å–æ¨¡</h1><p><img src="https://i.328888.xyz/2023/04/26/ivORwc.png" alt="img"></p><h1>çŸ©é˜µå¿«é€Ÿå¹‚</h1><p><img src="https://i.328888.xyz/2023/05/04/iPswgQ.png" alt="image-20230504204621558"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> int long long</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br><span class="hljs-type">int</span> n, k;<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">matrix</span><br>&#123;<br>    <span class="hljs-type">int</span> c[<span class="hljs-number">101</span>][<span class="hljs-number">101</span>];<br>    <span class="hljs-built_in">matrix</span>() &#123; <span class="hljs-built_in">memset</span>(c, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(c)); &#125;<br>&#125; A, ans;<br>matrix <span class="hljs-keyword">operator</span>*(matrix &amp;x, matrix &amp;y)<br>&#123;<br>    matrix t;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= n; k++)<br>            &#123;<br>                t.c[i][j] = (t.c[i][j] + x.c[i][k] * y.c[k][j]) % mod;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> t;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">quickpow</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">// åˆå§‹åŒ–å•ä½çŸ©é˜µ</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        ans.c[i][i] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (k)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (k &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * A;<br>        &#125;<br>        A = A * A;<br>        k &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">signed</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; k;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>        &#123;<br>            cin &gt;&gt; A.c[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">quickpow</span>(k);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= n; j++)<br>        &#123;<br>            cout &lt;&lt; ans.c[i][j] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>        &#125;<br>        cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h1&gt;&lt;strong&gt;æ ‘çŠ¶æ•°ç»„æ±‚é€†åºå¯¹&lt;/strong&gt;&lt;/h1&gt;
&lt;p&gt;[&lt;a href=&quot;https://vjudge.net/contest/515986#problem/C&quot;&gt;https://vjudge.net/contest/515986#</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>æ•°ä½DP</title>
    <link href="https://www.xwybq.top/posts/a3781d1f/"/>
    <id>https://www.xwybq.top/posts/a3781d1f/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:08:15.706Z</updated>
    
    <content type="html"><![CDATA[<h3 id="æ•°å­—æ¸¸æˆ"><strong>æ•°å­—æ¸¸æˆ</strong></h3><p>[<a href="https://vjudge.net/problem/LibreOJ-10164">https://vjudge.net/problem/LibreOJ-10164</a>]:</p><p><strong>é¢˜ç›®å¤§æ„ï¼š</strong><br><strong>ç§‘åé‡Œæœ€è¿‘å¾ˆæµè¡Œæ•°å­—æ¸¸æˆã€‚</strong></p><p><strong>æŸäººå‘½åäº†ä¸€ç§ä¸é™æ•°ï¼Œè¿™ç§æ•°å­—å¿…é¡»æ»¡è¶³ä»å·¦åˆ°å³å„ä½æ•°å­—å‘ˆéä¸‹é™å…³ç³»ï¼Œå¦‚ 123ï¼Œ446ã€‚</strong></p><p><strong>ç°åœ¨å¤§å®¶å†³å®šç©ä¸€ä¸ªæ¸¸æˆï¼ŒæŒ‡å®šä¸€ä¸ªæ•´æ•°é—­åŒºé—´ [a,b]ï¼Œé—®è¿™ä¸ªåŒºé—´å†…æœ‰å¤šå°‘ä¸ªä¸é™æ•°ã€‚</strong></p><p><strong>è¾“å…¥æ ¼å¼</strong><br><strong>è¾“å…¥åŒ…å«å¤šç»„æµ‹è¯•æ•°æ®ã€‚</strong></p><p><strong>æ¯ç»„æ•°æ®å ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° a å’Œ bã€‚</strong></p><p><strong>è¾“å‡ºæ ¼å¼</strong><br><strong>æ¯è¡Œç»™å‡ºä¸€ç»„æµ‹è¯•æ•°æ®çš„ç­”æ¡ˆï¼Œå³ [a,b] ä¹‹é—´æœ‰å¤šå°‘ä¸é™æ•°ã€‚</strong></p><p><strong>æ•°æ®èŒƒå›´</strong><br><strong>1â‰¤ a â‰¤ b â‰¤2^31âˆ’1</strong></p><p><strong>è§£é¢˜æ€è·¯ï¼š</strong><br><strong>f[i][j] æ•°ç»„ä»£è¡¨ç€æœ€é«˜ä½æ˜¯jå¹¶ä¸”ä¸€å…±æœ‰iä½ä¸é™æ•°çš„é›†åˆ</strong><br><strong>f[i][j] = f[i-1][j] + f[i-1][j+1] + f[i-1][j+2] +â€¦+ f[i-1][9];</strong></p><p><strong>æŒ‰ç…§æ•°ä½DPåˆ†ææ­¥éª¤ï¼š å‡è®¾æˆ‘ä»¬å½“å‰æšä¸¾åˆ°ç¬¬iä½ï¼Œä¸”ç¬¬iä½ä¸Šçš„æ•°å­—æ˜¯xï¼Œé‚£ä¹ˆç°åœ¨å¯¹äºç­”æ¡ˆçš„ç¬¬iä½æ•°å­—jæ¥è¯´ï¼Œå¯ä»¥å¡«ä¸¤ç±»æ•°å­—ï¼š</strong></p><p><strong>1.j å–0~x-1 é‚£ä¹ˆres += f[i+1][j];</strong></p><p><strong>2.j å– x lastè®°å½•xï¼Œå†æšä¸¾ä¸‹ä¸€ä½</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">12</span>;<br><span class="hljs-type">int</span> a[N];    <span class="hljs-comment">//å­˜æ•´æ•°çš„æ¯ä¸€ä½æ•°å­—</span><br><span class="hljs-type">int</span> f[N][N]; <span class="hljs-comment">// f[i][j]è¡¨ç¤ºä¸€å…±æœ‰iä½ï¼Œä¸”æœ€é«˜ä¸ºæ•°å­—æ˜¯jçš„ä¸é™æ•°çš„ä¸ªæ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span>  <span class="hljs-comment">//é¢„å¤„ç†ä¸é™æ•°çš„ä¸ªæ•°</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">9</span>; i++)<br>    &#123;<br>        f[<span class="hljs-number">1</span>][i] = <span class="hljs-number">1</span>; <span class="hljs-comment">//ä¸€ä½æ•°å°±æ˜¯1</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++) <span class="hljs-comment">//é˜¶æ®µï¼šæšä¸¾ä½æ•°</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">9</span>; j++) <span class="hljs-comment">//çŠ¶æ€ï¼šæšä¸¾æœ€é«˜ä½</span><br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = j; k &lt;= <span class="hljs-number">9</span>; k++) <span class="hljs-comment">//å†³ç­–ï¼šæšä¸¾æ¬¡é«˜ä½</span><br>            &#123;<br>                f[i][j] += f[i - <span class="hljs-number">1</span>][k]; <span class="hljs-comment">//ç´¯åŠ æ‰€æœ‰æ–¹æ¡ˆæ•°</span><br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dp</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-comment">//ç‰¹åˆ¤ï¼Œn=0å°±ä¸€ä¸ªæ•°å­—</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n)<br>    &#123;<br>        a[++cnt] = n % <span class="hljs-number">10</span>; <span class="hljs-comment">//ä»ä½åˆ°é«˜å­˜æ¯ä¸€ä½æ•°</span><br>        n /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> last = <span class="hljs-number">0</span>;                  <span class="hljs-comment">// lastè¡¨ç¤ºä¸Šä¸€ä½æ•°å­—</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = cnt; i &gt;= <span class="hljs-number">1</span>; i--) <span class="hljs-comment">//ä»é«˜åˆ°ä½ä¾æ¬¡æšä¸¾</span><br>    &#123;<br>        <span class="hljs-type">int</span> now = a[i];                  <span class="hljs-comment">// nowè¡¨ç¤ºå½“å‰ä½æ•°å­—</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = last; j &lt; now; j++) <span class="hljs-comment">//æšä¸¾å½“å‰ä¸ºå¯å¡«å…¥çš„æ•°å­—</span><br>        &#123;<br>            ans += f[i][j]; <span class="hljs-comment">//ç´¯åŠ æ–¹æ¡ˆæ•°</span><br>        &#125;<br>        <span class="hljs-keyword">if</span> (now &lt; last) <span class="hljs-comment">//è‹¥æ¯”ä¸Šä¸€ä½å°ï¼Œç›´æ¥é€€å‡º</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        last = now; <span class="hljs-comment">//æ›´æ–°lastçš„å€¼</span><br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) <span class="hljs-comment">//èµ°åˆ°a1æ—¶ï¼Œæœ€åä¼šå°‘åŠ ä¸€ä¸ªå³è¾¹ç•Œæ•°ï¼Œè¦åŠ ä¸€</span><br>        &#123;<br>            ans++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> l, r;<br>    <span class="hljs-keyword">while</span> (cin &gt;&gt; l &gt;&gt; r)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">dp</span>(r) - <span class="hljs-built_in">dp</span>(l - <span class="hljs-number">1</span>));<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="windyæ•°"><strong>windyæ•°</strong></h3><p>[<a href="https://www.luogu.com.cn/problem/P2657">https://www.luogu.com.cn/problem/P2657</a>]:</p><p><strong>é¢˜æ„ï¼šwindyå®šä¹‰äº†ä¸€ç§windyæ•°ã€‚</strong></p><p><strong>ä¸å«å‰å¯¼é›¶ä¸”ç›¸é‚»ä¸¤ä¸ªæ•°å­—ä¹‹å·®è‡³å°‘ä¸º2çš„æ­£æ•´æ•°è¢«ç§°ä¸ºwindyæ•°ã€‚</strong></p><p><strong>windyæƒ³çŸ¥é“ï¼Œåœ¨A<em>å’ŒB</em>ä¹‹é—´ï¼ŒåŒ…æ‹¬A<em>å’ŒB</em>ï¼Œæ€»å…±æœ‰å¤šå°‘ä¸ªwindyæ•°ï¼Ÿ</strong></p><p><strong>Input</strong></p><p><strong>åŒ…å«ä¸¤ä¸ªæ•´æ•°ï¼ŒAï¼ŒBã€‚</strong></p><p><strong>æ»¡è¶³1â‰¤<em>A</em>â‰¤<em>B</em>â‰¤2000000000 .</strong></p><p><strong>Sample 1</strong></p><table><thead><tr><th><strong>Input</strong></th><th><strong>Output</strong></th></tr></thead><tbody><tr><td><strong><code>1 10</code></strong></td><td><strong><code>9</code></strong></td></tr></tbody></table><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">12</span>;<br><span class="hljs-type">int</span> a[N];    <span class="hljs-comment">//å­˜æ•´æ•°çš„æ¯ä¸€ä½æ•°å­—</span><br><span class="hljs-type">int</span> f[N][N]; <span class="hljs-comment">// f[i][j]è¡¨ç¤ºä¸€å…±æœ‰iä½ï¼Œä¸”æœ€é«˜ä¸ºæ•°å­—æ˜¯jçš„ä¸é™æ•°çš„ä¸ªæ•°</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span>  <span class="hljs-comment">//é¢„å¤„ç†ä¸é™æ•°çš„ä¸ªæ•°</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">9</span>; i++)<br>    &#123;<br>        f[<span class="hljs-number">1</span>][i] = <span class="hljs-number">1</span>; <span class="hljs-comment">//ä¸€ä½æ•°å°±æ˜¯1</span><br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt; N; i++) <span class="hljs-comment">//é˜¶æ®µï¼šæšä¸¾ä½æ•°</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">9</span>; j++) <span class="hljs-comment">//çŠ¶æ€ï¼šæšä¸¾æœ€é«˜ä½</span><br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">0</span>; k &lt;= <span class="hljs-number">9</span>; k++) <span class="hljs-comment">//å†³ç­–ï¼šæšä¸¾æ¬¡é«˜ä½</span><br>            &#123;<br>                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(j - k) &gt;= <span class="hljs-number">2</span>)<br>                &#123;<br>                    f[i][j] += f[i - <span class="hljs-number">1</span>][k];<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dp</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-comment">//ç‰¹åˆ¤ï¼Œn=0å°±ä¸€ä¸ªæ•°å­—</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n)<br>    &#123;<br>        a[++cnt] = n % <span class="hljs-number">10</span>; <span class="hljs-comment">//ä»ä½åˆ°é«˜å­˜æ¯ä¸€ä½æ•°</span><br>        n /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> last = <span class="hljs-number">-2</span>;                 <span class="hljs-comment">// lastè¡¨ç¤ºä¸Šä¸€ä½æ•°å­—</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = cnt; i &gt;= <span class="hljs-number">1</span>; i--) <span class="hljs-comment">//ä»é«˜åˆ°ä½ä¾æ¬¡æšä¸¾</span><br>    &#123;<br>        <span class="hljs-type">int</span> now = a[i];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = (i == cnt); j &lt; now; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(j - last) &gt;= <span class="hljs-number">2</span>)<br>            &#123;<br>                ans += f[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">abs</span>(now - last) &lt; <span class="hljs-number">2</span>) <span class="hljs-comment">//è‹¥æ¯”ä¸Šä¸€ä½å°ï¼Œç›´æ¥é€€å‡º</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        last = now; <span class="hljs-comment">//æ›´æ–°lastçš„å€¼</span><br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span>) <span class="hljs-comment">//èµ°åˆ°a1æ—¶ï¼Œæœ€åä¼šå°‘åŠ ä¸€ä¸ªå³è¾¹ç•Œæ•°ï¼Œè¦åŠ ä¸€</span><br>        &#123;<br>            ans++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">//å‰é¢ç®—çš„éƒ½æ˜¯cntä½çš„</span><br>    <span class="hljs-comment">//éœ€è¦åŠ ä¸Šå°äºcntä½çš„æ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; cnt; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">9</span>; j++) <span class="hljs-comment">//ä¸èƒ½æœ‰å‰å¯¼0</span><br>        &#123;<br>            ans += f[i][j];<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> l, r;<br>    cin &gt;&gt; l &gt;&gt; r;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">dp</span>(r) - <span class="hljs-built_in">dp</span>(l - <span class="hljs-number">1</span>));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="acwing1081ï¼šåº¦çš„æ•°é‡"><strong>acwing1081ï¼šåº¦çš„æ•°é‡</strong></h3><p><img src="https://img-blog.csdnimg.cn/20201006182133577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQzNjE5Njgw,size_16,color_FFFFFF,t_70#pic_center" alt="img"></p><p><img src="https://pic1.imgdb.cn/item/635a4bcb16f2c2beb1f9bebc.png" alt="image-20220920091633855"></p><p><img src="https://pic1.imgdb.cn/item/635a4bf616f2c2beb1fa2b78.png" alt="image-20220920094600561.png"></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">35</span>;<br><span class="hljs-type">int</span> a[N];    <span class="hljs-comment">//æŠŠbè¿›åˆ¶çš„æ¯ä¸€ä½æ•°å­˜èµ·æ¥</span><br><span class="hljs-type">int</span> f[N][N]; <span class="hljs-comment">// f[i][j]è¡¨ç¤ºåœ¨iä¸ªä½ç½®ä¸Šï¼Œæ”¾ç½®jä¸ª1çš„ç»„åˆæ•°</span><br><span class="hljs-type">int</span> k, b;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; N; i++) <span class="hljs-comment">//é¢„å¤„ç†ç»„åˆæ•°</span><br>    &#123;<br>        f[i][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= i; j++)<br>        &#123;<br>            f[i][j] += f[i - <span class="hljs-number">1</span>][j] + f[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>];<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// c(j,i)=c(j-1,i-1)+c(j,i-1);</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">dp</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (n == <span class="hljs-number">0</span>) <span class="hljs-comment">//ç‰¹åˆ¤ï¼Œn==0è¿”å›0</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n) <span class="hljs-comment">//æŠŠbè¿›åˆ¶æ•°çš„æ¯ä¸€ä½å­˜å…¥æ•°ç»„</span><br>    &#123;<br>        a[++cnt] = n % b;<br>        n /= b;<br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>, last = <span class="hljs-number">0</span>;         <span class="hljs-comment">// lastè¡¨ç¤ºç¬¬iä½ä¹‹å‰æ”¾ç½®çš„1</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = cnt; i &gt;= <span class="hljs-number">1</span>; i--) <span class="hljs-comment">//ä»é«˜ä½åˆ°ä½ä½æšä¸¾</span><br>    &#123;<br>        <span class="hljs-type">int</span> x = a[i];<br>        <span class="hljs-keyword">if</span> (x) <span class="hljs-comment">//ç¬¬iä½==0æ—¶ï¼Œç›´æ¥è·³è¿‡ï¼Œæšä¸¾ä¸‹ä¸€ä½</span><br>        &#123;<br>            ans += f[i - <span class="hljs-number">1</span>][k - last]; <span class="hljs-comment">//ç¬¬iä½æ”¾0</span><br>            <span class="hljs-keyword">if</span> (x &gt; <span class="hljs-number">1</span>)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (k - (last + <span class="hljs-number">1</span>) &gt;= <span class="hljs-number">0</span>)<br>                &#123;<br>                    ans += f[i - <span class="hljs-number">1</span>][k - (last + <span class="hljs-number">1</span>)]; <span class="hljs-comment">//ç¬¬iä½æ”¾1</span><br>                    <span class="hljs-keyword">break</span>;                           <span class="hljs-comment">//ç¬¬iä½æ”¾å¤§äº1çš„æ•°ï¼Œä¸ç¬¦åˆé¢˜æ„ï¼Œç›´æ¥é€€å‡º</span><br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-comment">//ç¬¬iä½ç­‰äº1æ—¶ï¼Œåé¢ä¸èƒ½ç”¨ç»„åˆæ•°è®¡ç®—ï¼Œæ¯”å¦‚65è½¬æ¢æˆ4è¿›åˆ¶æ˜¯1001ï¼Œå¦‚æœç”¨ç»„åˆæ•°è®¡ç®—ä¼šå‡ºç°æ¯”65å¤§çš„å€¼ï¼Œæ‰€ä»¥åº”ç»§ç»­å‘ä¸‹æšä¸¾</span><br>            &#123;<br>                last += <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">if</span> (last &gt; k) <span class="hljs-comment">// 1çš„ä¸ªæ•°å¤šäºkï¼Œåˆ™break</span><br>                &#123;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (i == <span class="hljs-number">1</span> &amp;&amp; last == k) <span class="hljs-comment">//åˆ¤æ–­æœ«ä½æ˜¯å¦ç¬¦åˆé¢˜æ„</span><br>        &#123;<br>            ans++;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> l, r;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;l, &amp;r);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;k);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;b);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">dp</span>(r) - <span class="hljs-built_in">dp</span>(l - <span class="hljs-number">1</span>));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;æ•°å­—æ¸¸æˆ&quot;&gt;&lt;strong&gt;æ•°å­—æ¸¸æˆ&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;[&lt;a href=&quot;https://vjudge.net/problem/LibreOJ-10164&quot;&gt;https://vjudge.net/problem/LibreOJ-10164&lt;/a&gt;</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
    <category term="DP" scheme="https://www.xwybq.top/tags/DP/"/>
    
  </entry>
  
  <entry>
    <title>ç‰›å®¢å°ç™½æœˆèµ›60</title>
    <link href="https://www.xwybq.top/posts/ec03080e/"/>
    <id>https://www.xwybq.top/posts/ec03080e/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:08:15.713Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-å°ç«¹ä¸å¦ˆå¦ˆ"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/A">A. å°ç«¹ä¸å¦ˆå¦ˆ</a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong>ay+b=x, å·²çŸ¥a,b,x,æ±‚y</strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>æ˜¾ç„¶å°ç«¹çš„å¹´é¾„ä¸º <img src="https://www.nowcoder.com/equation?tex=%5Cfrac%7Bx-b%7D%7Ba%7D" alt="img"> ç›´æ¥è¾“å‡ºå³å¯ã€‚</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> a, b, x;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld%lld&quot;</span>, &amp;a, &amp;b, &amp;x);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, (x - b) / a);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="B-èµ°ä¸¢çš„å°ç«¹"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/B">B.èµ°ä¸¢çš„å°ç«¹</a></strong></h2><ul><li><p><strong>é¢˜æ„</strong></p><ul><li><p><strong>æœ‰ n ä¸ªå‡ºå£ï¼Œæ¯ä¸ªå‡ºå£éƒ½è¿ç€ m ä¸ªæˆ¿é—´å…¶ä¸­ä¸€ä¸ªï¼Œæœ‰ q æ¬¡è¯¢é—®ï¼Œæ¯æ¬¡éƒ½é—®å¦‚æœä¸èƒ½å» x å·æˆ¿é—´çš„è¯ï¼Œæœ‰å¤šå°‘å‡ºå£èƒ½èµ°ã€‚</strong></p><p><strong>1â‰¤n,m,qâ‰¤105</strong></p></li></ul></li><li><p><strong>é¢˜è§£</strong></p><ul><li><strong>è®°å½•æ¯ä¸ªæˆ¿é—´æœ‰å¤šå°‘ä¸ªå‡ºå£è¿æ¥è®°ä¸º<img src="https://www.nowcoder.com/equation?tex=cnt" alt="cnt">,æ¯æ¬¡è¯¢é—®è¾“å‡º<img src="https://www.nowcoder.com/equation?tex=n-cnt_x" alt="n-cnt_x">å³å¯ã€‚</strong></li></ul></li><li><p><strong>ä»£ç </strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m, q;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;q);<br>    map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; mp;<br>    <span class="hljs-comment">// set&lt;int&gt; s;</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        mp[a[i]]++;<br>        <span class="hljs-comment">// s.insert(a[i]);</span><br>    &#125;<br>    <span class="hljs-keyword">while</span> (q--)<br>    &#123;<br>        <span class="hljs-type">int</span> ans;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;ans);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, n - mp[ans]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="C-å°ç«¹å…³ç¦é—­"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/C">C.å°ç«¹å…³ç¦é—­</a></strong></h2><ul><li><p><strong>é¢˜æ„</strong></p><ul><li><strong>æœ‰ n ä¸ªç»³å­ï¼Œç¬¬ i æ¡ç»³å­é•¿åº¦ä¸º ai ï¼Œå½“ä½ ä½¿ç”¨ç¬¬ i æ¡ç»³å­çš„æ—¶å€™ï¼Œåé¢çš„ k æ¡ç»³å­å°±éƒ½ä¸èƒ½ç”¨äº†ï¼Œé—®èƒ½æ‹¿åˆ°çš„æ‰€æœ‰ç»³å­é•¿åº¦æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘ã€‚</strong></li></ul></li><li><p><strong>é¢˜è§£</strong></p><ul><li><p><strong>ç”¨ä¸€ä¸ª <img src="https://www.nowcoder.com/equation?tex=O(n%5E2)" alt="img"> çš„ <img src="https://www.nowcoder.com/equation?tex=dp" alt="dp"> å³å¯è§£å†³è¯¥é—®é¢˜ã€‚</strong><br><strong>è®¾ <img src="https://www.nowcoder.com/equation?tex=dp_i" alt="dp_i"> ä¸ºé€‰æ‹©å‰ <img src="https://www.nowcoder.com/equation?tex=i" alt="i"> ä¸ªæ•°ç»³å­çš„æœ€å¤§é•¿åº¦ã€‚</strong></p><p><strong>å¾ˆå®¹æ˜“èƒ½åˆ—å‡º <img src="https://www.nowcoder.com/equation?tex=dp_i%20%3D%20%5Cmax_%7Bj%3D1%7D%5E%7Bi-k-1%7Ddp_j%2Ba_i" alt="img"> ã€‚</strong></p><p><strong>ç”±äºå…è®¸ <img src="https://www.nowcoder.com/equation?tex=n%5E2" alt="img"> é€šè¿‡,ç›´æ¥æ¨¡æ‹Ÿè¯¥è¿‡ç¨‹å³ã€‚æœ€åçš„ç­”æ¡ˆä¸º<img src="https://www.nowcoder.com/equation?tex=%5Cmax_%7Bi%3D1%7D%5E%7Bn%7Ddp_i" alt="img">ã€‚</strong></p></li></ul></li><li><p><strong>ä»£ç 1 ä»å‰å¾€åæ¨</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, k;<br><span class="hljs-type">int</span> a[<span class="hljs-number">2005</span>];<br><span class="hljs-type">int</span> dp[<span class="hljs-number">2005</span>];<br><span class="hljs-type">int</span> ans;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    cin &gt;&gt; n &gt;&gt; k;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>    &#123;<br>        cin &gt;&gt; a[i];<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; ++i)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, i - k - <span class="hljs-number">1</span>); ++j)<br>        &#123;<br>            dp[i] = <span class="hljs-built_in">max</span>(dp[j] + a[i], dp[i]);<br>            ans = <span class="hljs-built_in">max</span>(ans, dp[i]);<br>        &#125;<br>    cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä»£ç 2 ä»åå¾€å‰æ¨</strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span> </span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, k;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;k);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>    &#125;<br>    <span class="hljs-comment">// dp[0][0] = dp[0][1] = 0;</span><br>    <span class="hljs-comment">// dp[1][1] = a[1];</span><br>    <span class="hljs-comment">// dp[1][0] = 0;</span><br>    <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= <span class="hljs-number">1</span>; i--)<br>    &#123;<br>        dp[i] = <span class="hljs-built_in">max</span>(dp[i + <span class="hljs-number">1</span>], dp[<span class="hljs-built_in">min</span>(n + <span class="hljs-number">1</span>, i + k + <span class="hljs-number">1</span>)] + a[i]);<br>        maxn = <span class="hljs-built_in">max</span>(maxn, dp[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, maxn);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="D-æ¸¸æˆè´­ä¹°ï¼"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/D">D. æ¸¸æˆè´­ä¹°ï¼</a></strong></h2><ul><li><p><strong>é¢˜æ„</strong></p><ul><li><strong>æœ‰ä¸€ä¸ª nâˆ—m çš„çŸ©é˜µï¼ŒçŸ©é˜µä¸Šæœ‰æ•°å€¼ã€‚ç©å®¶å½“å‰åˆ†æ•°ä¸º 0 ï¼Œæƒ³ä» (sx,sy) èµ°åˆ° (ex,ey) ï¼Œæ¯ä¸€æ­¥éƒ½å¯ä»¥å°†è‡ªå·±çš„åˆ†æ•°æ›´æ–°ä¸ºå½“å‰æ‰€åœ¨ä½ç½®çš„æ•°å€¼ã€‚é—®æƒ³ä»(sx,sy) èµ°åˆ° (ex,ey) ï¼Œä¸”åˆ†æ•°è¶…è¿‡ x éœ€è¦çš„æœ€å°æ­¥æ•°æ˜¯å¤šå°‘ã€‚</strong></li></ul></li><li><p><strong>é¢˜è§£</strong></p><ul><li><strong>ä»èµ·ç‚¹å¼€å§‹ <img src="https://www.nowcoder.com/equation?tex=bfs" alt="bfs"> æ±‚å‡ºèµ·ç‚¹åˆ°æ¯ä¸ªä½ç½®çš„æœ€çŸ­è·¯,ä»ç»ˆç‚¹å¼€å§‹åŒæ ·è·‘ä¸€é <img src="https://www.nowcoder.com/equation?tex=bfs" alt="bfs"> æ±‚å‡ºç»ˆç‚¹åˆ°æ¯ä¸ªä½ç½®çš„æœ€çŸ­è·¯.å¯¹äºæ¯ä¸€ä¸ªæ‹¥æœ‰åˆºæ¿€åº¦é«˜äº <img src="https://www.nowcoder.com/equation?tex=x" alt="x"> æ¸¸æˆçš„åº—é“º <img src="https://www.nowcoder.com/equation?tex=p" alt="p"> ,è¦ç»è¿‡è¯¥åº—é“ºçš„ç­”æ¡ˆå³ä¸ºèµ·ç‚¹åˆ° <img src="https://www.nowcoder.com/equation?tex=p" alt="p"> çš„æœ€çŸ­è·¯,åŠ ä¸Šç»ˆç‚¹åˆ° <img src="https://www.nowcoder.com/equation?tex=p" alt="p"> çš„æœ€çŸ­è·¯</strong></li></ul></li><li><p><strong>ä»£ç </strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> GCC optimize(2)</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N][N];<br><span class="hljs-type">int</span> ans;<br><span class="hljs-type">int</span> n, m;<br><span class="hljs-type">int</span> sx, sy, ex, ey;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br><span class="hljs-type">int</span> dx[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">-1</span>&#125;;<br><span class="hljs-type">int</span> dy[] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">-1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>&#125;;<br><span class="hljs-type">int</span> vis[N][N];<br><span class="hljs-type">int</span> xx, yy;<br><span class="hljs-type">int</span> dis1[N][N];<br><span class="hljs-type">int</span> dis2[N][N];<br><span class="hljs-keyword">struct</span> <span class="hljs-title class_">node</span><br>&#123;<br>    <span class="hljs-type">int</span> x, y, cnt;<br>&#125;;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs1</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    dis1[x][y] = <span class="hljs-number">0</span>;<br>    queue&lt;node&gt; q;<br>    q.<span class="hljs-built_in">push</span>(&#123;x, y, <span class="hljs-number">0</span>&#125;);<br>    vis[x][y] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        node t = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> xx = t.x + dx[i];<br>            <span class="hljs-type">int</span> yy = t.y + dy[i];<br>            <span class="hljs-keyword">if</span> (vis[xx][yy] == <span class="hljs-number">0</span> &amp;&amp; xx &gt;= <span class="hljs-number">1</span> &amp;&amp; xx &lt;= n &amp;&amp; yy &gt;= <span class="hljs-number">1</span> &amp;&amp; yy &lt;= m &amp;&amp; a[xx][yy] != <span class="hljs-number">-1</span>)<br>            &#123;<br>                vis[xx][yy] = <span class="hljs-number">1</span>;<br>                node p;<br>                p.x = xx;<br>                p.y = yy;<br>                p.cnt = t.cnt + <span class="hljs-number">1</span>;<br>                dis1[xx][yy] = p.cnt;<br>                q.<span class="hljs-built_in">push</span>(p);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">bfs2</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    dis2[x][y] = <span class="hljs-number">0</span>;<br>    queue&lt;node&gt; q;<br>    q.<span class="hljs-built_in">push</span>(&#123;x, y, <span class="hljs-number">0</span>&#125;);<br>    vis[x][y] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        node t = q.<span class="hljs-built_in">front</span>();<br>        q.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-type">int</span> xx = t.x + dx[i];<br>            <span class="hljs-type">int</span> yy = t.y + dy[i];<br>            <span class="hljs-keyword">if</span> (vis[xx][yy] == <span class="hljs-number">0</span> &amp;&amp; xx &gt;= <span class="hljs-number">1</span> &amp;&amp; xx &lt;= n &amp;&amp; yy &gt;= <span class="hljs-number">1</span> &amp;&amp; yy &lt;= m &amp;&amp; a[xx][yy] != <span class="hljs-number">-1</span>)<br>            &#123;<br>                vis[xx][yy] = <span class="hljs-number">1</span>;<br>                node p;<br>                p.x = xx;<br>                p.y = yy;<br>                p.cnt = t.cnt + <span class="hljs-number">1</span>;<br>                dis2[xx][yy] = p.cnt;<br>                q.<span class="hljs-built_in">push</span>(p);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;ans);<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d%d&quot;</span>, &amp;sx, &amp;sy, &amp;ex, &amp;ey);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i][j]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">memset</span>(vis, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(vis));<br>    <span class="hljs-built_in">bfs1</span>(sx, sy);<br>    <span class="hljs-built_in">memset</span>(vis, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(vis));<br>    <span class="hljs-built_in">bfs2</span>(ex, ey);<br>    <span class="hljs-type">int</span> minn = <span class="hljs-number">0x3f3f3f3f</span>;<br>    <span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (a[i][j] &gt; ans)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (dis1[i][j] == <span class="hljs-number">0</span> || dis2[i][j] == <span class="hljs-number">0</span>)<br>                &#123;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">else</span><br>                &#123;<br>                    flag = <span class="hljs-number">1</span>;<br>                    minn = <span class="hljs-built_in">min</span>(minn, dis1[i][j] + dis2[i][j]);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, minn);<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="E-å¯»æ‰¾å°ç«¹ï¼"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/E">E.å¯»æ‰¾å°ç«¹ï¼</a></strong></h2><ul><li><p><strong>é¢˜æ„</strong></p><ul><li><strong>ç»™å®šæ ‘ä¸Š n ä¸ªèŠ‚ç‚¹å’Œ nâˆ’1 æ¡è¾¹ï¼Œå¦‚æœä¸€æ¡è¾¹ä¸Šçš„ä¸¤ä¸ªç‚¹å­˜åœ¨è‡³å°‘ä¸¤ä¸ªä¸åŒçš„è´¨å› å­ï¼Œç§°è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸ºå…±åŒä¼˜é›…çš„ã€‚é—®æ•´æ£µæ ‘ä¸ŠåŒ…å«èŠ‚ç‚¹æœ€å¤šçš„å…±æœ‰ä¼˜é›…è¿é€šå—æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹ã€‚</strong></li></ul></li><li><p><strong>é¢˜è§£</strong></p><ul><li><p><strong>ç›¸é‚»ç»“ç‚¹æ»¡è¶³æœ‰è‡³å°‘ä¸¤ä¸ªä¸åŒçš„å…±åŒè´¨å› å­,ä¹Ÿå°±ç›¸å½“äº,ç›¸é‚»ä¸¤ä¸ªç»“ç‚¹çš„ <img src="https://www.nowcoder.com/equation?tex=%5Cgcd" alt="img"> æ»¡è¶³ä¸ä¸ºä»»ä½•è´¨æ•°çš„å¹‚æ¬¡,ä¸”ä¸ä¸º1</strong></p><p><strong>æˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰è´¨æ•°çš„å¹‚æ¬¡ä½¿ç”¨ä¸€ä¸ªæ ‡è®°æ•°ç»„ <img src="https://www.nowcoder.com/equation?tex=st" alt="flag"> æ ‡è®°èµ·æ¥,ç„¶åè¿›è¡Œæ ‘å½¢dp</strong></p><p><strong>è®¾ <img src="https://www.nowcoder.com/equation?tex=dp_i" alt="dp_i"> ä¸ºä»¥ <img src="https://www.nowcoder.com/equation?tex=i" alt="i"> ä¸ºæ ¹çš„æœ€å¤§ä¼˜é›…è”é€šå—,è®¾ <img src="https://www.nowcoder.com/equation?tex=son_i" alt="son_i"> ä¸º <img src="https://www.nowcoder.com/equation?tex=i" alt="i"> çš„å­èŠ‚ç‚¹çš„é›†åˆï¼Œåˆ™</strong></p><p><strong><img src="https://www.nowcoder.com/equation?tex=dp_i%20%3D%201%20%2B%20%5Csum_%7Bv%20%5Cin%20son_i%7D%20dp_%7Bv%7D%5Bst_%7B%5Cgcd(v%2Ci)%7D%20%3D%201%5D" alt="img"></strong></p></li></ul></li><li><p><strong>ä»£ç </strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> prime[N], cnt;<br><span class="hljs-type">int</span> st[N];<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> son[N];<br>vector&lt;<span class="hljs-type">int</span>&gt; e[N];<br><span class="hljs-type">int</span> vis[N];<br><span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> u, <span class="hljs-type">int</span> fa)</span></span><br><span class="hljs-function"></span>&#123;<br>    son[u] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> t : e[u])<br>    &#123;<br>        <span class="hljs-keyword">if</span> (t == fa)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-built_in">dfs</span>(t, u);<br>        <span class="hljs-keyword">if</span> (st[__gcd(a[u], a[t])] == <span class="hljs-number">0</span>)<br>        &#123;<br>            son[u] += son[t];<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// maxn = max(son[u], maxn);</span><br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    st[<span class="hljs-number">1</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = i * <span class="hljs-number">2</span>; j &lt;= n; j += i)<br>            &#123;<br>                vis[j] = <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">long</span> <span class="hljs-type">long</span> j = i; j &lt;= n; j *= i)<br>            &#123;<br>                st[j] = <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>(N);<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>    &#125;<br>    <span class="hljs-type">int</span> p, q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;p, &amp;q);<br>        e[p].<span class="hljs-built_in">push_back</span>(q);<br>        e[q].<span class="hljs-built_in">push_back</span>(p);<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        maxn = <span class="hljs-built_in">max</span>(son[i], maxn);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, maxn);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="F-è¢«æŠ“ä½çš„å°ç«¹"><strong><a href="https://ac.nowcoder.com/acm/contest/45670/F">F.è¢«æŠ“ä½çš„å°ç«¹</a></strong></h2><ul><li><strong>é¢˜æ„</strong></li><li><strong>é¢˜è§£</strong><ul><li><img src="https://pic1.imgdb.cn/item/636f6ea416f2c2beb1ee215c.png" alt="image-20221112174318834"></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-meta">#<span class="hljs-keyword">define</span> ll long long</span><br><span class="hljs-type">int</span> t;<br><span class="hljs-type">int</span> n;<br>vector&lt;<span class="hljs-type">int</span>&gt; js;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> mod = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br>ll fac[<span class="hljs-number">100006</span>];<br>ll ifac[<span class="hljs-number">100006</span>];<br><span class="hljs-type">int</span> maxn = <span class="hljs-number">1e5</span> + <span class="hljs-number">4</span>;<br><span class="hljs-function">ll <span class="hljs-title">ksm</span><span class="hljs-params">(ll x, ll y)</span></span><br><span class="hljs-function"></span>&#123;<br>    ll ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (y)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (y &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * x % mod;<br>        &#125;<br>        y &gt;&gt;= <span class="hljs-number">1</span>;<br>        x = x * x % mod;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    fac[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= maxn; i++)<br>    &#123;<br>        fac[i] = fac[i - <span class="hljs-number">1</span>] * i % mod;<br>    &#125;<br>    <span class="hljs-comment">// ifac[1] = 1;</span><br>    <span class="hljs-comment">// for (int i = 2; i &lt;= maxn; i++)</span><br>    <span class="hljs-comment">// &#123;</span><br>    <span class="hljs-comment">//     ifac[i] = (ll)(mod - mod / i) * ifac[mod % i] % mod;</span><br>    <span class="hljs-comment">// &#125;</span><br>    ifac[maxn - <span class="hljs-number">1</span>] = <span class="hljs-built_in">ksm</span>(fac[maxn - <span class="hljs-number">1</span>], mod - <span class="hljs-number">2</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = maxn - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">1</span>; i--)<br>    &#123;<br>        ifac[i - <span class="hljs-number">1</span>] = ifac[i] * i % mod;<br>    &#125;<br>&#125;<br><span class="hljs-function">ll <span class="hljs-title">C</span><span class="hljs-params">(ll x, ll y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> fac[x] * ifac[y] % mod * ifac[x - y] % mod;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">init</span>();<br>    <span class="hljs-type">int</span> t;<br>    cin &gt;&gt; t;<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-type">int</span> n;<br>        cin &gt;&gt; n;<br>        ll ans = (((<span class="hljs-built_in">C</span>(n + <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)) % mod * fac[(n - <span class="hljs-number">2</span>)] % mod * (<span class="hljs-number">1ll</span> * n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>) % mod * (<span class="hljs-number">1ll</span> * n * (n - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span>) % mod)) % mod;<br>        cout &lt;&lt; ans &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;A-å°ç«¹ä¸å¦ˆå¦ˆ&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://ac.nowcoder.com/acm/contest/45670/A&quot;&gt;A. å°ç«¹ä¸å¦ˆå¦ˆ&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¢˜æ„&lt;/strong&gt;
&lt;ul&gt;
</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ç‰›å®¢å°ç™½æœˆèµ›59</title>
    <link href="https://www.xwybq.top/posts/bef2e369/"/>
    <id>https://www.xwybq.top/posts/bef2e369/</id>
    <published>2025-08-18T15:18:27.000Z</published>
    <updated>2025-09-20T06:08:15.700Z</updated>
    
    <content type="html"><![CDATA[<h2 id="A-æˆ‘ä¼šå¼€æ‘†"><strong><a href="https://ac.nowcoder.com/acm/contest/43844/A">A.æˆ‘ä¼šå¼€æ‘†</a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong>ç»™å®šn=4çš„æ–¹é˜µï¼Œé—®æ˜¯å¦å­˜åœ¨n=2çš„æ–¹é˜µä¸­å››ä¸ªæ ¼å­å…¨æ˜¯ä¸€ä¸ªå­—ç¬¦çš„æƒ…å†µ</strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>ç›´æ¥æšä¸¾æ‰€æœ‰ç‚¹å½“n=2æ–¹é˜µçš„å·¦ä¸Šè§’ï¼Œçœ‹æ˜¯å¦ç¬¦åˆé¢˜ç›®è¦æ±‚</strong></li><li><strong>æ³¨æ„ï¼šæ£€æŸ¥n=2çš„æ–¹é˜µæ—¶ï¼Œè¦å…ˆæ’é™¤æŸç‚¹ä¸ºå·¦ä¸Šè§’æ²¡æœ‰n=2æ–¹é˜µæƒ…å†µ</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">char</span> a[<span class="hljs-number">5</span>][<span class="hljs-number">5</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">4</span>; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">4</span>; j++)<br>            &#123;<br>                cin &gt;&gt; a[i][j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">3</span>; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= <span class="hljs-number">3</span>; j++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (a[i][j] == <span class="hljs-string">&#x27;.&#x27;</span> &amp;&amp; a[i][j + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;.&#x27;</span> &amp;&amp; a[i + <span class="hljs-number">1</span>][j] == <span class="hljs-string">&#x27;.&#x27;</span> &amp;&amp; a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;.&#x27;</span>)<br>                &#123;<br>                    flag = <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (a[i][j] == <span class="hljs-string">&#x27;#&#x27;</span> &amp;&amp; a[i][j + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;#&#x27;</span> &amp;&amp; a[i + <span class="hljs-number">1</span>][j] == <span class="hljs-string">&#x27;#&#x27;</span> &amp;&amp; a[i + <span class="hljs-number">1</span>][j + <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;#&#x27;</span>)<br>                &#123;<br>                    flag = <span class="hljs-number">1</span>;<br>                    <span class="hljs-keyword">break</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">1</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Yes\n&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;No\n&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="B-èµ°å»Šçš„ç¯"><strong><a href="https://ac.nowcoder.com/acm/contest/43844/B">B.èµ°å»Šçš„ç¯</a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong>è·¯ä¸Šæœ‰nç›ç¯ï¼Œ0ä»£è¡¨ç­çš„ï¼Œ1ä»£è¡¨äº®çš„ï¼Œ2ä»£è¡¨é—ªçƒï¼Œå¯ä»¥çœ‹æˆç­çš„ä¹Ÿå¯ä»¥çœ‹æˆäº®çš„</strong></li><li><strong>é—®æœ€é•¿çš„çŠ¶æ€ä¸€æ ·çš„è¿ç»­çš„ç¯çš„æ•°é‡ä¸ºå¤šå°‘</strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>æš´åŠ›ï¼Œåˆ†ä¸¤æ¬¡éå†ï¼Œç¬¬ä¸€æ¬¡æŠŠ2å…¨éƒ¨å½“ä½œ0ï¼Œç¬¬äºŒæ¬¡æŠŠ2å…¨éƒ¨å½“ä½œ1ï¼Œæ‰¾å‡ºæœ€é•¿çš„è¿ç»­æ®µå³å¯</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-type">int</span> n;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>        <span class="hljs-built_in">string</span> a;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a;<br>        <span class="hljs-type">int</span> len = a.size();<br>        <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (a[i] != <span class="hljs-string">&#x27;0&#x27;</span>)<br>            &#123;<br>                sum++;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                sum = <span class="hljs-number">0</span>;<br>            &#125;<br>            maxn = max(maxn, sum);<br>        &#125;<br>        sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (a[i] != <span class="hljs-string">&#x27;1&#x27;</span>)<br>            &#123;<br>                sum++;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                sum = <span class="hljs-number">0</span>;<br>            &#125;<br>            maxn = max(maxn, sum);<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, maxn);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="C-è¾“å‡ºç»ƒä¹ "><strong><a href="https://ac.nowcoder.com/acm/contest/43844/C">C.è¾“å‡ºç»ƒä¹ </a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong>ä»å°åˆ°å¤§è¾“å‡ºåŒºé—´[l,r]ä¸­ï¼Œkçš„éè´Ÿæ•´æ•°æ¬¡æ–¹çš„å€¼</strong></li><li><strong>l,r,kèŒƒå›´ [0,2^63)</strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>é™¤å»ç‰¹ä¾‹çš„0,1ï¼›å½“k=2æ—¶ï¼Œl=0,r=2^63-1ï¼Œä¼šæœ‰æœ€å¤šä¸ªè¾“å‡ºï¼Œä¹Ÿæ‰64ä¸ªã€‚æ‰€ä»¥ç›´æ¥æš´åŠ›å³å¯</strong></li><li><strong>æ³¨æ„ç‰¹åˆ¤ã€‚k=1æ—¶ï¼Œç›´æ¥è¾“å‡º1å³å¯ï¼Œå¦åˆ™æš´åŠ›å’Œä¼šç‚¸ï¼›k=0æ—¶ï¼Œ0^0=1,ä½†æ˜¯<code>0^1</code>=0,<code>0^2</code>=0ï¼Œå³å¦‚æœåŒºé—´ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆk=0ä¼šæœ‰ä¸¤ä¸ªè¾“å‡ºã€‚éº»éº»éº»è¿™é‡ŒWAéº»äº†ï¼Œå¥½æ— è¯­</strong></li><li><strong>æ³¨æ„æ•°æ®èŒƒå›´ï¼Œwhile(k&lt;=r)è¿™æ ·å†™ä¼šçˆ†long longï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç”¨javaé€ƒè¯¾</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.math.BigInteger;<br><span class="hljs-keyword">import</span> java.util.Scanner;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Scanner</span> <span class="hljs-variable">sc</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Scanner</span>(System.in);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> sc.nextInt();<br>        <span class="hljs-keyword">while</span> (t-- &gt; <span class="hljs-number">0</span>) &#123;<br>            BigInteger l, r, k;<br>            l = sc.nextBigInteger();<br>            r = sc.nextBigInteger();<br>            k = sc.nextBigInteger();<br>            <span class="hljs-type">BigInteger</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;0&quot;</span>);<br>            <span class="hljs-type">BigInteger</span> <span class="hljs-variable">q</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigInteger</span>(<span class="hljs-string">&quot;1&quot;</span>);<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">fuck</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br>            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>            <span class="hljs-keyword">if</span> (k.compareTo(p) == <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">if</span> (l.compareTo(p) &lt;= <span class="hljs-number">0</span>) &#123;<br>                    sb.append(<span class="hljs-number">0</span>+<span class="hljs-string">&quot; &quot;</span>);<br>                    fuck = <span class="hljs-literal">false</span>;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (l.compareTo(q) &lt;= <span class="hljs-number">0</span> &amp;&amp; r.compareTo(q) &gt;= <span class="hljs-number">0</span>) &#123;<br>                sb.append(<span class="hljs-number">1</span> + <span class="hljs-string">&quot; &quot;</span>);<br>                fuck = <span class="hljs-literal">false</span>;<br>            &#125;<br>            BigInteger pos=k;<br>            <span class="hljs-keyword">if</span> (k.compareTo(p) != <span class="hljs-number">0</span> &amp;&amp; k.compareTo(q) != <span class="hljs-number">0</span>) &#123;<br>                <span class="hljs-keyword">while</span> (r.compareTo(k) &gt;= <span class="hljs-number">0</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (l.compareTo(k) &lt;= <span class="hljs-number">0</span> &amp;&amp; r.compareTo(k) &gt;= <span class="hljs-number">0</span>) &#123;<br>                        sb.append(k + <span class="hljs-string">&quot; &quot;</span>);<br>                        fuck = <span class="hljs-literal">false</span>;<br>                    &#125;<br>                    k=k.multiply(pos);<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span>(fuck)<br>            &#123;<br>                System.out.println(<span class="hljs-string">&quot;None.&quot;</span>);<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                System.out.println(sb);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="D-å›½é™…è±¡æ£‹"><strong><a href="https://ac.nowcoder.com/acm/contest/43844/D">D.å›½é™…è±¡æ£‹</a></strong></h2><ul><li><p><strong>é¢˜æ„</strong></p><ul><li><strong>ç«–ç›´æ”¾ç½®çš„n*mçš„æ£‹ç›˜ï¼Œæ¯æ¬¡é€‰ä¸€åˆ—æ”¾ä¸€æšæ£‹å­ï¼Œé‡åŠ›åŸå› æ£‹å­è½åˆ°æœ€ä¸‹é¢</strong></li><li><strong>å¯¹äºç¬¬iä¸ªæ”¾ç½®çš„æ£‹å­ï¼Œiä¸ºå¥‡æ•°æ—¶ï¼Œå…¶æ‰€æ”¾çš„é¢œè‰²ä¸ºé»‘è‰²ï¼Œå¶æ•°ä¸ºç™½è‰²æ£‹å­</strong></li><li><strong>kå­è¿ç å®šä¹‰ä¸ºï¼šæ¨ªç«–æ’‡æºå››ä¸ªæ–¹å‘å­˜åœ¨æŸä¸ªæ–¹å‘æœ‰kä¸ªç›¸åŒé¢œè‰²æ£‹å­</strong></li><li><strong>ä¸€å…±æ”¾té¢—æ£‹å­ï¼Œè‹¥å‡ºç°kå­è¿ç åˆ™æ¸¸æˆç»“æŸï¼Œä¿è¯æœ‰è§£ï¼Œé—®æ¸¸æˆç»“æŸæ—¶æ”¾ç½®äº†å¤šå°‘æ£‹å­</strong></li></ul></li><li><p><strong>é¢˜è§£</strong></p><ul><li><p><strong>æ¨¡æ‹Ÿé¢˜ã€‚</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">æ°´å¹³æ–¹å‘ï¼Œç«–ç›´æ–¹å‘ï¼Œä¸¤ä¸ªæ–œæ–¹å‘åˆ†åˆ«æšä¸¾çœ‹æ˜¯å¦ç¬¦åˆæ¡ä»¶å³å¯<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>ä»£ç </strong></p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> n, m, k, t;<br><span class="hljs-type">char</span> a[<span class="hljs-number">1008</span>][<span class="hljs-number">1008</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">judge</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (x &gt;= <span class="hljs-number">1</span> &amp;&amp; x &lt;= n &amp;&amp; y &gt;= <span class="hljs-number">1</span> &amp;&amp; y &lt;= m)<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">else</span><br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">solve</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y, <span class="hljs-type">int</span> ch)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-comment">//æ¨ª</span><br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">1</span>;<br>    <span class="hljs-type">int</span> xx = x, yy = y - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        yy--;<br>    &#125;<br>    xx = x, yy = y + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        yy++;<br>    &#125;<br>    <span class="hljs-comment">//ç«–</span><br>    sum = <span class="hljs-number">1</span>;<br>    xx = x + <span class="hljs-number">1</span>, yy = y;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        xx++;<br>    &#125;<br>    <span class="hljs-comment">//å·¦æ–œ</span><br>    sum = <span class="hljs-number">1</span>;<br>    xx = x - <span class="hljs-number">1</span>, yy = y - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        xx--, yy--;<br>    &#125;<br>    xx = x + <span class="hljs-number">1</span>, yy = y + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        xx++, yy++;<br>    &#125;<br>    <span class="hljs-comment">//å³æ–œ</span><br>    sum = <span class="hljs-number">1</span>;<br>    xx = x + <span class="hljs-number">1</span>, yy = y - <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        xx++, yy--;<br>    &#125;<br>    xx = x - <span class="hljs-number">1</span>, yy = y + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">judge</span>(xx, yy))<br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (a[xx][yy] == ch)<br>        &#123;<br>            sum += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (sum &gt;= k)<br>            &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>        xx--, yy++;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ios::<span class="hljs-built_in">sync_with_stdio</span>(<span class="hljs-literal">false</span>);<br>    cin.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cout.<span class="hljs-built_in">tie</span>(<span class="hljs-number">0</span>);<br>    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k &gt;&gt; t;<br>    <span class="hljs-type">int</span> ans;<br>    <span class="hljs-type">int</span> flag = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; mp;<br>    <span class="hljs-built_in">memset</span>(a, <span class="hljs-string">&#x27;!&#x27;</span>, <span class="hljs-built_in">sizeof</span>(a));<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        ++cnt;<br>        cin &gt;&gt; ans;<br>        <span class="hljs-keyword">if</span> (flag == <span class="hljs-number">0</span>)<br>        &#123;<br>            sum++;<br>            <span class="hljs-type">int</span> x = n - mp[ans];<br>            <span class="hljs-type">int</span> y = ans;<br>            mp[ans]++;<br>            <span class="hljs-keyword">if</span> (cnt % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>)<br>            &#123;<br>                a[x][y] = <span class="hljs-string">&#x27;1&#x27;</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                a[x][y] = <span class="hljs-string">&#x27;0&#x27;</span>;<br>            &#125;<br>            <span class="hljs-type">int</span> pos = <span class="hljs-built_in">solve</span>(x, y, a[x][y]);<br>            <span class="hljs-keyword">if</span> (pos == <span class="hljs-number">1</span>)<br>            &#123;<br>                flag = <span class="hljs-number">1</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="E-å¼¹ç ç¢°æ’"><strong><a href="https://ac.nowcoder.com/acm/contest/43844/E">E.å¼¹ç ç¢°æ’</a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong>é•¿åº¦ä¸ºnçš„çº¿æ®µä¸Šæœ‰mä¸ªå¼¹ç ï¼Œç»™å®šæ¯ä¸ªå¼¹ç çš„æ–¹å‘å·¦/å³ï¼ŒåŠåæ ‡</strong></li><li><strong>å¼¹ç æ¯ç§’èµ°ä¸€ä¸ªå•ä½ï¼Œå‘ç”Ÿç¢°æ’ä¼šåœæ»ä¸€ç§’ï¼Œä¸”ä¸¤ç æ–¹å‘äº’æ¢ï¼Œå¤šæ¬¡ç¢°æ’åœæ»æ—¶é—´å åŠ </strong></li><li><strong>å½“å¼¹ç èµ°åˆ°0ï¼Œæˆ–è€…n+1è®¤ä¸ºæ‰è½</strong></li><li><strong>é—®çº¿æ®µä¸Šæœ€åæ‰è½çš„å¼¹ç æ‰å‡ºæ‰€èŠ±çš„æ—¶é—´</strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>ç¢°æ’è½¬å‘ç›´æ¥çœ‹æˆç©¿è¿‡å°±å¥½äº†ï¼Œå› ä¸ºå¼¹ç ä¹‹é—´æ²¡æœ‰åŒºåˆ«</strong></li><li><strong>ä»¥æŸä¸ªå‘å·¦èµ°äºä½ç½®içš„å¼¹ç ä¸ºä¾‹ï¼Œæ²¡æœ‰ç¢°æ’æ—¶æ—¶é—´ä¸ºi-0ï¼Œæœ‰ç¢°æ’éœ€è¦è®°å½•åœ¨iå·¦è¾¹ä¸”æ–¹å‘å‘å³çš„å¼¹ç æ•°rï¼Œæ—¶é—´ä¸ºi-0+rï¼Œä»å·¦å¾€å³è¾¹éå†éè®°å½•ç­”æ¡ˆå’Œæ•°é‡å³å¯ã€‚æŸä¸ªå‘å³èµ°äºä½ç½®içš„å¼¹ç ï¼Œn+1-i+lï¼Œæ³¨æ„è¿™é‡Œæ˜¯é€†åºéå†ã€‚</strong></li><li><strong>è¿™ç±»é¢˜ç»å¸¸å°±æ˜¯è¿™æ ·çš„å†™æ³•ï¼Œç›¸å½“äºå›ºå®šé¢˜å‹äº†</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br>using namespace <span class="hljs-built_in">std</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> d[N], p[N];<br><span class="hljs-type">int</span> pos[N];<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-built_in">memset</span>(pos, <span class="hljs-number">-1</span>, <span class="hljs-keyword">sizeof</span>(pos));<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;d[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;p[i]);<br>        pos[p[i]] = d[i];<br>    &#125;<br>    <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">-1</span>)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">0</span>)<br>        &#123;<br>            maxn = max(maxn, i - <span class="hljs-number">0</span> + ans);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">1</span>)<br>        &#123;<br>            ans += <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &gt;= <span class="hljs-number">1</span>; i--)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">-1</span>)<br>        &#123;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">1</span>)<br>        &#123;<br>            maxn = max(maxn, n + <span class="hljs-number">1</span> - i + cnt);<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pos[i] == <span class="hljs-number">0</span>)<br>        &#123;<br>            cnt += <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, cnt);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="F-å›°éš¾å·ç§¯"><strong><a href="https://ac.nowcoder.com/acm/contest/43844/F">F.å›°éš¾å·ç§¯</a></strong></h2><ul><li><strong>é¢˜æ„</strong><ul><li><strong><img src="https://img-blog.csdnimg.cn/2f62a4fc25764ced91908b21493bf1d0.png" alt="[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-BcmuODbM-1666978509437)(/Users/chenyanling/Library/Application Support/typora-user-images/image-20221029002156595.png)]"></strong></li></ul></li><li><strong>é¢˜è§£</strong><ul><li><strong>trické¢˜ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥æš´åŠ›æšä¸¾ä¸¤ä¸ªæ•°ç»„ï¼Œå¤æ‚åº¦ä¸ºO(n^2)ç‚¸äº†</strong></li><li><strong>è§‚å¯Ÿæ•°æ®èŒƒå›´ç‰¹å¾ï¼Œæ•°ç»„çš„å’ŒèŒƒå›´åœ¨1e7ä»¥å†…ï¼Œé‚£ä¹ˆè€ƒè™‘ä¸ç§ç±»æ•°æœ‰å…³ï¼Œå› ä¸ºè´ªå¿ƒæ„é€ ä¸€ä¸ªæ•°ç§ç±»å¤šçš„æ•°ç»„ä¸º0 1 â€¦ xï¼Œç­‰å·®æ•°åˆ—æ±‚å’Œå¾—åˆ°x=sqrt(2e7)ï¼Œå³æ•°ç»„ä¸­æœ€å¤šæœ‰sqrt(2e7)ç§æ•°ï¼Œæ­¤æ—¶éå†çš„å¤æ‚åº¦å·²ç»é™ä½äº†ï¼Œæ‰€ä»¥å¼€å§‹è€ƒè™‘å¦‚ä½•è®¡ç®—ç­”æ¡ˆ</strong></li><li><strong>ä»¥åŒç§ç±»æ•°åˆ†åˆ«åˆ†ç»„a,båï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ•°numåŠå…¶å‡ºç°çš„æ¬¡æ•°cntã€‚é‚£ä¹ˆå¯¹äºæŸä¸€ç»„åˆ«a1å’ŒæŸä¸€ç»„åˆ«b1å¯¹äºç­”æ¡ˆçš„è´¡çŒ®ä¸º<code>(a1.cnt * b1.cnt * floor(sqrt(å·®))</code>ï¼Œé‚£ä¹ˆåªéœ€è¦æšä¸¾aåˆ†ç»„å’Œbåˆ†ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(sqrt(2e7)^2)=O(2e7)</strong></li></ul></li><li><strong>ä»£ç </strong></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e6</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N], b[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    map&lt;<span class="hljs-type">int</span>, <span class="hljs-type">int</span>&gt; m1, m2;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        m1[a[i]]++;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;b[i]);<br>        m2[b[i]]++;<br>    &#125;<br>    <span class="hljs-type">long</span> <span class="hljs-type">long</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i : m1)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> j : m2)<br>        &#123;<br>            <span class="hljs-type">long</span> <span class="hljs-type">long</span> ans = <span class="hljs-built_in">sqrt</span>(<span class="hljs-built_in">abs</span>(i.first - j.first));<br>            sum += i.second * j.second * ans;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;A-æˆ‘ä¼šå¼€æ‘†&quot;&gt;&lt;strong&gt;&lt;a href=&quot;https://ac.nowcoder.com/acm/contest/43844/A&quot;&gt;A.æˆ‘ä¼šå¼€æ‘†&lt;/a&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;é¢˜æ„&lt;/strong&gt;
&lt;ul&gt;
&lt;li</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>ç»„åˆæ•°å­¦</title>
    <link href="https://www.xwybq.top/posts/7ff86023/"/>
    <id>https://www.xwybq.top/posts/7ff86023/</id>
    <published>2025-08-18T05:01:21.000Z</published>
    <updated>2025-09-20T06:08:15.692Z</updated>
    
    <content type="html"><![CDATA[<h1>1.æ¨è¾‰ä¸‰è§’é€’æ¨æ³•æ±‚ç»„åˆæ•°</h1><p>è®¾ $C[i][j]$ ä¸ºå·²åœ¨ $i$ä¸ªå…ƒç´ ä¸­æŠ½å–äº† $j$ ä¸ªå…ƒç´ ï¼Œå¯¹äºä¸Šä¸€æ­¥æè¿°ï¼Œæœ‰å¯èƒ½æ˜¯ï¼š<br>è¿™ä¸€æ­¥æ²¡æœ‰æŠ½å–å…ƒç´ ï¼Œä¹‹å‰å·²ç»æŠ½äº† $j$ ä¸ªå…ƒç´ ï¼š$C[i-1][j]$<br>è¿™ä¸€æ­¥æŠ½å–äº†ä¸€ä¸ªå…ƒç´ ï¼Œä¹‹å‰å·²ç»æŠ½äº† $j-1$ ä¸ªå…ƒç´ ï¼š$C[i-1][j-1]$<br>å°†è¿™ä¸¤ç§æƒ…å†µåŠ èµ·æ¥ä¾¿æ˜¯ $C[i][j]$ çš„ç»“æœï¼Œç”±æ­¤å¾—å‡ºå¼å­ï¼š<br>$C[i][j] = C[i-1][j] + C[i-1][j-1]$</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n^2)$<br /></p><p><strong>æ ¸å¿ƒä»£ç </strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getC</span><span class="hljs-params">(<span class="hljs-type">int</span> N)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>)<br>            &#123;<br>                C[i][j] = <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                C[i][j] = (C[i - <span class="hljs-number">1</span>][j] + C[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]) % p;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">$i\backslash j$</th><th style="text-align:center">0</th><th style="text-align:center">1</th><th style="text-align:center">2</th><th style="text-align:center">3</th><th style="text-align:center">4</th><th style="text-align:center">5</th><th style="text-align:center">6</th></tr></thead><tbody><tr><td style="text-align:center"><strong>0</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>2</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>2</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"><strong>3</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><strong>4</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"><strong>10</strong></td><td style="text-align:center"><strong>10</strong></td><td style="text-align:center"><strong>5</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"></td></tr><tr><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><strong>1</strong></td><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><strong>15</strong></td><td style="text-align:center"><strong>20</strong></td><td style="text-align:center"><strong>15</strong></td><td style="text-align:center"><strong>6</strong></td><td style="text-align:center"><strong>1</strong></td></tr></tbody></table><p><strong>æ¨è¾‰ä¸‰è§’å…¬å¼ï¼š</strong></p><p>$C_{n}^{0} = C_{n}^{n} = 1$<br>$C_{n}^{m} = C_{n}^{n-m}$<br>$C_{n}^{m} = C_{n-1}^{m} + C_{n-1}^{m-1}$</p><p><a href="https://www.jisuanke.com/problem/T1984">è®¡è’œå®¢-T1984</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> C[N][N];<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> p = <span class="hljs-number">1e9</span> + <span class="hljs-number">7</span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">getC</span><span class="hljs-params">(<span class="hljs-type">int</span> N)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= N; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++)<br>        &#123;<br>            <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span>)<br>            &#123;<br>                C[i][j] = <span class="hljs-number">1</span>;<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                C[i][j] = (C[i - <span class="hljs-number">1</span>][j] + C[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>]) % p;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-built_in">getC</span>(n);<br>    cout &lt;&lt; C[n][m] &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h1>2.å¿«é€Ÿå¹‚å’Œä¹˜æ³•é€†å…ƒæ±‚ç»„åˆæ•°</h1><p>é€’æ¨æ³• $C_{n}^{m} = C_{n-1}^{m} + C_{n-1}^{m-1}$ ä¼š TLE<br>è€ƒè™‘ç”¨ $C_{n}^{m} = \dfrac{n!}{m!(n-m)!}$ ç›´æ¥è®¡ç®—ã€‚<br>ç”¨ $f[x]$ å­˜ $x! \pmod{p}$ çš„å€¼ï¼Œ<br>ç”¨ $g[x]$ å­˜ $\dfrac{1}{x!} \pmod{p}$ çš„å€¼ã€‚<br>å› ä¸º $p$ æ˜¯è´¨æ•°ä¸” $n,m$ éƒ½å°äº $p$ï¼Œå³ $n, m$ ä¸ $p$ äº’è´¨ï¼Œ<br>æ‰€ä»¥æ ¹æ®è´¹é©¬å°å®šç† $a \cdot a^{p-2} \equiv 1 \pmod{p}$ï¼Œ<br>$g[i] = \dfrac{1}{i!} \pmod{p} = \dfrac{1}{i} \times \dfrac{1}{(i-1)!} \pmod{p} = \text{qpow}(i,p-2) \times g[i-1]$<br>æŸ¥è¯¢ $C_{n}^{m} \pmod{p} = f[n] \cdot g[n-m] \cdot g[m] \pmod{p}$</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(n \log p)$</p><p><strong>æ ¸å¿ƒä»£ç </strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">qpow</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % p;<br>        &#125;<br>        a = a * a % p;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    f[<span class="hljs-number">0</span>] = g[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        f[i] = f[i - <span class="hljs-number">1</span>] * i % p;<br>        g[i] = g[i - <span class="hljs-number">1</span>] * <span class="hljs-built_in">qpow</span>(i, p - <span class="hljs-number">2</span>) % p;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getC</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> f[n] * g[m] % p * g[n - m] % p;<br>&#125;<br></code></pre></td></tr></table></figure><h1><strong>3.Lucaså®šç†æ±‚ç»„åˆæ•°</strong></h1><p>$C_{n}^{m} \equiv C_{n/p}^{m/p} \cdot C_{n \bmod p}^{m \bmod p} \pmod{p}$<br>å¼•ç†1ï¼š$C_{p}^{x} \equiv 0 \pmod{p}$, $0&lt;x&lt;p$<br>å›  $C_{p}^{x} = \dfrac{p!}{x!(p-x)!} = \dfrac{p(p-1)!}{x(x-1)!(p-x)!} = \dfrac{p}{x} \cdot C_{p-1}^{x-1}$<br>æ•… $C_{p}^{x} \equiv p \cdot \text{inv}(x) \cdot C_{p-1}^{x-1} \equiv 0 \pmod{p}$<br>å¼•ç†2ï¼š$(1+x)^p \equiv 1 + x^p \pmod{p}$<br>ç”±äºŒé¡¹å¼å®šç† $(1+x)^p = \sum\limits_{i=0}^{p} C_{p}^{i} x^i$<br>ç”±å¼•ç†1çŸ¥ï¼Œåªå‰©ä¸‹i=0,pè¿™ä¸¤é¡¹ï¼Œå¾—è¯</p><p>æ—¶é—´å¤æ‚åº¦ï¼š$O(p \log p + \log_p n)$<br><img src="https://pic.imgdb.cn/item/639ad869b1fccdcd3651ffab.png" alt=""></p><p><strong>æ ¸å¿ƒä»£ç </strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">qpow</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">while</span> (b)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (b &amp; <span class="hljs-number">1</span>)<br>        &#123;<br>            ans = ans * a % p;<br>        &#125;<br>        a = a * a % p;<br>        b &gt;&gt;= <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> ans;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">init</span><span class="hljs-params">(<span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    f[<span class="hljs-number">0</span>] = g[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= p; i++)<br>    &#123;<br>        f[i] = f[i - <span class="hljs-number">1</span>] * i % p;<br>        g[i] = g[i - <span class="hljs-number">1</span>] * <span class="hljs-built_in">qpow</span>(i, p - <span class="hljs-number">2</span>, p) % p;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getC</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">return</span> f[n] * g[m] * g[n - m] % p;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">Lucas</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (m == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Lucas</span>(n / p, m / p, p) * <span class="hljs-built_in">getC</span>(n % p, m % p, p) % p;<br>&#125;<br></code></pre></td></tr></table></figure><h1>4.é«˜ç²¾åº¦åŠ çº¿æ€§ç­›æ±‚ç»„åˆæ•°ï¼ˆä¸å–æ¨¡ï¼‰</h1><p>åˆ†è§£è´¨å› æ•°ï¼š$C_{n}^{m} = p_1^{m_1} \cdot p_2^{m_2} \cdot \cdots \cdot p_k^{m_k}$<br>å…¶ä¸­ $p_1$-$p_k$ æ˜¯ $[1,n]$ ä¸­çš„ç´ æ•°ï¼›<br>$m_1$~$m_k$ æ˜¯å…¶ä¸­å¯¹åº”çš„æ¯ä¸ªç´ æ•°çš„æ¬¡æ•°ï¼Œæ˜¯åœ¨ $n!$ ä¸­çš„æ¬¡æ•°å‡å» $m!$ ä¸­çš„æ¬¡æ•°å†å‡å» $(n-m)!$ ä¸­çš„æ¬¡æ•°ï¼›<br>$n!$ ä¸­ $p$ çš„ä¸ªæ•°ï¼š$s = \left\lfloor \dfrac{n}{p} \right\rfloor + \left\lfloor \dfrac{n}{p^2} \right\rfloor + \left\lfloor \dfrac{n}{p^3} \right\rfloor + \cdots$</p><p><img src="https://pic.imgdb.cn/item/639b0012b1fccdcd3693dac1.png" alt="image-20221215190711847"></p><p><a href="https://www.acwing.com/problem/content/description/890/">AcWing 888. æ±‚ç»„åˆæ•° IV</a><br /><br><strong>é¢˜ç›®æè¿°</strong><br /><br>è¾“å…¥ $n,m$ï¼Œæ±‚ $C_{n}^{m}$ çš„å€¼ã€‚<br>æ³¨æ„ç»“æœå¯èƒ½å¾ˆå¤§ï¼Œéœ€è¦ä½¿ç”¨é«˜ç²¾åº¦è®¡ç®—ã€‚<br /></p><p><strong>è¾“å…¥æ ¼å¼</strong><br /><br>å…±ä¸€è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªæ•´æ•°nå’Œmã€‚<br /></p><p><strong>è¾“å‡ºæ ¼å¼<br /></strong><br>å…±ä¸€è¡Œï¼Œè¾“å‡º$C_{n}^{m}$çš„å€¼ã€‚<br /></p><p><strong>æ•°æ®èŒƒå›´</strong><br /><br>1â‰¤mâ‰¤nâ‰¤5000<br /><br><strong>è¾“å…¥æ ·ä¾‹ï¼š<br /></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">5 3<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡ºæ ·ä¾‹ï¼š</strong><br /></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">10<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong><br /></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> primes[N], vis[N], cnt;<br><span class="hljs-type">int</span> C[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_primes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123; <span class="hljs-comment">// ç­›ç´ æ•°</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!vis[i])<br>        &#123;<br>            primes[cnt++] = i;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; i * primes[j] &lt;= n; j++)<br>        &#123;<br>            vis[i * primes[j]] = <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">if</span> (i % primes[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123; <span class="hljs-comment">// n!ä¸­pçš„ä¸ªæ•°</span><br>    <span class="hljs-type">int</span> s = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n)<br>    &#123;<br>        s += n / p, n /= p;<br>    &#125;<br>    <span class="hljs-keyword">return</span> s;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">getps</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> m, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123; <span class="hljs-comment">// Cä¸­pçš„ä¸ªæ•°</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">get</span>(n, p) - <span class="hljs-built_in">get</span>(m, p) - <span class="hljs-built_in">get</span>(n - m, p);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">mul</span><span class="hljs-params">(<span class="hljs-type">int</span> C[], <span class="hljs-type">int</span> p, <span class="hljs-type">int</span> &amp;len)</span></span><br><span class="hljs-function"></span>&#123; <span class="hljs-comment">// é«˜ç²¾åº¦</span><br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; len; i++)<br>    &#123;<br>        t += C[i] * p;<br>        C[i] = t % <span class="hljs-number">10</span>;<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (t)<br>    &#123;<br>        C[len++] = t % <span class="hljs-number">10</span>;<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-built_in">get_primes</span>(n);<br>    <span class="hljs-type">int</span> len = <span class="hljs-number">1</span>;<br>    C[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> p = primes[i];<br>        <span class="hljs-type">int</span> s = <span class="hljs-built_in">getps</span>(n, m, p);<br>        <span class="hljs-keyword">while</span> (s--)<br>        &#123;<br>            <span class="hljs-built_in">mul</span>(C, p, len);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = len - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        cout &lt;&lt; C[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">5010</span>;<br><span class="hljs-type">int</span> primes[N], cnt;<br><span class="hljs-type">int</span> sum[N];<br><span class="hljs-type">bool</span> st[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_primes</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">2</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (!st[i])<br>        &#123;<br>            primes[cnt++] = i;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; primes[j] &lt;= n / i; j++)<br>        &#123;<br>            st[primes[j] * i] = <span class="hljs-literal">true</span>;<br>            <span class="hljs-keyword">if</span> (i % primes[j] == <span class="hljs-number">0</span>)<br>            &#123;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">int</span> n, <span class="hljs-type">int</span> p)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> res = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (n)<br>    &#123;<br>        res += n / p;<br>        n /= p;<br>    &#125;<br>    <span class="hljs-keyword">return</span> res;<br>&#125;<br><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">mul</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; a, <span class="hljs-type">int</span> b)</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; c;<br>    <span class="hljs-type">int</span> t = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; a.<span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        t += a[i] * b;<br>        c.<span class="hljs-built_in">push_back</span>(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">while</span> (t)<br>    &#123;<br>        c.<span class="hljs-built_in">push_back</span>(t % <span class="hljs-number">10</span>);<br>        t /= <span class="hljs-number">10</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> c;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    cin &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-built_in">get_primes</span>(n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt; i++)<br>    &#123;<br>        <span class="hljs-type">int</span> p = primes[i];<br>        sum[i] = <span class="hljs-built_in">get</span>(n, p) - <span class="hljs-built_in">get</span>(n - m, p) - <span class="hljs-built_in">get</span>(m, p);<br>    &#125;<br>    vector&lt;<span class="hljs-type">int</span>&gt; res;<br>    res.<span class="hljs-built_in">push_back</span>(<span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; cnt; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; sum[i]; j++)<br>        &#123;<br>            res = <span class="hljs-built_in">mul</span>(res, primes[i]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = res.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--)<br>    &#123;<br>        cout &lt;&lt; res[i];<br>    &#125;<br>    cout &lt;&lt; <span class="hljs-string">&#x27;\n&#x27;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h1&gt;1.æ¨è¾‰ä¸‰è§’é€’æ¨æ³•æ±‚ç»„åˆæ•°&lt;/h1&gt;
&lt;p&gt;è®¾ $C[i][j]$ ä¸ºå·²åœ¨ $i$ä¸ªå…ƒç´ ä¸­æŠ½å–äº† $j$ ä¸ªå…ƒç´ ï¼Œå¯¹äºä¸Šä¸€æ­¥æè¿°ï¼Œæœ‰å¯èƒ½æ˜¯ï¼š&lt;br&gt;
è¿™ä¸€æ­¥æ²¡æœ‰æŠ½å–å…ƒç´ ï¼Œä¹‹å‰å·²ç»æŠ½äº† $j$ ä¸ªå…ƒç´ ï¼š$C[i-1][j]$&lt;br&gt;
è¿™ä¸€æ­¥æŠ½å–äº†ä¸€ä¸ªå…ƒç´ ï¼Œä¹‹å‰å·²ç»æŠ½äº† $j</summary>
      
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="https://www.xwybq.top/tags/C/"/>
    
    <category term="æ•°å­¦" scheme="https://www.xwybq.top/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>æŸå‘¨å†™é¢˜æŠ¥å‘Š</title>
    <link href="https://www.xwybq.top/posts/a443d63f/"/>
    <id>https://www.xwybq.top/posts/a443d63f/</id>
    <published>2025-08-16T16:00:00.000Z</published>
    <updated>2025-09-20T06:08:34.683Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æŠŠæŸå‘¨åšè¿‡çš„é¢˜ç¨å¾®æ•´ç†äº†ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯DPï¼Œæ–¹ä¾¿éšæ—¶å¤ä¹ ï¼Œä¹Ÿæ–¹ä¾¿åäººè¸©å‘ã€‚</p></blockquote><span id="more"></span><hr><h2 id="1-å®Œå…¨èƒŒåŒ…-Â·-æ´›è°·-P1616-ç–¯ç‹‚çš„é‡‡è¯">1 å®Œå…¨èƒŒåŒ… Â· æ´›è°· P1616 ç–¯ç‹‚çš„é‡‡è¯</h2><p><strong>æ€è·¯</strong><br>æŠŠã€Œæ—¶é—´ã€çœ‹æˆèƒŒåŒ…å®¹é‡ï¼Œã€Œä»·å€¼ã€å°±æ˜¯è¯è‰æ”¶ç›Šã€‚æ¯ç§è¯è‰å¯ä»¥æ— é™æ¬¡é‡‡é›† â‡’ å®Œå…¨èƒŒåŒ…ã€‚</p><p><strong>çŠ¶æ€è½¬ç§»</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - h[i]] + w[i])<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br><span class="hljs-type">int</span> h[N], w[N];<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> M = <span class="hljs-number">1e7</span> + <span class="hljs-number">10</span>;<br>ll dp[M];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t, m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;t, &amp;m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;h[i], &amp;w[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = h[i]; j &lt;= t; j++)<br>        &#123;<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j - h[i]] + w[i], dp[j]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, dp[t]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="2-æ··åˆèƒŒåŒ…-Â·-æ´›è°·-P1833-æ¨±èŠ±">2 æ··åˆèƒŒåŒ… Â· æ´›è°· P1833 æ¨±èŠ±</h2><p><strong>æ€è·¯</strong><br>é¢˜ç›®åŒæ—¶å‡ºç° 01ã€å¤šé‡ã€å®Œå…¨ä¸‰ç§èƒŒåŒ…ã€‚</p><ul><li><code>p[i] == 0</code> â†’ å®Œå…¨èƒŒåŒ…</li><li><code>p[i] &gt; 0</code>  â†’ 01 / å¤šé‡èƒŒåŒ…</li></ul><p><strong>çŠ¶æ€è½¬ç§»</strong><br>å®Œå…¨èƒŒåŒ…ï¼šæ­£åº<br>å¤šé‡èƒŒåŒ…ï¼šæ‹†æˆ 01 åé€†åº</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> t[N], w[N], p[N];<br><span class="hljs-type">int</span> dp[<span class="hljs-number">1008</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> h1, h2, m1, m2;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d:%d %d:%d&quot;</span>, &amp;h1, &amp;m1, &amp;h2, &amp;m2);<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-type">int</span> ans = (m2 - m1) + (h2 - h1) * <span class="hljs-number">60</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;t[i], &amp;w[i], &amp;p[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (p[i] == <span class="hljs-number">0</span>) <span class="hljs-comment">//å®Œå…¨èƒŒåŒ…</span><br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = t[i]; j &lt;= ans; j++)<br>            &#123;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j - t[i]] + w[i], dp[j]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">else</span> <span class="hljs-comment">//å¤šé‡èƒŒåŒ…å’Œ01èƒŒåŒ…</span><br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= p[i]; k++)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = ans; j &gt;= k * t[i]; j--)<br>                &#123;<br>                    dp[j] = <span class="hljs-built_in">max</span>(dp[j - t[i]] + w[i], dp[j]);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dp[ans]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="3-äºŒç»´èƒŒåŒ…-Â·-æ´›è°·-P1855-æ¦¨å–kkksc03">3 äºŒç»´èƒŒåŒ… Â· æ´›è°· P1855 æ¦¨å–kkksc03</h2><p><strong>æ€è·¯</strong><br>èƒŒåŒ…æœ‰ä¸¤ä¸ªé™åˆ¶ç»´åº¦ï¼šæ—¶é—´ &amp; é‡‘é’± â‡’ äºŒç»´ 01 èƒŒåŒ…ã€‚</p><p><strong>çŠ¶æ€è½¬ç§»</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">dp[j][k] = <span class="hljs-built_in">max</span>(dp[j][k], dp[j - a[i]][k - b[i]] + <span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">int</span> a[<span class="hljs-number">108</span>], b[<span class="hljs-number">108</span>];<br><span class="hljs-type">int</span> dp[<span class="hljs-number">300</span>][<span class="hljs-number">300</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m, t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;t);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;a[i], &amp;b[i]);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m; j &gt;= a[i]; j--)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = t; k &gt;= b[i]; k--)<br>            &#123;<br>                dp[j][k] = <span class="hljs-built_in">max</span>(dp[j][k], dp[j - a[i]][k - b[i]] + <span class="hljs-number">1</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dp[m][t]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="4-åˆ†ç»„èƒŒåŒ…-Â·-æ´›è°·-P1757-é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…">4 åˆ†ç»„èƒŒåŒ… Â· æ´›è°· P1757 é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ…</h2><p><strong>æ€è·¯</strong><br>ç‰©å“åˆ†å¤šç»„ï¼Œæ¯ç»„æœ€å¤šé€‰ä¸€ä¸ª â‡’ ç»å…¸åˆ†ç»„èƒŒåŒ…ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> cnt[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-type">int</span> a[N], b[N];<br><span class="hljs-type">int</span> vis[N][N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> m, n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;m, &amp;n);<br>    <span class="hljs-type">int</span> ans;<br>    <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;a[i], &amp;b[i], &amp;ans);<br>        ++cnt[ans];<br>        vis[ans][cnt[ans]] = i;<br>        maxn = <span class="hljs-built_in">max</span>(maxn, ans);<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= maxn; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = m; j &gt;= <span class="hljs-number">0</span>; j--)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= cnt[i]; k++)<br>            &#123;<br>                <span class="hljs-keyword">if</span> (j &gt;= a[vis[i][k]])<br>                &#123;<br>                    dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - a[vis[i][k]]] + b[vis[i][k]]);<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dp[m]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="5-å¸¦é™„ä»¶çš„-01-èƒŒåŒ…-Â·-æ´›è°·-P1064-NOIP2006-æé«˜ç»„-é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ">5 å¸¦é™„ä»¶çš„ 01 èƒŒåŒ… Â· æ´›è°· P1064 [NOIP2006 æé«˜ç»„] é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ</h2><p><strong>æ€è·¯</strong><br>æ¯ä¸ªä¸»ä»¶æœ€å¤šå¸¦ 2 ä¸ªé™„ä»¶ï¼Œå†³ç­–ä» 2 ç§å˜æˆ 5 ç§ï¼š<br>ä¸é€‰ã€åªé€‰ä¸»ä»¶ã€ä¸»ä»¶ + é™„ä»¶1ã€ä¸»ä»¶ + é™„ä»¶2ã€ä¸»ä»¶ + å…¨éƒ¨é™„ä»¶ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">4e4</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> dpmainv[N], dpmainw[N];<br><span class="hljs-type">int</span> dpannexv[N][<span class="hljs-number">3</span>], dpannexw[N][<span class="hljs-number">3</span>];<br><span class="hljs-type">int</span> cnt[N];<br><span class="hljs-type">int</span> dp[N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n, m;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);<br>    <span class="hljs-type">int</span> a, b, q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;a, &amp;b, &amp;q);<br>        <span class="hljs-keyword">if</span> (q == <span class="hljs-number">0</span>)<br>        &#123;<br>            dpmainv[i] = a;<br>            dpmainw[i] = a * b;<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            cnt[q]++;<br>            dpannexv[q][cnt[q]] = a;<br>            dpannexw[q][cnt[q]] = a * b;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= m; i++)<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n; j &gt;= dpmainv[i] &amp;&amp; dpmainv[i] &gt; <span class="hljs-number">0</span>; j--)<br>        &#123;<br>            dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - dpmainv[i]] + dpmainw[i]);<br>            <span class="hljs-keyword">if</span> (j &gt;= dpmainv[i] + dpannexv[i][<span class="hljs-number">1</span>])<br>            &#123;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - dpmainv[i] - dpannexv[i][<span class="hljs-number">1</span>]] + dpmainw[i] + dpannexw[i][<span class="hljs-number">1</span>]);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (j &gt;= dpmainv[i] + dpannexv[i][<span class="hljs-number">2</span>])<br>            &#123;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - dpmainv[i] - dpannexv[i][<span class="hljs-number">2</span>]] + dpmainw[i] + dpannexw[i][<span class="hljs-number">2</span>]);<br>            &#125;<br>            <span class="hljs-keyword">if</span> (j &gt;= dpmainv[i] + dpannexv[i][<span class="hljs-number">1</span>] + dpannexv[i][<span class="hljs-number">2</span>])<br>            &#123;<br>                dp[j] = <span class="hljs-built_in">max</span>(dp[j], dp[j - dpmainv[i] - dpannexv[i][<span class="hljs-number">1</span>] - dpannexv[i][<span class="hljs-number">2</span>]] + dpmainw[i] + dpannexw[i][<span class="hljs-number">1</span>] + dpannexw[i][<span class="hljs-number">2</span>]);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dp[n]);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="6-æ ‘å½¢-DP-Â·-æ´›è°·-P1352-æ²¡æœ‰ä¸Šå¸çš„èˆä¼š">6 æ ‘å½¢ DP Â· æ´›è°· P1352 æ²¡æœ‰ä¸Šå¸çš„èˆä¼š</h2><p><strong>æ€è·¯</strong><br>æ ‘ä¸Šåš 01 èƒŒåŒ…ï¼š</p><ul><li><code>dp[u][0]</code> ä¸å‚åŠ ï¼Œå„¿å­å¯é€‰å¯ä¸é€‰</li><li><code>dp[u][1]</code> å‚åŠ ï¼Œå„¿å­ä¸èƒ½å‚åŠ </li></ul><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">6e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> dp[N][<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> vis[N];<br>vector&lt;<span class="hljs-type">int</span>&gt; v[N];<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-type">int</span> ans)</span></span><br><span class="hljs-function"></span>&#123;<br>    dp[ans][<span class="hljs-number">1</span>] = a[ans];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; v[ans].<span class="hljs-built_in">size</span>(); i++)<br>    &#123;<br>        <span class="hljs-type">int</span> cnt = v[ans][i];<br>        <span class="hljs-built_in">dfs</span>(cnt);                                  <span class="hljs-comment">//å¾€ä¸‹éå†</span><br>        dp[ans][<span class="hljs-number">0</span>] += <span class="hljs-built_in">max</span>(dp[cnt][<span class="hljs-number">0</span>], dp[cnt][<span class="hljs-number">1</span>]); <span class="hljs-comment">//ä»–çš„ä¸‹å±å‚åŠ è¿˜æ˜¯ä¸å‚åŠ </span><br>        dp[ans][<span class="hljs-number">1</span>] += dp[cnt][<span class="hljs-number">0</span>];                  <span class="hljs-comment">//æ­¤æ—¶ä¸‹å±ä¸èƒ½å‚åŠ </span><br>    &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>    &#125;<br>    <span class="hljs-type">int</span> p, q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n - <span class="hljs-number">1</span>; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d&quot;</span>, &amp;p, &amp;q);<br>        v[q].<span class="hljs-built_in">push_back</span>(p);<br>        vis[p] = <span class="hljs-number">1</span>; <span class="hljs-comment">//æŠŠèŒå‘˜æ ‡è®°ä¸Š</span><br>    &#125;<br>    <span class="hljs-type">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (vis[i] == <span class="hljs-number">0</span>) <span class="hljs-comment">//æ‰¾æœ€é«˜èŒä½ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„æ ¹</span><br>        &#123;<br>            ans = i;<br>            <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(ans);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, <span class="hljs-built_in">max</span>(dp[ans][<span class="hljs-number">0</span>], dp[ans][<span class="hljs-number">1</span>]));<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="7-åŒºé—´-DP-Â·-èƒ½é‡é¡¹é“¾">7 åŒºé—´ DP Â· èƒ½é‡é¡¹é“¾</h2><p><strong>æ€è·¯</strong><br>ç¯å½¢åˆå¹¶çŸ³å­æ¨¡æ¿ï¼šæšä¸¾é•¿åº¦ â†’ æšä¸¾å·¦ç«¯ç‚¹ â†’ æšä¸¾æ–­ç‚¹ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdio&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstring&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;math.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;algorithm&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">2e2</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> a[N];<br><span class="hljs-type">int</span> dp[N][N];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> n;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        a[i + n] = a[i];<br>    &#125;<br>    <span class="hljs-comment">// 2 3 5 10 2 3 5 10</span><br>    <span class="hljs-comment">//è¿˜æ˜¯ç¯å½¢çŸ³å­é—®é¢˜</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> len = <span class="hljs-number">3</span>; len &lt;= n + <span class="hljs-number">1</span>; len++) <span class="hljs-comment">//æœ€å°‘è¦ä¸‰ä¸ªå€¼æ‰èƒ½èšåˆä¸¤ä¸ªç å­ï¼Œä½†æœ€åä¸€ä¸ªå€¼æœ€åè¿˜ä¼šç”¨åˆ°</span><br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> l = <span class="hljs-number">1</span>; l + len - <span class="hljs-number">1</span> &lt;= <span class="hljs-number">2</span> * n; l++)<br>        &#123;<br>            <span class="hljs-type">int</span> r = l + len - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = l + <span class="hljs-number">1</span>; k &lt; r; k++) <span class="hljs-comment">//ç”±äºæ¯é¢—ç å­åˆ†é¦–å°¾ï¼Œæ‰€ä»¥kæœ€å°ä¹Ÿå¾—æ˜¯l+1</span><br>            &#123;<br>                dp[l][r] = <span class="hljs-built_in">max</span>(dp[l][r], dp[l][k] + dp[k][r] + a[l] * a[k] * a[r]); <span class="hljs-comment">//ç”±äºkä½ç½®è¿™ä¸ªå…ƒç´ ä¼šé‡å¤ç”¨åˆ°ï¼Œæ‰€ä»¥ä¸ç”¨åŠ ä¸€ï¼ï¼ï¼</span><br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-type">int</span> maxn = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>    &#123;<br>        maxn = <span class="hljs-built_in">max</span>(maxn, dp[i][n + i]);<br>        <span class="hljs-comment">// printf(&quot;%d\n&quot;, dp[i][i + n]);</span><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, maxn);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="8-ç¬¬-k-ä¼˜è§£-Â·-HDU-2639">8 ç¬¬ k ä¼˜è§£ Â· HDU 2639</h2><p><strong>æ€è·¯</strong><br>åœ¨ 01 èƒŒåŒ…åŸºç¡€ä¸Šå¤šå¼€ä¸€ç»´ <code>dp[j][k]</code> è®°å½•ä½“ç§¯ä¸º j æ—¶çš„å‰ k å¤§å€¼ã€‚</p><p><strong>æ ¸å¿ƒæŠ€å·§</strong><br>æ¯æ¬¡ç”¨å½’å¹¶æ’åºæ€æƒ³æŠŠä¸¤æ¡é“¾ï¼ˆé€‰/ä¸é€‰ï¼‰çš„å‰ k å¤§åˆå¹¶ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> N = <span class="hljs-number">1e3</span> + <span class="hljs-number">10</span>;<br><span class="hljs-type">int</span> dp[N][N];<br><span class="hljs-type">int</span> a[<span class="hljs-number">108</span>], b[<span class="hljs-number">108</span>];<br><span class="hljs-type">int</span> c[<span class="hljs-number">108</span>], d[<span class="hljs-number">108</span>];<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> t;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;t);<br>    <span class="hljs-keyword">while</span> (t--)<br>    &#123;<br>        <span class="hljs-built_in">memset</span>(dp, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(dp));<br>        <span class="hljs-built_in">memset</span>(c, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(c));<br>        <span class="hljs-built_in">memset</span>(d, <span class="hljs-number">0</span>, <span class="hljs-built_in">sizeof</span>(d));<br>        <span class="hljs-type">int</span> n, v, p;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;v, &amp;p);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;a[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;b[i]);<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = v; j &gt;= b[i]; j--)<br>            &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> k = <span class="hljs-number">1</span>; k &lt;= p; k++)<br>                &#123;<br>                    c[k] = dp[j][k]; <span class="hljs-comment">//ä½“ç§¯ä¸ºjæ—¶çš„ç¬¬kå¤§ä»·å€¼</span><br>                    d[k] = dp[j - b[i]][k] + a[i];<br>                &#125;<br>                <span class="hljs-type">int</span> q = <span class="hljs-number">1</span>, l = <span class="hljs-number">1</span>, r = <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">while</span> (q &lt;= p &amp;&amp; (l &lt;= p || r &lt;= p))<br>                &#123;<br>                    <span class="hljs-keyword">if</span> (c[l] &gt;= d[r]) <span class="hljs-comment">//æ¯”è¾ƒä¸¤ä¸ªæ•°çš„å¤§å°ï¼Œè°å¤§å°±ç”¨è°èµ‹å€¼</span><br>                    &#123;<br>                        dp[j][q] = c[l++];<br>                    &#125;<br>                    <span class="hljs-keyword">else</span><br>                    &#123;<br>                        dp[j][q] = d[r++];<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (dp[j][q] != dp[j][q - <span class="hljs-number">1</span>]) <span class="hljs-comment">//è¿™é‡Œè¦å»ä¸€ä¸‹é‡</span><br>                    &#123;<br>                        q++;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, dp[v][p]);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="9-çº¿æ®µæ ‘-æœç´¢-Â·-HDU-5323">9 çº¿æ®µæ ‘/æœç´¢ Â· HDU 5323</h2><p><strong>æ€è·¯</strong><br>æ ¹æ®çˆ¶å­åŒºé—´å…³ç³»åš DFSï¼Œå‰ªæï¼šå³ç«¯ç‚¹å¤§äºå½“å‰ç­”æ¡ˆæˆ–å·¦ç«¯ç‚¹è¶Šç•Œæ—¶è¿”å›ã€‚</p><p><strong>ä»£ç </strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;bits/stdc++.h&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><span class="hljs-keyword">typedef</span> <span class="hljs-type">long</span> <span class="hljs-type">long</span> ll;<br>ll ans;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(ll l, ll r)</span> <span class="hljs-comment">//å»ºç«‹å·¦åŒºé—´å’Œå³åŒºé—´é€’å½’æœç´¢</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (l == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (r != <span class="hljs-number">0</span>)<br>        &#123;<br>            ans = <span class="hljs-built_in">min</span>(ans, r);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (r &gt;= ans) <span class="hljs-comment">//å³è¾¹ç•Œ</span><br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (l - <span class="hljs-number">1</span> - (r - l) &lt; <span class="hljs-number">0</span>) <span class="hljs-comment">//å·¦è¾¹ç•Œ</span><br>    &#123;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br>    <span class="hljs-built_in">dfs</span>(l - <span class="hljs-number">1</span> - (r - l), r); <span class="hljs-comment">//å¥‡æ•°åŒºé—´</span><br>    <span class="hljs-built_in">dfs</span>(l, r + <span class="hljs-number">1</span> + r - l);<br>    <span class="hljs-built_in">dfs</span>(l - <span class="hljs-number">1</span> - (r - l) - <span class="hljs-number">1</span>, r); <span class="hljs-comment">//å¶æ•°åŒºé—´</span><br>    <span class="hljs-built_in">dfs</span>(l, r + <span class="hljs-number">1</span> + r - l - <span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    ll l, r;<br>    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%lld%lld&quot;</span>, &amp;l, &amp;r) != EOF)<br>    &#123;<br>        ans = <span class="hljs-number">0x3f3f3f3f</span>;<br>        <span class="hljs-built_in">dfs</span>(l, r);<br>        <span class="hljs-keyword">if</span> (l == <span class="hljs-number">0</span> &amp;&amp; r == <span class="hljs-number">0</span>)<br>        &#123;<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;0\n&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            <span class="hljs-keyword">if</span> (ans == <span class="hljs-number">0x3f3f3f3f</span>)<br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-1\n&quot;</span>);<br>            &#125;<br>            <span class="hljs-keyword">else</span><br>            &#123;<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lld\n&quot;</span>, ans);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æŠŠæŸå‘¨åšè¿‡çš„é¢˜ç¨å¾®æ•´ç†äº†ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯DPï¼Œæ–¹ä¾¿éšæ—¶å¤ä¹ ï¼Œä¹Ÿæ–¹ä¾¿åäººè¸©å‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;</summary>
    
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="https://www.xwybq.top/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="åŠ¨æ€è§„åˆ’" scheme="https://www.xwybq.top/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"/>
    
    <category term="èƒŒåŒ…" scheme="https://www.xwybq.top/tags/%E8%83%8C%E5%8C%85/"/>
    
    <category term="çº¿æ®µæ ‘" scheme="https://www.xwybq.top/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/"/>
    
    <category term="æœç´¢" scheme="https://www.xwybq.top/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
</feed>
